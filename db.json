{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/yilia/source/main.0cf68a.css","path":"main.0cf68a.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/slider.e37972.js","path":"slider.e37972.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/style-reset.css","path":"style-reset.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/main.0cf68a.js","path":"main.0cf68a.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/mobile.992cbe.js","path":"mobile.992cbe.js","modified":1,"renderable":1},{"_id":"source/assets/img/avatar.jpg","path":"assets/img/avatar.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/favicon.ico","path":"assets/img/favicon.ico","modified":1,"renderable":0},{"_id":"source/assets/img/alipay.jpg","path":"assets/img/alipay.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/unwebkit-multi.jpg","path":"assets/img/unwebkit-multi.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/webkit-multi.jpg","path":"assets/img/webkit-multi.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/webkit-single.jpg","path":"assets/img/webkit-single.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/wechat.jpeg","path":"assets/img/wechat.jpeg","modified":1,"renderable":0},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","path":"fonts/default-skin.b257fa.svg","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","path":"fonts/iconfont.45d7ee.svg","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","path":"fonts/tooltip.4004ff.svg","modified":1,"renderable":1},{"_id":"themes/yilia/source/img/default-skin.png","path":"img/default-skin.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","path":"fonts/iconfont.16acc2.ttf","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","path":"fonts/iconfont.8c627f.woff","modified":1,"renderable":1},{"_id":"themes/yilia/source/img/preloader.gif","path":"img/preloader.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","path":"fonts/iconfont.b322fa.eot","modified":1,"renderable":1},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":1,"renderable":1},{"_id":"source/assets/img/wxpay.jpg","path":"assets/img/wxpay.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/prepare/demo1.jpg","path":"assets/img/prepare/demo1.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/script-render.png","path":"assets/img/script-render.png","modified":1,"renderable":0},{"_id":"source/assets/img/mobile-effect-snap.jpeg","path":"assets/img/mobile-effect-snap.jpeg","modified":1,"renderable":0},{"_id":"source/assets/img/spy-debugger.jpg","path":"assets/img/spy-debugger.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/prepare/demo2.jpg","path":"assets/img/prepare/demo2.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/prepare/demo3.jpg","path":"assets/img/prepare/demo3.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/prepare/demo4.jpg","path":"assets/img/prepare/demo4.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/prepare/demo5.jpg","path":"assets/img/prepare/demo5.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/prepare/demo6.jpg","path":"assets/img/prepare/demo6.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/prepare/demo7.jpg","path":"assets/img/prepare/demo7.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/prepare/demo8.jpg","path":"assets/img/prepare/demo8.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/prepare/demo9.jpg","path":"assets/img/prepare/demo9.jpg","modified":1,"renderable":0}],"Cache":[{"_id":"themes/yilia/.babelrc","hash":"b1b76475ac17dc9e2fa50af96c9e31eea2d0f2b4","modified":1558088373145},{"_id":"themes/yilia/.editorconfig","hash":"da6d022b8f4d9c961e2f8f80677e92af8de0db4d","modified":1558088373148},{"_id":"themes/yilia/.eslintignore","hash":"df0a50b13cc00acb749226fee3cee6e0351fb1d9","modified":1558088373150},{"_id":"themes/yilia/.eslintrc.js","hash":"5696ae049de010ed3786768b0c359f14c05b5ec6","modified":1558088373153},{"_id":"source/.DS_Store","hash":"9b3e8de54e30dc9ea110df99aa4b38f391665ecc","modified":1558337450931},{"_id":"themes/yilia/.gitattributes","hash":"e0f24dceeb1e6878a1dd9b01a2b9df1bc037a867","modified":1558088373159},{"_id":"themes/yilia/.gitignore","hash":"9c4b7d27a1e3e5efa0c8ed143a032a85d586b03b","modified":1558088373162},{"_id":"themes/yilia/README.md","hash":"1bf755806af9d8874bd22e1abbdaaa24328ef4dc","modified":1558088373164},{"_id":"themes/yilia/_config.yml","hash":"dbaf96f45837b8624a770c345d85ca844e77a77a","modified":1598877917468},{"_id":"themes/yilia/package.json","hash":"367cb9579d35968a942c243ab248a5f5ebfaf462","modified":1558088373460},{"_id":"themes/yilia/webpack.config.js","hash":"05ba46a4ae744272f5312e684928910dccad3755","modified":1558088373957},{"_id":"source/_posts/brief-info.md","hash":"878db5b5379427f9d14a878649cfa887aba3542d","modified":1564392784106},{"_id":"source/_posts/abstract-and-strict-equality.md","hash":"55c5d06f1c6b764de6f485eb182e55edb19e42fa","modified":1597321847998},{"_id":"source/_posts/css-border-animation.md","hash":"989e02d0f6731462660d19e57a347ef5dd456109","modified":1611038095787},{"_id":"source/_posts/css-custom-shape.md","hash":"d7803f5f39f55b4e57afe4732789776400a42aee","modified":1611038134990},{"_id":"source/_posts/data-type-transfer.md","hash":"18ebf90043b7152a51cb964651bcd581eb15de15","modified":1588238960846},{"_id":"source/_posts/defineproperty-proxy.md","hash":"06741f83158a1bf27c35e1c1af0f0425d9d1d246","modified":1598944090653},{"_id":"source/_posts/forEach-interrupt.md","hash":"8a23236b1beb92c97ad8dc0a9707f895c1dd9571","modified":1558518016481},{"_id":"source/_posts/image-lazyload.md","hash":"4b79c7ab35ec873c67ee8ad070d11e44a92ee386","modified":1597322226718},{"_id":"source/_posts/multiple-diary.md","hash":"417b9e0070e26ceafb2845d79f35d627b8c17b35","modified":1617948182267},{"_id":"source/_posts/multiple-diary2.md","hash":"81a45442607b97252e29300f46d95ba8fff7ab73","modified":1617948189991},{"_id":"source/_posts/multiple-diary3.md","hash":"635ba868c6a2eb5f984d07137ec515365f6d4c9f","modified":1617948361154},{"_id":"source/_posts/multiple-diary4.md","hash":"9600c59bf6a3b98f09b29fbe20ba812e3c5cccce","modified":1618133531487},{"_id":"source/_posts/preload-prefetch-async-defer.md","hash":"ee639dc59992e1c90cb9f6b9f5a9a9b3b578ee2c","modified":1599643580782},{"_id":"source/_posts/prepare.md","hash":"73a40cfa611684e822eb4ff009a4997ba95bcbde","modified":1619146601453},{"_id":"source/_posts/spy-debugger.md","hash":"76ea3f9647f99b8621853ff0a6ee65ed5eb3cf72","modified":1577950701656},{"_id":"source/_posts/text-overflow-ellipsis.md","hash":"038022f50dea6c2f48a682bc8c74721dcb3f5358","modified":1575272044083},{"_id":"source/_posts/this.md","hash":"b25ab38156e2f7e11a164caff0df890d1b0c1bf1","modified":1558504005447},{"_id":"source/_posts/void-0.md","hash":"2c9f1a201fb14d8fe758051a717c3e3e67159dc5","modified":1558593882351},{"_id":"source/_posts/vue-custom-hooks.md","hash":"a63205ecb9f3c2de5a7fff7c5ec89a0efb174dbf","modified":1598411250174},{"_id":"source/_posts/web-worker.md","hash":"b8e809f0bd86a0f1d2aad69dad772ba7ca0bc369","modified":1597311183049},{"_id":"source/_posts/webpack-study.md","hash":"f090a6c8da26d22b98bc0640eb5c599ecd4fae14","modified":1575271247096},{"_id":"source/_posts/wxwork-link-unRirect.md","hash":"39cebeea68453b645d3a6d4b836d221be92e962e","modified":1558422208581},{"_id":"source/assets/.DS_Store","hash":"27de3d13c29f60ab6e6ce48d0bf1c874516befa0","modified":1563182109822},{"_id":"themes/yilia/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1558088373107},{"_id":"themes/yilia/.git/config","hash":"256e47c5a4386e6881318e44d2a716fdc3197863","modified":1558088373134},{"_id":"themes/yilia/.git/index","hash":"70a1d98b5f3763f4bd8d1d277c0404aebce3fc7a","modified":1558088373964},{"_id":"themes/yilia/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1558088095004},{"_id":"themes/yilia/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1558088373192},{"_id":"themes/yilia/languages/fr.yml","hash":"84ab164b37c6abf625473e9a0c18f6f815dd5fd9","modified":1558088373185},{"_id":"themes/yilia/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1558088373178},{"_id":"themes/yilia/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1558088373198},{"_id":"themes/yilia/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1558088373206},{"_id":"themes/yilia/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1558088373212},{"_id":"themes/yilia/languages/zh-tw.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1558088373219},{"_id":"themes/yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1558088373412},{"_id":"themes/yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1558088373419},{"_id":"themes/yilia/layout/layout.ejs","hash":"0a332bdbd3b86c231d690614687f5b97186b85d5","modified":1558088373433},{"_id":"themes/yilia/layout/index.ejs","hash":"a35dc900203f9d8dd863ea4c1722198d6d457ec8","modified":1558088373426},{"_id":"themes/yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1558088373439},{"_id":"themes/yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1558088373446},{"_id":"themes/yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1558088373453},{"_id":"themes/yilia/source/main.0cf68a.css","hash":"dfa65013460935b50ed94b3d3c6b33ea62a1ea0a","modified":1558842182085},{"_id":"themes/yilia/source/slider.e37972.js","hash":"6dec4e220c89049037eebc44404abd8455d22ad7","modified":1558088373946},{"_id":"themes/yilia/source/style-reset.css","hash":"da134702bf350ba79e9092ed0b78d6495edad802","modified":1611037873956},{"_id":"themes/yilia/.git/packed-refs","hash":"76b1aa9479dd3de329935b6d94a6624c5f716d23","modified":1558088373044},{"_id":"themes/yilia/source-src/css.ejs","hash":"94dbdb02ca11849e415d54fb28546a598f2cffb1","modified":1558088373467},{"_id":"themes/yilia/source-src/script.ejs","hash":"c21381e1317db7bb157f1d182b8c088cb7cba411","modified":1558088373829},{"_id":"themes/yilia/layout/_partial/toc.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1558088373397},{"_id":"themes/yilia/source/main.0cf68a.js","hash":"993fadeb5f6d296e9d997a49ee20dc97333ceab7","modified":1558088373908},{"_id":"themes/yilia/source/mobile.992cbe.js","hash":"01b35e71e37aa2849664eb5daf26daede2278398","modified":1558088373926},{"_id":"source/assets/css/gitment.css","hash":"662312ef6b2cc719a0bc5489a293c0f64d97f4dc","modified":1558345029686},{"_id":"source/assets/img/avatar.jpg","hash":"a2e46172f076add79d09605c147407dbba935efd","modified":1558233067869},{"_id":"source/assets/img/favicon.ico","hash":"377ee671f1609d0e366d21603f5376b918cde35f","modified":1558234014107},{"_id":"source/assets/img/alipay.jpg","hash":"d4269a6125d9a8e108175a0e63005f07aa4e7d90","modified":1558232702348},{"_id":"source/assets/img/unwebkit-multi.jpg","hash":"9f8c9232dcbeb520805d080501cd706ade8999f8","modified":1558338070952},{"_id":"source/assets/img/webkit-multi.jpg","hash":"b4562a8505794ac81f7181de2de8a85cf7e04562","modified":1558338071073},{"_id":"source/assets/img/webkit-single.jpg","hash":"0a055bcb5ec09d41d686b96e12a07f50a982a770","modified":1558338071106},{"_id":"source/assets/img/wechat.jpeg","hash":"b3ebbe346ae774063c40e2a278de744a0e4c1bd1","modified":1558234790988},{"_id":"themes/yilia/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1558088095030},{"_id":"themes/yilia/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1558088095008},{"_id":"themes/yilia/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1558088095058},{"_id":"themes/yilia/.git/hooks/fsmonitor-watchman.sample","hash":"f7c0aa40cb0d620ff0bca3efe3521ec79e5d7156","modified":1558088095037},{"_id":"themes/yilia/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1558088095066},{"_id":"themes/yilia/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1558088095073},{"_id":"themes/yilia/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1558088094961},{"_id":"themes/yilia/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1558088095044},{"_id":"themes/yilia/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1558088095016},{"_id":"themes/yilia/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1558088095051},{"_id":"themes/yilia/.git/hooks/pre-commit.sample","hash":"33729ad4ce51acda35094e581e4088f3167a0af8","modified":1558088095023},{"_id":"themes/yilia/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1558088095080},{"_id":"themes/yilia/.git/logs/HEAD","hash":"88df962d3d962d5731ffdc1c5c25982c825af46e","modified":1558088373121},{"_id":"themes/yilia/layout/_partial/after-footer.ejs","hash":"b86b248720ad415ec1b5fee53fb583776c776f83","modified":1558088373226},{"_id":"themes/yilia/layout/_partial/archive-post.ejs","hash":"1f7d4819b7f67602c4a1b99871808d2160b60978","modified":1558088373232},{"_id":"themes/yilia/layout/_partial/article.ejs","hash":"630c6ec866d056657d3d91e34b4c64eb993c0654","modified":1597322201348},{"_id":"themes/yilia/layout/_partial/archive.ejs","hash":"a6e94061ac55b9eb55275f87b608d62f6ea35659","modified":1558088373239},{"_id":"themes/yilia/layout/_partial/aside.ejs","hash":"8edbd7993b9b061611a193533a664e2e85eae748","modified":1558088373253},{"_id":"themes/yilia/layout/_partial/baidu-analytics.ejs","hash":"f0e6e88f9f7eb08b8fe51449a8a3016273507924","modified":1558088373260},{"_id":"themes/yilia/layout/_partial/css.ejs","hash":"236f8a377b2e4e35754319c3029bcd4a4115431d","modified":1558088373267},{"_id":"themes/yilia/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1558088373280},{"_id":"themes/yilia/layout/_partial/footer.ejs","hash":"4ab10944eaf297d326e3c58546ffe4e0be5fe7f0","modified":1558341927391},{"_id":"themes/yilia/layout/_partial/head.ejs","hash":"64f092186b5a744aa1603ce22bb1d44a34446add","modified":1558088373287},{"_id":"themes/yilia/layout/_partial/header.ejs","hash":"6387a93dad7c3d778eb91e3821852fbf6813880c","modified":1558088373294},{"_id":"themes/yilia/layout/_partial/left-col.ejs","hash":"183d7ca4ba8e7c80694ffdc8cf39957092238346","modified":1558088373301},{"_id":"themes/yilia/layout/_partial/mobile-nav.ejs","hash":"7fbbfabf5e29525b24ada14613c21a26789132b4","modified":1558088373314},{"_id":"themes/yilia/layout/_partial/mathjax.ejs","hash":"151a1ef2173ba7b6789d349f0f8da89616cc1394","modified":1558088373307},{"_id":"themes/yilia/layout/_partial/tools.ejs","hash":"c41341b9618e591538e1136a2d1637587c1bbd90","modified":1558088373398},{"_id":"themes/yilia/layout/_partial/viewer.ejs","hash":"e495790b2abe2290875817e42bd505bc611d3e26","modified":1558088373405},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1558088373836},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","hash":"f9304e5714d20861be7d8f4d36687e88e86b9e1b","modified":1558088373850},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1558088373870},{"_id":"themes/yilia/source/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1558088373877},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1558088373843},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1558088373856},{"_id":"themes/yilia/source/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1558088373882},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1558088373863},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1558088373889},{"_id":"themes/yilia/source-src/css/_core.scss","hash":"24f347a2412abbf58318369152504da9538f8d3b","modified":1558088373474},{"_id":"themes/yilia/source-src/css/_function.scss","hash":"93a50dd19a93485712da1f8d0a1672482dd1eabc","modified":1558088373481},{"_id":"themes/yilia/source-src/css/archive.scss","hash":"7d27e22ac898e8fafec14549e940c73cbea1fba8","modified":1558088373488},{"_id":"themes/yilia/source-src/css/article-inner.scss","hash":"d79f2d35a06de83a2a226ca790b7a0a34789c115","modified":1558088373495},{"_id":"themes/yilia/source-src/css/article-main.scss","hash":"3fad68bd74260326f83090b0974dd80707e7bac7","modified":1558088373502},{"_id":"themes/yilia/source-src/css/article-nav.scss","hash":"43e507f2a48504079afd9471353337e23ca47470","modified":1558088373508},{"_id":"themes/yilia/source-src/css/article.scss","hash":"0f6d61af99ed4db87f8589db1feaea7747b55963","modified":1558088373515},{"_id":"themes/yilia/source-src/css/aside.scss","hash":"e9872211deeaec597a4a06883c7b8e650b9cf041","modified":1558841362473},{"_id":"themes/yilia/source-src/css/comment.scss","hash":"cafe3834017a3bf47420f37543725025225a2c89","modified":1558088373528},{"_id":"themes/yilia/source-src/css/fonts.scss","hash":"97b8fba41c914145710b90091f400b845879577f","modified":1558088373569},{"_id":"themes/yilia/source-src/css/footer.scss","hash":"7c995410b25baaf61dfc5e148e22ca60330abcd3","modified":1558088373604},{"_id":"themes/yilia/source-src/css/global.scss","hash":"b4cb4f45a55d4250cd9056f76dab2a3c0dabcec4","modified":1558088373611},{"_id":"themes/yilia/source-src/css/grid.scss","hash":"849a29fcd7150214fcf7b9715fa5dc71d1f9b896","modified":1558088373617},{"_id":"themes/yilia/source-src/css/highlight.scss","hash":"bb96088843349acea502f3379d93152f85e33201","modified":1617935322544},{"_id":"themes/yilia/source-src/css/left.scss","hash":"0d30c0e7cdb831c3881a017006c782f2214ac195","modified":1558088373644},{"_id":"themes/yilia/source-src/css/main.scss","hash":"2f86a014af93583caba78a563d9549826bf28294","modified":1558088373651},{"_id":"themes/yilia/source-src/css/mobile-slider.scss","hash":"f053c609d84df0dd9eee1d11ddf0c19163a456be","modified":1558088373658},{"_id":"themes/yilia/source-src/css/mobile.scss","hash":"ace041d72f95b419f6a5e443191703c2b62007f4","modified":1558088373664},{"_id":"themes/yilia/source-src/css/page.scss","hash":"bf206bb7f7d0967bc8b7fdf01b7ffc99aff9ba88","modified":1558088373671},{"_id":"themes/yilia/source-src/css/reward.scss","hash":"80a4fcf9171d4a33235da96ac8a2b7dcabc45dfb","modified":1558088373678},{"_id":"themes/yilia/source-src/css/scroll.scss","hash":"9c8dfd1c76854ef063494ca76fac6360b391ed6d","modified":1558088373694},{"_id":"themes/yilia/source-src/css/share.scss","hash":"150c6425f6582e7ec78a873256ce49c9930e8805","modified":1558088373702},{"_id":"themes/yilia/source-src/css/social.scss","hash":"724162ccf3977e70a45d189abfaa20b6e2fba87b","modified":1558088373710},{"_id":"themes/yilia/source-src/css/tags-cloud.scss","hash":"c8aa84fca93862d3caae77c552873b8610f33327","modified":1558088373716},{"_id":"themes/yilia/source-src/css/tags.scss","hash":"ac67a3c7097849206244db9b0ba91daaba017ef5","modified":1558088373724},{"_id":"themes/yilia/source-src/css/tools.scss","hash":"1b1aa0908e58cf942b28e3881d07c5573c4129e1","modified":1558088373731},{"_id":"themes/yilia/source-src/css/tooltip.scss","hash":"53d5a554bc2f38e9bb3d26400a47767013c05216","modified":1558088373738},{"_id":"themes/yilia/source-src/js/Q.js","hash":"d011af172064b6c6e0c7051d8f9879373ddac113","modified":1558088373745},{"_id":"themes/yilia/source-src/js/anm.js","hash":"4a4c5d82b09a3063f91a434388e6aa064fd7fd98","modified":1558088373754},{"_id":"themes/yilia/source-src/js/aside.js","hash":"754f771264548a6c5a8ad842908e59ae4e7ed099","modified":1558342318699},{"_id":"themes/yilia/source-src/js/browser.js","hash":"04095b38cfd4316a23f8eb14b1ffaf95f78a4260","modified":1558088373768},{"_id":"themes/yilia/source-src/js/fix.js","hash":"d6782d53c992e712af39c84e804eccaf38830b94","modified":1558088373775},{"_id":"themes/yilia/source-src/js/main.js","hash":"3894e60827c817319e43c9ff3ed045fc3d7336ce","modified":1558088373782},{"_id":"themes/yilia/source-src/js/mobile.js","hash":"4d823b039fd296d24a454eae5a798b93c44560cb","modified":1558088373788},{"_id":"themes/yilia/source-src/js/report.js","hash":"4f1d9a18a936ce40b037f636a39127dd19175b6e","modified":1558088373796},{"_id":"themes/yilia/source-src/js/share.js","hash":"b090f82cf80cba7da764753906d9e2cc2acdf30d","modified":1558088373802},{"_id":"themes/yilia/source-src/js/slider.js","hash":"e846bcc5aac9c68b93f7b8de353df54d8d29f666","modified":1558088373809},{"_id":"themes/yilia/source-src/js/util.js","hash":"8456e9d6b19532742582c99b2fb9d09e146e1c58","modified":1558088373816},{"_id":"themes/yilia/source-src/js/viewer.js","hash":"2577deb6a9fe4f5436360b2ce9afcc7f9a7f0116","modified":1558088373822},{"_id":"source/assets/img/wxpay.jpg","hash":"11ee213bc3cfabc319999741a7d9f992a9666ed0","modified":1558232702786},{"_id":"themes/yilia/layout/_partial/script.ejs","hash":"4cb685f07e89dd5175c2a576e73a1a957aec5637","modified":1558088373391},{"_id":"source/assets/img/prepare/demo1.jpg","hash":"52b3fa6112bfb6285eccef7d75f4f3815a3a364e","modified":1619146398180},{"_id":"source/assets/img/script-render.png","hash":"ad39975f3f0a782be4d890011802b94d6c18ad85","modified":1599643145706},{"_id":"themes/yilia/.git/refs/heads/master","hash":"4ed77da1a2617db0e77c3e3e190a1c79c16dfb9a","modified":1558088373114},{"_id":"themes/yilia/.git/objects/pack/pack-a0f8f35f7e2adb194e5e515ef14d51cc69bcc5df.idx","hash":"eb3e363fbce4dc5ba8788c7184487e4de6eb037e","modified":1558088372982},{"_id":"themes/yilia/layout/_partial/post/category.ejs","hash":"0809a4829aabeb4e911a3ed04ec28db4df7dfe3f","modified":1558088373322},{"_id":"themes/yilia/layout/_partial/post/changyan.ejs","hash":"5f99b55980da64a723a8e14d5a7daba0d6504647","modified":1558088373328},{"_id":"themes/yilia/layout/_partial/post/date.ejs","hash":"ef71c4081e866a494367575c59610e7e6339ece0","modified":1558088373335},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs","hash":"e8399025ed3b980aedb821c92855889f5f12fd5b","modified":1558088373342},{"_id":"themes/yilia/layout/_partial/post/gitment.ejs","hash":"6489cec488defc3ac569fd1505f1cf6759861bdf","modified":1597375506913},{"_id":"themes/yilia/layout/_partial/post/nav.ejs","hash":"1036c8e4e1a7bc935ba173744da735a0d6ed09cd","modified":1558088373356},{"_id":"themes/yilia/layout/_partial/post/share.ejs","hash":"5dccfbe165b23a101f1333cc65ed8efbd197453c","modified":1558088373363},{"_id":"themes/yilia/layout/_partial/post/tag.ejs","hash":"2e783e68755abb852760eb0e627a3fbb50a05a55","modified":1558088373369},{"_id":"themes/yilia/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1558088373376},{"_id":"themes/yilia/layout/_partial/post/wangyiyun.ejs","hash":"ea41c462168d9697caef9485862e9cac718a12c1","modified":1558088373383},{"_id":"themes/yilia/source-src/css/core/_animation.scss","hash":"63a37f26276f9207405afe0f2d65339ce295bbaf","modified":1558088373535},{"_id":"themes/yilia/source-src/css/core/_media-queries.scss","hash":"491ab3378d5c11005ba65c607608bb36b368a9d5","modified":1558088373542},{"_id":"themes/yilia/source-src/css/core/_mixin.scss","hash":"3bba5c77bad5981eac859fe05c9561d580ba7fa9","modified":1558088373549},{"_id":"themes/yilia/source-src/css/core/_reset.scss","hash":"fab871fa93bd542e76a71a56428f2994a4aaf443","modified":1558088373556},{"_id":"themes/yilia/source-src/css/core/_variables.scss","hash":"fb511c505d1309249f21dc577d4ad2bad99a764f","modified":1558088373563},{"_id":"themes/yilia/source-src/css/fonts/iconfont.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1558088373576},{"_id":"themes/yilia/source-src/css/fonts/iconfont.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1558088373597},{"_id":"themes/yilia/source-src/css/img/checkered-pattern.png","hash":"049262fa0886989d750637b264bed34ab51c23c8","modified":1558088373631},{"_id":"themes/yilia/source-src/css/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1558088373634},{"_id":"themes/yilia/source-src/css/img/tooltip.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1558088373637},{"_id":"source/assets/css/gitment.js","hash":"45a90f9cee4d09ad14eb74d3c6bac4e53723c1ca","modified":1597375317057},{"_id":"themes/yilia/source-src/css/fonts/iconfont.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1558088373590},{"_id":"source/assets/img/mobile-effect-snap.jpeg","hash":"a0a9c80bbab38abc18d951bfea16e7df52d31c03","modified":1563181962654},{"_id":"themes/yilia/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1558088373099},{"_id":"themes/yilia/.git/logs/refs/heads/master","hash":"88df962d3d962d5731ffdc1c5c25982c825af46e","modified":1558088373124},{"_id":"themes/yilia/source-src/css/fonts/iconfont.svg","hash":"f9304e5714d20861be7d8f4d36687e88e86b9e1b","modified":1558088373583},{"_id":"themes/yilia/.git/logs/refs/remotes/origin/HEAD","hash":"88df962d3d962d5731ffdc1c5c25982c825af46e","modified":1558088373097},{"_id":"source/assets/img/spy-debugger.jpg","hash":"4b5308c0185da5e218705fa8d96370cdd42d2030","modified":1563181908711},{"_id":"themes/yilia/.git/objects/pack/pack-a0f8f35f7e2adb194e5e515ef14d51cc69bcc5df.pack","hash":"74cfa165490f86f768a90ac8af762c8d651cd0a7","modified":1558088372981}],"Category":[],"Data":[],"Page":[{"_content":".gitment-container {\n  font-family: sans-serif;\n  font-size: 14px;\n  line-height: 1.5;\n  color: #333;\n  word-wrap: break-word;\n}\n\n.gitment-container * {\n  box-sizing: border-box;\n}\n\n.gitment-container *:disabled {\n  cursor: not-allowed;\n}\n\n.gitment-container a,\n.gitment-container a:visited {\n  cursor: pointer;\n  text-decoration: none;\n}\n\n.gitment-container a:hover {\n  text-decoration: underline;\n}\n\n.gitment-container .gitment-hidden {\n  display: none;\n}\n\n.gitment-container .gitment-spinner-icon {\n  fill: #333;\n\n  -webkit-animation: gitment-spin 1s steps(12) infinite;\n  animation: gitment-spin 1s steps(12) infinite;\n}\n\n@-webkit-keyframes gitment-spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg)\n  }\n}\n\n@keyframes gitment-spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg)\n  }\n}\n\n.gitment-root-container {\n  margin: 19px 0;\n}\n\n.gitment-header-container {\n  margin: 19px 0;\n}\n\n.gitment-header-like-btn,\n.gitment-comment-like-btn {\n  cursor: pointer;\n}\n\n.gitment-comment-like-btn {\n  float: right;\n}\n\n.gitment-comment-like-btn.liked {\n  color: #F44336;\n}\n\n.gitment-header-like-btn svg {\n  vertical-align: middle;\n  height: 30px;\n}\n\n.gitment-comment-like-btn svg {\n  vertical-align: middle;\n  height: 20px;\n}\n\n.gitment-header-like-btn.liked svg,\n.gitment-comment-like-btn.liked svg {\n  fill: #F44336;\n}\n\na.gitment-header-issue-link,\na.gitment-header-issue-link:visited {\n  float: right;\n  line-height: 30px;\n  color: #666;\n}\n\na.gitment-header-issue-link:hover {\n  color: #666;\n}\n\n.gitment-comments-loading,\n.gitment-comments-error,\n.gitment-comments-empty {\n  text-align: center;\n  margin: 50px 0;\n}\n\n.gitment-comments-list {\n  list-style: none;\n  padding-left: 0;\n  margin: 0 0 38px;\n}\n\n.gitment-comment,\n.gitment-editor-container {\n  position: relative;\n  min-height: 60px;\n  padding-left: 60px;\n  margin: 19px 0;\n}\n\n.gitment-comment-avatar,\n.gitment-editor-avatar {\n  float: left;\n  margin-left: -60px;\n}\n\n.gitment-comment-avatar,\n.gitment-comment-avatar-img,\n.gitment-comment-avatar,\n.gitment-editor-avatar-img,\n.gitment-editor-avatar svg {\n  width: 44px;\n  height: 44px;\n  border-radius: 3px;\n}\n\n.gitment-editor-avatar .gitment-github-icon {\n  fill: #fff;\n  background-color: #333;\n}\n\n.gitment-comment-main,\n.gitment-editor-main {\n  position: relative;\n  background: #ffffff;\n  border: 1px solid #CFD8DC;\n  border-radius: 0;\n}\n\n.gitment-editor-main::before,\n.gitment-editor-main::after,\n.gitment-comment-main::before,\n.gitment-comment-main::after {\n  position: absolute;\n  top: 11px;\n  left: -16px;\n  display: block;\n  width: 0;\n  height: 0;\n  pointer-events: none;\n  content: \"\";\n  border-color: transparent;\n  border-style: solid solid outset;\n}\n\n.gitment-editor-main::before,\n.gitment-comment-main::before {\n  border-width: 8px;\n  border-right-color: #CFD8DC;\n}\n\n.gitment-editor-main::after,\n.gitment-comment-main::after {\n  margin-top: 1px;\n  margin-left: 2px;\n  border-width: 7px;\n  border-right-color: #fff;\n}\n\n.gitment-comment-header {\n  margin: 12px 15px;\n  color: #666;\n  background-color: #fff;\n  border-radius: 3px;\n}\n\n.gitment-editor-header {\n  padding: 0;\n  margin: 0;\n  border-bottom: 1px solid #CFD8DC;\n}\n\na.gitment-comment-name,\na.gitment-comment-name:visited {\n  font-weight: 600;\n  color: #00bebe;\n}\n\n.gitment-editor-tabs {\n  margin-bottom: -1px;\n  margin-left: -1px;\n}\n\n.gitment-editor-tab {\n  display: inline-block;\n  padding: 11px 12px;\n  font-size: 14px;\n  line-height: 20px;\n  color: #666;\n  text-decoration: none;\n  background-color: transparent;\n  border-width: 0 1px;\n  border-style: solid;\n  border-color: transparent;\n  border-radius: 0;\n\n  white-space: nowrap;\n  cursor: pointer;\n  user-select: none;\n\n  outline: none;\n}\n\n.gitment-editor-tab.gitment-selected {\n  color: #333;\n  background-color: #fff;\n  border-color: #CFD8DC;\n}\n@media screen and (max-width: 400px) {\n    .gitment-editor-tab {\n        display: none;\n    }\n    .gitment-editor-tab.gitment-selected {\n        display: block;\n    }\n}\n\n.gitment-editor-login {\n  float: right;\n  margin-top: -30px;\n  margin-right: 15px;\n}\n\na.gitment-footer-project-link,\na.gitment-footer-project-link:visited,\na.gitment-editor-login-link,\na.gitment-editor-login-link:visited {\n  color: #2196F3;\n}\n\na.gitment-editor-logout-link,\na.gitment-editor-logout-link:visited {\n  color: #666;\n}\n\na.gitment-editor-logout-link:hover {\n  color: #2196F3;\n  text-decoration: none;\n}\n\n.gitment-comment-body {\n  position: relative;\n  margin: 12px 15px;\n  overflow: hidden;\n  border-radius: 3px;\n}\n\n.gitment-comment-body-folded {\n  cursor: pointer;\n}\n\n.gitment-comment-body-folded::before {\n  display: block !important;\n  content: \"\";\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  bottom: 50px;\n  pointer-events: none;\n  background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0), rgba(255, 255, 255, .9));\n  background: linear-gradient(180deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, .9));\n}\n\n.gitment-comment-body-folded::after {\n  display: block !important;\n  content: \"Click to Expand\" !important;\n  text-align: center;\n  color: #666;\n  position: absolute;\n  width: 100%;\n  height: 50px;\n  line-height: 50px;\n  left: 0;\n  bottom: 0;\n  pointer-events: none;\n  background: rgba(255, 255, 255, .9);\n}\n\n.gitment-editor-body {\n  margin: 0;\n}\n\n.gitment-comment-body > *:first-child,\n.gitment-editor-preview > *:first-child {\n  margin-top: 0 !important;\n}\n\n.gitment-comment-body > *:last-child,\n.gitment-editor-preview > *:last-child {\n  margin-bottom: 0 !important;\n}\n\n.gitment-editor-body textarea {\n  display: block;\n  width: 100%;\n  min-height: 150px;\n  max-height: 500px;\n  padding: 16px;\n  resize: vertical;\n\n  max-width: 100%;\n  margin: 0;\n  font-size: 14px;\n  line-height: 1.6;\n\n  background-color: #fff;\n\n  color: #333;\n  vertical-align: middle;\n  border: none;\n  border-radius: 0;\n  outline: none;\n  box-shadow: none;\n\n  overflow: visible;\n}\n\n.gitment-editor-body textarea:focus {\n  background-color: #fff;\n}\n\n.gitment-editor-preview {\n  min-height: 150px;\n\n  padding: 16px;\n  background-color: transparent;\n\n  width: 100%;\n  font-size: 14px;\n\n  line-height: 1.5;\n  word-wrap: break-word;\n}\n\n.gitment-editor-footer {\n  padding: 0;\n  margin-top: 10px;\n}\n\n.gitment-editor-footer::after {\n  display: table;\n  clear: both;\n  content: \"\";\n}\n\na.gitment-editor-footer-tip {\n  display: inline-block;\n  padding-top: 10px;\n  font-size: 12px;\n  color: #666;\n}\n\na.gitment-editor-footer-tip:hover {\n  color: #2196F3;\n  text-decoration: none;\n}\n\n.gitment-comments-pagination {\n  list-style: none;\n  text-align: right;\n  border-radius: 0;\n  margin: -19px 0 19px 0;\n}\n\n.gitment-comments-page-item {\n  display: inline-block;\n  cursor: pointer;\n  border: 1px solid #CFD8DC;\n  margin-left: -1px;\n  padding: .25rem .5rem;\n}\n\n.gitment-comments-page-item:hover {\n  background-color: #f5f5f5;\n}\n\n.gitment-comments-page-item.gitment-selected {\n  background-color: #f5f5f5;\n}\n\n.gitment-editor-submit,\n.gitment-comments-init-btn {\n  color: #fff;\n  background-color: #00BCD4;\n\n  position: relative;\n  display: inline-block;\n  padding: 7px 13px;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 20px;\n  white-space: nowrap;\n  vertical-align: middle;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  background-size: 110% 110%;\n  border: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n\n.gitment-editor-submit:hover,\n.gitment-comments-init-btn:hover {\n  background-color: #00ACC1;\n}\n\n.gitment-comments-init-btn:disabled,\n.gitment-editor-submit:disabled {\n  color: rgba(255,255,255,0.75);\n  background-color: #4DD0E1;\n  box-shadow: none;\n}\n\n.gitment-editor-submit {\n  float: right;\n}\n\n.gitment-footer-container {\n  margin-top: 30px;\n  margin-bottom: 20px;\n  text-align: right;\n  font-size: 12px;\n}\n\n/*\n * Markdown CSS\n * Copied from https://github.com/sindresorhus/github-markdown-css\n */\n.gitment-markdown {\n  -ms-text-size-adjust: 100%;\n  -webkit-text-size-adjust: 100%;\n  line-height: 1.5;\n  color: #333;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  font-size: 16px;\n  line-height: 1.5;\n  word-wrap: break-word;\n}\n\n.gitment-markdown .pl-c {\n  color: #969896;\n}\n\n.gitment-markdown .pl-c1,\n.gitment-markdown .pl-s .pl-v {\n  color: #0086b3;\n}\n\n.gitment-markdown .pl-e,\n.gitment-markdown .pl-en {\n  color: #795da3;\n}\n\n.gitment-markdown .pl-smi,\n.gitment-markdown .pl-s .pl-s1 {\n  color: #333;\n}\n\n.gitment-markdown .pl-ent {\n  color: #63a35c;\n}\n\n.gitment-markdown .pl-k {\n  color: #a71d5d;\n}\n\n.gitment-markdown .pl-s,\n.gitment-markdown .pl-pds,\n.gitment-markdown .pl-s .pl-pse .pl-s1,\n.gitment-markdown .pl-sr,\n.gitment-markdown .pl-sr .pl-cce,\n.gitment-markdown .pl-sr .pl-sre,\n.gitment-markdown .pl-sr .pl-sra {\n  color: #183691;\n}\n\n.gitment-markdown .pl-v,\n.gitment-markdown .pl-smw {\n  color: #ed6a43;\n}\n\n.gitment-markdown .pl-bu {\n  color: #b52a1d;\n}\n\n.gitment-markdown .pl-ii {\n  color: #f8f8f8;\n  background-color: #b52a1d;\n}\n\n.gitment-markdown .pl-c2 {\n  color: #f8f8f8;\n  background-color: #b52a1d;\n}\n\n.gitment-markdown .pl-c2::before {\n  content: \"^M\";\n}\n\n.gitment-markdown .pl-sr .pl-cce {\n  font-weight: bold;\n  color: #63a35c;\n}\n\n.gitment-markdown .pl-ml {\n  color: #693a17;\n}\n\n.gitment-markdown .pl-mh,\n.gitment-markdown .pl-mh .pl-en,\n.gitment-markdown .pl-ms {\n  font-weight: bold;\n  color: #1d3e81;\n}\n\n.gitment-markdown .pl-mq {\n  color: #008080;\n}\n\n.gitment-markdown .pl-mi {\n  font-style: italic;\n  color: #333;\n}\n\n.gitment-markdown .pl-mb {\n  font-weight: bold;\n  color: #333;\n}\n\n.gitment-markdown .pl-md {\n  color: #bd2c00;\n  background-color: #ffecec;\n}\n\n.gitment-markdown .pl-mi1 {\n  color: #55a532;\n  background-color: #eaffea;\n}\n\n.gitment-markdown .pl-mc {\n  color: #ef9700;\n  background-color: #ffe3b4;\n}\n\n.gitment-markdown .pl-mi2 {\n  color: #d8d8d8;\n  background-color: #808080;\n}\n\n.gitment-markdown .pl-mdr {\n  font-weight: bold;\n  color: #795da3;\n}\n\n.gitment-markdown .pl-mo {\n  color: #1d3e81;\n}\n\n.gitment-markdown .pl-ba {\n  color: #595e62;\n}\n\n.gitment-markdown .pl-sg {\n  color: #c0c0c0;\n}\n\n.gitment-markdown .pl-corl {\n  text-decoration: underline;\n  color: #183691;\n}\n\n.gitment-markdown .octicon {\n  display: inline-block;\n  vertical-align: text-top;\n  fill: currentColor;\n}\n\n.gitment-markdown a {\n  background-color: transparent;\n  -webkit-text-decoration-skip: objects;\n}\n\n.gitment-markdown a:active,\n.gitment-markdown a:hover {\n  outline-width: 0;\n}\n\n.gitment-markdown strong {\n  font-weight: inherit;\n}\n\n.gitment-markdown strong {\n  font-weight: bolder;\n}\n\n.gitment-markdown h1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n.gitment-markdown img {\n  border-style: none;\n}\n\n.gitment-markdown svg:not(:root) {\n  overflow: hidden;\n}\n\n.gitment-markdown code,\n.gitment-markdown kbd,\n.gitment-markdown pre {\n  font-family: monospace, monospace;\n  font-size: 1em;\n}\n\n.gitment-markdown hr {\n  box-sizing: content-box;\n  height: 0;\n  overflow: visible;\n}\n\n.gitment-markdown input {\n  font: inherit;\n  margin: 0;\n}\n\n.gitment-markdown input {\n  overflow: visible;\n}\n\n.gitment-markdown [type=\"checkbox\"] {\n  box-sizing: border-box;\n  padding: 0;\n}\n\n.gitment-markdown * {\n  box-sizing: border-box;\n}\n\n.gitment-markdown input {\n  font-family: inherit;\n  font-size: inherit;\n  line-height: inherit;\n}\n\n.gitment-markdown a {\n  color: #0366d6;\n  text-decoration: none;\n}\n\n.gitment-markdown a:hover {\n  text-decoration: underline;\n}\n\n.gitment-markdown strong {\n  font-weight: 600;\n}\n\n.gitment-markdown hr {\n  height: 0;\n  margin: 15px 0;\n  overflow: hidden;\n  background: transparent;\n  border: 0;\n  border-bottom: 1px solid #dfe2e5;\n}\n\n.gitment-markdown hr::before {\n  display: table;\n  content: \"\";\n}\n\n.gitment-markdown hr::after {\n  display: table;\n  clear: both;\n  content: \"\";\n}\n\n.gitment-markdown table {\n  border-spacing: 0;\n  border-collapse: collapse;\n}\n\n.gitment-markdown td,\n.gitment-markdown th {\n  padding: 0;\n}\n\n.gitment-markdown h1,\n.gitment-markdown h2,\n.gitment-markdown h3,\n.gitment-markdown h4,\n.gitment-markdown h5,\n.gitment-markdown h6 {\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.gitment-markdown h1 {\n  font-size: 32px;\n  font-weight: 600;\n}\n\n.gitment-markdown h2 {\n  font-size: 24px;\n  font-weight: 600;\n}\n\n.gitment-markdown h3 {\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.gitment-markdown h4 {\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.gitment-markdown h5 {\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.gitment-markdown h6 {\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.gitment-markdown p {\n  margin-top: 0;\n  margin-bottom: 10px;\n}\n\n.gitment-markdown blockquote {\n  margin: 0;\n}\n\n.gitment-markdown ul,\n.gitment-markdown ol {\n  padding-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.gitment-markdown ol ol,\n.gitment-markdown ul ol {\n  list-style-type: lower-roman;\n}\n\n.gitment-markdown ul ul ol,\n.gitment-markdown ul ol ol,\n.gitment-markdown ol ul ol,\n.gitment-markdown ol ol ol {\n  list-style-type: lower-alpha;\n}\n\n.gitment-markdown dd {\n  margin-left: 0;\n}\n\n.gitment-markdown code {\n  font-family: \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n  font-size: 12px;\n}\n\n.gitment-markdown pre {\n  margin-top: 0;\n  margin-bottom: 0;\n  font: 12px \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n}\n\n.gitment-markdown .octicon {\n  vertical-align: text-bottom;\n}\n\n.gitment-markdown .pl-0 {\n  padding-left: 0 !important;\n}\n\n.gitment-markdown .pl-1 {\n  padding-left: 4px !important;\n}\n\n.gitment-markdown .pl-2 {\n  padding-left: 8px !important;\n}\n\n.gitment-markdown .pl-3 {\n  padding-left: 16px !important;\n}\n\n.gitment-markdown .pl-4 {\n  padding-left: 24px !important;\n}\n\n.gitment-markdown .pl-5 {\n  padding-left: 32px !important;\n}\n\n.gitment-markdown .pl-6 {\n  padding-left: 40px !important;\n}\n\n.gitment-markdown::before {\n  display: table;\n  content: \"\";\n}\n\n.gitment-markdown::after {\n  display: table;\n  clear: both;\n  content: \"\";\n}\n\n.gitment-markdown>*:first-child {\n  margin-top: 0 !important;\n}\n\n.gitment-markdown>*:last-child {\n  margin-bottom: 0 !important;\n}\n\n.gitment-markdown a:not([href]) {\n  color: inherit;\n  text-decoration: none;\n}\n\n.gitment-markdown .anchor {\n  float: left;\n  padding-right: 4px;\n  margin-left: -20px;\n  line-height: 1;\n}\n\n.gitment-markdown .anchor:focus {\n  outline: none;\n}\n\n.gitment-markdown p,\n.gitment-markdown blockquote,\n.gitment-markdown ul,\n.gitment-markdown ol,\n.gitment-markdown dl,\n.gitment-markdown table,\n.gitment-markdown pre {\n  margin-top: 0;\n  margin-bottom: 16px;\n}\n\n.gitment-markdown hr {\n  height: 0.25em;\n  padding: 0;\n  margin: 24px 0;\n  background-color: #e1e4e8;\n  border: 0;\n}\n\n.gitment-markdown blockquote {\n  padding: 0 1em;\n  color: #6a737d;\n  border-left: 0.25em solid #dfe2e5;\n}\n\n.gitment-markdown blockquote>:first-child {\n  margin-top: 0;\n}\n\n.gitment-markdown blockquote>:last-child {\n  margin-bottom: 0;\n}\n\n.gitment-markdown kbd {\n  display: inline-block;\n  padding: 3px 5px;\n  font-size: 11px;\n  line-height: 10px;\n  color: #444d56;\n  vertical-align: middle;\n  background-color: #fafbfc;\n  border: solid 1px #c6cbd1;\n  border-bottom-color: #959da5;\n  border-radius: 0;\n  box-shadow: inset 0 -1px 0 #959da5;\n}\n\n.gitment-markdown h1,\n.gitment-markdown h2,\n.gitment-markdown h3,\n.gitment-markdown h4,\n.gitment-markdown h5,\n.gitment-markdown h6 {\n  margin-top: 24px;\n  margin-bottom: 16px;\n  font-weight: 600;\n  line-height: 1.25;\n}\n\n.gitment-markdown h1 .octicon-link,\n.gitment-markdown h2 .octicon-link,\n.gitment-markdown h3 .octicon-link,\n.gitment-markdown h4 .octicon-link,\n.gitment-markdown h5 .octicon-link,\n.gitment-markdown h6 .octicon-link {\n  color: #1b1f23;\n  vertical-align: middle;\n  visibility: hidden;\n}\n\n.gitment-markdown h1:hover .anchor,\n.gitment-markdown h2:hover .anchor,\n.gitment-markdown h3:hover .anchor,\n.gitment-markdown h4:hover .anchor,\n.gitment-markdown h5:hover .anchor,\n.gitment-markdown h6:hover .anchor {\n  text-decoration: none;\n}\n\n.gitment-markdown h1:hover .anchor .octicon-link,\n.gitment-markdown h2:hover .anchor .octicon-link,\n.gitment-markdown h3:hover .anchor .octicon-link,\n.gitment-markdown h4:hover .anchor .octicon-link,\n.gitment-markdown h5:hover .anchor .octicon-link,\n.gitment-markdown h6:hover .anchor .octicon-link {\n  visibility: visible;\n}\n\n.gitment-markdown h1 {\n  padding-bottom: 0.3em;\n  font-size: 2em;\n  border-bottom: 1px solid #eaecef;\n}\n\n.gitment-markdown h2 {\n  padding-bottom: 0.3em;\n  font-size: 1.5em;\n  border-bottom: 1px solid #eaecef;\n}\n\n.gitment-markdown h3 {\n  font-size: 1.25em;\n}\n\n.gitment-markdown h4 {\n  font-size: 1em;\n}\n\n.gitment-markdown h5 {\n  font-size: 0.875em;\n}\n\n.gitment-markdown h6 {\n  font-size: 0.85em;\n  color: #6a737d;\n}\n\n.gitment-markdown ul,\n.gitment-markdown ol {\n  padding-left: 2em;\n}\n\n.gitment-markdown ul ul,\n.gitment-markdown ul ol,\n.gitment-markdown ol ol,\n.gitment-markdown ol ul {\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.gitment-markdown li>p {\n  margin-top: 16px;\n}\n\n.gitment-markdown li+li {\n  margin-top: 0.25em;\n}\n\n.gitment-markdown dl {\n  padding: 0;\n}\n\n.gitment-markdown dl dt {\n  padding: 0;\n  margin-top: 16px;\n  font-size: 1em;\n  font-style: italic;\n  font-weight: 600;\n}\n\n.gitment-markdown dl dd {\n  padding: 0 16px;\n  margin-bottom: 16px;\n}\n\n.gitment-markdown table {\n  display: block;\n  width: 100%;\n  overflow: auto;\n}\n\n.gitment-markdown table th {\n  font-weight: 600;\n}\n\n.gitment-markdown table th,\n.gitment-markdown table td {\n  padding: 6px 13px;\n  border: 1px solid #dfe2e5;\n}\n\n.gitment-markdown table tr {\n  background-color: #fff;\n  border-top: 1px solid #c6cbd1;\n}\n\n.gitment-markdown table tr:nth-child(2n) {\n  background-color: #f5f5f5;\n}\n\n.gitment-markdown img {\n  max-width: 100%;\n  box-sizing: content-box;\n  background-color: #fff;\n}\n\n.gitment-markdown code {\n  padding: 0;\n  padding-top: 0.2em;\n  padding-bottom: 0.2em;\n  margin: 0;\n  font-size: 85%;\n  background-color: rgba(27,31,35,0.05);\n  border-radius: 0;\n}\n\n.gitment-markdown code::before,\n.gitment-markdown code::after {\n  letter-spacing: -0.2em;\n  content: \"\\00a0\";\n}\n\n.gitment-markdown pre {\n  word-wrap: normal;\n}\n\n.gitment-markdown pre>code {\n  padding: 0;\n  margin: 0;\n  font-size: 100%;\n  word-break: normal;\n  white-space: pre;\n  background: transparent;\n  border: 0;\n}\n\n.gitment-markdown .highlight {\n  margin-bottom: 16px;\n}\n\n.gitment-markdown .highlight pre {\n  margin-bottom: 0;\n  word-break: normal;\n}\n\n.gitment-markdown .highlight pre,\n.gitment-markdown pre {\n  padding: 16px;\n  overflow: auto;\n  font-size: 85%;\n  line-height: 1.45;\n  background-color: #f5f5f5;\n  border-radius: 0;\n}\n\n.gitment-markdown pre code {\n  display: inline;\n  max-width: auto;\n  padding: 0;\n  margin: 0;\n  overflow: visible;\n  line-height: inherit;\n  word-wrap: normal;\n  background-color: transparent;\n  border: 0;\n}\n\n.gitment-markdown pre code::before,\n.gitment-markdown pre code::after {\n  content: normal;\n}\n\n.gitment-markdown .full-commit .btn-outline:not(:disabled):hover {\n  color: #005cc5;\n  border-color: #005cc5;\n}\n\n.gitment-markdown kbd {\n  display: inline-block;\n  padding: 3px 5px;\n  font: 11px \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n  line-height: 10px;\n  color: #444d56;\n  vertical-align: middle;\n  background-color: #fcfcfc;\n  border: solid 1px #c6cbd1;\n  border-bottom-color: #959da5;\n  border-radius: 0;\n  box-shadow: inset 0 -1px 0 #959da5;\n}\n\n.gitment-markdown :checked+.radio-label {\n  position: relative;\n  z-index: 1;\n  border-color: #0366d6;\n}\n\n.gitment-markdown .task-list-item {\n  list-style-type: none;\n}\n\n.gitment-markdown .task-list-item+.task-list-item {\n  margin-top: 3px;\n}\n\n.gitment-markdown .task-list-item input {\n  margin: 0 0.2em 0.25em -1.6em;\n  vertical-align: middle;\n}\n\n.gitment-markdown hr {\n  border-bottom-color: #eee;\n}","source":"assets/css/gitment.css","raw":".gitment-container {\n  font-family: sans-serif;\n  font-size: 14px;\n  line-height: 1.5;\n  color: #333;\n  word-wrap: break-word;\n}\n\n.gitment-container * {\n  box-sizing: border-box;\n}\n\n.gitment-container *:disabled {\n  cursor: not-allowed;\n}\n\n.gitment-container a,\n.gitment-container a:visited {\n  cursor: pointer;\n  text-decoration: none;\n}\n\n.gitment-container a:hover {\n  text-decoration: underline;\n}\n\n.gitment-container .gitment-hidden {\n  display: none;\n}\n\n.gitment-container .gitment-spinner-icon {\n  fill: #333;\n\n  -webkit-animation: gitment-spin 1s steps(12) infinite;\n  animation: gitment-spin 1s steps(12) infinite;\n}\n\n@-webkit-keyframes gitment-spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg)\n  }\n}\n\n@keyframes gitment-spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg)\n  }\n}\n\n.gitment-root-container {\n  margin: 19px 0;\n}\n\n.gitment-header-container {\n  margin: 19px 0;\n}\n\n.gitment-header-like-btn,\n.gitment-comment-like-btn {\n  cursor: pointer;\n}\n\n.gitment-comment-like-btn {\n  float: right;\n}\n\n.gitment-comment-like-btn.liked {\n  color: #F44336;\n}\n\n.gitment-header-like-btn svg {\n  vertical-align: middle;\n  height: 30px;\n}\n\n.gitment-comment-like-btn svg {\n  vertical-align: middle;\n  height: 20px;\n}\n\n.gitment-header-like-btn.liked svg,\n.gitment-comment-like-btn.liked svg {\n  fill: #F44336;\n}\n\na.gitment-header-issue-link,\na.gitment-header-issue-link:visited {\n  float: right;\n  line-height: 30px;\n  color: #666;\n}\n\na.gitment-header-issue-link:hover {\n  color: #666;\n}\n\n.gitment-comments-loading,\n.gitment-comments-error,\n.gitment-comments-empty {\n  text-align: center;\n  margin: 50px 0;\n}\n\n.gitment-comments-list {\n  list-style: none;\n  padding-left: 0;\n  margin: 0 0 38px;\n}\n\n.gitment-comment,\n.gitment-editor-container {\n  position: relative;\n  min-height: 60px;\n  padding-left: 60px;\n  margin: 19px 0;\n}\n\n.gitment-comment-avatar,\n.gitment-editor-avatar {\n  float: left;\n  margin-left: -60px;\n}\n\n.gitment-comment-avatar,\n.gitment-comment-avatar-img,\n.gitment-comment-avatar,\n.gitment-editor-avatar-img,\n.gitment-editor-avatar svg {\n  width: 44px;\n  height: 44px;\n  border-radius: 3px;\n}\n\n.gitment-editor-avatar .gitment-github-icon {\n  fill: #fff;\n  background-color: #333;\n}\n\n.gitment-comment-main,\n.gitment-editor-main {\n  position: relative;\n  background: #ffffff;\n  border: 1px solid #CFD8DC;\n  border-radius: 0;\n}\n\n.gitment-editor-main::before,\n.gitment-editor-main::after,\n.gitment-comment-main::before,\n.gitment-comment-main::after {\n  position: absolute;\n  top: 11px;\n  left: -16px;\n  display: block;\n  width: 0;\n  height: 0;\n  pointer-events: none;\n  content: \"\";\n  border-color: transparent;\n  border-style: solid solid outset;\n}\n\n.gitment-editor-main::before,\n.gitment-comment-main::before {\n  border-width: 8px;\n  border-right-color: #CFD8DC;\n}\n\n.gitment-editor-main::after,\n.gitment-comment-main::after {\n  margin-top: 1px;\n  margin-left: 2px;\n  border-width: 7px;\n  border-right-color: #fff;\n}\n\n.gitment-comment-header {\n  margin: 12px 15px;\n  color: #666;\n  background-color: #fff;\n  border-radius: 3px;\n}\n\n.gitment-editor-header {\n  padding: 0;\n  margin: 0;\n  border-bottom: 1px solid #CFD8DC;\n}\n\na.gitment-comment-name,\na.gitment-comment-name:visited {\n  font-weight: 600;\n  color: #00bebe;\n}\n\n.gitment-editor-tabs {\n  margin-bottom: -1px;\n  margin-left: -1px;\n}\n\n.gitment-editor-tab {\n  display: inline-block;\n  padding: 11px 12px;\n  font-size: 14px;\n  line-height: 20px;\n  color: #666;\n  text-decoration: none;\n  background-color: transparent;\n  border-width: 0 1px;\n  border-style: solid;\n  border-color: transparent;\n  border-radius: 0;\n\n  white-space: nowrap;\n  cursor: pointer;\n  user-select: none;\n\n  outline: none;\n}\n\n.gitment-editor-tab.gitment-selected {\n  color: #333;\n  background-color: #fff;\n  border-color: #CFD8DC;\n}\n@media screen and (max-width: 400px) {\n    .gitment-editor-tab {\n        display: none;\n    }\n    .gitment-editor-tab.gitment-selected {\n        display: block;\n    }\n}\n\n.gitment-editor-login {\n  float: right;\n  margin-top: -30px;\n  margin-right: 15px;\n}\n\na.gitment-footer-project-link,\na.gitment-footer-project-link:visited,\na.gitment-editor-login-link,\na.gitment-editor-login-link:visited {\n  color: #2196F3;\n}\n\na.gitment-editor-logout-link,\na.gitment-editor-logout-link:visited {\n  color: #666;\n}\n\na.gitment-editor-logout-link:hover {\n  color: #2196F3;\n  text-decoration: none;\n}\n\n.gitment-comment-body {\n  position: relative;\n  margin: 12px 15px;\n  overflow: hidden;\n  border-radius: 3px;\n}\n\n.gitment-comment-body-folded {\n  cursor: pointer;\n}\n\n.gitment-comment-body-folded::before {\n  display: block !important;\n  content: \"\";\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  bottom: 50px;\n  pointer-events: none;\n  background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0), rgba(255, 255, 255, .9));\n  background: linear-gradient(180deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, .9));\n}\n\n.gitment-comment-body-folded::after {\n  display: block !important;\n  content: \"Click to Expand\" !important;\n  text-align: center;\n  color: #666;\n  position: absolute;\n  width: 100%;\n  height: 50px;\n  line-height: 50px;\n  left: 0;\n  bottom: 0;\n  pointer-events: none;\n  background: rgba(255, 255, 255, .9);\n}\n\n.gitment-editor-body {\n  margin: 0;\n}\n\n.gitment-comment-body > *:first-child,\n.gitment-editor-preview > *:first-child {\n  margin-top: 0 !important;\n}\n\n.gitment-comment-body > *:last-child,\n.gitment-editor-preview > *:last-child {\n  margin-bottom: 0 !important;\n}\n\n.gitment-editor-body textarea {\n  display: block;\n  width: 100%;\n  min-height: 150px;\n  max-height: 500px;\n  padding: 16px;\n  resize: vertical;\n\n  max-width: 100%;\n  margin: 0;\n  font-size: 14px;\n  line-height: 1.6;\n\n  background-color: #fff;\n\n  color: #333;\n  vertical-align: middle;\n  border: none;\n  border-radius: 0;\n  outline: none;\n  box-shadow: none;\n\n  overflow: visible;\n}\n\n.gitment-editor-body textarea:focus {\n  background-color: #fff;\n}\n\n.gitment-editor-preview {\n  min-height: 150px;\n\n  padding: 16px;\n  background-color: transparent;\n\n  width: 100%;\n  font-size: 14px;\n\n  line-height: 1.5;\n  word-wrap: break-word;\n}\n\n.gitment-editor-footer {\n  padding: 0;\n  margin-top: 10px;\n}\n\n.gitment-editor-footer::after {\n  display: table;\n  clear: both;\n  content: \"\";\n}\n\na.gitment-editor-footer-tip {\n  display: inline-block;\n  padding-top: 10px;\n  font-size: 12px;\n  color: #666;\n}\n\na.gitment-editor-footer-tip:hover {\n  color: #2196F3;\n  text-decoration: none;\n}\n\n.gitment-comments-pagination {\n  list-style: none;\n  text-align: right;\n  border-radius: 0;\n  margin: -19px 0 19px 0;\n}\n\n.gitment-comments-page-item {\n  display: inline-block;\n  cursor: pointer;\n  border: 1px solid #CFD8DC;\n  margin-left: -1px;\n  padding: .25rem .5rem;\n}\n\n.gitment-comments-page-item:hover {\n  background-color: #f5f5f5;\n}\n\n.gitment-comments-page-item.gitment-selected {\n  background-color: #f5f5f5;\n}\n\n.gitment-editor-submit,\n.gitment-comments-init-btn {\n  color: #fff;\n  background-color: #00BCD4;\n\n  position: relative;\n  display: inline-block;\n  padding: 7px 13px;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 20px;\n  white-space: nowrap;\n  vertical-align: middle;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  background-size: 110% 110%;\n  border: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n\n.gitment-editor-submit:hover,\n.gitment-comments-init-btn:hover {\n  background-color: #00ACC1;\n}\n\n.gitment-comments-init-btn:disabled,\n.gitment-editor-submit:disabled {\n  color: rgba(255,255,255,0.75);\n  background-color: #4DD0E1;\n  box-shadow: none;\n}\n\n.gitment-editor-submit {\n  float: right;\n}\n\n.gitment-footer-container {\n  margin-top: 30px;\n  margin-bottom: 20px;\n  text-align: right;\n  font-size: 12px;\n}\n\n/*\n * Markdown CSS\n * Copied from https://github.com/sindresorhus/github-markdown-css\n */\n.gitment-markdown {\n  -ms-text-size-adjust: 100%;\n  -webkit-text-size-adjust: 100%;\n  line-height: 1.5;\n  color: #333;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  font-size: 16px;\n  line-height: 1.5;\n  word-wrap: break-word;\n}\n\n.gitment-markdown .pl-c {\n  color: #969896;\n}\n\n.gitment-markdown .pl-c1,\n.gitment-markdown .pl-s .pl-v {\n  color: #0086b3;\n}\n\n.gitment-markdown .pl-e,\n.gitment-markdown .pl-en {\n  color: #795da3;\n}\n\n.gitment-markdown .pl-smi,\n.gitment-markdown .pl-s .pl-s1 {\n  color: #333;\n}\n\n.gitment-markdown .pl-ent {\n  color: #63a35c;\n}\n\n.gitment-markdown .pl-k {\n  color: #a71d5d;\n}\n\n.gitment-markdown .pl-s,\n.gitment-markdown .pl-pds,\n.gitment-markdown .pl-s .pl-pse .pl-s1,\n.gitment-markdown .pl-sr,\n.gitment-markdown .pl-sr .pl-cce,\n.gitment-markdown .pl-sr .pl-sre,\n.gitment-markdown .pl-sr .pl-sra {\n  color: #183691;\n}\n\n.gitment-markdown .pl-v,\n.gitment-markdown .pl-smw {\n  color: #ed6a43;\n}\n\n.gitment-markdown .pl-bu {\n  color: #b52a1d;\n}\n\n.gitment-markdown .pl-ii {\n  color: #f8f8f8;\n  background-color: #b52a1d;\n}\n\n.gitment-markdown .pl-c2 {\n  color: #f8f8f8;\n  background-color: #b52a1d;\n}\n\n.gitment-markdown .pl-c2::before {\n  content: \"^M\";\n}\n\n.gitment-markdown .pl-sr .pl-cce {\n  font-weight: bold;\n  color: #63a35c;\n}\n\n.gitment-markdown .pl-ml {\n  color: #693a17;\n}\n\n.gitment-markdown .pl-mh,\n.gitment-markdown .pl-mh .pl-en,\n.gitment-markdown .pl-ms {\n  font-weight: bold;\n  color: #1d3e81;\n}\n\n.gitment-markdown .pl-mq {\n  color: #008080;\n}\n\n.gitment-markdown .pl-mi {\n  font-style: italic;\n  color: #333;\n}\n\n.gitment-markdown .pl-mb {\n  font-weight: bold;\n  color: #333;\n}\n\n.gitment-markdown .pl-md {\n  color: #bd2c00;\n  background-color: #ffecec;\n}\n\n.gitment-markdown .pl-mi1 {\n  color: #55a532;\n  background-color: #eaffea;\n}\n\n.gitment-markdown .pl-mc {\n  color: #ef9700;\n  background-color: #ffe3b4;\n}\n\n.gitment-markdown .pl-mi2 {\n  color: #d8d8d8;\n  background-color: #808080;\n}\n\n.gitment-markdown .pl-mdr {\n  font-weight: bold;\n  color: #795da3;\n}\n\n.gitment-markdown .pl-mo {\n  color: #1d3e81;\n}\n\n.gitment-markdown .pl-ba {\n  color: #595e62;\n}\n\n.gitment-markdown .pl-sg {\n  color: #c0c0c0;\n}\n\n.gitment-markdown .pl-corl {\n  text-decoration: underline;\n  color: #183691;\n}\n\n.gitment-markdown .octicon {\n  display: inline-block;\n  vertical-align: text-top;\n  fill: currentColor;\n}\n\n.gitment-markdown a {\n  background-color: transparent;\n  -webkit-text-decoration-skip: objects;\n}\n\n.gitment-markdown a:active,\n.gitment-markdown a:hover {\n  outline-width: 0;\n}\n\n.gitment-markdown strong {\n  font-weight: inherit;\n}\n\n.gitment-markdown strong {\n  font-weight: bolder;\n}\n\n.gitment-markdown h1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n.gitment-markdown img {\n  border-style: none;\n}\n\n.gitment-markdown svg:not(:root) {\n  overflow: hidden;\n}\n\n.gitment-markdown code,\n.gitment-markdown kbd,\n.gitment-markdown pre {\n  font-family: monospace, monospace;\n  font-size: 1em;\n}\n\n.gitment-markdown hr {\n  box-sizing: content-box;\n  height: 0;\n  overflow: visible;\n}\n\n.gitment-markdown input {\n  font: inherit;\n  margin: 0;\n}\n\n.gitment-markdown input {\n  overflow: visible;\n}\n\n.gitment-markdown [type=\"checkbox\"] {\n  box-sizing: border-box;\n  padding: 0;\n}\n\n.gitment-markdown * {\n  box-sizing: border-box;\n}\n\n.gitment-markdown input {\n  font-family: inherit;\n  font-size: inherit;\n  line-height: inherit;\n}\n\n.gitment-markdown a {\n  color: #0366d6;\n  text-decoration: none;\n}\n\n.gitment-markdown a:hover {\n  text-decoration: underline;\n}\n\n.gitment-markdown strong {\n  font-weight: 600;\n}\n\n.gitment-markdown hr {\n  height: 0;\n  margin: 15px 0;\n  overflow: hidden;\n  background: transparent;\n  border: 0;\n  border-bottom: 1px solid #dfe2e5;\n}\n\n.gitment-markdown hr::before {\n  display: table;\n  content: \"\";\n}\n\n.gitment-markdown hr::after {\n  display: table;\n  clear: both;\n  content: \"\";\n}\n\n.gitment-markdown table {\n  border-spacing: 0;\n  border-collapse: collapse;\n}\n\n.gitment-markdown td,\n.gitment-markdown th {\n  padding: 0;\n}\n\n.gitment-markdown h1,\n.gitment-markdown h2,\n.gitment-markdown h3,\n.gitment-markdown h4,\n.gitment-markdown h5,\n.gitment-markdown h6 {\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.gitment-markdown h1 {\n  font-size: 32px;\n  font-weight: 600;\n}\n\n.gitment-markdown h2 {\n  font-size: 24px;\n  font-weight: 600;\n}\n\n.gitment-markdown h3 {\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.gitment-markdown h4 {\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.gitment-markdown h5 {\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.gitment-markdown h6 {\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.gitment-markdown p {\n  margin-top: 0;\n  margin-bottom: 10px;\n}\n\n.gitment-markdown blockquote {\n  margin: 0;\n}\n\n.gitment-markdown ul,\n.gitment-markdown ol {\n  padding-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.gitment-markdown ol ol,\n.gitment-markdown ul ol {\n  list-style-type: lower-roman;\n}\n\n.gitment-markdown ul ul ol,\n.gitment-markdown ul ol ol,\n.gitment-markdown ol ul ol,\n.gitment-markdown ol ol ol {\n  list-style-type: lower-alpha;\n}\n\n.gitment-markdown dd {\n  margin-left: 0;\n}\n\n.gitment-markdown code {\n  font-family: \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n  font-size: 12px;\n}\n\n.gitment-markdown pre {\n  margin-top: 0;\n  margin-bottom: 0;\n  font: 12px \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n}\n\n.gitment-markdown .octicon {\n  vertical-align: text-bottom;\n}\n\n.gitment-markdown .pl-0 {\n  padding-left: 0 !important;\n}\n\n.gitment-markdown .pl-1 {\n  padding-left: 4px !important;\n}\n\n.gitment-markdown .pl-2 {\n  padding-left: 8px !important;\n}\n\n.gitment-markdown .pl-3 {\n  padding-left: 16px !important;\n}\n\n.gitment-markdown .pl-4 {\n  padding-left: 24px !important;\n}\n\n.gitment-markdown .pl-5 {\n  padding-left: 32px !important;\n}\n\n.gitment-markdown .pl-6 {\n  padding-left: 40px !important;\n}\n\n.gitment-markdown::before {\n  display: table;\n  content: \"\";\n}\n\n.gitment-markdown::after {\n  display: table;\n  clear: both;\n  content: \"\";\n}\n\n.gitment-markdown>*:first-child {\n  margin-top: 0 !important;\n}\n\n.gitment-markdown>*:last-child {\n  margin-bottom: 0 !important;\n}\n\n.gitment-markdown a:not([href]) {\n  color: inherit;\n  text-decoration: none;\n}\n\n.gitment-markdown .anchor {\n  float: left;\n  padding-right: 4px;\n  margin-left: -20px;\n  line-height: 1;\n}\n\n.gitment-markdown .anchor:focus {\n  outline: none;\n}\n\n.gitment-markdown p,\n.gitment-markdown blockquote,\n.gitment-markdown ul,\n.gitment-markdown ol,\n.gitment-markdown dl,\n.gitment-markdown table,\n.gitment-markdown pre {\n  margin-top: 0;\n  margin-bottom: 16px;\n}\n\n.gitment-markdown hr {\n  height: 0.25em;\n  padding: 0;\n  margin: 24px 0;\n  background-color: #e1e4e8;\n  border: 0;\n}\n\n.gitment-markdown blockquote {\n  padding: 0 1em;\n  color: #6a737d;\n  border-left: 0.25em solid #dfe2e5;\n}\n\n.gitment-markdown blockquote>:first-child {\n  margin-top: 0;\n}\n\n.gitment-markdown blockquote>:last-child {\n  margin-bottom: 0;\n}\n\n.gitment-markdown kbd {\n  display: inline-block;\n  padding: 3px 5px;\n  font-size: 11px;\n  line-height: 10px;\n  color: #444d56;\n  vertical-align: middle;\n  background-color: #fafbfc;\n  border: solid 1px #c6cbd1;\n  border-bottom-color: #959da5;\n  border-radius: 0;\n  box-shadow: inset 0 -1px 0 #959da5;\n}\n\n.gitment-markdown h1,\n.gitment-markdown h2,\n.gitment-markdown h3,\n.gitment-markdown h4,\n.gitment-markdown h5,\n.gitment-markdown h6 {\n  margin-top: 24px;\n  margin-bottom: 16px;\n  font-weight: 600;\n  line-height: 1.25;\n}\n\n.gitment-markdown h1 .octicon-link,\n.gitment-markdown h2 .octicon-link,\n.gitment-markdown h3 .octicon-link,\n.gitment-markdown h4 .octicon-link,\n.gitment-markdown h5 .octicon-link,\n.gitment-markdown h6 .octicon-link {\n  color: #1b1f23;\n  vertical-align: middle;\n  visibility: hidden;\n}\n\n.gitment-markdown h1:hover .anchor,\n.gitment-markdown h2:hover .anchor,\n.gitment-markdown h3:hover .anchor,\n.gitment-markdown h4:hover .anchor,\n.gitment-markdown h5:hover .anchor,\n.gitment-markdown h6:hover .anchor {\n  text-decoration: none;\n}\n\n.gitment-markdown h1:hover .anchor .octicon-link,\n.gitment-markdown h2:hover .anchor .octicon-link,\n.gitment-markdown h3:hover .anchor .octicon-link,\n.gitment-markdown h4:hover .anchor .octicon-link,\n.gitment-markdown h5:hover .anchor .octicon-link,\n.gitment-markdown h6:hover .anchor .octicon-link {\n  visibility: visible;\n}\n\n.gitment-markdown h1 {\n  padding-bottom: 0.3em;\n  font-size: 2em;\n  border-bottom: 1px solid #eaecef;\n}\n\n.gitment-markdown h2 {\n  padding-bottom: 0.3em;\n  font-size: 1.5em;\n  border-bottom: 1px solid #eaecef;\n}\n\n.gitment-markdown h3 {\n  font-size: 1.25em;\n}\n\n.gitment-markdown h4 {\n  font-size: 1em;\n}\n\n.gitment-markdown h5 {\n  font-size: 0.875em;\n}\n\n.gitment-markdown h6 {\n  font-size: 0.85em;\n  color: #6a737d;\n}\n\n.gitment-markdown ul,\n.gitment-markdown ol {\n  padding-left: 2em;\n}\n\n.gitment-markdown ul ul,\n.gitment-markdown ul ol,\n.gitment-markdown ol ol,\n.gitment-markdown ol ul {\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.gitment-markdown li>p {\n  margin-top: 16px;\n}\n\n.gitment-markdown li+li {\n  margin-top: 0.25em;\n}\n\n.gitment-markdown dl {\n  padding: 0;\n}\n\n.gitment-markdown dl dt {\n  padding: 0;\n  margin-top: 16px;\n  font-size: 1em;\n  font-style: italic;\n  font-weight: 600;\n}\n\n.gitment-markdown dl dd {\n  padding: 0 16px;\n  margin-bottom: 16px;\n}\n\n.gitment-markdown table {\n  display: block;\n  width: 100%;\n  overflow: auto;\n}\n\n.gitment-markdown table th {\n  font-weight: 600;\n}\n\n.gitment-markdown table th,\n.gitment-markdown table td {\n  padding: 6px 13px;\n  border: 1px solid #dfe2e5;\n}\n\n.gitment-markdown table tr {\n  background-color: #fff;\n  border-top: 1px solid #c6cbd1;\n}\n\n.gitment-markdown table tr:nth-child(2n) {\n  background-color: #f5f5f5;\n}\n\n.gitment-markdown img {\n  max-width: 100%;\n  box-sizing: content-box;\n  background-color: #fff;\n}\n\n.gitment-markdown code {\n  padding: 0;\n  padding-top: 0.2em;\n  padding-bottom: 0.2em;\n  margin: 0;\n  font-size: 85%;\n  background-color: rgba(27,31,35,0.05);\n  border-radius: 0;\n}\n\n.gitment-markdown code::before,\n.gitment-markdown code::after {\n  letter-spacing: -0.2em;\n  content: \"\\00a0\";\n}\n\n.gitment-markdown pre {\n  word-wrap: normal;\n}\n\n.gitment-markdown pre>code {\n  padding: 0;\n  margin: 0;\n  font-size: 100%;\n  word-break: normal;\n  white-space: pre;\n  background: transparent;\n  border: 0;\n}\n\n.gitment-markdown .highlight {\n  margin-bottom: 16px;\n}\n\n.gitment-markdown .highlight pre {\n  margin-bottom: 0;\n  word-break: normal;\n}\n\n.gitment-markdown .highlight pre,\n.gitment-markdown pre {\n  padding: 16px;\n  overflow: auto;\n  font-size: 85%;\n  line-height: 1.45;\n  background-color: #f5f5f5;\n  border-radius: 0;\n}\n\n.gitment-markdown pre code {\n  display: inline;\n  max-width: auto;\n  padding: 0;\n  margin: 0;\n  overflow: visible;\n  line-height: inherit;\n  word-wrap: normal;\n  background-color: transparent;\n  border: 0;\n}\n\n.gitment-markdown pre code::before,\n.gitment-markdown pre code::after {\n  content: normal;\n}\n\n.gitment-markdown .full-commit .btn-outline:not(:disabled):hover {\n  color: #005cc5;\n  border-color: #005cc5;\n}\n\n.gitment-markdown kbd {\n  display: inline-block;\n  padding: 3px 5px;\n  font: 11px \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n  line-height: 10px;\n  color: #444d56;\n  vertical-align: middle;\n  background-color: #fcfcfc;\n  border: solid 1px #c6cbd1;\n  border-bottom-color: #959da5;\n  border-radius: 0;\n  box-shadow: inset 0 -1px 0 #959da5;\n}\n\n.gitment-markdown :checked+.radio-label {\n  position: relative;\n  z-index: 1;\n  border-color: #0366d6;\n}\n\n.gitment-markdown .task-list-item {\n  list-style-type: none;\n}\n\n.gitment-markdown .task-list-item+.task-list-item {\n  margin-top: 3px;\n}\n\n.gitment-markdown .task-list-item input {\n  margin: 0 0.2em 0.25em -1.6em;\n  vertical-align: middle;\n}\n\n.gitment-markdown hr {\n  border-bottom-color: #eee;\n}","date":"2019-07-04T05:44:17.666Z","updated":"2019-05-20T09:37:09.686Z","path":"assets/css/gitment.css","layout":"false","title":"","comments":1,"_id":"ckntq34eg0028u66t8gy2vz2u","content":".gitment-container {\n  font-family: sans-serif;\n  font-size: 14px;\n  line-height: 1.5;\n  color: #333;\n  word-wrap: break-word;\n}\n\n.gitment-container * {\n  box-sizing: border-box;\n}\n\n.gitment-container *:disabled {\n  cursor: not-allowed;\n}\n\n.gitment-container a,\n.gitment-container a:visited {\n  cursor: pointer;\n  text-decoration: none;\n}\n\n.gitment-container a:hover {\n  text-decoration: underline;\n}\n\n.gitment-container .gitment-hidden {\n  display: none;\n}\n\n.gitment-container .gitment-spinner-icon {\n  fill: #333;\n\n  -webkit-animation: gitment-spin 1s steps(12) infinite;\n  animation: gitment-spin 1s steps(12) infinite;\n}\n\n@-webkit-keyframes gitment-spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg)\n  }\n}\n\n@keyframes gitment-spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg)\n  }\n}\n\n.gitment-root-container {\n  margin: 19px 0;\n}\n\n.gitment-header-container {\n  margin: 19px 0;\n}\n\n.gitment-header-like-btn,\n.gitment-comment-like-btn {\n  cursor: pointer;\n}\n\n.gitment-comment-like-btn {\n  float: right;\n}\n\n.gitment-comment-like-btn.liked {\n  color: #F44336;\n}\n\n.gitment-header-like-btn svg {\n  vertical-align: middle;\n  height: 30px;\n}\n\n.gitment-comment-like-btn svg {\n  vertical-align: middle;\n  height: 20px;\n}\n\n.gitment-header-like-btn.liked svg,\n.gitment-comment-like-btn.liked svg {\n  fill: #F44336;\n}\n\na.gitment-header-issue-link,\na.gitment-header-issue-link:visited {\n  float: right;\n  line-height: 30px;\n  color: #666;\n}\n\na.gitment-header-issue-link:hover {\n  color: #666;\n}\n\n.gitment-comments-loading,\n.gitment-comments-error,\n.gitment-comments-empty {\n  text-align: center;\n  margin: 50px 0;\n}\n\n.gitment-comments-list {\n  list-style: none;\n  padding-left: 0;\n  margin: 0 0 38px;\n}\n\n.gitment-comment,\n.gitment-editor-container {\n  position: relative;\n  min-height: 60px;\n  padding-left: 60px;\n  margin: 19px 0;\n}\n\n.gitment-comment-avatar,\n.gitment-editor-avatar {\n  float: left;\n  margin-left: -60px;\n}\n\n.gitment-comment-avatar,\n.gitment-comment-avatar-img,\n.gitment-comment-avatar,\n.gitment-editor-avatar-img,\n.gitment-editor-avatar svg {\n  width: 44px;\n  height: 44px;\n  border-radius: 3px;\n}\n\n.gitment-editor-avatar .gitment-github-icon {\n  fill: #fff;\n  background-color: #333;\n}\n\n.gitment-comment-main,\n.gitment-editor-main {\n  position: relative;\n  background: #ffffff;\n  border: 1px solid #CFD8DC;\n  border-radius: 0;\n}\n\n.gitment-editor-main::before,\n.gitment-editor-main::after,\n.gitment-comment-main::before,\n.gitment-comment-main::after {\n  position: absolute;\n  top: 11px;\n  left: -16px;\n  display: block;\n  width: 0;\n  height: 0;\n  pointer-events: none;\n  content: \"\";\n  border-color: transparent;\n  border-style: solid solid outset;\n}\n\n.gitment-editor-main::before,\n.gitment-comment-main::before {\n  border-width: 8px;\n  border-right-color: #CFD8DC;\n}\n\n.gitment-editor-main::after,\n.gitment-comment-main::after {\n  margin-top: 1px;\n  margin-left: 2px;\n  border-width: 7px;\n  border-right-color: #fff;\n}\n\n.gitment-comment-header {\n  margin: 12px 15px;\n  color: #666;\n  background-color: #fff;\n  border-radius: 3px;\n}\n\n.gitment-editor-header {\n  padding: 0;\n  margin: 0;\n  border-bottom: 1px solid #CFD8DC;\n}\n\na.gitment-comment-name,\na.gitment-comment-name:visited {\n  font-weight: 600;\n  color: #00bebe;\n}\n\n.gitment-editor-tabs {\n  margin-bottom: -1px;\n  margin-left: -1px;\n}\n\n.gitment-editor-tab {\n  display: inline-block;\n  padding: 11px 12px;\n  font-size: 14px;\n  line-height: 20px;\n  color: #666;\n  text-decoration: none;\n  background-color: transparent;\n  border-width: 0 1px;\n  border-style: solid;\n  border-color: transparent;\n  border-radius: 0;\n\n  white-space: nowrap;\n  cursor: pointer;\n  user-select: none;\n\n  outline: none;\n}\n\n.gitment-editor-tab.gitment-selected {\n  color: #333;\n  background-color: #fff;\n  border-color: #CFD8DC;\n}\n@media screen and (max-width: 400px) {\n    .gitment-editor-tab {\n        display: none;\n    }\n    .gitment-editor-tab.gitment-selected {\n        display: block;\n    }\n}\n\n.gitment-editor-login {\n  float: right;\n  margin-top: -30px;\n  margin-right: 15px;\n}\n\na.gitment-footer-project-link,\na.gitment-footer-project-link:visited,\na.gitment-editor-login-link,\na.gitment-editor-login-link:visited {\n  color: #2196F3;\n}\n\na.gitment-editor-logout-link,\na.gitment-editor-logout-link:visited {\n  color: #666;\n}\n\na.gitment-editor-logout-link:hover {\n  color: #2196F3;\n  text-decoration: none;\n}\n\n.gitment-comment-body {\n  position: relative;\n  margin: 12px 15px;\n  overflow: hidden;\n  border-radius: 3px;\n}\n\n.gitment-comment-body-folded {\n  cursor: pointer;\n}\n\n.gitment-comment-body-folded::before {\n  display: block !important;\n  content: \"\";\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  bottom: 50px;\n  pointer-events: none;\n  background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0), rgba(255, 255, 255, .9));\n  background: linear-gradient(180deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, .9));\n}\n\n.gitment-comment-body-folded::after {\n  display: block !important;\n  content: \"Click to Expand\" !important;\n  text-align: center;\n  color: #666;\n  position: absolute;\n  width: 100%;\n  height: 50px;\n  line-height: 50px;\n  left: 0;\n  bottom: 0;\n  pointer-events: none;\n  background: rgba(255, 255, 255, .9);\n}\n\n.gitment-editor-body {\n  margin: 0;\n}\n\n.gitment-comment-body > *:first-child,\n.gitment-editor-preview > *:first-child {\n  margin-top: 0 !important;\n}\n\n.gitment-comment-body > *:last-child,\n.gitment-editor-preview > *:last-child {\n  margin-bottom: 0 !important;\n}\n\n.gitment-editor-body textarea {\n  display: block;\n  width: 100%;\n  min-height: 150px;\n  max-height: 500px;\n  padding: 16px;\n  resize: vertical;\n\n  max-width: 100%;\n  margin: 0;\n  font-size: 14px;\n  line-height: 1.6;\n\n  background-color: #fff;\n\n  color: #333;\n  vertical-align: middle;\n  border: none;\n  border-radius: 0;\n  outline: none;\n  box-shadow: none;\n\n  overflow: visible;\n}\n\n.gitment-editor-body textarea:focus {\n  background-color: #fff;\n}\n\n.gitment-editor-preview {\n  min-height: 150px;\n\n  padding: 16px;\n  background-color: transparent;\n\n  width: 100%;\n  font-size: 14px;\n\n  line-height: 1.5;\n  word-wrap: break-word;\n}\n\n.gitment-editor-footer {\n  padding: 0;\n  margin-top: 10px;\n}\n\n.gitment-editor-footer::after {\n  display: table;\n  clear: both;\n  content: \"\";\n}\n\na.gitment-editor-footer-tip {\n  display: inline-block;\n  padding-top: 10px;\n  font-size: 12px;\n  color: #666;\n}\n\na.gitment-editor-footer-tip:hover {\n  color: #2196F3;\n  text-decoration: none;\n}\n\n.gitment-comments-pagination {\n  list-style: none;\n  text-align: right;\n  border-radius: 0;\n  margin: -19px 0 19px 0;\n}\n\n.gitment-comments-page-item {\n  display: inline-block;\n  cursor: pointer;\n  border: 1px solid #CFD8DC;\n  margin-left: -1px;\n  padding: .25rem .5rem;\n}\n\n.gitment-comments-page-item:hover {\n  background-color: #f5f5f5;\n}\n\n.gitment-comments-page-item.gitment-selected {\n  background-color: #f5f5f5;\n}\n\n.gitment-editor-submit,\n.gitment-comments-init-btn {\n  color: #fff;\n  background-color: #00BCD4;\n\n  position: relative;\n  display: inline-block;\n  padding: 7px 13px;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 20px;\n  white-space: nowrap;\n  vertical-align: middle;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  background-size: 110% 110%;\n  border: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n\n.gitment-editor-submit:hover,\n.gitment-comments-init-btn:hover {\n  background-color: #00ACC1;\n}\n\n.gitment-comments-init-btn:disabled,\n.gitment-editor-submit:disabled {\n  color: rgba(255,255,255,0.75);\n  background-color: #4DD0E1;\n  box-shadow: none;\n}\n\n.gitment-editor-submit {\n  float: right;\n}\n\n.gitment-footer-container {\n  margin-top: 30px;\n  margin-bottom: 20px;\n  text-align: right;\n  font-size: 12px;\n}\n\n/*\n * Markdown CSS\n * Copied from https://github.com/sindresorhus/github-markdown-css\n */\n.gitment-markdown {\n  -ms-text-size-adjust: 100%;\n  -webkit-text-size-adjust: 100%;\n  line-height: 1.5;\n  color: #333;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  font-size: 16px;\n  line-height: 1.5;\n  word-wrap: break-word;\n}\n\n.gitment-markdown .pl-c {\n  color: #969896;\n}\n\n.gitment-markdown .pl-c1,\n.gitment-markdown .pl-s .pl-v {\n  color: #0086b3;\n}\n\n.gitment-markdown .pl-e,\n.gitment-markdown .pl-en {\n  color: #795da3;\n}\n\n.gitment-markdown .pl-smi,\n.gitment-markdown .pl-s .pl-s1 {\n  color: #333;\n}\n\n.gitment-markdown .pl-ent {\n  color: #63a35c;\n}\n\n.gitment-markdown .pl-k {\n  color: #a71d5d;\n}\n\n.gitment-markdown .pl-s,\n.gitment-markdown .pl-pds,\n.gitment-markdown .pl-s .pl-pse .pl-s1,\n.gitment-markdown .pl-sr,\n.gitment-markdown .pl-sr .pl-cce,\n.gitment-markdown .pl-sr .pl-sre,\n.gitment-markdown .pl-sr .pl-sra {\n  color: #183691;\n}\n\n.gitment-markdown .pl-v,\n.gitment-markdown .pl-smw {\n  color: #ed6a43;\n}\n\n.gitment-markdown .pl-bu {\n  color: #b52a1d;\n}\n\n.gitment-markdown .pl-ii {\n  color: #f8f8f8;\n  background-color: #b52a1d;\n}\n\n.gitment-markdown .pl-c2 {\n  color: #f8f8f8;\n  background-color: #b52a1d;\n}\n\n.gitment-markdown .pl-c2::before {\n  content: \"^M\";\n}\n\n.gitment-markdown .pl-sr .pl-cce {\n  font-weight: bold;\n  color: #63a35c;\n}\n\n.gitment-markdown .pl-ml {\n  color: #693a17;\n}\n\n.gitment-markdown .pl-mh,\n.gitment-markdown .pl-mh .pl-en,\n.gitment-markdown .pl-ms {\n  font-weight: bold;\n  color: #1d3e81;\n}\n\n.gitment-markdown .pl-mq {\n  color: #008080;\n}\n\n.gitment-markdown .pl-mi {\n  font-style: italic;\n  color: #333;\n}\n\n.gitment-markdown .pl-mb {\n  font-weight: bold;\n  color: #333;\n}\n\n.gitment-markdown .pl-md {\n  color: #bd2c00;\n  background-color: #ffecec;\n}\n\n.gitment-markdown .pl-mi1 {\n  color: #55a532;\n  background-color: #eaffea;\n}\n\n.gitment-markdown .pl-mc {\n  color: #ef9700;\n  background-color: #ffe3b4;\n}\n\n.gitment-markdown .pl-mi2 {\n  color: #d8d8d8;\n  background-color: #808080;\n}\n\n.gitment-markdown .pl-mdr {\n  font-weight: bold;\n  color: #795da3;\n}\n\n.gitment-markdown .pl-mo {\n  color: #1d3e81;\n}\n\n.gitment-markdown .pl-ba {\n  color: #595e62;\n}\n\n.gitment-markdown .pl-sg {\n  color: #c0c0c0;\n}\n\n.gitment-markdown .pl-corl {\n  text-decoration: underline;\n  color: #183691;\n}\n\n.gitment-markdown .octicon {\n  display: inline-block;\n  vertical-align: text-top;\n  fill: currentColor;\n}\n\n.gitment-markdown a {\n  background-color: transparent;\n  -webkit-text-decoration-skip: objects;\n}\n\n.gitment-markdown a:active,\n.gitment-markdown a:hover {\n  outline-width: 0;\n}\n\n.gitment-markdown strong {\n  font-weight: inherit;\n}\n\n.gitment-markdown strong {\n  font-weight: bolder;\n}\n\n.gitment-markdown h1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n.gitment-markdown img {\n  border-style: none;\n}\n\n.gitment-markdown svg:not(:root) {\n  overflow: hidden;\n}\n\n.gitment-markdown code,\n.gitment-markdown kbd,\n.gitment-markdown pre {\n  font-family: monospace, monospace;\n  font-size: 1em;\n}\n\n.gitment-markdown hr {\n  box-sizing: content-box;\n  height: 0;\n  overflow: visible;\n}\n\n.gitment-markdown input {\n  font: inherit;\n  margin: 0;\n}\n\n.gitment-markdown input {\n  overflow: visible;\n}\n\n.gitment-markdown [type=\"checkbox\"] {\n  box-sizing: border-box;\n  padding: 0;\n}\n\n.gitment-markdown * {\n  box-sizing: border-box;\n}\n\n.gitment-markdown input {\n  font-family: inherit;\n  font-size: inherit;\n  line-height: inherit;\n}\n\n.gitment-markdown a {\n  color: #0366d6;\n  text-decoration: none;\n}\n\n.gitment-markdown a:hover {\n  text-decoration: underline;\n}\n\n.gitment-markdown strong {\n  font-weight: 600;\n}\n\n.gitment-markdown hr {\n  height: 0;\n  margin: 15px 0;\n  overflow: hidden;\n  background: transparent;\n  border: 0;\n  border-bottom: 1px solid #dfe2e5;\n}\n\n.gitment-markdown hr::before {\n  display: table;\n  content: \"\";\n}\n\n.gitment-markdown hr::after {\n  display: table;\n  clear: both;\n  content: \"\";\n}\n\n.gitment-markdown table {\n  border-spacing: 0;\n  border-collapse: collapse;\n}\n\n.gitment-markdown td,\n.gitment-markdown th {\n  padding: 0;\n}\n\n.gitment-markdown h1,\n.gitment-markdown h2,\n.gitment-markdown h3,\n.gitment-markdown h4,\n.gitment-markdown h5,\n.gitment-markdown h6 {\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.gitment-markdown h1 {\n  font-size: 32px;\n  font-weight: 600;\n}\n\n.gitment-markdown h2 {\n  font-size: 24px;\n  font-weight: 600;\n}\n\n.gitment-markdown h3 {\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.gitment-markdown h4 {\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.gitment-markdown h5 {\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.gitment-markdown h6 {\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.gitment-markdown p {\n  margin-top: 0;\n  margin-bottom: 10px;\n}\n\n.gitment-markdown blockquote {\n  margin: 0;\n}\n\n.gitment-markdown ul,\n.gitment-markdown ol {\n  padding-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.gitment-markdown ol ol,\n.gitment-markdown ul ol {\n  list-style-type: lower-roman;\n}\n\n.gitment-markdown ul ul ol,\n.gitment-markdown ul ol ol,\n.gitment-markdown ol ul ol,\n.gitment-markdown ol ol ol {\n  list-style-type: lower-alpha;\n}\n\n.gitment-markdown dd {\n  margin-left: 0;\n}\n\n.gitment-markdown code {\n  font-family: \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n  font-size: 12px;\n}\n\n.gitment-markdown pre {\n  margin-top: 0;\n  margin-bottom: 0;\n  font: 12px \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n}\n\n.gitment-markdown .octicon {\n  vertical-align: text-bottom;\n}\n\n.gitment-markdown .pl-0 {\n  padding-left: 0 !important;\n}\n\n.gitment-markdown .pl-1 {\n  padding-left: 4px !important;\n}\n\n.gitment-markdown .pl-2 {\n  padding-left: 8px !important;\n}\n\n.gitment-markdown .pl-3 {\n  padding-left: 16px !important;\n}\n\n.gitment-markdown .pl-4 {\n  padding-left: 24px !important;\n}\n\n.gitment-markdown .pl-5 {\n  padding-left: 32px !important;\n}\n\n.gitment-markdown .pl-6 {\n  padding-left: 40px !important;\n}\n\n.gitment-markdown::before {\n  display: table;\n  content: \"\";\n}\n\n.gitment-markdown::after {\n  display: table;\n  clear: both;\n  content: \"\";\n}\n\n.gitment-markdown>*:first-child {\n  margin-top: 0 !important;\n}\n\n.gitment-markdown>*:last-child {\n  margin-bottom: 0 !important;\n}\n\n.gitment-markdown a:not([href]) {\n  color: inherit;\n  text-decoration: none;\n}\n\n.gitment-markdown .anchor {\n  float: left;\n  padding-right: 4px;\n  margin-left: -20px;\n  line-height: 1;\n}\n\n.gitment-markdown .anchor:focus {\n  outline: none;\n}\n\n.gitment-markdown p,\n.gitment-markdown blockquote,\n.gitment-markdown ul,\n.gitment-markdown ol,\n.gitment-markdown dl,\n.gitment-markdown table,\n.gitment-markdown pre {\n  margin-top: 0;\n  margin-bottom: 16px;\n}\n\n.gitment-markdown hr {\n  height: 0.25em;\n  padding: 0;\n  margin: 24px 0;\n  background-color: #e1e4e8;\n  border: 0;\n}\n\n.gitment-markdown blockquote {\n  padding: 0 1em;\n  color: #6a737d;\n  border-left: 0.25em solid #dfe2e5;\n}\n\n.gitment-markdown blockquote>:first-child {\n  margin-top: 0;\n}\n\n.gitment-markdown blockquote>:last-child {\n  margin-bottom: 0;\n}\n\n.gitment-markdown kbd {\n  display: inline-block;\n  padding: 3px 5px;\n  font-size: 11px;\n  line-height: 10px;\n  color: #444d56;\n  vertical-align: middle;\n  background-color: #fafbfc;\n  border: solid 1px #c6cbd1;\n  border-bottom-color: #959da5;\n  border-radius: 0;\n  box-shadow: inset 0 -1px 0 #959da5;\n}\n\n.gitment-markdown h1,\n.gitment-markdown h2,\n.gitment-markdown h3,\n.gitment-markdown h4,\n.gitment-markdown h5,\n.gitment-markdown h6 {\n  margin-top: 24px;\n  margin-bottom: 16px;\n  font-weight: 600;\n  line-height: 1.25;\n}\n\n.gitment-markdown h1 .octicon-link,\n.gitment-markdown h2 .octicon-link,\n.gitment-markdown h3 .octicon-link,\n.gitment-markdown h4 .octicon-link,\n.gitment-markdown h5 .octicon-link,\n.gitment-markdown h6 .octicon-link {\n  color: #1b1f23;\n  vertical-align: middle;\n  visibility: hidden;\n}\n\n.gitment-markdown h1:hover .anchor,\n.gitment-markdown h2:hover .anchor,\n.gitment-markdown h3:hover .anchor,\n.gitment-markdown h4:hover .anchor,\n.gitment-markdown h5:hover .anchor,\n.gitment-markdown h6:hover .anchor {\n  text-decoration: none;\n}\n\n.gitment-markdown h1:hover .anchor .octicon-link,\n.gitment-markdown h2:hover .anchor .octicon-link,\n.gitment-markdown h3:hover .anchor .octicon-link,\n.gitment-markdown h4:hover .anchor .octicon-link,\n.gitment-markdown h5:hover .anchor .octicon-link,\n.gitment-markdown h6:hover .anchor .octicon-link {\n  visibility: visible;\n}\n\n.gitment-markdown h1 {\n  padding-bottom: 0.3em;\n  font-size: 2em;\n  border-bottom: 1px solid #eaecef;\n}\n\n.gitment-markdown h2 {\n  padding-bottom: 0.3em;\n  font-size: 1.5em;\n  border-bottom: 1px solid #eaecef;\n}\n\n.gitment-markdown h3 {\n  font-size: 1.25em;\n}\n\n.gitment-markdown h4 {\n  font-size: 1em;\n}\n\n.gitment-markdown h5 {\n  font-size: 0.875em;\n}\n\n.gitment-markdown h6 {\n  font-size: 0.85em;\n  color: #6a737d;\n}\n\n.gitment-markdown ul,\n.gitment-markdown ol {\n  padding-left: 2em;\n}\n\n.gitment-markdown ul ul,\n.gitment-markdown ul ol,\n.gitment-markdown ol ol,\n.gitment-markdown ol ul {\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.gitment-markdown li>p {\n  margin-top: 16px;\n}\n\n.gitment-markdown li+li {\n  margin-top: 0.25em;\n}\n\n.gitment-markdown dl {\n  padding: 0;\n}\n\n.gitment-markdown dl dt {\n  padding: 0;\n  margin-top: 16px;\n  font-size: 1em;\n  font-style: italic;\n  font-weight: 600;\n}\n\n.gitment-markdown dl dd {\n  padding: 0 16px;\n  margin-bottom: 16px;\n}\n\n.gitment-markdown table {\n  display: block;\n  width: 100%;\n  overflow: auto;\n}\n\n.gitment-markdown table th {\n  font-weight: 600;\n}\n\n.gitment-markdown table th,\n.gitment-markdown table td {\n  padding: 6px 13px;\n  border: 1px solid #dfe2e5;\n}\n\n.gitment-markdown table tr {\n  background-color: #fff;\n  border-top: 1px solid #c6cbd1;\n}\n\n.gitment-markdown table tr:nth-child(2n) {\n  background-color: #f5f5f5;\n}\n\n.gitment-markdown img {\n  max-width: 100%;\n  box-sizing: content-box;\n  background-color: #fff;\n}\n\n.gitment-markdown code {\n  padding: 0;\n  padding-top: 0.2em;\n  padding-bottom: 0.2em;\n  margin: 0;\n  font-size: 85%;\n  background-color: rgba(27,31,35,0.05);\n  border-radius: 0;\n}\n\n.gitment-markdown code::before,\n.gitment-markdown code::after {\n  letter-spacing: -0.2em;\n  content: \"\\00a0\";\n}\n\n.gitment-markdown pre {\n  word-wrap: normal;\n}\n\n.gitment-markdown pre>code {\n  padding: 0;\n  margin: 0;\n  font-size: 100%;\n  word-break: normal;\n  white-space: pre;\n  background: transparent;\n  border: 0;\n}\n\n.gitment-markdown .highlight {\n  margin-bottom: 16px;\n}\n\n.gitment-markdown .highlight pre {\n  margin-bottom: 0;\n  word-break: normal;\n}\n\n.gitment-markdown .highlight pre,\n.gitment-markdown pre {\n  padding: 16px;\n  overflow: auto;\n  font-size: 85%;\n  line-height: 1.45;\n  background-color: #f5f5f5;\n  border-radius: 0;\n}\n\n.gitment-markdown pre code {\n  display: inline;\n  max-width: auto;\n  padding: 0;\n  margin: 0;\n  overflow: visible;\n  line-height: inherit;\n  word-wrap: normal;\n  background-color: transparent;\n  border: 0;\n}\n\n.gitment-markdown pre code::before,\n.gitment-markdown pre code::after {\n  content: normal;\n}\n\n.gitment-markdown .full-commit .btn-outline:not(:disabled):hover {\n  color: #005cc5;\n  border-color: #005cc5;\n}\n\n.gitment-markdown kbd {\n  display: inline-block;\n  padding: 3px 5px;\n  font: 11px \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n  line-height: 10px;\n  color: #444d56;\n  vertical-align: middle;\n  background-color: #fcfcfc;\n  border: solid 1px #c6cbd1;\n  border-bottom-color: #959da5;\n  border-radius: 0;\n  box-shadow: inset 0 -1px 0 #959da5;\n}\n\n.gitment-markdown :checked+.radio-label {\n  position: relative;\n  z-index: 1;\n  border-color: #0366d6;\n}\n\n.gitment-markdown .task-list-item {\n  list-style-type: none;\n}\n\n.gitment-markdown .task-list-item+.task-list-item {\n  margin-top: 3px;\n}\n\n.gitment-markdown .task-list-item input {\n  margin: 0 0.2em 0.25em -1.6em;\n  vertical-align: middle;\n}\n\n.gitment-markdown hr {\n  border-bottom-color: #eee;\n}","site":{"data":{}},"excerpt":"","more":".gitment-container {\n  font-family: sans-serif;\n  font-size: 14px;\n  line-height: 1.5;\n  color: #333;\n  word-wrap: break-word;\n}\n\n.gitment-container * {\n  box-sizing: border-box;\n}\n\n.gitment-container *:disabled {\n  cursor: not-allowed;\n}\n\n.gitment-container a,\n.gitment-container a:visited {\n  cursor: pointer;\n  text-decoration: none;\n}\n\n.gitment-container a:hover {\n  text-decoration: underline;\n}\n\n.gitment-container .gitment-hidden {\n  display: none;\n}\n\n.gitment-container .gitment-spinner-icon {\n  fill: #333;\n\n  -webkit-animation: gitment-spin 1s steps(12) infinite;\n  animation: gitment-spin 1s steps(12) infinite;\n}\n\n@-webkit-keyframes gitment-spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg)\n  }\n}\n\n@keyframes gitment-spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg)\n  }\n}\n\n.gitment-root-container {\n  margin: 19px 0;\n}\n\n.gitment-header-container {\n  margin: 19px 0;\n}\n\n.gitment-header-like-btn,\n.gitment-comment-like-btn {\n  cursor: pointer;\n}\n\n.gitment-comment-like-btn {\n  float: right;\n}\n\n.gitment-comment-like-btn.liked {\n  color: #F44336;\n}\n\n.gitment-header-like-btn svg {\n  vertical-align: middle;\n  height: 30px;\n}\n\n.gitment-comment-like-btn svg {\n  vertical-align: middle;\n  height: 20px;\n}\n\n.gitment-header-like-btn.liked svg,\n.gitment-comment-like-btn.liked svg {\n  fill: #F44336;\n}\n\na.gitment-header-issue-link,\na.gitment-header-issue-link:visited {\n  float: right;\n  line-height: 30px;\n  color: #666;\n}\n\na.gitment-header-issue-link:hover {\n  color: #666;\n}\n\n.gitment-comments-loading,\n.gitment-comments-error,\n.gitment-comments-empty {\n  text-align: center;\n  margin: 50px 0;\n}\n\n.gitment-comments-list {\n  list-style: none;\n  padding-left: 0;\n  margin: 0 0 38px;\n}\n\n.gitment-comment,\n.gitment-editor-container {\n  position: relative;\n  min-height: 60px;\n  padding-left: 60px;\n  margin: 19px 0;\n}\n\n.gitment-comment-avatar,\n.gitment-editor-avatar {\n  float: left;\n  margin-left: -60px;\n}\n\n.gitment-comment-avatar,\n.gitment-comment-avatar-img,\n.gitment-comment-avatar,\n.gitment-editor-avatar-img,\n.gitment-editor-avatar svg {\n  width: 44px;\n  height: 44px;\n  border-radius: 3px;\n}\n\n.gitment-editor-avatar .gitment-github-icon {\n  fill: #fff;\n  background-color: #333;\n}\n\n.gitment-comment-main,\n.gitment-editor-main {\n  position: relative;\n  background: #ffffff;\n  border: 1px solid #CFD8DC;\n  border-radius: 0;\n}\n\n.gitment-editor-main::before,\n.gitment-editor-main::after,\n.gitment-comment-main::before,\n.gitment-comment-main::after {\n  position: absolute;\n  top: 11px;\n  left: -16px;\n  display: block;\n  width: 0;\n  height: 0;\n  pointer-events: none;\n  content: \"\";\n  border-color: transparent;\n  border-style: solid solid outset;\n}\n\n.gitment-editor-main::before,\n.gitment-comment-main::before {\n  border-width: 8px;\n  border-right-color: #CFD8DC;\n}\n\n.gitment-editor-main::after,\n.gitment-comment-main::after {\n  margin-top: 1px;\n  margin-left: 2px;\n  border-width: 7px;\n  border-right-color: #fff;\n}\n\n.gitment-comment-header {\n  margin: 12px 15px;\n  color: #666;\n  background-color: #fff;\n  border-radius: 3px;\n}\n\n.gitment-editor-header {\n  padding: 0;\n  margin: 0;\n  border-bottom: 1px solid #CFD8DC;\n}\n\na.gitment-comment-name,\na.gitment-comment-name:visited {\n  font-weight: 600;\n  color: #00bebe;\n}\n\n.gitment-editor-tabs {\n  margin-bottom: -1px;\n  margin-left: -1px;\n}\n\n.gitment-editor-tab {\n  display: inline-block;\n  padding: 11px 12px;\n  font-size: 14px;\n  line-height: 20px;\n  color: #666;\n  text-decoration: none;\n  background-color: transparent;\n  border-width: 0 1px;\n  border-style: solid;\n  border-color: transparent;\n  border-radius: 0;\n\n  white-space: nowrap;\n  cursor: pointer;\n  user-select: none;\n\n  outline: none;\n}\n\n.gitment-editor-tab.gitment-selected {\n  color: #333;\n  background-color: #fff;\n  border-color: #CFD8DC;\n}\n@media screen and (max-width: 400px) {\n    .gitment-editor-tab {\n        display: none;\n    }\n    .gitment-editor-tab.gitment-selected {\n        display: block;\n    }\n}\n\n.gitment-editor-login {\n  float: right;\n  margin-top: -30px;\n  margin-right: 15px;\n}\n\na.gitment-footer-project-link,\na.gitment-footer-project-link:visited,\na.gitment-editor-login-link,\na.gitment-editor-login-link:visited {\n  color: #2196F3;\n}\n\na.gitment-editor-logout-link,\na.gitment-editor-logout-link:visited {\n  color: #666;\n}\n\na.gitment-editor-logout-link:hover {\n  color: #2196F3;\n  text-decoration: none;\n}\n\n.gitment-comment-body {\n  position: relative;\n  margin: 12px 15px;\n  overflow: hidden;\n  border-radius: 3px;\n}\n\n.gitment-comment-body-folded {\n  cursor: pointer;\n}\n\n.gitment-comment-body-folded::before {\n  display: block !important;\n  content: \"\";\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  bottom: 50px;\n  pointer-events: none;\n  background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0), rgba(255, 255, 255, .9));\n  background: linear-gradient(180deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, .9));\n}\n\n.gitment-comment-body-folded::after {\n  display: block !important;\n  content: \"Click to Expand\" !important;\n  text-align: center;\n  color: #666;\n  position: absolute;\n  width: 100%;\n  height: 50px;\n  line-height: 50px;\n  left: 0;\n  bottom: 0;\n  pointer-events: none;\n  background: rgba(255, 255, 255, .9);\n}\n\n.gitment-editor-body {\n  margin: 0;\n}\n\n.gitment-comment-body > *:first-child,\n.gitment-editor-preview > *:first-child {\n  margin-top: 0 !important;\n}\n\n.gitment-comment-body > *:last-child,\n.gitment-editor-preview > *:last-child {\n  margin-bottom: 0 !important;\n}\n\n.gitment-editor-body textarea {\n  display: block;\n  width: 100%;\n  min-height: 150px;\n  max-height: 500px;\n  padding: 16px;\n  resize: vertical;\n\n  max-width: 100%;\n  margin: 0;\n  font-size: 14px;\n  line-height: 1.6;\n\n  background-color: #fff;\n\n  color: #333;\n  vertical-align: middle;\n  border: none;\n  border-radius: 0;\n  outline: none;\n  box-shadow: none;\n\n  overflow: visible;\n}\n\n.gitment-editor-body textarea:focus {\n  background-color: #fff;\n}\n\n.gitment-editor-preview {\n  min-height: 150px;\n\n  padding: 16px;\n  background-color: transparent;\n\n  width: 100%;\n  font-size: 14px;\n\n  line-height: 1.5;\n  word-wrap: break-word;\n}\n\n.gitment-editor-footer {\n  padding: 0;\n  margin-top: 10px;\n}\n\n.gitment-editor-footer::after {\n  display: table;\n  clear: both;\n  content: \"\";\n}\n\na.gitment-editor-footer-tip {\n  display: inline-block;\n  padding-top: 10px;\n  font-size: 12px;\n  color: #666;\n}\n\na.gitment-editor-footer-tip:hover {\n  color: #2196F3;\n  text-decoration: none;\n}\n\n.gitment-comments-pagination {\n  list-style: none;\n  text-align: right;\n  border-radius: 0;\n  margin: -19px 0 19px 0;\n}\n\n.gitment-comments-page-item {\n  display: inline-block;\n  cursor: pointer;\n  border: 1px solid #CFD8DC;\n  margin-left: -1px;\n  padding: .25rem .5rem;\n}\n\n.gitment-comments-page-item:hover {\n  background-color: #f5f5f5;\n}\n\n.gitment-comments-page-item.gitment-selected {\n  background-color: #f5f5f5;\n}\n\n.gitment-editor-submit,\n.gitment-comments-init-btn {\n  color: #fff;\n  background-color: #00BCD4;\n\n  position: relative;\n  display: inline-block;\n  padding: 7px 13px;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 20px;\n  white-space: nowrap;\n  vertical-align: middle;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  background-size: 110% 110%;\n  border: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n\n.gitment-editor-submit:hover,\n.gitment-comments-init-btn:hover {\n  background-color: #00ACC1;\n}\n\n.gitment-comments-init-btn:disabled,\n.gitment-editor-submit:disabled {\n  color: rgba(255,255,255,0.75);\n  background-color: #4DD0E1;\n  box-shadow: none;\n}\n\n.gitment-editor-submit {\n  float: right;\n}\n\n.gitment-footer-container {\n  margin-top: 30px;\n  margin-bottom: 20px;\n  text-align: right;\n  font-size: 12px;\n}\n\n/*\n * Markdown CSS\n * Copied from https://github.com/sindresorhus/github-markdown-css\n */\n.gitment-markdown {\n  -ms-text-size-adjust: 100%;\n  -webkit-text-size-adjust: 100%;\n  line-height: 1.5;\n  color: #333;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  font-size: 16px;\n  line-height: 1.5;\n  word-wrap: break-word;\n}\n\n.gitment-markdown .pl-c {\n  color: #969896;\n}\n\n.gitment-markdown .pl-c1,\n.gitment-markdown .pl-s .pl-v {\n  color: #0086b3;\n}\n\n.gitment-markdown .pl-e,\n.gitment-markdown .pl-en {\n  color: #795da3;\n}\n\n.gitment-markdown .pl-smi,\n.gitment-markdown .pl-s .pl-s1 {\n  color: #333;\n}\n\n.gitment-markdown .pl-ent {\n  color: #63a35c;\n}\n\n.gitment-markdown .pl-k {\n  color: #a71d5d;\n}\n\n.gitment-markdown .pl-s,\n.gitment-markdown .pl-pds,\n.gitment-markdown .pl-s .pl-pse .pl-s1,\n.gitment-markdown .pl-sr,\n.gitment-markdown .pl-sr .pl-cce,\n.gitment-markdown .pl-sr .pl-sre,\n.gitment-markdown .pl-sr .pl-sra {\n  color: #183691;\n}\n\n.gitment-markdown .pl-v,\n.gitment-markdown .pl-smw {\n  color: #ed6a43;\n}\n\n.gitment-markdown .pl-bu {\n  color: #b52a1d;\n}\n\n.gitment-markdown .pl-ii {\n  color: #f8f8f8;\n  background-color: #b52a1d;\n}\n\n.gitment-markdown .pl-c2 {\n  color: #f8f8f8;\n  background-color: #b52a1d;\n}\n\n.gitment-markdown .pl-c2::before {\n  content: \"^M\";\n}\n\n.gitment-markdown .pl-sr .pl-cce {\n  font-weight: bold;\n  color: #63a35c;\n}\n\n.gitment-markdown .pl-ml {\n  color: #693a17;\n}\n\n.gitment-markdown .pl-mh,\n.gitment-markdown .pl-mh .pl-en,\n.gitment-markdown .pl-ms {\n  font-weight: bold;\n  color: #1d3e81;\n}\n\n.gitment-markdown .pl-mq {\n  color: #008080;\n}\n\n.gitment-markdown .pl-mi {\n  font-style: italic;\n  color: #333;\n}\n\n.gitment-markdown .pl-mb {\n  font-weight: bold;\n  color: #333;\n}\n\n.gitment-markdown .pl-md {\n  color: #bd2c00;\n  background-color: #ffecec;\n}\n\n.gitment-markdown .pl-mi1 {\n  color: #55a532;\n  background-color: #eaffea;\n}\n\n.gitment-markdown .pl-mc {\n  color: #ef9700;\n  background-color: #ffe3b4;\n}\n\n.gitment-markdown .pl-mi2 {\n  color: #d8d8d8;\n  background-color: #808080;\n}\n\n.gitment-markdown .pl-mdr {\n  font-weight: bold;\n  color: #795da3;\n}\n\n.gitment-markdown .pl-mo {\n  color: #1d3e81;\n}\n\n.gitment-markdown .pl-ba {\n  color: #595e62;\n}\n\n.gitment-markdown .pl-sg {\n  color: #c0c0c0;\n}\n\n.gitment-markdown .pl-corl {\n  text-decoration: underline;\n  color: #183691;\n}\n\n.gitment-markdown .octicon {\n  display: inline-block;\n  vertical-align: text-top;\n  fill: currentColor;\n}\n\n.gitment-markdown a {\n  background-color: transparent;\n  -webkit-text-decoration-skip: objects;\n}\n\n.gitment-markdown a:active,\n.gitment-markdown a:hover {\n  outline-width: 0;\n}\n\n.gitment-markdown strong {\n  font-weight: inherit;\n}\n\n.gitment-markdown strong {\n  font-weight: bolder;\n}\n\n.gitment-markdown h1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n.gitment-markdown img {\n  border-style: none;\n}\n\n.gitment-markdown svg:not(:root) {\n  overflow: hidden;\n}\n\n.gitment-markdown code,\n.gitment-markdown kbd,\n.gitment-markdown pre {\n  font-family: monospace, monospace;\n  font-size: 1em;\n}\n\n.gitment-markdown hr {\n  box-sizing: content-box;\n  height: 0;\n  overflow: visible;\n}\n\n.gitment-markdown input {\n  font: inherit;\n  margin: 0;\n}\n\n.gitment-markdown input {\n  overflow: visible;\n}\n\n.gitment-markdown [type=\"checkbox\"] {\n  box-sizing: border-box;\n  padding: 0;\n}\n\n.gitment-markdown * {\n  box-sizing: border-box;\n}\n\n.gitment-markdown input {\n  font-family: inherit;\n  font-size: inherit;\n  line-height: inherit;\n}\n\n.gitment-markdown a {\n  color: #0366d6;\n  text-decoration: none;\n}\n\n.gitment-markdown a:hover {\n  text-decoration: underline;\n}\n\n.gitment-markdown strong {\n  font-weight: 600;\n}\n\n.gitment-markdown hr {\n  height: 0;\n  margin: 15px 0;\n  overflow: hidden;\n  background: transparent;\n  border: 0;\n  border-bottom: 1px solid #dfe2e5;\n}\n\n.gitment-markdown hr::before {\n  display: table;\n  content: \"\";\n}\n\n.gitment-markdown hr::after {\n  display: table;\n  clear: both;\n  content: \"\";\n}\n\n.gitment-markdown table {\n  border-spacing: 0;\n  border-collapse: collapse;\n}\n\n.gitment-markdown td,\n.gitment-markdown th {\n  padding: 0;\n}\n\n.gitment-markdown h1,\n.gitment-markdown h2,\n.gitment-markdown h3,\n.gitment-markdown h4,\n.gitment-markdown h5,\n.gitment-markdown h6 {\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.gitment-markdown h1 {\n  font-size: 32px;\n  font-weight: 600;\n}\n\n.gitment-markdown h2 {\n  font-size: 24px;\n  font-weight: 600;\n}\n\n.gitment-markdown h3 {\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.gitment-markdown h4 {\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.gitment-markdown h5 {\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.gitment-markdown h6 {\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.gitment-markdown p {\n  margin-top: 0;\n  margin-bottom: 10px;\n}\n\n.gitment-markdown blockquote {\n  margin: 0;\n}\n\n.gitment-markdown ul,\n.gitment-markdown ol {\n  padding-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.gitment-markdown ol ol,\n.gitment-markdown ul ol {\n  list-style-type: lower-roman;\n}\n\n.gitment-markdown ul ul ol,\n.gitment-markdown ul ol ol,\n.gitment-markdown ol ul ol,\n.gitment-markdown ol ol ol {\n  list-style-type: lower-alpha;\n}\n\n.gitment-markdown dd {\n  margin-left: 0;\n}\n\n.gitment-markdown code {\n  font-family: \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n  font-size: 12px;\n}\n\n.gitment-markdown pre {\n  margin-top: 0;\n  margin-bottom: 0;\n  font: 12px \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n}\n\n.gitment-markdown .octicon {\n  vertical-align: text-bottom;\n}\n\n.gitment-markdown .pl-0 {\n  padding-left: 0 !important;\n}\n\n.gitment-markdown .pl-1 {\n  padding-left: 4px !important;\n}\n\n.gitment-markdown .pl-2 {\n  padding-left: 8px !important;\n}\n\n.gitment-markdown .pl-3 {\n  padding-left: 16px !important;\n}\n\n.gitment-markdown .pl-4 {\n  padding-left: 24px !important;\n}\n\n.gitment-markdown .pl-5 {\n  padding-left: 32px !important;\n}\n\n.gitment-markdown .pl-6 {\n  padding-left: 40px !important;\n}\n\n.gitment-markdown::before {\n  display: table;\n  content: \"\";\n}\n\n.gitment-markdown::after {\n  display: table;\n  clear: both;\n  content: \"\";\n}\n\n.gitment-markdown>*:first-child {\n  margin-top: 0 !important;\n}\n\n.gitment-markdown>*:last-child {\n  margin-bottom: 0 !important;\n}\n\n.gitment-markdown a:not([href]) {\n  color: inherit;\n  text-decoration: none;\n}\n\n.gitment-markdown .anchor {\n  float: left;\n  padding-right: 4px;\n  margin-left: -20px;\n  line-height: 1;\n}\n\n.gitment-markdown .anchor:focus {\n  outline: none;\n}\n\n.gitment-markdown p,\n.gitment-markdown blockquote,\n.gitment-markdown ul,\n.gitment-markdown ol,\n.gitment-markdown dl,\n.gitment-markdown table,\n.gitment-markdown pre {\n  margin-top: 0;\n  margin-bottom: 16px;\n}\n\n.gitment-markdown hr {\n  height: 0.25em;\n  padding: 0;\n  margin: 24px 0;\n  background-color: #e1e4e8;\n  border: 0;\n}\n\n.gitment-markdown blockquote {\n  padding: 0 1em;\n  color: #6a737d;\n  border-left: 0.25em solid #dfe2e5;\n}\n\n.gitment-markdown blockquote>:first-child {\n  margin-top: 0;\n}\n\n.gitment-markdown blockquote>:last-child {\n  margin-bottom: 0;\n}\n\n.gitment-markdown kbd {\n  display: inline-block;\n  padding: 3px 5px;\n  font-size: 11px;\n  line-height: 10px;\n  color: #444d56;\n  vertical-align: middle;\n  background-color: #fafbfc;\n  border: solid 1px #c6cbd1;\n  border-bottom-color: #959da5;\n  border-radius: 0;\n  box-shadow: inset 0 -1px 0 #959da5;\n}\n\n.gitment-markdown h1,\n.gitment-markdown h2,\n.gitment-markdown h3,\n.gitment-markdown h4,\n.gitment-markdown h5,\n.gitment-markdown h6 {\n  margin-top: 24px;\n  margin-bottom: 16px;\n  font-weight: 600;\n  line-height: 1.25;\n}\n\n.gitment-markdown h1 .octicon-link,\n.gitment-markdown h2 .octicon-link,\n.gitment-markdown h3 .octicon-link,\n.gitment-markdown h4 .octicon-link,\n.gitment-markdown h5 .octicon-link,\n.gitment-markdown h6 .octicon-link {\n  color: #1b1f23;\n  vertical-align: middle;\n  visibility: hidden;\n}\n\n.gitment-markdown h1:hover .anchor,\n.gitment-markdown h2:hover .anchor,\n.gitment-markdown h3:hover .anchor,\n.gitment-markdown h4:hover .anchor,\n.gitment-markdown h5:hover .anchor,\n.gitment-markdown h6:hover .anchor {\n  text-decoration: none;\n}\n\n.gitment-markdown h1:hover .anchor .octicon-link,\n.gitment-markdown h2:hover .anchor .octicon-link,\n.gitment-markdown h3:hover .anchor .octicon-link,\n.gitment-markdown h4:hover .anchor .octicon-link,\n.gitment-markdown h5:hover .anchor .octicon-link,\n.gitment-markdown h6:hover .anchor .octicon-link {\n  visibility: visible;\n}\n\n.gitment-markdown h1 {\n  padding-bottom: 0.3em;\n  font-size: 2em;\n  border-bottom: 1px solid #eaecef;\n}\n\n.gitment-markdown h2 {\n  padding-bottom: 0.3em;\n  font-size: 1.5em;\n  border-bottom: 1px solid #eaecef;\n}\n\n.gitment-markdown h3 {\n  font-size: 1.25em;\n}\n\n.gitment-markdown h4 {\n  font-size: 1em;\n}\n\n.gitment-markdown h5 {\n  font-size: 0.875em;\n}\n\n.gitment-markdown h6 {\n  font-size: 0.85em;\n  color: #6a737d;\n}\n\n.gitment-markdown ul,\n.gitment-markdown ol {\n  padding-left: 2em;\n}\n\n.gitment-markdown ul ul,\n.gitment-markdown ul ol,\n.gitment-markdown ol ol,\n.gitment-markdown ol ul {\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.gitment-markdown li>p {\n  margin-top: 16px;\n}\n\n.gitment-markdown li+li {\n  margin-top: 0.25em;\n}\n\n.gitment-markdown dl {\n  padding: 0;\n}\n\n.gitment-markdown dl dt {\n  padding: 0;\n  margin-top: 16px;\n  font-size: 1em;\n  font-style: italic;\n  font-weight: 600;\n}\n\n.gitment-markdown dl dd {\n  padding: 0 16px;\n  margin-bottom: 16px;\n}\n\n.gitment-markdown table {\n  display: block;\n  width: 100%;\n  overflow: auto;\n}\n\n.gitment-markdown table th {\n  font-weight: 600;\n}\n\n.gitment-markdown table th,\n.gitment-markdown table td {\n  padding: 6px 13px;\n  border: 1px solid #dfe2e5;\n}\n\n.gitment-markdown table tr {\n  background-color: #fff;\n  border-top: 1px solid #c6cbd1;\n}\n\n.gitment-markdown table tr:nth-child(2n) {\n  background-color: #f5f5f5;\n}\n\n.gitment-markdown img {\n  max-width: 100%;\n  box-sizing: content-box;\n  background-color: #fff;\n}\n\n.gitment-markdown code {\n  padding: 0;\n  padding-top: 0.2em;\n  padding-bottom: 0.2em;\n  margin: 0;\n  font-size: 85%;\n  background-color: rgba(27,31,35,0.05);\n  border-radius: 0;\n}\n\n.gitment-markdown code::before,\n.gitment-markdown code::after {\n  letter-spacing: -0.2em;\n  content: \"\\00a0\";\n}\n\n.gitment-markdown pre {\n  word-wrap: normal;\n}\n\n.gitment-markdown pre>code {\n  padding: 0;\n  margin: 0;\n  font-size: 100%;\n  word-break: normal;\n  white-space: pre;\n  background: transparent;\n  border: 0;\n}\n\n.gitment-markdown .highlight {\n  margin-bottom: 16px;\n}\n\n.gitment-markdown .highlight pre {\n  margin-bottom: 0;\n  word-break: normal;\n}\n\n.gitment-markdown .highlight pre,\n.gitment-markdown pre {\n  padding: 16px;\n  overflow: auto;\n  font-size: 85%;\n  line-height: 1.45;\n  background-color: #f5f5f5;\n  border-radius: 0;\n}\n\n.gitment-markdown pre code {\n  display: inline;\n  max-width: auto;\n  padding: 0;\n  margin: 0;\n  overflow: visible;\n  line-height: inherit;\n  word-wrap: normal;\n  background-color: transparent;\n  border: 0;\n}\n\n.gitment-markdown pre code::before,\n.gitment-markdown pre code::after {\n  content: normal;\n}\n\n.gitment-markdown .full-commit .btn-outline:not(:disabled):hover {\n  color: #005cc5;\n  border-color: #005cc5;\n}\n\n.gitment-markdown kbd {\n  display: inline-block;\n  padding: 3px 5px;\n  font: 11px \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n  line-height: 10px;\n  color: #444d56;\n  vertical-align: middle;\n  background-color: #fcfcfc;\n  border: solid 1px #c6cbd1;\n  border-bottom-color: #959da5;\n  border-radius: 0;\n  box-shadow: inset 0 -1px 0 #959da5;\n}\n\n.gitment-markdown :checked+.radio-label {\n  position: relative;\n  z-index: 1;\n  border-color: #0366d6;\n}\n\n.gitment-markdown .task-list-item {\n  list-style-type: none;\n}\n\n.gitment-markdown .task-list-item+.task-list-item {\n  margin-top: 3px;\n}\n\n.gitment-markdown .task-list-item input {\n  margin: 0 0.2em 0.25em -1.6em;\n  vertical-align: middle;\n}\n\n.gitment-markdown hr {\n  border-bottom-color: #eee;\n}"},{"_content":"var Gitmint =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar LS_ACCESS_TOKEN_KEY = exports.LS_ACCESS_TOKEN_KEY = 'gitment-comments-token';\nvar LS_USER_KEY = exports.LS_USER_KEY = 'gitment-user-info';\n\nvar NOT_INITIALIZED_ERROR = exports.NOT_INITIALIZED_ERROR = new Error('Comments Not Initialized');\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/** MobX - (c) Michel Weststrate 2015, 2016 - MIT Licensed */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n} || function (d, b) {\n    for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n};\n\nfunction __extends(d, b) {\n    extendStatics(d, b);\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n/**\n * Anything that can be used to _store_ state is an Atom in mobx. Atoms have two important jobs\n *\n * 1) detect when they are being _used_ and report this (using reportObserved). This allows mobx to make the connection between running functions and the data they used\n * 2) they should notify mobx whenever they have _changed_. This way mobx can re-run any functions (derivations) that are using this atom.\n */\nvar BaseAtom = function () {\n    /**\n     * Create a new atom. For debugging purposes it is recommended to give it a name.\n     * The onBecomeObserved and onBecomeUnobserved callbacks can be used for resource management.\n     */\n    function BaseAtom(name) {\n        if (name === void 0) {\n            name = \"Atom@\" + getNextId();\n        }\n        this.name = name;\n        this.isPendingUnobservation = true; // for effective unobserving. BaseAtom has true, for extra optimization, so its onBecomeUnobserved never gets called, because it's not needed\n        this.observers = [];\n        this.observersIndexes = {};\n        this.diffValue = 0;\n        this.lastAccessedBy = 0;\n        this.lowestObserverState = IDerivationState.NOT_TRACKING;\n    }\n    BaseAtom.prototype.onBecomeUnobserved = function () {\n        // noop\n    };\n    /**\n     * Invoke this method to notify mobx that your atom has been used somehow.\n     */\n    BaseAtom.prototype.reportObserved = function () {\n        reportObserved(this);\n    };\n    /**\n     * Invoke this method _after_ this method has changed to signal mobx that all its observers should invalidate.\n     */\n    BaseAtom.prototype.reportChanged = function () {\n        startBatch();\n        propagateChanged(this);\n        endBatch();\n    };\n    BaseAtom.prototype.toString = function () {\n        return this.name;\n    };\n    return BaseAtom;\n}();\nvar Atom = function (_super) {\n    __extends(Atom, _super);\n    /**\n     * Create a new atom. For debugging purposes it is recommended to give it a name.\n     * The onBecomeObserved and onBecomeUnobserved callbacks can be used for resource management.\n     */\n    function Atom(name, onBecomeObservedHandler, onBecomeUnobservedHandler) {\n        if (name === void 0) {\n            name = \"Atom@\" + getNextId();\n        }\n        if (onBecomeObservedHandler === void 0) {\n            onBecomeObservedHandler = noop;\n        }\n        if (onBecomeUnobservedHandler === void 0) {\n            onBecomeUnobservedHandler = noop;\n        }\n        var _this = _super.call(this, name) || this;\n        _this.name = name;\n        _this.onBecomeObservedHandler = onBecomeObservedHandler;\n        _this.onBecomeUnobservedHandler = onBecomeUnobservedHandler;\n        _this.isPendingUnobservation = false; // for effective unobserving.\n        _this.isBeingTracked = false;\n        return _this;\n    }\n    Atom.prototype.reportObserved = function () {\n        startBatch();\n        _super.prototype.reportObserved.call(this);\n        if (!this.isBeingTracked) {\n            this.isBeingTracked = true;\n            this.onBecomeObservedHandler();\n        }\n        endBatch();\n        return !!globalState.trackingDerivation;\n        // return doesn't really give useful info, because it can be as well calling computed which calls atom (no reactions)\n        // also it could not trigger when calculating reaction dependent on Atom because Atom's value was cached by computed called by given reaction.\n    };\n    Atom.prototype.onBecomeUnobserved = function () {\n        this.isBeingTracked = false;\n        this.onBecomeUnobservedHandler();\n    };\n    return Atom;\n}(BaseAtom);\nvar isAtom = createInstanceofPredicate(\"Atom\", BaseAtom);\n\nfunction hasInterceptors(interceptable) {\n    return interceptable.interceptors && interceptable.interceptors.length > 0;\n}\nfunction registerInterceptor(interceptable, handler) {\n    var interceptors = interceptable.interceptors || (interceptable.interceptors = []);\n    interceptors.push(handler);\n    return once(function () {\n        var idx = interceptors.indexOf(handler);\n        if (idx !== -1) interceptors.splice(idx, 1);\n    });\n}\nfunction interceptChange(interceptable, change) {\n    var prevU = untrackedStart();\n    try {\n        var interceptors = interceptable.interceptors;\n        if (interceptors) for (var i = 0, l = interceptors.length; i < l; i++) {\n            change = interceptors[i](change);\n            invariant(!change || change.type, \"Intercept handlers should return nothing or a change object\");\n            if (!change) break;\n        }\n        return change;\n    } finally {\n        untrackedEnd(prevU);\n    }\n}\n\nfunction hasListeners(listenable) {\n    return listenable.changeListeners && listenable.changeListeners.length > 0;\n}\nfunction registerListener(listenable, handler) {\n    var listeners = listenable.changeListeners || (listenable.changeListeners = []);\n    listeners.push(handler);\n    return once(function () {\n        var idx = listeners.indexOf(handler);\n        if (idx !== -1) listeners.splice(idx, 1);\n    });\n}\nfunction notifyListeners(listenable, change) {\n    var prevU = untrackedStart();\n    var listeners = listenable.changeListeners;\n    if (!listeners) return;\n    listeners = listeners.slice();\n    for (var i = 0, l = listeners.length; i < l; i++) {\n        listeners[i](change);\n    }\n    untrackedEnd(prevU);\n}\n\nfunction isSpyEnabled() {\n    return !!globalState.spyListeners.length;\n}\nfunction spyReport(event) {\n    if (!globalState.spyListeners.length) return;\n    var listeners = globalState.spyListeners;\n    for (var i = 0, l = listeners.length; i < l; i++) {\n        listeners[i](event);\n    }\n}\nfunction spyReportStart(event) {\n    var change = objectAssign({}, event, { spyReportStart: true });\n    spyReport(change);\n}\nvar END_EVENT = { spyReportEnd: true };\nfunction spyReportEnd(change) {\n    if (change) spyReport(objectAssign({}, change, END_EVENT));else spyReport(END_EVENT);\n}\nfunction spy(listener) {\n    globalState.spyListeners.push(listener);\n    return once(function () {\n        var idx = globalState.spyListeners.indexOf(listener);\n        if (idx !== -1) globalState.spyListeners.splice(idx, 1);\n    });\n}\n\nfunction iteratorSymbol() {\n    return typeof Symbol === \"function\" && Symbol.iterator || \"@@iterator\";\n}\nvar IS_ITERATING_MARKER = \"__$$iterating\";\nfunction arrayAsIterator(array) {\n    // returning an array for entries(), values() etc for maps was a mis-interpretation of the specs..,\n    // yet it is quite convenient to be able to use the response both as array directly and as iterator\n    // it is suboptimal, but alas...\n    invariant(array[IS_ITERATING_MARKER] !== true, \"Illegal state: cannot recycle array as iterator\");\n    addHiddenFinalProp(array, IS_ITERATING_MARKER, true);\n    var idx = -1;\n    addHiddenFinalProp(array, \"next\", function next() {\n        idx++;\n        return {\n            done: idx >= this.length,\n            value: idx < this.length ? this[idx] : undefined\n        };\n    });\n    return array;\n}\nfunction declareIterator(prototType, iteratorFactory) {\n    addHiddenFinalProp(prototType, iteratorSymbol(), iteratorFactory);\n}\n\nvar MAX_SPLICE_SIZE = 10000; // See e.g. https://github.com/mobxjs/mobx/issues/859\n// Detects bug in safari 9.1.1 (or iOS 9 safari mobile). See #364\nvar safariPrototypeSetterInheritanceBug = function () {\n    var v = false;\n    var p = {};\n    Object.defineProperty(p, \"0\", { set: function set() {\n            v = true;\n        } });\n    Object.create(p)[\"0\"] = 1;\n    return v === false;\n}();\n/**\n * This array buffer contains two lists of properties, so that all arrays\n * can recycle their property definitions, which significantly improves performance of creating\n * properties on the fly.\n */\nvar OBSERVABLE_ARRAY_BUFFER_SIZE = 0;\n// Typescript workaround to make sure ObservableArray extends Array\nvar StubArray = function () {\n    function StubArray() {}\n    return StubArray;\n}();\nfunction inherit(ctor, proto) {\n    if (typeof Object[\"setPrototypeOf\"] !== \"undefined\") {\n        Object[\"setPrototypeOf\"](ctor.prototype, proto);\n    } else if (typeof ctor.prototype.__proto__ !== \"undefined\") {\n        ctor.prototype.__proto__ = proto;\n    } else {\n        ctor[\"prototype\"] = proto;\n    }\n}\ninherit(StubArray, Array.prototype);\nvar ObservableArrayAdministration = function () {\n    function ObservableArrayAdministration(name, enhancer, array, owned) {\n        this.array = array;\n        this.owned = owned;\n        this.values = [];\n        this.lastKnownLength = 0;\n        this.interceptors = null;\n        this.changeListeners = null;\n        this.atom = new BaseAtom(name || \"ObservableArray@\" + getNextId());\n        this.enhancer = function (newV, oldV) {\n            return enhancer(newV, oldV, name + \"[..]\");\n        };\n    }\n    ObservableArrayAdministration.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) return this.dehancer(value);\n        return value;\n    };\n    ObservableArrayAdministration.prototype.dehanceValues = function (values) {\n        if (this.dehancer !== undefined) return values.map(this.dehancer);\n        return values;\n    };\n    ObservableArrayAdministration.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableArrayAdministration.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately === void 0) {\n            fireImmediately = false;\n        }\n        if (fireImmediately) {\n            listener({\n                object: this.array,\n                type: \"splice\",\n                index: 0,\n                added: this.values.slice(),\n                addedCount: this.values.length,\n                removed: [],\n                removedCount: 0\n            });\n        }\n        return registerListener(this, listener);\n    };\n    ObservableArrayAdministration.prototype.getArrayLength = function () {\n        this.atom.reportObserved();\n        return this.values.length;\n    };\n    ObservableArrayAdministration.prototype.setArrayLength = function (newLength) {\n        if (typeof newLength !== \"number\" || newLength < 0) throw new Error(\"[mobx.array] Out of range: \" + newLength);\n        var currentLength = this.values.length;\n        if (newLength === currentLength) return;else if (newLength > currentLength) {\n            var newItems = new Array(newLength - currentLength);\n            for (var i = 0; i < newLength - currentLength; i++) {\n                newItems[i] = undefined;\n            } // No Array.fill everywhere...\n            this.spliceWithArray(currentLength, 0, newItems);\n        } else this.spliceWithArray(newLength, currentLength - newLength);\n    };\n    // adds / removes the necessary numeric properties to this object\n    ObservableArrayAdministration.prototype.updateArrayLength = function (oldLength, delta) {\n        if (oldLength !== this.lastKnownLength) throw new Error(\"[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?\");\n        this.lastKnownLength += delta;\n        if (delta > 0 && oldLength + delta + 1 > OBSERVABLE_ARRAY_BUFFER_SIZE) reserveArrayBuffer(oldLength + delta + 1);\n    };\n    ObservableArrayAdministration.prototype.spliceWithArray = function (index, deleteCount, newItems) {\n        var _this = this;\n        checkIfStateModificationsAreAllowed(this.atom);\n        var length = this.values.length;\n        if (index === undefined) index = 0;else if (index > length) index = length;else if (index < 0) index = Math.max(0, length + index);\n        if (arguments.length === 1) deleteCount = length - index;else if (deleteCount === undefined || deleteCount === null) deleteCount = 0;else deleteCount = Math.max(0, Math.min(deleteCount, length - index));\n        if (newItems === undefined) newItems = [];\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                object: this.array,\n                type: \"splice\",\n                index: index,\n                removedCount: deleteCount,\n                added: newItems\n            });\n            if (!change) return EMPTY_ARRAY;\n            deleteCount = change.removedCount;\n            newItems = change.added;\n        }\n        newItems = newItems.map(function (v) {\n            return _this.enhancer(v, undefined);\n        });\n        var lengthDelta = newItems.length - deleteCount;\n        this.updateArrayLength(length, lengthDelta); // create or remove new entries\n        var res = this.spliceItemsIntoValues(index, deleteCount, newItems);\n        if (deleteCount !== 0 || newItems.length !== 0) this.notifyArraySplice(index, newItems, res);\n        return this.dehanceValues(res);\n    };\n    ObservableArrayAdministration.prototype.spliceItemsIntoValues = function (index, deleteCount, newItems) {\n        if (newItems.length < MAX_SPLICE_SIZE) {\n            return (_a = this.values).splice.apply(_a, [index, deleteCount].concat(newItems));\n        } else {\n            var res = this.values.slice(index, index + deleteCount);\n            this.values = this.values.slice(0, index).concat(newItems, this.values.slice(index + deleteCount));\n            return res;\n        }\n        var _a;\n    };\n    ObservableArrayAdministration.prototype.notifyArrayChildUpdate = function (index, newValue, oldValue) {\n        var notifySpy = !this.owned && isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy ? {\n            object: this.array,\n            type: \"update\",\n            index: index, newValue: newValue, oldValue: oldValue\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        this.atom.reportChanged();\n        if (notify) notifyListeners(this, change);\n        if (notifySpy) spyReportEnd();\n    };\n    ObservableArrayAdministration.prototype.notifyArraySplice = function (index, added, removed) {\n        var notifySpy = !this.owned && isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy ? {\n            object: this.array,\n            type: \"splice\",\n            index: index, removed: removed, added: added,\n            removedCount: removed.length,\n            addedCount: added.length\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        this.atom.reportChanged();\n        // conform: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/observe\n        if (notify) notifyListeners(this, change);\n        if (notifySpy) spyReportEnd();\n    };\n    return ObservableArrayAdministration;\n}();\nvar ObservableArray = function (_super) {\n    __extends(ObservableArray, _super);\n    function ObservableArray(initialValues, enhancer, name, owned) {\n        if (name === void 0) {\n            name = \"ObservableArray@\" + getNextId();\n        }\n        if (owned === void 0) {\n            owned = false;\n        }\n        var _this = _super.call(this) || this;\n        var adm = new ObservableArrayAdministration(name, enhancer, _this, owned);\n        addHiddenFinalProp(_this, \"$mobx\", adm);\n        if (initialValues && initialValues.length) {\n            _this.spliceWithArray(0, 0, initialValues);\n        }\n        if (safariPrototypeSetterInheritanceBug) {\n            // Seems that Safari won't use numeric prototype setter untill any * numeric property is\n            // defined on the instance. After that it works fine, even if this property is deleted.\n            Object.defineProperty(adm.array, \"0\", ENTRY_0);\n        }\n        return _this;\n    }\n    ObservableArray.prototype.intercept = function (handler) {\n        return this.$mobx.intercept(handler);\n    };\n    ObservableArray.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately === void 0) {\n            fireImmediately = false;\n        }\n        return this.$mobx.observe(listener, fireImmediately);\n    };\n    ObservableArray.prototype.clear = function () {\n        return this.splice(0);\n    };\n    ObservableArray.prototype.concat = function () {\n        var arrays = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            arrays[_i] = arguments[_i];\n        }\n        this.$mobx.atom.reportObserved();\n        return Array.prototype.concat.apply(this.peek(), arrays.map(function (a) {\n            return isObservableArray(a) ? a.peek() : a;\n        }));\n    };\n    ObservableArray.prototype.replace = function (newItems) {\n        return this.$mobx.spliceWithArray(0, this.$mobx.values.length, newItems);\n    };\n    /**\n     * Converts this array back to a (shallow) javascript structure.\n     * For a deep clone use mobx.toJS\n     */\n    ObservableArray.prototype.toJS = function () {\n        return this.slice();\n    };\n    ObservableArray.prototype.toJSON = function () {\n        // Used by JSON.stringify\n        return this.toJS();\n    };\n    ObservableArray.prototype.peek = function () {\n        this.$mobx.atom.reportObserved();\n        return this.$mobx.dehanceValues(this.$mobx.values);\n    };\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n    ObservableArray.prototype.find = function (predicate, thisArg, fromIndex) {\n        if (fromIndex === void 0) {\n            fromIndex = 0;\n        }\n        var idx = this.findIndex.apply(this, arguments);\n        return idx === -1 ? undefined : this.get(idx);\n    };\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\n    ObservableArray.prototype.findIndex = function (predicate, thisArg, fromIndex) {\n        if (fromIndex === void 0) {\n            fromIndex = 0;\n        }\n        var items = this.peek(),\n            l = items.length;\n        for (var i = fromIndex; i < l; i++) {\n            if (predicate.call(thisArg, items[i], i, this)) return i;\n        }return -1;\n    };\n    /*\n        functions that do alter the internal structure of the array, (based on lib.es6.d.ts)\n        since these functions alter the inner structure of the array, the have side effects.\n        Because the have side effects, they should not be used in computed function,\n        and for that reason the do not call dependencyState.notifyObserved\n        */\n    ObservableArray.prototype.splice = function (index, deleteCount) {\n        var newItems = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            newItems[_i - 2] = arguments[_i];\n        }\n        switch (arguments.length) {\n            case 0:\n                return [];\n            case 1:\n                return this.$mobx.spliceWithArray(index);\n            case 2:\n                return this.$mobx.spliceWithArray(index, deleteCount);\n        }\n        return this.$mobx.spliceWithArray(index, deleteCount, newItems);\n    };\n    ObservableArray.prototype.spliceWithArray = function (index, deleteCount, newItems) {\n        return this.$mobx.spliceWithArray(index, deleteCount, newItems);\n    };\n    ObservableArray.prototype.push = function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var adm = this.$mobx;\n        adm.spliceWithArray(adm.values.length, 0, items);\n        return adm.values.length;\n    };\n    ObservableArray.prototype.pop = function () {\n        return this.splice(Math.max(this.$mobx.values.length - 1, 0), 1)[0];\n    };\n    ObservableArray.prototype.shift = function () {\n        return this.splice(0, 1)[0];\n    };\n    ObservableArray.prototype.unshift = function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var adm = this.$mobx;\n        adm.spliceWithArray(0, 0, items);\n        return adm.values.length;\n    };\n    ObservableArray.prototype.reverse = function () {\n        // reverse by default mutates in place before returning the result\n        // which makes it both a 'derivation' and a 'mutation'.\n        // so we deviate from the default and just make it an dervitation\n        var clone = this.slice();\n        return clone.reverse.apply(clone, arguments);\n    };\n    ObservableArray.prototype.sort = function (compareFn) {\n        // sort by default mutates in place before returning the result\n        // which goes against all good practices. Let's not change the array in place!\n        var clone = this.slice();\n        return clone.sort.apply(clone, arguments);\n    };\n    ObservableArray.prototype.remove = function (value) {\n        var idx = this.$mobx.dehanceValues(this.$mobx.values).indexOf(value);\n        if (idx > -1) {\n            this.splice(idx, 1);\n            return true;\n        }\n        return false;\n    };\n    ObservableArray.prototype.move = function (fromIndex, toIndex) {\n        function checkIndex(index) {\n            if (index < 0) {\n                throw new Error(\"[mobx.array] Index out of bounds: \" + index + \" is negative\");\n            }\n            var length = this.$mobx.values.length;\n            if (index >= length) {\n                throw new Error(\"[mobx.array] Index out of bounds: \" + index + \" is not smaller than \" + length);\n            }\n        }\n        checkIndex.call(this, fromIndex);\n        checkIndex.call(this, toIndex);\n        if (fromIndex === toIndex) {\n            return;\n        }\n        var oldItems = this.$mobx.values;\n        var newItems;\n        if (fromIndex < toIndex) {\n            newItems = oldItems.slice(0, fromIndex).concat(oldItems.slice(fromIndex + 1, toIndex + 1), [oldItems[fromIndex]], oldItems.slice(toIndex + 1));\n        } else {\n            newItems = oldItems.slice(0, toIndex).concat([oldItems[fromIndex]], oldItems.slice(toIndex, fromIndex), oldItems.slice(fromIndex + 1));\n        }\n        this.replace(newItems);\n    };\n    // See #734, in case property accessors are unreliable...\n    ObservableArray.prototype.get = function (index) {\n        var impl = this.$mobx;\n        if (impl) {\n            if (index < impl.values.length) {\n                impl.atom.reportObserved();\n                return impl.dehanceValue(impl.values[index]);\n            }\n            console.warn(\"[mobx.array] Attempt to read an array index (\" + index + \") that is out of bounds (\" + impl.values.length + \"). Please check length first. Out of bound indices will not be tracked by MobX\");\n        }\n        return undefined;\n    };\n    // See #734, in case property accessors are unreliable...\n    ObservableArray.prototype.set = function (index, newValue) {\n        var adm = this.$mobx;\n        var values = adm.values;\n        if (index < values.length) {\n            // update at index in range\n            checkIfStateModificationsAreAllowed(adm.atom);\n            var oldValue = values[index];\n            if (hasInterceptors(adm)) {\n                var change = interceptChange(adm, {\n                    type: \"update\",\n                    object: this,\n                    index: index, newValue: newValue\n                });\n                if (!change) return;\n                newValue = change.newValue;\n            }\n            newValue = adm.enhancer(newValue, oldValue);\n            var changed = newValue !== oldValue;\n            if (changed) {\n                values[index] = newValue;\n                adm.notifyArrayChildUpdate(index, newValue, oldValue);\n            }\n        } else if (index === values.length) {\n            // add a new item\n            adm.spliceWithArray(index, 0, [newValue]);\n        } else {\n            // out of bounds\n            throw new Error(\"[mobx.array] Index out of bounds, \" + index + \" is larger than \" + values.length);\n        }\n    };\n    return ObservableArray;\n}(StubArray);\ndeclareIterator(ObservableArray.prototype, function () {\n    return arrayAsIterator(this.slice());\n});\nObject.defineProperty(ObservableArray.prototype, \"length\", {\n    enumerable: false,\n    configurable: true,\n    get: function get() {\n        return this.$mobx.getArrayLength();\n    },\n    set: function set(newLength) {\n        this.$mobx.setArrayLength(newLength);\n    }\n});\n/**\n * Wrap function from prototype\n */\n[\"every\", \"filter\", \"forEach\", \"indexOf\", \"join\", \"lastIndexOf\", \"map\", \"reduce\", \"reduceRight\", \"slice\", \"some\", \"toString\", \"toLocaleString\"].forEach(function (funcName) {\n    var baseFunc = Array.prototype[funcName];\n    invariant(typeof baseFunc === \"function\", \"Base function not defined on Array prototype: '\" + funcName + \"'\");\n    addHiddenProp(ObservableArray.prototype, funcName, function () {\n        return baseFunc.apply(this.peek(), arguments);\n    });\n});\n/**\n * We don't want those to show up in `for (const key in ar)` ...\n */\nmakeNonEnumerable(ObservableArray.prototype, [\"constructor\", \"intercept\", \"observe\", \"clear\", \"concat\", \"get\", \"replace\", \"toJS\", \"toJSON\", \"peek\", \"find\", \"findIndex\", \"splice\", \"spliceWithArray\", \"push\", \"pop\", \"set\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"remove\", \"move\", \"toString\", \"toLocaleString\"]);\n// See #364\nvar ENTRY_0 = createArrayEntryDescriptor(0);\nfunction createArrayEntryDescriptor(index) {\n    return {\n        enumerable: false,\n        configurable: false,\n        get: function get() {\n            // TODO: Check `this`?, see #752?\n            return this.get(index);\n        },\n        set: function set(value) {\n            this.set(index, value);\n        }\n    };\n}\nfunction createArrayBufferItem(index) {\n    Object.defineProperty(ObservableArray.prototype, \"\" + index, createArrayEntryDescriptor(index));\n}\nfunction reserveArrayBuffer(max) {\n    for (var index = OBSERVABLE_ARRAY_BUFFER_SIZE; index < max; index++) {\n        createArrayBufferItem(index);\n    }OBSERVABLE_ARRAY_BUFFER_SIZE = max;\n}\nreserveArrayBuffer(1000);\nvar isObservableArrayAdministration = createInstanceofPredicate(\"ObservableArrayAdministration\", ObservableArrayAdministration);\nfunction isObservableArray(thing) {\n    return isObject(thing) && isObservableArrayAdministration(thing.$mobx);\n}\n\nvar UNCHANGED = {};\nvar ObservableValue = function (_super) {\n    __extends(ObservableValue, _super);\n    function ObservableValue(value, enhancer, name, notifySpy) {\n        if (name === void 0) {\n            name = \"ObservableValue@\" + getNextId();\n        }\n        if (notifySpy === void 0) {\n            notifySpy = true;\n        }\n        var _this = _super.call(this, name) || this;\n        _this.enhancer = enhancer;\n        _this.hasUnreportedChange = false;\n        _this.dehancer = undefined;\n        _this.value = enhancer(value, undefined, name);\n        if (notifySpy && isSpyEnabled()) {\n            // only notify spy if this is a stand-alone observable\n            spyReport({ type: \"create\", object: _this, newValue: _this.value });\n        }\n        return _this;\n    }\n    ObservableValue.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) return this.dehancer(value);\n        return value;\n    };\n    ObservableValue.prototype.set = function (newValue) {\n        var oldValue = this.value;\n        newValue = this.prepareNewValue(newValue);\n        if (newValue !== UNCHANGED) {\n            var notifySpy = isSpyEnabled();\n            if (notifySpy) {\n                spyReportStart({\n                    type: \"update\",\n                    object: this,\n                    newValue: newValue, oldValue: oldValue\n                });\n            }\n            this.setNewValue(newValue);\n            if (notifySpy) spyReportEnd();\n        }\n    };\n    ObservableValue.prototype.prepareNewValue = function (newValue) {\n        checkIfStateModificationsAreAllowed(this);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, { object: this, type: \"update\", newValue: newValue });\n            if (!change) return UNCHANGED;\n            newValue = change.newValue;\n        }\n        // apply modifier\n        newValue = this.enhancer(newValue, this.value, this.name);\n        return this.value !== newValue ? newValue : UNCHANGED;\n    };\n    ObservableValue.prototype.setNewValue = function (newValue) {\n        var oldValue = this.value;\n        this.value = newValue;\n        this.reportChanged();\n        if (hasListeners(this)) {\n            notifyListeners(this, {\n                type: \"update\",\n                object: this,\n                newValue: newValue, oldValue: oldValue\n            });\n        }\n    };\n    ObservableValue.prototype.get = function () {\n        this.reportObserved();\n        return this.dehanceValue(this.value);\n    };\n    ObservableValue.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableValue.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately) listener({\n            object: this,\n            type: \"update\",\n            newValue: this.value,\n            oldValue: undefined\n        });\n        return registerListener(this, listener);\n    };\n    ObservableValue.prototype.toJSON = function () {\n        return this.get();\n    };\n    ObservableValue.prototype.toString = function () {\n        return this.name + \"[\" + this.value + \"]\";\n    };\n    ObservableValue.prototype.valueOf = function () {\n        return toPrimitive(this.get());\n    };\n    return ObservableValue;\n}(BaseAtom);\nObservableValue.prototype[primitiveSymbol()] = ObservableValue.prototype.valueOf;\nvar isObservableValue = createInstanceofPredicate(\"ObservableValue\", ObservableValue);\n\nvar messages = {\n    \"m001\": \"It is not allowed to assign new values to @action fields\",\n    \"m002\": \"`runInAction` expects a function\",\n    \"m003\": \"`runInAction` expects a function without arguments\",\n    \"m004\": \"autorun expects a function\",\n    \"m005\": \"Warning: attempted to pass an action to autorun. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.\",\n    \"m006\": \"Warning: attempted to pass an action to autorunAsync. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.\",\n    \"m007\": \"reaction only accepts 2 or 3 arguments. If migrating from MobX 2, please provide an options object\",\n    \"m008\": \"wrapping reaction expression in `asReference` is no longer supported, use options object instead\",\n    \"m009\": \"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'. It looks like it was used on a property.\",\n    \"m010\": \"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'\",\n    \"m011\": \"First argument to `computed` should be an expression. If using computed as decorator, don't pass it arguments\",\n    \"m012\": \"computed takes one or two arguments if used as function\",\n    \"m013\": \"[mobx.expr] 'expr' should only be used inside other reactive functions.\",\n    \"m014\": \"extendObservable expected 2 or more arguments\",\n    \"m015\": \"extendObservable expects an object as first argument\",\n    \"m016\": \"extendObservable should not be used on maps, use map.merge instead\",\n    \"m017\": \"all arguments of extendObservable should be objects\",\n    \"m018\": \"extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540\",\n    \"m019\": \"[mobx.isObservable] isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.\",\n    \"m020\": \"modifiers can only be used for individual object properties\",\n    \"m021\": \"observable expects zero or one arguments\",\n    \"m022\": \"@observable can not be used on getters, use @computed instead\",\n    \"m023\": \"Using `transaction` is deprecated, use `runInAction` or `(@)action` instead.\",\n    \"m024\": \"whyRun() can only be used if a derivation is active, or by passing an computed value / reaction explicitly. If you invoked whyRun from inside a computation; the computation is currently suspended but re-evaluating because somebody requested its value.\",\n    \"m025\": \"whyRun can only be used on reactions and computed values\",\n    \"m026\": \"`action` can only be invoked on functions\",\n    \"m028\": \"It is not allowed to set `useStrict` when a derivation is running\",\n    \"m029\": \"INTERNAL ERROR only onBecomeUnobserved shouldn't be called twice in a row\",\n    \"m030a\": \"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: \",\n    \"m030b\": \"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: \",\n    \"m031\": \"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: \",\n    \"m032\": \"* This computation is suspended (not in use by any reaction) and won't run automatically.\\n\tDidn't expect this computation to be suspended at this point?\\n\t  1. Make sure this computation is used by a reaction (reaction, autorun, observer).\\n\t  2. Check whether you are using this computation synchronously (in the same stack as they reaction that needs it).\",\n    \"m033\": \"`observe` doesn't support the fire immediately property for observable maps.\",\n    \"m034\": \"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead\",\n    \"m035\": \"Cannot make the designated object observable; it is not extensible\",\n    \"m036\": \"It is not possible to get index atoms from arrays\",\n    \"m037\": \"Hi there! I'm sorry you have just run into an exception.\\nIf your debugger ends up here, know that some reaction (like the render() of an observer component, autorun or reaction)\\nthrew an exception and that mobx caught it, to avoid that it brings the rest of your application down.\\nThe original cause of the exception (the code that caused this reaction to run (again)), is still in the stack.\\n\\nHowever, more interesting is the actual stack trace of the error itself.\\nHopefully the error is an instanceof Error, because in that case you can inspect the original stack of the error from where it was thrown.\\nSee `error.stack` property, or press the very subtle \\\"(...)\\\" link you see near the console.error message that probably brought you here.\\nThat stack is more interesting than the stack of this console.error itself.\\n\\nIf the exception you see is an exception you created yourself, make sure to use `throw new Error(\\\"Oops\\\")` instead of `throw \\\"Oops\\\"`,\\nbecause the javascript environment will only preserve the original stack trace in the first form.\\n\\nYou can also make sure the debugger pauses the next time this very same exception is thrown by enabling \\\"Pause on caught exception\\\".\\n(Note that it might pause on many other, unrelated exception as well).\\n\\nIf that all doesn't help you out, feel free to open an issue https://github.com/mobxjs/mobx/issues!\\n\",\n    \"m038\": \"Missing items in this list?\\n    1. Check whether all used values are properly marked as observable (use isObservable to verify)\\n    2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.\\n\"\n};\nfunction getMessage(id) {\n    return messages[id];\n}\n\nfunction createAction(actionName, fn) {\n    invariant(typeof fn === \"function\", getMessage(\"m026\"));\n    invariant(typeof actionName === \"string\" && actionName.length > 0, \"actions should have valid names, got: '\" + actionName + \"'\");\n    var res = function res() {\n        return executeAction(actionName, fn, this, arguments);\n    };\n    res.originalFn = fn;\n    res.isMobxAction = true;\n    return res;\n}\nfunction executeAction(actionName, fn, scope, args) {\n    var runInfo = startAction(actionName, fn, scope, args);\n    try {\n        return fn.apply(scope, args);\n    } finally {\n        endAction(runInfo);\n    }\n}\nfunction startAction(actionName, fn, scope, args) {\n    var notifySpy = isSpyEnabled() && !!actionName;\n    var startTime = 0;\n    if (notifySpy) {\n        startTime = Date.now();\n        var l = args && args.length || 0;\n        var flattendArgs = new Array(l);\n        if (l > 0) for (var i = 0; i < l; i++) {\n            flattendArgs[i] = args[i];\n        }spyReportStart({\n            type: \"action\",\n            name: actionName,\n            fn: fn,\n            object: scope,\n            arguments: flattendArgs\n        });\n    }\n    var prevDerivation = untrackedStart();\n    startBatch();\n    var prevAllowStateChanges = allowStateChangesStart(true);\n    return {\n        prevDerivation: prevDerivation,\n        prevAllowStateChanges: prevAllowStateChanges,\n        notifySpy: notifySpy,\n        startTime: startTime\n    };\n}\nfunction endAction(runInfo) {\n    allowStateChangesEnd(runInfo.prevAllowStateChanges);\n    endBatch();\n    untrackedEnd(runInfo.prevDerivation);\n    if (runInfo.notifySpy) spyReportEnd({ time: Date.now() - runInfo.startTime });\n}\nfunction useStrict(strict) {\n    invariant(globalState.trackingDerivation === null, getMessage(\"m028\"));\n    globalState.strictMode = strict;\n    globalState.allowStateChanges = !strict;\n}\nfunction isStrictModeEnabled() {\n    return globalState.strictMode;\n}\nfunction allowStateChanges(allowStateChanges, func) {\n    // TODO: deprecate / refactor this function in next major\n    // Currently only used by `@observer`\n    // Proposed change: remove first param, rename to `forbidStateChanges`,\n    // require error callback instead of the hardcoded error message now used\n    // Use `inAction` instead of allowStateChanges in derivation.ts to check strictMode\n    var prev = allowStateChangesStart(allowStateChanges);\n    var res;\n    try {\n        res = func();\n    } finally {\n        allowStateChangesEnd(prev);\n    }\n    return res;\n}\nfunction allowStateChangesStart(allowStateChanges) {\n    var prev = globalState.allowStateChanges;\n    globalState.allowStateChanges = allowStateChanges;\n    return prev;\n}\nfunction allowStateChangesEnd(prev) {\n    globalState.allowStateChanges = prev;\n}\n\n/**\n * Constructs a decorator, that normalizes the differences between\n * TypeScript and Babel. Mainly caused by the fact that legacy-decorator cannot assign\n * values during instance creation to properties that have a getter setter.\n *\n * - Sigh -\n *\n * Also takes care of the difference between @decorator field and @decorator(args) field, and different forms of values.\n * For performance (cpu and mem) reasons the properties are always defined on the prototype (at least initially).\n * This means that these properties despite being enumerable might not show up in Object.keys() (but they will show up in for...in loops).\n */\nfunction createClassPropertyDecorator(\n/**\n * This function is invoked once, when the property is added to a new instance.\n * When this happens is not strictly determined due to differences in TS and Babel:\n * Typescript: Usually when constructing the new instance\n * Babel, sometimes Typescript: during the first get / set\n * Both: when calling `runLazyInitializers(instance)`\n */\nonInitialize, _get, _set, enumerable,\n/**\n * Can this decorator invoked with arguments? e.g. @decorator(args)\n */\nallowCustomArguments) {\n    function classPropertyDecorator(target, key, descriptor, customArgs, argLen) {\n        if (argLen === void 0) {\n            argLen = 0;\n        }\n        invariant(allowCustomArguments || quacksLikeADecorator(arguments), \"This function is a decorator, but it wasn't invoked like a decorator\");\n        if (!descriptor) {\n            // typescript (except for getter / setters)\n            var newDescriptor = {\n                enumerable: enumerable,\n                configurable: true,\n                get: function get() {\n                    if (!this.__mobxInitializedProps || this.__mobxInitializedProps[key] !== true) typescriptInitializeProperty(this, key, undefined, onInitialize, customArgs, descriptor);\n                    return _get.call(this, key);\n                },\n                set: function set(v) {\n                    if (!this.__mobxInitializedProps || this.__mobxInitializedProps[key] !== true) {\n                        typescriptInitializeProperty(this, key, v, onInitialize, customArgs, descriptor);\n                    } else {\n                        _set.call(this, key, v);\n                    }\n                }\n            };\n            if (arguments.length < 3 || arguments.length === 5 && argLen < 3) {\n                // Typescript target is ES3, so it won't define property for us\n                // or using Reflect.decorate polyfill, which will return no descriptor\n                // (see https://github.com/mobxjs/mobx/issues/333)\n                Object.defineProperty(target, key, newDescriptor);\n            }\n            return newDescriptor;\n        } else {\n            // babel and typescript getter / setter props\n            if (!hasOwnProperty(target, \"__mobxLazyInitializers\")) {\n                addHiddenProp(target, \"__mobxLazyInitializers\", target.__mobxLazyInitializers && target.__mobxLazyInitializers.slice() || [] // support inheritance\n                );\n            }\n            var value_1 = descriptor.value,\n                initializer_1 = descriptor.initializer;\n            target.__mobxLazyInitializers.push(function (instance) {\n                onInitialize(instance, key, initializer_1 ? initializer_1.call(instance) : value_1, customArgs, descriptor);\n            });\n            return {\n                enumerable: enumerable, configurable: true,\n                get: function get() {\n                    if (this.__mobxDidRunLazyInitializers !== true) runLazyInitializers(this);\n                    return _get.call(this, key);\n                },\n                set: function set(v) {\n                    if (this.__mobxDidRunLazyInitializers !== true) runLazyInitializers(this);\n                    _set.call(this, key, v);\n                }\n            };\n        }\n    }\n    if (allowCustomArguments) {\n        /** If custom arguments are allowed, we should return a function that returns a decorator */\n        return function () {\n            /** Direct invocation: @decorator bla */\n            if (quacksLikeADecorator(arguments)) return classPropertyDecorator.apply(null, arguments);\n            /** Indirect invocation: @decorator(args) bla */\n            var outerArgs = arguments;\n            var argLen = arguments.length;\n            return function (target, key, descriptor) {\n                return classPropertyDecorator(target, key, descriptor, outerArgs, argLen);\n            };\n        };\n    }\n    return classPropertyDecorator;\n}\nfunction typescriptInitializeProperty(instance, key, v, onInitialize, customArgs, baseDescriptor) {\n    if (!hasOwnProperty(instance, \"__mobxInitializedProps\")) addHiddenProp(instance, \"__mobxInitializedProps\", {});\n    instance.__mobxInitializedProps[key] = true;\n    onInitialize(instance, key, v, customArgs, baseDescriptor);\n}\nfunction runLazyInitializers(instance) {\n    if (instance.__mobxDidRunLazyInitializers === true) return;\n    if (instance.__mobxLazyInitializers) {\n        addHiddenProp(instance, \"__mobxDidRunLazyInitializers\", true);\n        instance.__mobxDidRunLazyInitializers && instance.__mobxLazyInitializers.forEach(function (initializer) {\n            return initializer(instance);\n        });\n    }\n}\nfunction quacksLikeADecorator(args) {\n    return (args.length === 2 || args.length === 3) && typeof args[1] === \"string\";\n}\n\nvar actionFieldDecorator = createClassPropertyDecorator(function (target, key, value, args, originalDescriptor) {\n    var actionName = args && args.length === 1 ? args[0] : value.name || key || \"<unnamed action>\";\n    var wrappedAction = action(actionName, value);\n    addHiddenProp(target, key, wrappedAction);\n}, function (key) {\n    return this[key];\n}, function () {\n    invariant(false, getMessage(\"m001\"));\n}, false, true);\nvar boundActionDecorator = createClassPropertyDecorator(function (target, key, value) {\n    defineBoundAction(target, key, value);\n}, function (key) {\n    return this[key];\n}, function () {\n    invariant(false, getMessage(\"m001\"));\n}, false, false);\nvar action = function action(arg1, arg2, arg3, arg4) {\n    if (arguments.length === 1 && typeof arg1 === \"function\") return createAction(arg1.name || \"<unnamed action>\", arg1);\n    if (arguments.length === 2 && typeof arg2 === \"function\") return createAction(arg1, arg2);\n    if (arguments.length === 1 && typeof arg1 === \"string\") return namedActionDecorator(arg1);\n    return namedActionDecorator(arg2).apply(null, arguments);\n};\naction.bound = function boundAction(arg1, arg2, arg3) {\n    if (typeof arg1 === \"function\") {\n        var action_1 = createAction(\"<not yet bound action>\", arg1);\n        action_1.autoBind = true;\n        return action_1;\n    }\n    return boundActionDecorator.apply(null, arguments);\n};\nfunction namedActionDecorator(name) {\n    return function (target, prop, descriptor) {\n        if (descriptor && typeof descriptor.value === \"function\") {\n            // TypeScript @action method() { }. Defined on proto before being decorated\n            // Don't use the field decorator if we are just decorating a method\n            descriptor.value = createAction(name, descriptor.value);\n            descriptor.enumerable = false;\n            descriptor.configurable = true;\n            return descriptor;\n        }\n        // bound instance methods\n        return actionFieldDecorator(name).apply(this, arguments);\n    };\n}\nfunction runInAction(arg1, arg2, arg3) {\n    var actionName = typeof arg1 === \"string\" ? arg1 : arg1.name || \"<unnamed action>\";\n    var fn = typeof arg1 === \"function\" ? arg1 : arg2;\n    var scope = typeof arg1 === \"function\" ? arg2 : arg3;\n    invariant(typeof fn === \"function\", getMessage(\"m002\"));\n    invariant(fn.length === 0, getMessage(\"m003\"));\n    invariant(typeof actionName === \"string\" && actionName.length > 0, \"actions should have valid names, got: '\" + actionName + \"'\");\n    return executeAction(actionName, fn, scope, undefined);\n}\nfunction isAction(thing) {\n    return typeof thing === \"function\" && thing.isMobxAction === true;\n}\nfunction defineBoundAction(target, propertyName, fn) {\n    var res = function res() {\n        return executeAction(propertyName, fn, target, arguments);\n    };\n    res.isMobxAction = true;\n    addHiddenProp(target, propertyName, res);\n}\n\nfunction identityComparer(a, b) {\n    return a === b;\n}\nfunction structuralComparer(a, b) {\n    if (typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b)) {\n        return true;\n    }\n    return deepEqual(a, b);\n}\nfunction defaultComparer(a, b) {\n    if (typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b)) {\n        return true;\n    }\n    return identityComparer(a, b);\n}\nvar comparer = {\n    identity: identityComparer,\n    structural: structuralComparer,\n    default: defaultComparer\n};\n\nfunction autorun(arg1, arg2, arg3) {\n    var name, view, scope;\n    if (typeof arg1 === \"string\") {\n        name = arg1;\n        view = arg2;\n        scope = arg3;\n    } else {\n        name = arg1.name || \"Autorun@\" + getNextId();\n        view = arg1;\n        scope = arg2;\n    }\n    invariant(typeof view === \"function\", getMessage(\"m004\"));\n    invariant(isAction(view) === false, getMessage(\"m005\"));\n    if (scope) view = view.bind(scope);\n    var reaction = new Reaction(name, function () {\n        this.track(reactionRunner);\n    });\n    function reactionRunner() {\n        view(reaction);\n    }\n    reaction.schedule();\n    return reaction.getDisposer();\n}\nfunction when(arg1, arg2, arg3, arg4) {\n    var name, predicate, effect, scope;\n    if (typeof arg1 === \"string\") {\n        name = arg1;\n        predicate = arg2;\n        effect = arg3;\n        scope = arg4;\n    } else {\n        name = \"When@\" + getNextId();\n        predicate = arg1;\n        effect = arg2;\n        scope = arg3;\n    }\n    var disposer = autorun(name, function (r) {\n        if (predicate.call(scope)) {\n            r.dispose();\n            var prevUntracked = untrackedStart();\n            effect.call(scope);\n            untrackedEnd(prevUntracked);\n        }\n    });\n    return disposer;\n}\nfunction autorunAsync(arg1, arg2, arg3, arg4) {\n    var name, func, delay, scope;\n    if (typeof arg1 === \"string\") {\n        name = arg1;\n        func = arg2;\n        delay = arg3;\n        scope = arg4;\n    } else {\n        name = arg1.name || \"AutorunAsync@\" + getNextId();\n        func = arg1;\n        delay = arg2;\n        scope = arg3;\n    }\n    invariant(isAction(func) === false, getMessage(\"m006\"));\n    if (delay === void 0) delay = 1;\n    if (scope) func = func.bind(scope);\n    var isScheduled = false;\n    var r = new Reaction(name, function () {\n        if (!isScheduled) {\n            isScheduled = true;\n            setTimeout(function () {\n                isScheduled = false;\n                if (!r.isDisposed) r.track(reactionRunner);\n            }, delay);\n        }\n    });\n    function reactionRunner() {\n        func(r);\n    }\n    r.schedule();\n    return r.getDisposer();\n}\nfunction reaction(expression, effect, arg3) {\n    if (arguments.length > 3) {\n        fail(getMessage(\"m007\"));\n    }\n    if (isModifierDescriptor(expression)) {\n        fail(getMessage(\"m008\"));\n    }\n    var opts;\n    if ((typeof arg3 === \"undefined\" ? \"undefined\" : _typeof(arg3)) === \"object\") {\n        opts = arg3;\n    } else {\n        opts = {};\n    }\n    opts.name = opts.name || expression.name || effect.name || \"Reaction@\" + getNextId();\n    opts.fireImmediately = arg3 === true || opts.fireImmediately === true;\n    opts.delay = opts.delay || 0;\n    opts.compareStructural = opts.compareStructural || opts.struct || false;\n    effect = action(opts.name, opts.context ? effect.bind(opts.context) : effect);\n    if (opts.context) {\n        expression = expression.bind(opts.context);\n    }\n    var firstTime = true;\n    var isScheduled = false;\n    var value;\n    var equals = opts.equals ? opts.equals : opts.compareStructural || opts.struct ? comparer.structural : comparer.default;\n    var r = new Reaction(opts.name, function () {\n        if (firstTime || opts.delay < 1) {\n            reactionRunner();\n        } else if (!isScheduled) {\n            isScheduled = true;\n            setTimeout(function () {\n                isScheduled = false;\n                reactionRunner();\n            }, opts.delay);\n        }\n    });\n    function reactionRunner() {\n        if (r.isDisposed) return;\n        var changed = false;\n        r.track(function () {\n            var nextValue = expression(r);\n            changed = firstTime || !equals(value, nextValue);\n            value = nextValue;\n        });\n        if (firstTime && opts.fireImmediately) effect(value, r);\n        if (!firstTime && changed === true) effect(value, r);\n        if (firstTime) firstTime = false;\n    }\n    r.schedule();\n    return r.getDisposer();\n}\n\n/**\n * A node in the state dependency root that observes other nodes, and can be observed itself.\n *\n * ComputedValue will remember result of the computation for duration of a batch, or being observed\n * During this time it will recompute only when one of its direct dependencies changed,\n * but only when it is being accessed with `ComputedValue.get()`.\n *\n * Implementation description:\n * 1. First time it's being accessed it will compute and remember result\n *    give back remembered result until 2. happens\n * 2. First time any deep dependency change, propagate POSSIBLY_STALE to all observers, wait for 3.\n * 3. When it's being accessed, recompute if any shallow dependency changed.\n *    if result changed: propagate STALE to all observers, that were POSSIBLY_STALE from the last step.\n *    go to step 2. either way\n *\n * If at any point it's outside batch and it isn't observed: reset everything and go to 1.\n */\nvar ComputedValue = function () {\n    /**\n     * Create a new computed value based on a function expression.\n     *\n     * The `name` property is for debug purposes only.\n     *\n     * The `equals` property specifies the comparer function to use to determine if a newly produced\n     * value differs from the previous value. Two comparers are provided in the library; `defaultComparer`\n     * compares based on identity comparison (===), and `structualComparer` deeply compares the structure.\n     * Structural comparison can be convenient if you always produce an new aggregated object and\n     * don't want to notify observers if it is structurally the same.\n     * This is useful for working with vectors, mouse coordinates etc.\n     */\n    function ComputedValue(derivation, scope, equals, name, setter) {\n        this.derivation = derivation;\n        this.scope = scope;\n        this.equals = equals;\n        this.dependenciesState = IDerivationState.NOT_TRACKING;\n        this.observing = []; // nodes we are looking at. Our value depends on these nodes\n        this.newObserving = null; // during tracking it's an array with new observed observers\n        this.isPendingUnobservation = false;\n        this.observers = [];\n        this.observersIndexes = {};\n        this.diffValue = 0;\n        this.runId = 0;\n        this.lastAccessedBy = 0;\n        this.lowestObserverState = IDerivationState.UP_TO_DATE;\n        this.unboundDepsCount = 0;\n        this.__mapid = \"#\" + getNextId();\n        this.value = new CaughtException(null);\n        this.isComputing = false; // to check for cycles\n        this.isRunningSetter = false;\n        this.name = name || \"ComputedValue@\" + getNextId();\n        if (setter) this.setter = createAction(name + \"-setter\", setter);\n    }\n    ComputedValue.prototype.onBecomeStale = function () {\n        propagateMaybeChanged(this);\n    };\n    ComputedValue.prototype.onBecomeUnobserved = function () {\n        clearObserving(this);\n        this.value = undefined;\n    };\n    /**\n     * Returns the current value of this computed value.\n     * Will evaluate its computation first if needed.\n     */\n    ComputedValue.prototype.get = function () {\n        invariant(!this.isComputing, \"Cycle detected in computation \" + this.name, this.derivation);\n        if (globalState.inBatch === 0) {\n            // This is an minor optimization which could be omitted to simplify the code\n            // The computedValue is accessed outside of any mobx stuff. Batch observing should be enough and don't need\n            // tracking as it will never be called again inside this batch.\n            startBatch();\n            if (shouldCompute(this)) this.value = this.computeValue(false);\n            endBatch();\n        } else {\n            reportObserved(this);\n            if (shouldCompute(this)) if (this.trackAndCompute()) propagateChangeConfirmed(this);\n        }\n        var result = this.value;\n        if (isCaughtException(result)) throw result.cause;\n        return result;\n    };\n    ComputedValue.prototype.peek = function () {\n        var res = this.computeValue(false);\n        if (isCaughtException(res)) throw res.cause;\n        return res;\n    };\n    ComputedValue.prototype.set = function (value) {\n        if (this.setter) {\n            invariant(!this.isRunningSetter, \"The setter of computed value '\" + this.name + \"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?\");\n            this.isRunningSetter = true;\n            try {\n                this.setter.call(this.scope, value);\n            } finally {\n                this.isRunningSetter = false;\n            }\n        } else invariant(false, \"[ComputedValue '\" + this.name + \"'] It is not possible to assign a new value to a computed value.\");\n    };\n    ComputedValue.prototype.trackAndCompute = function () {\n        if (isSpyEnabled()) {\n            spyReport({\n                object: this.scope,\n                type: \"compute\",\n                fn: this.derivation\n            });\n        }\n        var oldValue = this.value;\n        var newValue = this.value = this.computeValue(true);\n        return isCaughtException(oldValue) || isCaughtException(newValue) || !this.equals(oldValue, newValue);\n    };\n    ComputedValue.prototype.computeValue = function (track) {\n        this.isComputing = true;\n        globalState.computationDepth++;\n        var res;\n        if (track) {\n            res = trackDerivedFunction(this, this.derivation, this.scope);\n        } else {\n            try {\n                res = this.derivation.call(this.scope);\n            } catch (e) {\n                res = new CaughtException(e);\n            }\n        }\n        globalState.computationDepth--;\n        this.isComputing = false;\n        return res;\n    };\n\n    ComputedValue.prototype.observe = function (listener, fireImmediately) {\n        var _this = this;\n        var firstTime = true;\n        var prevValue = undefined;\n        return autorun(function () {\n            var newValue = _this.get();\n            if (!firstTime || fireImmediately) {\n                var prevU = untrackedStart();\n                listener({\n                    type: \"update\",\n                    object: _this,\n                    newValue: newValue,\n                    oldValue: prevValue\n                });\n                untrackedEnd(prevU);\n            }\n            firstTime = false;\n            prevValue = newValue;\n        });\n    };\n    ComputedValue.prototype.toJSON = function () {\n        return this.get();\n    };\n    ComputedValue.prototype.toString = function () {\n        return this.name + \"[\" + this.derivation.toString() + \"]\";\n    };\n    ComputedValue.prototype.valueOf = function () {\n        return toPrimitive(this.get());\n    };\n\n    ComputedValue.prototype.whyRun = function () {\n        var isTracking = Boolean(globalState.trackingDerivation);\n        var observing = unique(this.isComputing ? this.newObserving : this.observing).map(function (dep) {\n            return dep.name;\n        });\n        var observers = unique(getObservers(this).map(function (dep) {\n            return dep.name;\n        }));\n        return \"\\nWhyRun? computation '\" + this.name + \"':\\n * Running because: \" + (isTracking ? \"[active] the value of this computation is needed by a reaction\" : this.isComputing ? \"[get] The value of this computed was requested outside a reaction\" : \"[idle] not running at the moment\") + \"\\n\" + (this.dependenciesState === IDerivationState.NOT_TRACKING ? getMessage(\"m032\") : \" * This computation will re-run if any of the following observables changes:\\n    \" + joinStrings(observing) + \"\\n    \" + (this.isComputing && isTracking ? \" (... or any observable accessed during the remainder of the current run)\" : \"\") + \"\\n\\t\" + getMessage(\"m038\") + \"\\n\\n  * If the outcome of this computation changes, the following observers will be re-run:\\n    \" + joinStrings(observers) + \"\\n\");\n    };\n    return ComputedValue;\n}();\nComputedValue.prototype[primitiveSymbol()] = ComputedValue.prototype.valueOf;\nvar isComputedValue = createInstanceofPredicate(\"ComputedValue\", ComputedValue);\n\nvar ObservableObjectAdministration = function () {\n    function ObservableObjectAdministration(target, name) {\n        this.target = target;\n        this.name = name;\n        this.values = {};\n        this.changeListeners = null;\n        this.interceptors = null;\n    }\n    /**\n        * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\n        * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\n        * for callback details\n        */\n    ObservableObjectAdministration.prototype.observe = function (callback, fireImmediately) {\n        invariant(fireImmediately !== true, \"`observe` doesn't support the fire immediately property for observable objects.\");\n        return registerListener(this, callback);\n    };\n    ObservableObjectAdministration.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    return ObservableObjectAdministration;\n}();\nfunction asObservableObject(target, name) {\n    if (isObservableObject(target)) return target.$mobx;\n    invariant(Object.isExtensible(target), getMessage(\"m035\"));\n    if (!isPlainObject(target)) name = (target.constructor.name || \"ObservableObject\") + \"@\" + getNextId();\n    if (!name) name = \"ObservableObject@\" + getNextId();\n    var adm = new ObservableObjectAdministration(target, name);\n    addHiddenFinalProp(target, \"$mobx\", adm);\n    return adm;\n}\nfunction defineObservablePropertyFromDescriptor(adm, propName, descriptor, defaultEnhancer) {\n    if (adm.values[propName]) {\n        // already observable property\n        invariant(\"value\" in descriptor, \"The property \" + propName + \" in \" + adm.name + \" is already observable, cannot redefine it as computed property\");\n        adm.target[propName] = descriptor.value; // the property setter will make 'value' reactive if needed.\n        return;\n    }\n    // not yet observable property\n    if (\"value\" in descriptor) {\n        // not a computed value\n        if (isModifierDescriptor(descriptor.value)) {\n            // x : ref(someValue)\n            var modifierDescriptor = descriptor.value;\n            defineObservableProperty(adm, propName, modifierDescriptor.initialValue, modifierDescriptor.enhancer);\n        } else if (isAction(descriptor.value) && descriptor.value.autoBind === true) {\n            defineBoundAction(adm.target, propName, descriptor.value.originalFn);\n        } else if (isComputedValue(descriptor.value)) {\n            // x: computed(someExpr)\n            defineComputedPropertyFromComputedValue(adm, propName, descriptor.value);\n        } else {\n            // x: someValue\n            defineObservableProperty(adm, propName, descriptor.value, defaultEnhancer);\n        }\n    } else {\n        // get x() { return 3 } set x(v) { }\n        defineComputedProperty(adm, propName, descriptor.get, descriptor.set, comparer.default, true);\n    }\n}\nfunction defineObservableProperty(adm, propName, newValue, enhancer) {\n    assertPropertyConfigurable(adm.target, propName);\n    if (hasInterceptors(adm)) {\n        var change = interceptChange(adm, {\n            object: adm.target,\n            name: propName,\n            type: \"add\",\n            newValue: newValue\n        });\n        if (!change) return;\n        newValue = change.newValue;\n    }\n    var observable = adm.values[propName] = new ObservableValue(newValue, enhancer, adm.name + \".\" + propName, false);\n    newValue = observable.value; // observableValue might have changed it\n    Object.defineProperty(adm.target, propName, generateObservablePropConfig(propName));\n    notifyPropertyAddition(adm, adm.target, propName, newValue);\n}\nfunction defineComputedProperty(adm, propName, getter, setter, equals, asInstanceProperty) {\n    if (asInstanceProperty) assertPropertyConfigurable(adm.target, propName);\n    adm.values[propName] = new ComputedValue(getter, adm.target, equals, adm.name + \".\" + propName, setter);\n    if (asInstanceProperty) {\n        Object.defineProperty(adm.target, propName, generateComputedPropConfig(propName));\n    }\n}\nfunction defineComputedPropertyFromComputedValue(adm, propName, computedValue) {\n    var name = adm.name + \".\" + propName;\n    computedValue.name = name;\n    if (!computedValue.scope) computedValue.scope = adm.target;\n    adm.values[propName] = computedValue;\n    Object.defineProperty(adm.target, propName, generateComputedPropConfig(propName));\n}\nvar observablePropertyConfigs = {};\nvar computedPropertyConfigs = {};\nfunction generateObservablePropConfig(propName) {\n    return observablePropertyConfigs[propName] || (observablePropertyConfigs[propName] = {\n        configurable: true,\n        enumerable: true,\n        get: function get() {\n            return this.$mobx.values[propName].get();\n        },\n        set: function set(v) {\n            setPropertyValue(this, propName, v);\n        }\n    });\n}\nfunction generateComputedPropConfig(propName) {\n    return computedPropertyConfigs[propName] || (computedPropertyConfigs[propName] = {\n        configurable: true,\n        enumerable: false,\n        get: function get() {\n            return this.$mobx.values[propName].get();\n        },\n        set: function set(v) {\n            return this.$mobx.values[propName].set(v);\n        }\n    });\n}\nfunction setPropertyValue(instance, name, newValue) {\n    var adm = instance.$mobx;\n    var observable = adm.values[name];\n    // intercept\n    if (hasInterceptors(adm)) {\n        var change = interceptChange(adm, {\n            type: \"update\",\n            object: instance,\n            name: name, newValue: newValue\n        });\n        if (!change) return;\n        newValue = change.newValue;\n    }\n    newValue = observable.prepareNewValue(newValue);\n    // notify spy & observers\n    if (newValue !== UNCHANGED) {\n        var notify = hasListeners(adm);\n        var notifySpy = isSpyEnabled();\n        var change = notify || notifySpy ? {\n            type: \"update\",\n            object: instance,\n            oldValue: observable.value,\n            name: name, newValue: newValue\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        observable.setNewValue(newValue);\n        if (notify) notifyListeners(adm, change);\n        if (notifySpy) spyReportEnd();\n    }\n}\nfunction notifyPropertyAddition(adm, object, name, newValue) {\n    var notify = hasListeners(adm);\n    var notifySpy = isSpyEnabled();\n    var change = notify || notifySpy ? {\n        type: \"add\",\n        object: object, name: name, newValue: newValue\n    } : null;\n    if (notifySpy) spyReportStart(change);\n    if (notify) notifyListeners(adm, change);\n    if (notifySpy) spyReportEnd();\n}\nvar isObservableObjectAdministration = createInstanceofPredicate(\"ObservableObjectAdministration\", ObservableObjectAdministration);\nfunction isObservableObject(thing) {\n    if (isObject(thing)) {\n        // Initializers run lazily when transpiling to babel, so make sure they are run...\n        runLazyInitializers(thing);\n        return isObservableObjectAdministration(thing.$mobx);\n    }\n    return false;\n}\n\n/**\n    * Returns true if the provided value is reactive.\n    * @param value object, function or array\n    * @param property if property is specified, checks whether value.property is reactive.\n    */\nfunction isObservable(value, property) {\n    if (value === null || value === undefined) return false;\n    if (property !== undefined) {\n        if (isObservableArray(value) || isObservableMap(value)) throw new Error(getMessage(\"m019\"));else if (isObservableObject(value)) {\n            var o = value.$mobx;\n            return o.values && !!o.values[property];\n        }\n        return false;\n    }\n    // For first check, see #701\n    return isObservableObject(value) || !!value.$mobx || isAtom(value) || isReaction(value) || isComputedValue(value);\n}\n\nfunction createDecoratorForEnhancer(enhancer) {\n    invariant(!!enhancer, \":(\");\n    return createClassPropertyDecorator(function (target, name, baseValue, _, baseDescriptor) {\n        assertPropertyConfigurable(target, name);\n        invariant(!baseDescriptor || !baseDescriptor.get, getMessage(\"m022\"));\n        var adm = asObservableObject(target, undefined);\n        defineObservableProperty(adm, name, baseValue, enhancer);\n    }, function (name) {\n        var observable = this.$mobx.values[name];\n        if (observable === undefined) return undefined;\n        return observable.get();\n    }, function (name, value) {\n        setPropertyValue(this, name, value);\n    }, true, false);\n}\n\nfunction extendObservable(target) {\n    var properties = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        properties[_i - 1] = arguments[_i];\n    }\n    return extendObservableHelper(target, deepEnhancer, properties);\n}\nfunction extendShallowObservable(target) {\n    var properties = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        properties[_i - 1] = arguments[_i];\n    }\n    return extendObservableHelper(target, referenceEnhancer, properties);\n}\nfunction extendObservableHelper(target, defaultEnhancer, properties) {\n    invariant(arguments.length >= 2, getMessage(\"m014\"));\n    invariant((typeof target === \"undefined\" ? \"undefined\" : _typeof(target)) === \"object\", getMessage(\"m015\"));\n    invariant(!isObservableMap(target), getMessage(\"m016\"));\n    properties.forEach(function (propSet) {\n        invariant((typeof propSet === \"undefined\" ? \"undefined\" : _typeof(propSet)) === \"object\", getMessage(\"m017\"));\n        invariant(!isObservable(propSet), getMessage(\"m018\"));\n    });\n    var adm = asObservableObject(target);\n    var definedProps = {};\n    // Note could be optimised if properties.length === 1\n    for (var i = properties.length - 1; i >= 0; i--) {\n        var propSet = properties[i];\n        for (var key in propSet) {\n            if (definedProps[key] !== true && hasOwnProperty(propSet, key)) {\n                definedProps[key] = true;\n                if (target === propSet && !isPropertyConfigurable(target, key)) continue; // see #111, skip non-configurable or non-writable props for `observable(object)`.\n                var descriptor = Object.getOwnPropertyDescriptor(propSet, key);\n                defineObservablePropertyFromDescriptor(adm, key, descriptor, defaultEnhancer);\n            }\n        }\n    }\n    return target;\n}\n\nvar deepDecorator = createDecoratorForEnhancer(deepEnhancer);\nvar shallowDecorator = createDecoratorForEnhancer(shallowEnhancer);\nvar refDecorator = createDecoratorForEnhancer(referenceEnhancer);\nvar deepStructDecorator = createDecoratorForEnhancer(deepStructEnhancer);\nvar refStructDecorator = createDecoratorForEnhancer(refStructEnhancer);\n/**\n * Turns an object, array or function into a reactive structure.\n * @param v the value which should become observable.\n */\nfunction createObservable(v) {\n    if (v === void 0) {\n        v = undefined;\n    }\n    // @observable someProp;\n    if (typeof arguments[1] === \"string\") return deepDecorator.apply(null, arguments);\n    invariant(arguments.length <= 1, getMessage(\"m021\"));\n    invariant(!isModifierDescriptor(v), getMessage(\"m020\"));\n    // it is an observable already, done\n    if (isObservable(v)) return v;\n    // something that can be converted and mutated?\n    var res = deepEnhancer(v, undefined, undefined);\n    // this value could be converted to a new observable data structure, return it\n    if (res !== v) return res;\n    // otherwise, just box it\n    return observable.box(v);\n}\nvar IObservableFactories = function () {\n    function IObservableFactories() {}\n    IObservableFactories.prototype.box = function (value, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"box\");\n        return new ObservableValue(value, deepEnhancer, name);\n    };\n    IObservableFactories.prototype.shallowBox = function (value, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowBox\");\n        return new ObservableValue(value, referenceEnhancer, name);\n    };\n    IObservableFactories.prototype.array = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"array\");\n        return new ObservableArray(initialValues, deepEnhancer, name);\n    };\n    IObservableFactories.prototype.shallowArray = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowArray\");\n        return new ObservableArray(initialValues, referenceEnhancer, name);\n    };\n    IObservableFactories.prototype.map = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"map\");\n        return new ObservableMap(initialValues, deepEnhancer, name);\n    };\n    IObservableFactories.prototype.shallowMap = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowMap\");\n        return new ObservableMap(initialValues, referenceEnhancer, name);\n    };\n    IObservableFactories.prototype.object = function (props, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"object\");\n        var res = {};\n        // convert to observable object\n        asObservableObject(res, name);\n        // add properties\n        extendObservable(res, props);\n        return res;\n    };\n    IObservableFactories.prototype.shallowObject = function (props, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowObject\");\n        var res = {};\n        asObservableObject(res, name);\n        extendShallowObservable(res, props);\n        return res;\n    };\n    IObservableFactories.prototype.ref = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(referenceEnhancer, arguments[0]);\n        } else {\n            return refDecorator.apply(null, arguments);\n        }\n    };\n    IObservableFactories.prototype.shallow = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(shallowEnhancer, arguments[0]);\n        } else {\n            return shallowDecorator.apply(null, arguments);\n        }\n    };\n    IObservableFactories.prototype.deep = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(deepEnhancer, arguments[0]);\n        } else {\n            return deepDecorator.apply(null, arguments);\n        }\n    };\n    IObservableFactories.prototype.struct = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(deepStructEnhancer, arguments[0]);\n        } else {\n            return deepStructDecorator.apply(null, arguments);\n        }\n    };\n    return IObservableFactories;\n}();\nvar observable = createObservable;\n// weird trick to keep our typings nicely with our funcs, and still extend the observable function\n// ES6 class methods aren't enumerable, can't use Object.keys\nObject.getOwnPropertyNames(IObservableFactories.prototype).filter(function (name) {\n    return name !== \"constructor\";\n}).forEach(function (name) {\n    return observable[name] = IObservableFactories.prototype[name];\n});\nobservable.deep.struct = observable.struct;\nobservable.ref.struct = function () {\n    if (arguments.length < 2) {\n        return createModifierDescriptor(refStructEnhancer, arguments[0]);\n    } else {\n        return refStructDecorator.apply(null, arguments);\n    }\n};\nfunction incorrectlyUsedAsDecorator(methodName) {\n    fail(\"Expected one or two arguments to observable.\" + methodName + \". Did you accidentally try to use observable.\" + methodName + \" as decorator?\");\n}\n\nfunction isModifierDescriptor(thing) {\n    return (typeof thing === \"undefined\" ? \"undefined\" : _typeof(thing)) === \"object\" && thing !== null && thing.isMobxModifierDescriptor === true;\n}\nfunction createModifierDescriptor(enhancer, initialValue) {\n    invariant(!isModifierDescriptor(initialValue), \"Modifiers cannot be nested\");\n    return {\n        isMobxModifierDescriptor: true,\n        initialValue: initialValue,\n        enhancer: enhancer\n    };\n}\nfunction deepEnhancer(v, _, name) {\n    if (isModifierDescriptor(v)) fail(\"You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it\");\n    // it is an observable already, done\n    if (isObservable(v)) return v;\n    // something that can be converted and mutated?\n    if (Array.isArray(v)) return observable.array(v, name);\n    if (isPlainObject(v)) return observable.object(v, name);\n    if (isES6Map(v)) return observable.map(v, name);\n    return v;\n}\nfunction shallowEnhancer(v, _, name) {\n    if (isModifierDescriptor(v)) fail(\"You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it\");\n    if (v === undefined || v === null) return v;\n    if (isObservableObject(v) || isObservableArray(v) || isObservableMap(v)) return v;\n    if (Array.isArray(v)) return observable.shallowArray(v, name);\n    if (isPlainObject(v)) return observable.shallowObject(v, name);\n    if (isES6Map(v)) return observable.shallowMap(v, name);\n    return fail(\"The shallow modifier / decorator can only used in combination with arrays, objects and maps\");\n}\nfunction referenceEnhancer(newValue) {\n    // never turn into an observable\n    return newValue;\n}\nfunction deepStructEnhancer(v, oldValue, name) {\n    // don't confuse structurally compare enhancer with ref enhancer! The latter is probably\n    // more suited for immutable objects\n    if (deepEqual(v, oldValue)) return oldValue;\n    // it is an observable already, done\n    if (isObservable(v)) return v;\n    // something that can be converted and mutated?\n    if (Array.isArray(v)) return new ObservableArray(v, deepStructEnhancer, name);\n    if (isES6Map(v)) return new ObservableMap(v, deepStructEnhancer, name);\n    if (isPlainObject(v)) {\n        var res = {};\n        asObservableObject(res, name);\n        extendObservableHelper(res, deepStructEnhancer, [v]);\n        return res;\n    }\n    return v;\n}\nfunction refStructEnhancer(v, oldValue, name) {\n    if (deepEqual(v, oldValue)) return oldValue;\n    return v;\n}\n\n/**\n * @deprecated\n * During a transaction no views are updated until the end of the transaction.\n * The transaction will be run synchronously nonetheless.\n *\n * Deprecated to simplify api; transactions offer no real benefit above actions.\n *\n * @param action a function that updates some reactive state\n * @returns any value that was returned by the 'action' parameter.\n */\nfunction transaction(action, thisArg) {\n    if (thisArg === void 0) {\n        thisArg = undefined;\n    }\n    deprecated(getMessage(\"m023\"));\n    return runInTransaction.apply(undefined, arguments);\n}\nfunction runInTransaction(action, thisArg) {\n    if (thisArg === void 0) {\n        thisArg = undefined;\n    }\n    return executeAction(\"\", action);\n}\n\nvar ObservableMapMarker = {};\nvar ObservableMap = function () {\n    function ObservableMap(initialData, enhancer, name) {\n        if (enhancer === void 0) {\n            enhancer = deepEnhancer;\n        }\n        if (name === void 0) {\n            name = \"ObservableMap@\" + getNextId();\n        }\n        this.enhancer = enhancer;\n        this.name = name;\n        this.$mobx = ObservableMapMarker;\n        this._data = Object.create(null);\n        this._hasMap = Object.create(null); // hasMap, not hashMap >-).\n        this._keys = new ObservableArray(undefined, referenceEnhancer, this.name + \".keys()\", true);\n        this.interceptors = null;\n        this.changeListeners = null;\n        this.dehancer = undefined;\n        this.merge(initialData);\n    }\n    ObservableMap.prototype._has = function (key) {\n        return typeof this._data[key] !== \"undefined\";\n    };\n    ObservableMap.prototype.has = function (key) {\n        if (!this.isValidKey(key)) return false;\n        key = \"\" + key;\n        if (this._hasMap[key]) return this._hasMap[key].get();\n        return this._updateHasMapEntry(key, false).get();\n    };\n    ObservableMap.prototype.set = function (key, value) {\n        this.assertValidKey(key);\n        key = \"\" + key;\n        var hasKey = this._has(key);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: hasKey ? \"update\" : \"add\",\n                object: this,\n                newValue: value,\n                name: key\n            });\n            if (!change) return this;\n            value = change.newValue;\n        }\n        if (hasKey) {\n            this._updateValue(key, value);\n        } else {\n            this._addValue(key, value);\n        }\n        return this;\n    };\n    ObservableMap.prototype.delete = function (key) {\n        var _this = this;\n        this.assertValidKey(key);\n        key = \"\" + key;\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: \"delete\",\n                object: this,\n                name: key\n            });\n            if (!change) return false;\n        }\n        if (this._has(key)) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy ? {\n                type: \"delete\",\n                object: this,\n                oldValue: this._data[key].value,\n                name: key\n            } : null;\n            if (notifySpy) spyReportStart(change);\n            runInTransaction(function () {\n                _this._keys.remove(key);\n                _this._updateHasMapEntry(key, false);\n                var observable$$1 = _this._data[key];\n                observable$$1.setNewValue(undefined);\n                _this._data[key] = undefined;\n            });\n            if (notify) notifyListeners(this, change);\n            if (notifySpy) spyReportEnd();\n            return true;\n        }\n        return false;\n    };\n    ObservableMap.prototype._updateHasMapEntry = function (key, value) {\n        // optimization; don't fill the hasMap if we are not observing, or remove entry if there are no observers anymore\n        var entry = this._hasMap[key];\n        if (entry) {\n            entry.setNewValue(value);\n        } else {\n            entry = this._hasMap[key] = new ObservableValue(value, referenceEnhancer, this.name + \".\" + key + \"?\", false);\n        }\n        return entry;\n    };\n    ObservableMap.prototype._updateValue = function (name, newValue) {\n        var observable$$1 = this._data[name];\n        newValue = observable$$1.prepareNewValue(newValue);\n        if (newValue !== UNCHANGED) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy ? {\n                type: \"update\",\n                object: this,\n                oldValue: observable$$1.value,\n                name: name, newValue: newValue\n            } : null;\n            if (notifySpy) spyReportStart(change);\n            observable$$1.setNewValue(newValue);\n            if (notify) notifyListeners(this, change);\n            if (notifySpy) spyReportEnd();\n        }\n    };\n    ObservableMap.prototype._addValue = function (name, newValue) {\n        var _this = this;\n        runInTransaction(function () {\n            var observable$$1 = _this._data[name] = new ObservableValue(newValue, _this.enhancer, _this.name + \".\" + name, false);\n            newValue = observable$$1.value; // value might have been changed\n            _this._updateHasMapEntry(name, true);\n            _this._keys.push(name);\n        });\n        var notifySpy = isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy ? {\n            type: \"add\",\n            object: this,\n            name: name,\n            newValue: newValue\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        if (notify) notifyListeners(this, change);\n        if (notifySpy) spyReportEnd();\n    };\n    ObservableMap.prototype.get = function (key) {\n        key = \"\" + key;\n        if (this.has(key)) return this.dehanceValue(this._data[key].get());\n        return this.dehanceValue(undefined);\n    };\n    ObservableMap.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) {\n            return this.dehancer(value);\n        }\n        return value;\n    };\n    ObservableMap.prototype.keys = function () {\n        return arrayAsIterator(this._keys.slice());\n    };\n    ObservableMap.prototype.values = function () {\n        return arrayAsIterator(this._keys.map(this.get, this));\n    };\n    ObservableMap.prototype.entries = function () {\n        var _this = this;\n        return arrayAsIterator(this._keys.map(function (key) {\n            return [key, _this.get(key)];\n        }));\n    };\n    ObservableMap.prototype.forEach = function (callback, thisArg) {\n        var _this = this;\n        this.keys().forEach(function (key) {\n            return callback.call(thisArg, _this.get(key), key, _this);\n        });\n    };\n    /** Merge another object into this object, returns this. */\n    ObservableMap.prototype.merge = function (other) {\n        var _this = this;\n        if (isObservableMap(other)) {\n            other = other.toJS();\n        }\n        runInTransaction(function () {\n            if (isPlainObject(other)) Object.keys(other).forEach(function (key) {\n                return _this.set(key, other[key]);\n            });else if (Array.isArray(other)) other.forEach(function (_a) {\n                var key = _a[0],\n                    value = _a[1];\n                return _this.set(key, value);\n            });else if (isES6Map(other)) other.forEach(function (value, key) {\n                return _this.set(key, value);\n            });else if (other !== null && other !== undefined) fail(\"Cannot initialize map from \" + other);\n        });\n        return this;\n    };\n    ObservableMap.prototype.clear = function () {\n        var _this = this;\n        runInTransaction(function () {\n            untracked(function () {\n                _this.keys().forEach(_this.delete, _this);\n            });\n        });\n    };\n    ObservableMap.prototype.replace = function (values) {\n        var _this = this;\n        runInTransaction(function () {\n            _this.clear();\n            _this.merge(values);\n        });\n        return this;\n    };\n    Object.defineProperty(ObservableMap.prototype, \"size\", {\n        get: function get() {\n            return this._keys.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Returns a shallow non observable object clone of this map.\n     * Note that the values migth still be observable. For a deep clone use mobx.toJS.\n     */\n    ObservableMap.prototype.toJS = function () {\n        var _this = this;\n        var res = {};\n        this.keys().forEach(function (key) {\n            return res[key] = _this.get(key);\n        });\n        return res;\n    };\n    ObservableMap.prototype.toJSON = function () {\n        // Used by JSON.stringify\n        return this.toJS();\n    };\n    ObservableMap.prototype.isValidKey = function (key) {\n        if (key === null || key === undefined) return false;\n        if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"boolean\") return true;\n        return false;\n    };\n    ObservableMap.prototype.assertValidKey = function (key) {\n        if (!this.isValidKey(key)) throw new Error(\"[mobx.map] Invalid key: '\" + key + \"', only strings, numbers and booleans are accepted as key in observable maps.\");\n    };\n    ObservableMap.prototype.toString = function () {\n        var _this = this;\n        return this.name + \"[{ \" + this.keys().map(function (key) {\n            return key + \": \" + (\"\" + _this.get(key));\n        }).join(\", \") + \" }]\";\n    };\n    /**\n     * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\n     * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\n     * for callback details\n     */\n    ObservableMap.prototype.observe = function (listener, fireImmediately) {\n        invariant(fireImmediately !== true, getMessage(\"m033\"));\n        return registerListener(this, listener);\n    };\n    ObservableMap.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    return ObservableMap;\n}();\ndeclareIterator(ObservableMap.prototype, function () {\n    return this.entries();\n});\nfunction map(initialValues) {\n    deprecated(\"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead\");\n    return observable.map(initialValues);\n}\n/* 'var' fixes small-build issue */\nvar isObservableMap = createInstanceofPredicate(\"ObservableMap\", ObservableMap);\n\nvar EMPTY_ARRAY = [];\nObject.freeze(EMPTY_ARRAY);\nfunction getGlobal() {\n    return global;\n}\nfunction getNextId() {\n    return ++globalState.mobxGuid;\n}\nfunction fail(message, thing) {\n    invariant(false, message, thing);\n    throw \"X\"; // unreachable\n}\nfunction invariant(check, message, thing) {\n    if (!check) throw new Error(\"[mobx] Invariant failed: \" + message + (thing ? \" in '\" + thing + \"'\" : \"\"));\n}\n/**\n * Prints a deprecation message, but only one time.\n * Returns false if the deprecated message was already printed before\n */\nvar deprecatedMessages = [];\nfunction deprecated(msg) {\n    if (deprecatedMessages.indexOf(msg) !== -1) return false;\n    deprecatedMessages.push(msg);\n    console.error(\"[mobx] Deprecated: \" + msg);\n    return true;\n}\n/**\n * Makes sure that the provided function is invoked at most once.\n */\nfunction once(func) {\n    var invoked = false;\n    return function () {\n        if (invoked) return;\n        invoked = true;\n        return func.apply(this, arguments);\n    };\n}\nvar noop = function noop() {};\nfunction unique(list) {\n    var res = [];\n    list.forEach(function (item) {\n        if (res.indexOf(item) === -1) res.push(item);\n    });\n    return res;\n}\nfunction joinStrings(things, limit, separator) {\n    if (limit === void 0) {\n        limit = 100;\n    }\n    if (separator === void 0) {\n        separator = \" - \";\n    }\n    if (!things) return \"\";\n    var sliced = things.slice(0, limit);\n    return \"\" + sliced.join(separator) + (things.length > limit ? \" (... and \" + (things.length - limit) + \"more)\" : \"\");\n}\nfunction isObject(value) {\n    return value !== null && (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\";\n}\nfunction isPlainObject(value) {\n    if (value === null || (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) !== \"object\") return false;\n    var proto = Object.getPrototypeOf(value);\n    return proto === Object.prototype || proto === null;\n}\nfunction objectAssign() {\n    var res = arguments[0];\n    for (var i = 1, l = arguments.length; i < l; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n            if (hasOwnProperty(source, key)) {\n                res[key] = source[key];\n            }\n        }\n    }\n    return res;\n}\nvar prototypeHasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(object, propName) {\n    return prototypeHasOwnProperty.call(object, propName);\n}\nfunction makeNonEnumerable(object, propNames) {\n    for (var i = 0; i < propNames.length; i++) {\n        addHiddenProp(object, propNames[i], object[propNames[i]]);\n    }\n}\nfunction addHiddenProp(object, propName, value) {\n    Object.defineProperty(object, propName, {\n        enumerable: false,\n        writable: true,\n        configurable: true,\n        value: value\n    });\n}\nfunction addHiddenFinalProp(object, propName, value) {\n    Object.defineProperty(object, propName, {\n        enumerable: false,\n        writable: false,\n        configurable: true,\n        value: value\n    });\n}\nfunction isPropertyConfigurable(object, prop) {\n    var descriptor = Object.getOwnPropertyDescriptor(object, prop);\n    return !descriptor || descriptor.configurable !== false && descriptor.writable !== false;\n}\nfunction assertPropertyConfigurable(object, prop) {\n    invariant(isPropertyConfigurable(object, prop), \"Cannot make property '\" + prop + \"' observable, it is not configurable and writable in the target object\");\n}\nfunction getEnumerableKeys(obj) {\n    var res = [];\n    for (var key in obj) {\n        res.push(key);\n    }return res;\n}\n/**\n * Naive deepEqual. Doesn't check for prototype, non-enumerable or out-of-range properties on arrays.\n * If you have such a case, you probably should use this function but something fancier :).\n */\nfunction deepEqual(a, b) {\n    if (a === null && b === null) return true;\n    if (a === undefined && b === undefined) return true;\n    if ((typeof a === \"undefined\" ? \"undefined\" : _typeof(a)) !== \"object\") return a === b;\n    var aIsArray = isArrayLike(a);\n    var aIsMap = isMapLike(a);\n    if (aIsArray !== isArrayLike(b)) {\n        return false;\n    } else if (aIsMap !== isMapLike(b)) {\n        return false;\n    } else if (aIsArray) {\n        if (a.length !== b.length) return false;\n        for (var i = a.length - 1; i >= 0; i--) {\n            if (!deepEqual(a[i], b[i])) return false;\n        }return true;\n    } else if (aIsMap) {\n        if (a.size !== b.size) return false;\n        var equals_1 = true;\n        a.forEach(function (value, key) {\n            equals_1 = equals_1 && deepEqual(b.get(key), value);\n        });\n        return equals_1;\n    } else if ((typeof a === \"undefined\" ? \"undefined\" : _typeof(a)) === \"object\" && (typeof b === \"undefined\" ? \"undefined\" : _typeof(b)) === \"object\") {\n        if (a === null || b === null) return false;\n        if (isMapLike(a) && isMapLike(b)) {\n            if (a.size !== b.size) return false;\n            // Freaking inefficient.... Create PR if you run into this :) Much appreciated!\n            return deepEqual(observable.shallowMap(a).entries(), observable.shallowMap(b).entries());\n        }\n        if (getEnumerableKeys(a).length !== getEnumerableKeys(b).length) return false;\n        for (var prop in a) {\n            if (!(prop in b)) return false;\n            if (!deepEqual(a[prop], b[prop])) return false;\n        }\n        return true;\n    }\n    return false;\n}\nfunction createInstanceofPredicate(name, clazz) {\n    var propName = \"isMobX\" + name;\n    clazz.prototype[propName] = true;\n    return function (x) {\n        return isObject(x) && x[propName] === true;\n    };\n}\n/**\n * Returns whether the argument is an array, disregarding observability.\n */\nfunction isArrayLike(x) {\n    return Array.isArray(x) || isObservableArray(x);\n}\nfunction isMapLike(x) {\n    return isES6Map(x) || isObservableMap(x);\n}\nfunction isES6Map(thing) {\n    if (getGlobal().Map !== undefined && thing instanceof getGlobal().Map) return true;\n    return false;\n}\nfunction primitiveSymbol() {\n    return typeof Symbol === \"function\" && Symbol.toPrimitive || \"@@toPrimitive\";\n}\nfunction toPrimitive(value) {\n    return value === null ? null : (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\" ? \"\" + value : value;\n}\n\n/**\n * These values will persist if global state is reset\n */\nvar persistentKeys = [\"mobxGuid\", \"resetId\", \"spyListeners\", \"strictMode\", \"runId\"];\nvar MobXGlobals = function () {\n    function MobXGlobals() {\n        /**\n         * MobXGlobals version.\n         * MobX compatiblity with other versions loaded in memory as long as this version matches.\n         * It indicates that the global state still stores similar information\n         */\n        this.version = 5;\n        /**\n         * Currently running derivation\n         */\n        this.trackingDerivation = null;\n        /**\n         * Are we running a computation currently? (not a reaction)\n         */\n        this.computationDepth = 0;\n        /**\n         * Each time a derivation is tracked, it is assigned a unique run-id\n         */\n        this.runId = 0;\n        /**\n         * 'guid' for general purpose. Will be persisted amongst resets.\n         */\n        this.mobxGuid = 0;\n        /**\n         * Are we in a batch block? (and how many of them)\n         */\n        this.inBatch = 0;\n        /**\n         * Observables that don't have observers anymore, and are about to be\n         * suspended, unless somebody else accesses it in the same batch\n         *\n         * @type {IObservable[]}\n         */\n        this.pendingUnobservations = [];\n        /**\n         * List of scheduled, not yet executed, reactions.\n         */\n        this.pendingReactions = [];\n        /**\n         * Are we currently processing reactions?\n         */\n        this.isRunningReactions = false;\n        /**\n         * Is it allowed to change observables at this point?\n         * In general, MobX doesn't allow that when running computations and React.render.\n         * To ensure that those functions stay pure.\n         */\n        this.allowStateChanges = true;\n        /**\n         * If strict mode is enabled, state changes are by default not allowed\n         */\n        this.strictMode = false;\n        /**\n         * Used by createTransformer to detect that the global state has been reset.\n         */\n        this.resetId = 0;\n        /**\n         * Spy callbacks\n         */\n        this.spyListeners = [];\n        /**\n         * Globally attached error handlers that react specifically to errors in reactions\n         */\n        this.globalReactionErrorHandlers = [];\n    }\n    return MobXGlobals;\n}();\nvar globalState = new MobXGlobals();\nvar shareGlobalStateCalled = false;\nvar runInIsolationCalled = false;\nvar warnedAboutMultipleInstances = false;\n{\n    var global_1 = getGlobal();\n    if (!global_1.__mobxInstanceCount) {\n        global_1.__mobxInstanceCount = 1;\n    } else {\n        global_1.__mobxInstanceCount++;\n        setTimeout(function () {\n            if (!shareGlobalStateCalled && !runInIsolationCalled && !warnedAboutMultipleInstances) {\n                warnedAboutMultipleInstances = true;\n                console.warn(\"[mobx] Warning: there are multiple mobx instances active. This might lead to unexpected results. See https://github.com/mobxjs/mobx/issues/1082 for details.\");\n            }\n        });\n    }\n}\nfunction isolateGlobalState() {\n    runInIsolationCalled = true;\n    getGlobal().__mobxInstanceCount--;\n}\nfunction shareGlobalState() {\n    // TODO: remove in 4.0; just use peer dependencies instead.\n    deprecated(\"Using `shareGlobalState` is not recommended, use peer dependencies instead. See https://github.com/mobxjs/mobx/issues/1082 for details.\");\n    shareGlobalStateCalled = true;\n    var global = getGlobal();\n    var ownState = globalState;\n    /**\n     * Backward compatibility check\n     */\n    if (global.__mobservableTrackingStack || global.__mobservableViewStack) throw new Error(\"[mobx] An incompatible version of mobservable is already loaded.\");\n    if (global.__mobxGlobal && global.__mobxGlobal.version !== ownState.version) throw new Error(\"[mobx] An incompatible version of mobx is already loaded.\");\n    if (global.__mobxGlobal) globalState = global.__mobxGlobal;else global.__mobxGlobal = ownState;\n}\nfunction getGlobalState() {\n    return globalState;\n}\n\n/**\n * For testing purposes only; this will break the internal state of existing observables,\n * but can be used to get back at a stable state after throwing errors\n */\nfunction resetGlobalState() {\n    globalState.resetId++;\n    var defaultGlobals = new MobXGlobals();\n    for (var key in defaultGlobals) {\n        if (persistentKeys.indexOf(key) === -1) globalState[key] = defaultGlobals[key];\n    }globalState.allowStateChanges = !globalState.strictMode;\n}\n\nfunction hasObservers(observable) {\n    return observable.observers && observable.observers.length > 0;\n}\nfunction getObservers(observable) {\n    return observable.observers;\n}\nfunction addObserver(observable, node) {\n    // invariant(node.dependenciesState !== -1, \"INTERNAL ERROR, can add only dependenciesState !== -1\");\n    // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR add already added node\");\n    // invariantObservers(observable);\n    var l = observable.observers.length;\n    if (l) {\n        observable.observersIndexes[node.__mapid] = l;\n    }\n    observable.observers[l] = node;\n    if (observable.lowestObserverState > node.dependenciesState) observable.lowestObserverState = node.dependenciesState;\n    // invariantObservers(observable);\n    // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR didnt add node\");\n}\nfunction removeObserver(observable, node) {\n    // invariant(globalState.inBatch > 0, \"INTERNAL ERROR, remove should be called only inside batch\");\n    // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR remove already removed node\");\n    // invariantObservers(observable);\n    if (observable.observers.length === 1) {\n        // deleting last observer\n        observable.observers.length = 0;\n        queueForUnobservation(observable);\n    } else {\n        // deleting from _observersIndexes is straight forward, to delete from _observers, let's swap `node` with last element\n        var list = observable.observers;\n        var map = observable.observersIndexes;\n        var filler = list.pop(); // get last element, which should fill the place of `node`, so the array doesnt have holes\n        if (filler !== node) {\n            var index = map[node.__mapid] || 0; // getting index of `node`. this is the only place we actually use map.\n            if (index) {\n                map[filler.__mapid] = index;\n            } else {\n                delete map[filler.__mapid];\n            }\n            list[index] = filler;\n        }\n        delete map[node.__mapid];\n    }\n    // invariantObservers(observable);\n    // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR remove already removed node2\");\n}\nfunction queueForUnobservation(observable) {\n    if (!observable.isPendingUnobservation) {\n        // invariant(globalState.inBatch > 0, \"INTERNAL ERROR, remove should be called only inside batch\");\n        // invariant(observable._observers.length === 0, \"INTERNAL ERROR, shuold only queue for unobservation unobserved observables\");\n        observable.isPendingUnobservation = true;\n        globalState.pendingUnobservations.push(observable);\n    }\n}\n/**\n * Batch starts a transaction, at least for purposes of memoizing ComputedValues when nothing else does.\n * During a batch `onBecomeUnobserved` will be called at most once per observable.\n * Avoids unnecessary recalculations.\n */\nfunction startBatch() {\n    globalState.inBatch++;\n}\nfunction endBatch() {\n    if (--globalState.inBatch === 0) {\n        runReactions();\n        // the batch is actually about to finish, all unobserving should happen here.\n        var list = globalState.pendingUnobservations;\n        for (var i = 0; i < list.length; i++) {\n            var observable = list[i];\n            observable.isPendingUnobservation = false;\n            if (observable.observers.length === 0) {\n                observable.onBecomeUnobserved();\n                // NOTE: onBecomeUnobserved might push to `pendingUnobservations`\n            }\n        }\n        globalState.pendingUnobservations = [];\n    }\n}\nfunction reportObserved(observable) {\n    var derivation = globalState.trackingDerivation;\n    if (derivation !== null) {\n        /**\n         * Simple optimization, give each derivation run an unique id (runId)\n         * Check if last time this observable was accessed the same runId is used\n         * if this is the case, the relation is already known\n         */\n        if (derivation.runId !== observable.lastAccessedBy) {\n            observable.lastAccessedBy = derivation.runId;\n            derivation.newObserving[derivation.unboundDepsCount++] = observable;\n        }\n    } else if (observable.observers.length === 0) {\n        queueForUnobservation(observable);\n    }\n}\n/**\n * NOTE: current propagation mechanism will in case of self reruning autoruns behave unexpectedly\n * It will propagate changes to observers from previous run\n * It's hard or maybe impossible (with reasonable perf) to get it right with current approach\n * Hopefully self reruning autoruns aren't a feature people should depend on\n * Also most basic use cases should be ok\n */\n// Called by Atom when its value changes\nfunction propagateChanged(observable) {\n    // invariantLOS(observable, \"changed start\");\n    if (observable.lowestObserverState === IDerivationState.STALE) return;\n    observable.lowestObserverState = IDerivationState.STALE;\n    var observers = observable.observers;\n    var i = observers.length;\n    while (i--) {\n        var d = observers[i];\n        if (d.dependenciesState === IDerivationState.UP_TO_DATE) d.onBecomeStale();\n        d.dependenciesState = IDerivationState.STALE;\n    }\n    // invariantLOS(observable, \"changed end\");\n}\n// Called by ComputedValue when it recalculate and its value changed\nfunction propagateChangeConfirmed(observable) {\n    // invariantLOS(observable, \"confirmed start\");\n    if (observable.lowestObserverState === IDerivationState.STALE) return;\n    observable.lowestObserverState = IDerivationState.STALE;\n    var observers = observable.observers;\n    var i = observers.length;\n    while (i--) {\n        var d = observers[i];\n        if (d.dependenciesState === IDerivationState.POSSIBLY_STALE) d.dependenciesState = IDerivationState.STALE;else if (d.dependenciesState === IDerivationState.UP_TO_DATE) observable.lowestObserverState = IDerivationState.UP_TO_DATE;\n    }\n    // invariantLOS(observable, \"confirmed end\");\n}\n// Used by computed when its dependency changed, but we don't wan't to immediately recompute.\nfunction propagateMaybeChanged(observable) {\n    // invariantLOS(observable, \"maybe start\");\n    if (observable.lowestObserverState !== IDerivationState.UP_TO_DATE) return;\n    observable.lowestObserverState = IDerivationState.POSSIBLY_STALE;\n    var observers = observable.observers;\n    var i = observers.length;\n    while (i--) {\n        var d = observers[i];\n        if (d.dependenciesState === IDerivationState.UP_TO_DATE) {\n            d.dependenciesState = IDerivationState.POSSIBLY_STALE;\n            d.onBecomeStale();\n        }\n    }\n    // invariantLOS(observable, \"maybe end\");\n}\n\nvar IDerivationState;\n(function (IDerivationState) {\n    // before being run or (outside batch and not being observed)\n    // at this point derivation is not holding any data about dependency tree\n    IDerivationState[IDerivationState[\"NOT_TRACKING\"] = -1] = \"NOT_TRACKING\";\n    // no shallow dependency changed since last computation\n    // won't recalculate derivation\n    // this is what makes mobx fast\n    IDerivationState[IDerivationState[\"UP_TO_DATE\"] = 0] = \"UP_TO_DATE\";\n    // some deep dependency changed, but don't know if shallow dependency changed\n    // will require to check first if UP_TO_DATE or POSSIBLY_STALE\n    // currently only ComputedValue will propagate POSSIBLY_STALE\n    //\n    // having this state is second big optimization:\n    // don't have to recompute on every dependency change, but only when it's needed\n    IDerivationState[IDerivationState[\"POSSIBLY_STALE\"] = 1] = \"POSSIBLY_STALE\";\n    // shallow dependency changed\n    // will need to recompute when it's needed\n    IDerivationState[IDerivationState[\"STALE\"] = 2] = \"STALE\";\n})(IDerivationState || (exports.IDerivationState = IDerivationState = {}));\nvar CaughtException = function () {\n    function CaughtException(cause) {\n        this.cause = cause;\n        // Empty\n    }\n    return CaughtException;\n}();\nfunction isCaughtException(e) {\n    return e instanceof CaughtException;\n}\n/**\n * Finds out whether any dependency of the derivation has actually changed.\n * If dependenciesState is 1 then it will recalculate dependencies,\n * if any dependency changed it will propagate it by changing dependenciesState to 2.\n *\n * By iterating over the dependencies in the same order that they were reported and\n * stopping on the first change, all the recalculations are only called for ComputedValues\n * that will be tracked by derivation. That is because we assume that if the first x\n * dependencies of the derivation doesn't change then the derivation should run the same way\n * up until accessing x-th dependency.\n */\nfunction shouldCompute(derivation) {\n    switch (derivation.dependenciesState) {\n        case IDerivationState.UP_TO_DATE:\n            return false;\n        case IDerivationState.NOT_TRACKING:\n        case IDerivationState.STALE:\n            return true;\n        case IDerivationState.POSSIBLY_STALE:\n            {\n                var prevUntracked = untrackedStart(); // no need for those computeds to be reported, they will be picked up in trackDerivedFunction.\n                var obs = derivation.observing,\n                    l = obs.length;\n                for (var i = 0; i < l; i++) {\n                    var obj = obs[i];\n                    if (isComputedValue(obj)) {\n                        try {\n                            obj.get();\n                        } catch (e) {\n                            // we are not interested in the value *or* exception at this moment, but if there is one, notify all\n                            untrackedEnd(prevUntracked);\n                            return true;\n                        }\n                        // if ComputedValue `obj` actually changed it will be computed and propagated to its observers.\n                        // and `derivation` is an observer of `obj`\n                        if (derivation.dependenciesState === IDerivationState.STALE) {\n                            untrackedEnd(prevUntracked);\n                            return true;\n                        }\n                    }\n                }\n                changeDependenciesStateTo0(derivation);\n                untrackedEnd(prevUntracked);\n                return false;\n            }\n    }\n}\nfunction isComputingDerivation() {\n    return globalState.trackingDerivation !== null; // filter out actions inside computations\n}\nfunction checkIfStateModificationsAreAllowed(atom) {\n    var hasObservers$$1 = atom.observers.length > 0;\n    // Should never be possible to change an observed observable from inside computed, see #798\n    if (globalState.computationDepth > 0 && hasObservers$$1) fail(getMessage(\"m031\") + atom.name);\n    // Should not be possible to change observed state outside strict mode, except during initialization, see #563\n    if (!globalState.allowStateChanges && hasObservers$$1) fail(getMessage(globalState.strictMode ? \"m030a\" : \"m030b\") + atom.name);\n}\n/**\n * Executes the provided function `f` and tracks which observables are being accessed.\n * The tracking information is stored on the `derivation` object and the derivation is registered\n * as observer of any of the accessed observables.\n */\nfunction trackDerivedFunction(derivation, f, context) {\n    // pre allocate array allocation + room for variation in deps\n    // array will be trimmed by bindDependencies\n    changeDependenciesStateTo0(derivation);\n    derivation.newObserving = new Array(derivation.observing.length + 100);\n    derivation.unboundDepsCount = 0;\n    derivation.runId = ++globalState.runId;\n    var prevTracking = globalState.trackingDerivation;\n    globalState.trackingDerivation = derivation;\n    var result;\n    try {\n        result = f.call(context);\n    } catch (e) {\n        result = new CaughtException(e);\n    }\n    globalState.trackingDerivation = prevTracking;\n    bindDependencies(derivation);\n    return result;\n}\n/**\n * diffs newObserving with observing.\n * update observing to be newObserving with unique observables\n * notify observers that become observed/unobserved\n */\nfunction bindDependencies(derivation) {\n    // invariant(derivation.dependenciesState !== IDerivationState.NOT_TRACKING, \"INTERNAL ERROR bindDependencies expects derivation.dependenciesState !== -1\");\n    var prevObserving = derivation.observing;\n    var observing = derivation.observing = derivation.newObserving;\n    var lowestNewObservingDerivationState = IDerivationState.UP_TO_DATE;\n    derivation.newObserving = null; // newObserving shouldn't be needed outside tracking\n    // Go through all new observables and check diffValue: (this list can contain duplicates):\n    //   0: first occurrence, change to 1 and keep it\n    //   1: extra occurrence, drop it\n    var i0 = 0,\n        l = derivation.unboundDepsCount;\n    for (var i = 0; i < l; i++) {\n        var dep = observing[i];\n        if (dep.diffValue === 0) {\n            dep.diffValue = 1;\n            if (i0 !== i) observing[i0] = dep;\n            i0++;\n        }\n        // Upcast is 'safe' here, because if dep is IObservable, `dependenciesState` will be undefined,\n        // not hitting the condition\n        if (dep.dependenciesState > lowestNewObservingDerivationState) {\n            lowestNewObservingDerivationState = dep.dependenciesState;\n        }\n    }\n    observing.length = i0;\n    // Go through all old observables and check diffValue: (it is unique after last bindDependencies)\n    //   0: it's not in new observables, unobserve it\n    //   1: it keeps being observed, don't want to notify it. change to 0\n    l = prevObserving.length;\n    while (l--) {\n        var dep = prevObserving[l];\n        if (dep.diffValue === 0) {\n            removeObserver(dep, derivation);\n        }\n        dep.diffValue = 0;\n    }\n    // Go through all new observables and check diffValue: (now it should be unique)\n    //   0: it was set to 0 in last loop. don't need to do anything.\n    //   1: it wasn't observed, let's observe it. set back to 0\n    while (i0--) {\n        var dep = observing[i0];\n        if (dep.diffValue === 1) {\n            dep.diffValue = 0;\n            addObserver(dep, derivation);\n        }\n    }\n    // Some new observed derivations might become stale during this derivation computation\n    // so say had no chance to propagate staleness (#916)\n    if (lowestNewObservingDerivationState !== IDerivationState.UP_TO_DATE) {\n        derivation.dependenciesState = lowestNewObservingDerivationState;\n        derivation.onBecomeStale();\n    }\n}\nfunction clearObserving(derivation) {\n    // invariant(globalState.inBatch > 0, \"INTERNAL ERROR clearObserving should be called only inside batch\");\n    var obs = derivation.observing;\n    derivation.observing = [];\n    var i = obs.length;\n    while (i--) {\n        removeObserver(obs[i], derivation);\n    }derivation.dependenciesState = IDerivationState.NOT_TRACKING;\n}\nfunction untracked(action) {\n    var prev = untrackedStart();\n    var res = action();\n    untrackedEnd(prev);\n    return res;\n}\nfunction untrackedStart() {\n    var prev = globalState.trackingDerivation;\n    globalState.trackingDerivation = null;\n    return prev;\n}\nfunction untrackedEnd(prev) {\n    globalState.trackingDerivation = prev;\n}\n/**\n * needed to keep `lowestObserverState` correct. when changing from (2 or 1) to 0\n *\n */\nfunction changeDependenciesStateTo0(derivation) {\n    if (derivation.dependenciesState === IDerivationState.UP_TO_DATE) return;\n    derivation.dependenciesState = IDerivationState.UP_TO_DATE;\n    var obs = derivation.observing;\n    var i = obs.length;\n    while (i--) {\n        obs[i].lowestObserverState = IDerivationState.UP_TO_DATE;\n    }\n}\n\nvar Reaction = function () {\n    function Reaction(name, onInvalidate) {\n        if (name === void 0) {\n            name = \"Reaction@\" + getNextId();\n        }\n        this.name = name;\n        this.onInvalidate = onInvalidate;\n        this.observing = []; // nodes we are looking at. Our value depends on these nodes\n        this.newObserving = [];\n        this.dependenciesState = IDerivationState.NOT_TRACKING;\n        this.diffValue = 0;\n        this.runId = 0;\n        this.unboundDepsCount = 0;\n        this.__mapid = \"#\" + getNextId();\n        this.isDisposed = false;\n        this._isScheduled = false;\n        this._isTrackPending = false;\n        this._isRunning = false;\n    }\n    Reaction.prototype.onBecomeStale = function () {\n        this.schedule();\n    };\n    Reaction.prototype.schedule = function () {\n        if (!this._isScheduled) {\n            this._isScheduled = true;\n            globalState.pendingReactions.push(this);\n            runReactions();\n        }\n    };\n    Reaction.prototype.isScheduled = function () {\n        return this._isScheduled;\n    };\n    /**\n     * internal, use schedule() if you intend to kick off a reaction\n     */\n    Reaction.prototype.runReaction = function () {\n        if (!this.isDisposed) {\n            startBatch();\n            this._isScheduled = false;\n            if (shouldCompute(this)) {\n                this._isTrackPending = true;\n                this.onInvalidate();\n                if (this._isTrackPending && isSpyEnabled()) {\n                    // onInvalidate didn't trigger track right away..\n                    spyReport({\n                        object: this,\n                        type: \"scheduled-reaction\"\n                    });\n                }\n            }\n            endBatch();\n        }\n    };\n    Reaction.prototype.track = function (fn) {\n        startBatch();\n        var notify = isSpyEnabled();\n        var startTime;\n        if (notify) {\n            startTime = Date.now();\n            spyReportStart({\n                object: this,\n                type: \"reaction\",\n                fn: fn\n            });\n        }\n        this._isRunning = true;\n        var result = trackDerivedFunction(this, fn, undefined);\n        this._isRunning = false;\n        this._isTrackPending = false;\n        if (this.isDisposed) {\n            // disposed during last run. Clean up everything that was bound after the dispose call.\n            clearObserving(this);\n        }\n        if (isCaughtException(result)) this.reportExceptionInDerivation(result.cause);\n        if (notify) {\n            spyReportEnd({\n                time: Date.now() - startTime\n            });\n        }\n        endBatch();\n    };\n    Reaction.prototype.reportExceptionInDerivation = function (error) {\n        var _this = this;\n        if (this.errorHandler) {\n            this.errorHandler(error, this);\n            return;\n        }\n        var message = \"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '\" + this;\n        var messageToUser = getMessage(\"m037\");\n        console.error(message || messageToUser /* latter will not be true, make sure uglify doesn't remove */, error);\n        /** If debugging brought you here, please, read the above message :-). Tnx! */\n        if (isSpyEnabled()) {\n            spyReport({\n                type: \"error\",\n                message: message,\n                error: error,\n                object: this\n            });\n        }\n        globalState.globalReactionErrorHandlers.forEach(function (f) {\n            return f(error, _this);\n        });\n    };\n    Reaction.prototype.dispose = function () {\n        if (!this.isDisposed) {\n            this.isDisposed = true;\n            if (!this._isRunning) {\n                startBatch();\n                clearObserving(this); // if disposed while running, clean up later. Maybe not optimal, but rare case\n                endBatch();\n            }\n        }\n    };\n    Reaction.prototype.getDisposer = function () {\n        var r = this.dispose.bind(this);\n        r.$mobx = this;\n        r.onError = registerErrorHandler;\n        return r;\n    };\n    Reaction.prototype.toString = function () {\n        return \"Reaction[\" + this.name + \"]\";\n    };\n    Reaction.prototype.whyRun = function () {\n        var observing = unique(this._isRunning ? this.newObserving : this.observing).map(function (dep) {\n            return dep.name;\n        });\n        return \"\\nWhyRun? reaction '\" + this.name + \"':\\n * Status: [\" + (this.isDisposed ? \"stopped\" : this._isRunning ? \"running\" : this.isScheduled() ? \"scheduled\" : \"idle\") + \"]\\n * This reaction will re-run if any of the following observables changes:\\n    \" + joinStrings(observing) + \"\\n    \" + (this._isRunning ? \" (... or any observable accessed during the remainder of the current run)\" : \"\") + \"\\n\\t\" + getMessage(\"m038\") + \"\\n\";\n    };\n    return Reaction;\n}();\nfunction registerErrorHandler(handler) {\n    invariant(this && this.$mobx && isReaction(this.$mobx), \"Invalid `this`\");\n    invariant(!this.$mobx.errorHandler, \"Only one onErrorHandler can be registered\");\n    this.$mobx.errorHandler = handler;\n}\nfunction onReactionError(handler) {\n    globalState.globalReactionErrorHandlers.push(handler);\n    return function () {\n        var idx = globalState.globalReactionErrorHandlers.indexOf(handler);\n        if (idx >= 0) globalState.globalReactionErrorHandlers.splice(idx, 1);\n    };\n}\n/**\n * Magic number alert!\n * Defines within how many times a reaction is allowed to re-trigger itself\n * until it is assumed that this is gonna be a never ending loop...\n */\nvar MAX_REACTION_ITERATIONS = 100;\nvar reactionScheduler = function reactionScheduler(f) {\n    return f();\n};\nfunction runReactions() {\n    // Trampolining, if runReactions are already running, new reactions will be picked up\n    if (globalState.inBatch > 0 || globalState.isRunningReactions) return;\n    reactionScheduler(runReactionsHelper);\n}\nfunction runReactionsHelper() {\n    globalState.isRunningReactions = true;\n    var allReactions = globalState.pendingReactions;\n    var iterations = 0;\n    // While running reactions, new reactions might be triggered.\n    // Hence we work with two variables and check whether\n    // we converge to no remaining reactions after a while.\n    while (allReactions.length > 0) {\n        if (++iterations === MAX_REACTION_ITERATIONS) {\n            console.error(\"Reaction doesn't converge to a stable state after \" + MAX_REACTION_ITERATIONS + \" iterations.\" + (\" Probably there is a cycle in the reactive function: \" + allReactions[0]));\n            allReactions.splice(0); // clear reactions\n        }\n        var remainingReactions = allReactions.splice(0);\n        for (var i = 0, l = remainingReactions.length; i < l; i++) {\n            remainingReactions[i].runReaction();\n        }\n    }\n    globalState.isRunningReactions = false;\n}\nvar isReaction = createInstanceofPredicate(\"Reaction\", Reaction);\nfunction setReactionScheduler(fn) {\n    var baseScheduler = reactionScheduler;\n    reactionScheduler = function reactionScheduler(f) {\n        return fn(function () {\n            return baseScheduler(f);\n        });\n    };\n}\n\nfunction asReference(value) {\n    deprecated(\"asReference is deprecated, use observable.ref instead\");\n    return observable.ref(value);\n}\nfunction asStructure(value) {\n    deprecated(\"asStructure is deprecated. Use observable.struct, computed.struct or reaction options instead.\");\n    return observable.struct(value);\n}\nfunction asFlat(value) {\n    deprecated(\"asFlat is deprecated, use observable.shallow instead\");\n    return observable.shallow(value);\n}\nfunction asMap(data) {\n    deprecated(\"asMap is deprecated, use observable.map or observable.shallowMap instead\");\n    return observable.map(data || {});\n}\n\nfunction createComputedDecorator(equals) {\n    return createClassPropertyDecorator(function (target, name, _, __, originalDescriptor) {\n        invariant(typeof originalDescriptor !== \"undefined\", getMessage(\"m009\"));\n        invariant(typeof originalDescriptor.get === \"function\", getMessage(\"m010\"));\n        var adm = asObservableObject(target, \"\");\n        defineComputedProperty(adm, name, originalDescriptor.get, originalDescriptor.set, equals, false);\n    }, function (name) {\n        var observable = this.$mobx.values[name];\n        if (observable === undefined) return undefined;\n        return observable.get();\n    }, function (name, value) {\n        this.$mobx.values[name].set(value);\n    }, false, false);\n}\nvar computedDecorator = createComputedDecorator(comparer.default);\nvar computedStructDecorator = createComputedDecorator(comparer.structural);\n/**\n * Decorator for class properties: @computed get value() { return expr; }.\n * For legacy purposes also invokable as ES5 observable created: `computed(() => expr)`;\n */\nvar computed = function computed(arg1, arg2, arg3) {\n    if (typeof arg2 === \"string\") {\n        return computedDecorator.apply(null, arguments);\n    }\n    invariant(typeof arg1 === \"function\", getMessage(\"m011\"));\n    invariant(arguments.length < 3, getMessage(\"m012\"));\n    var opts = (typeof arg2 === \"undefined\" ? \"undefined\" : _typeof(arg2)) === \"object\" ? arg2 : {};\n    opts.setter = typeof arg2 === \"function\" ? arg2 : opts.setter;\n    var equals = opts.equals ? opts.equals : opts.compareStructural || opts.struct ? comparer.structural : comparer.default;\n    return new ComputedValue(arg1, opts.context, equals, opts.name || arg1.name || \"\", opts.setter);\n};\ncomputed.struct = computedStructDecorator;\ncomputed.equals = createComputedDecorator;\n\nfunction getAtom(thing, property) {\n    if ((typeof thing === \"undefined\" ? \"undefined\" : _typeof(thing)) === \"object\" && thing !== null) {\n        if (isObservableArray(thing)) {\n            invariant(property === undefined, getMessage(\"m036\"));\n            return thing.$mobx.atom;\n        }\n        if (isObservableMap(thing)) {\n            var anyThing = thing;\n            if (property === undefined) return getAtom(anyThing._keys);\n            var observable = anyThing._data[property] || anyThing._hasMap[property];\n            invariant(!!observable, \"the entry '\" + property + \"' does not exist in the observable map '\" + getDebugName(thing) + \"'\");\n            return observable;\n        }\n        // Initializers run lazily when transpiling to babel, so make sure they are run...\n        runLazyInitializers(thing);\n        if (property && !thing.$mobx) thing[property]; // See #1072 // TODO: remove in 4.0\n        if (isObservableObject(thing)) {\n            if (!property) return fail(\"please specify a property\");\n            var observable = thing.$mobx.values[property];\n            invariant(!!observable, \"no observable property '\" + property + \"' found on the observable object '\" + getDebugName(thing) + \"'\");\n            return observable;\n        }\n        if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) {\n            return thing;\n        }\n    } else if (typeof thing === \"function\") {\n        if (isReaction(thing.$mobx)) {\n            // disposer function\n            return thing.$mobx;\n        }\n    }\n    return fail(\"Cannot obtain atom from \" + thing);\n}\nfunction getAdministration(thing, property) {\n    invariant(thing, \"Expecting some object\");\n    if (property !== undefined) return getAdministration(getAtom(thing, property));\n    if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) return thing;\n    if (isObservableMap(thing)) return thing;\n    // Initializers run lazily when transpiling to babel, so make sure they are run...\n    runLazyInitializers(thing);\n    if (thing.$mobx) return thing.$mobx;\n    invariant(false, \"Cannot obtain administration from \" + thing);\n}\nfunction getDebugName(thing, property) {\n    var named;\n    if (property !== undefined) named = getAtom(thing, property);else if (isObservableObject(thing) || isObservableMap(thing)) named = getAdministration(thing);else named = getAtom(thing); // valid for arrays as well\n    return named.name;\n}\n\nfunction isComputed(value, property) {\n    if (value === null || value === undefined) return false;\n    if (property !== undefined) {\n        if (isObservableObject(value) === false) return false;\n        var atom = getAtom(value, property);\n        return isComputedValue(atom);\n    }\n    return isComputedValue(value);\n}\n\nfunction observe(thing, propOrCb, cbOrFire, fireImmediately) {\n    if (typeof cbOrFire === \"function\") return observeObservableProperty(thing, propOrCb, cbOrFire, fireImmediately);else return observeObservable(thing, propOrCb, cbOrFire);\n}\nfunction observeObservable(thing, listener, fireImmediately) {\n    return getAdministration(thing).observe(listener, fireImmediately);\n}\nfunction observeObservableProperty(thing, property, listener, fireImmediately) {\n    return getAdministration(thing, property).observe(listener, fireImmediately);\n}\n\nfunction intercept(thing, propOrHandler, handler) {\n    if (typeof handler === \"function\") return interceptProperty(thing, propOrHandler, handler);else return interceptInterceptable(thing, propOrHandler);\n}\nfunction interceptInterceptable(thing, handler) {\n    return getAdministration(thing).intercept(handler);\n}\nfunction interceptProperty(thing, property, handler) {\n    return getAdministration(thing, property).intercept(handler);\n}\n\n/**\n    * expr can be used to create temporarily views inside views.\n    * This can be improved to improve performance if a value changes often, but usually doesn't affect the outcome of an expression.\n    *\n    * In the following example the expression prevents that a component is rerender _each time_ the selection changes;\n    * instead it will only rerenders when the current todo is (de)selected.\n    *\n    * reactiveComponent((props) => {\n    *     const todo = props.todo;\n    *     const isSelected = mobx.expr(() => props.viewState.selection === todo);\n    *     return <div className={isSelected ? \"todo todo-selected\" : \"todo\"}>{todo.title}</div>\n    * });\n    *\n    */\nfunction expr(expr, scope) {\n    if (!isComputingDerivation()) console.warn(getMessage(\"m013\"));\n    // optimization: would be more efficient if the expr itself wouldn't be evaluated first on the next change, but just a 'changed' signal would be fired\n    return computed(expr, { context: scope }).get();\n}\n\nfunction toJS(source, detectCycles, __alreadySeen) {\n    if (detectCycles === void 0) {\n        detectCycles = true;\n    }\n    if (__alreadySeen === void 0) {\n        __alreadySeen = [];\n    }\n    // optimization: using ES6 map would be more efficient!\n    // optimization: lift this function outside toJS, this makes recursion expensive\n    function cache(value) {\n        if (detectCycles) __alreadySeen.push([source, value]);\n        return value;\n    }\n    if (isObservable(source)) {\n        if (detectCycles && __alreadySeen === null) __alreadySeen = [];\n        if (detectCycles && source !== null && (typeof source === \"undefined\" ? \"undefined\" : _typeof(source)) === \"object\") {\n            for (var i = 0, l = __alreadySeen.length; i < l; i++) {\n                if (__alreadySeen[i][0] === source) return __alreadySeen[i][1];\n            }\n        }\n        if (isObservableArray(source)) {\n            var res = cache([]);\n            var toAdd = source.map(function (value) {\n                return toJS(value, detectCycles, __alreadySeen);\n            });\n            res.length = toAdd.length;\n            for (var i = 0, l = toAdd.length; i < l; i++) {\n                res[i] = toAdd[i];\n            }return res;\n        }\n        if (isObservableObject(source)) {\n            var res = cache({});\n            for (var key in source) {\n                res[key] = toJS(source[key], detectCycles, __alreadySeen);\n            }return res;\n        }\n        if (isObservableMap(source)) {\n            var res_1 = cache({});\n            source.forEach(function (value, key) {\n                return res_1[key] = toJS(value, detectCycles, __alreadySeen);\n            });\n            return res_1;\n        }\n        if (isObservableValue(source)) return toJS(source.get(), detectCycles, __alreadySeen);\n    }\n    return source;\n}\n\nfunction createTransformer(transformer, onCleanup) {\n    invariant(typeof transformer === \"function\" && transformer.length < 2, \"createTransformer expects a function that accepts one argument\");\n    // Memoizes: object id -> reactive view that applies transformer to the object\n    var objectCache = {};\n    // If the resetId changes, we will clear the object cache, see #163\n    // This construction is used to avoid leaking refs to the objectCache directly\n    var resetId = globalState.resetId;\n    // Local transformer class specifically for this transformer\n    var Transformer = function (_super) {\n        __extends(Transformer, _super);\n        function Transformer(sourceIdentifier, sourceObject) {\n            var _this = _super.call(this, function () {\n                return transformer(sourceObject);\n            }, undefined, comparer.default, \"Transformer-\" + transformer.name + \"-\" + sourceIdentifier, undefined) || this;\n            _this.sourceIdentifier = sourceIdentifier;\n            _this.sourceObject = sourceObject;\n            return _this;\n        }\n        Transformer.prototype.onBecomeUnobserved = function () {\n            var lastValue = this.value;\n            _super.prototype.onBecomeUnobserved.call(this);\n            delete objectCache[this.sourceIdentifier];\n            if (onCleanup) onCleanup(lastValue, this.sourceObject);\n        };\n        return Transformer;\n    }(ComputedValue);\n    return function (object) {\n        if (resetId !== globalState.resetId) {\n            objectCache = {};\n            resetId = globalState.resetId;\n        }\n        var identifier = getMemoizationId(object);\n        var reactiveTransformer = objectCache[identifier];\n        if (reactiveTransformer) return reactiveTransformer.get();\n        // Not in cache; create a reactive view\n        reactiveTransformer = objectCache[identifier] = new Transformer(identifier, object);\n        return reactiveTransformer.get();\n    };\n}\nfunction getMemoizationId(object) {\n    if (typeof object === 'string' || typeof object === 'number') return object;\n    if (object === null || (typeof object === \"undefined\" ? \"undefined\" : _typeof(object)) !== \"object\") throw new Error(\"[mobx] transform expected some kind of object or primitive value, got: \" + object);\n    var tid = object.$transformId;\n    if (tid === undefined) {\n        tid = getNextId();\n        addHiddenProp(object, \"$transformId\", tid);\n    }\n    return tid;\n}\n\nfunction log(msg) {\n    console.log(msg);\n    return msg;\n}\nfunction whyRun(thing, prop) {\n    switch (arguments.length) {\n        case 0:\n            thing = globalState.trackingDerivation;\n            if (!thing) return log(getMessage(\"m024\"));\n            break;\n        case 2:\n            thing = getAtom(thing, prop);\n            break;\n    }\n    thing = getAtom(thing);\n    if (isComputedValue(thing)) return log(thing.whyRun());else if (isReaction(thing)) return log(thing.whyRun());\n    return fail(getMessage(\"m025\"));\n}\n\nfunction getDependencyTree(thing, property) {\n    return nodeToDependencyTree(getAtom(thing, property));\n}\nfunction nodeToDependencyTree(node) {\n    var result = {\n        name: node.name\n    };\n    if (node.observing && node.observing.length > 0) result.dependencies = unique(node.observing).map(nodeToDependencyTree);\n    return result;\n}\nfunction getObserverTree(thing, property) {\n    return nodeToObserverTree(getAtom(thing, property));\n}\nfunction nodeToObserverTree(node) {\n    var result = {\n        name: node.name\n    };\n    if (hasObservers(node)) result.observers = getObservers(node).map(nodeToObserverTree);\n    return result;\n}\n\nfunction interceptReads(thing, propOrHandler, handler) {\n    var target;\n    if (isObservableMap(thing) || isObservableArray(thing) || isObservableValue(thing)) {\n        target = getAdministration(thing);\n    } else if (isObservableObject(thing)) {\n        if (typeof propOrHandler !== \"string\") return fail(\"InterceptReads can only be used with a specific property, not with an object in general\");\n        target = getAdministration(thing, propOrHandler);\n    } else {\n        return fail(\"Expected observable map, object or array as first array\");\n    }\n    if (target.dehancer !== undefined) return fail(\"An intercept reader was already established\");\n    target.dehancer = typeof propOrHandler === \"function\" ? propOrHandler : handler;\n    return function () {\n        target.dehancer = undefined;\n    };\n}\n\n/**\n * (c) Michel Weststrate 2015 - 2016\n * MIT Licensed\n *\n * Welcome to the mobx sources! To get an global overview of how MobX internally works,\n * this is a good place to start:\n * https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.xvbh6qd74\n *\n * Source folders:\n * ===============\n *\n * - api/     Most of the public static methods exposed by the module can be found here.\n * - core/    Implementation of the MobX algorithm; atoms, derivations, reactions, dependency trees, optimizations. Cool stuff can be found here.\n * - types/   All the magic that is need to have observable objects, arrays and values is in this folder. Including the modifiers like `asFlat`.\n * - utils/   Utility stuff.\n *\n */\nvar extras = {\n    allowStateChanges: allowStateChanges,\n    deepEqual: deepEqual,\n    getAtom: getAtom,\n    getDebugName: getDebugName,\n    getDependencyTree: getDependencyTree,\n    getAdministration: getAdministration,\n    getGlobalState: getGlobalState,\n    getObserverTree: getObserverTree,\n    interceptReads: interceptReads,\n    isComputingDerivation: isComputingDerivation,\n    isSpyEnabled: isSpyEnabled,\n    onReactionError: onReactionError,\n    reserveArrayBuffer: reserveArrayBuffer,\n    resetGlobalState: resetGlobalState,\n    isolateGlobalState: isolateGlobalState,\n    shareGlobalState: shareGlobalState,\n    spyReport: spyReport,\n    spyReportEnd: spyReportEnd,\n    spyReportStart: spyReportStart,\n    setReactionScheduler: setReactionScheduler\n};\nvar everything = {\n    Reaction: Reaction,\n    untracked: untracked,\n    Atom: Atom, BaseAtom: BaseAtom,\n    useStrict: useStrict, isStrictModeEnabled: isStrictModeEnabled,\n    spy: spy,\n    comparer: comparer,\n    asReference: asReference, asFlat: asFlat, asStructure: asStructure, asMap: asMap,\n    isModifierDescriptor: isModifierDescriptor,\n    isObservableObject: isObservableObject,\n    isBoxedObservable: isObservableValue,\n    isObservableArray: isObservableArray,\n    ObservableMap: ObservableMap, isObservableMap: isObservableMap, map: map,\n    transaction: transaction,\n    observable: observable,\n    computed: computed,\n    isObservable: isObservable,\n    isComputed: isComputed,\n    extendObservable: extendObservable, extendShallowObservable: extendShallowObservable,\n    observe: observe,\n    intercept: intercept,\n    autorun: autorun, autorunAsync: autorunAsync, when: when, reaction: reaction,\n    action: action, isAction: isAction, runInAction: runInAction,\n    expr: expr,\n    toJS: toJS,\n    createTransformer: createTransformer,\n    whyRun: whyRun,\n    isArrayLike: isArrayLike,\n    extras: extras\n};\nvar warnedAboutDefaultExport = false;\nvar _loop_1 = function _loop_1(p) {\n    var val = everything[p];\n    Object.defineProperty(everything, p, {\n        get: function get() {\n            if (!warnedAboutDefaultExport) {\n                warnedAboutDefaultExport = true;\n                console.warn('Using default export (`import mobx from \\'mobx\\'`) is deprecated ' + 'and won’t work in mobx@4.0.0\\n' + 'Use `import * as mobx from \\'mobx\\'` instead');\n            }\n            return val;\n        }\n    });\n};\nfor (var p in everything) {\n    _loop_1(p);\n}\nif ((typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ === \"undefined\" ? \"undefined\" : _typeof(__MOBX_DEVTOOLS_GLOBAL_HOOK__)) === \"object\") {\n    __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({ spy: spy, extras: extras });\n}\n\nexports.extras = extras;\nexports.Reaction = Reaction;\nexports.untracked = untracked;\nexports.IDerivationState = IDerivationState;\nexports.Atom = Atom;\nexports.BaseAtom = BaseAtom;\nexports.useStrict = useStrict;\nexports.isStrictModeEnabled = isStrictModeEnabled;\nexports.spy = spy;\nexports.comparer = comparer;\nexports.asReference = asReference;\nexports.asFlat = asFlat;\nexports.asStructure = asStructure;\nexports.asMap = asMap;\nexports.isModifierDescriptor = isModifierDescriptor;\nexports.isObservableObject = isObservableObject;\nexports.isBoxedObservable = isObservableValue;\nexports.isObservableArray = isObservableArray;\nexports.ObservableMap = ObservableMap;\nexports.isObservableMap = isObservableMap;\nexports.map = map;\nexports.transaction = transaction;\nexports.observable = observable;\nexports.IObservableFactories = IObservableFactories;\nexports.computed = computed;\nexports.isObservable = isObservable;\nexports.isComputed = isComputed;\nexports.extendObservable = extendObservable;\nexports.extendShallowObservable = extendShallowObservable;\nexports.observe = observe;\nexports.intercept = intercept;\nexports.autorun = autorun;\nexports.autorunAsync = autorunAsync;\nexports.when = when;\nexports.reaction = reaction;\nexports.action = action;\nexports.isAction = isAction;\nexports.runInAction = runInAction;\nexports.expr = expr;\nexports.toJS = toJS;\nexports.createTransformer = createTransformer;\nexports.whyRun = whyRun;\nexports.isArrayLike = isArrayLike;\nexports.default = everything;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4)))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _icons = __webpack_require__(6);\n\nvar _constants = __webpack_require__(0);\n\nvar _translator = __webpack_require__(7);\n\nvar translator = _interopRequireWildcard(_translator);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar culture = /^([^-]{1,3})(-|$)/;\nvar $ = function $(x) {\n  return (0, translator.default)(x);\n};\n\nfunction renderHeader(_ref, instance) {\n  var meta = _ref.meta,\n      user = _ref.user,\n      reactions = _ref.reactions;\n\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-header-container';\n\n  var likeButton = document.createElement('span');\n  var likedReaction = reactions.find(function (reaction) {\n    return reaction.content === 'heart' && reaction.user.login === user.login;\n  });\n  likeButton.className = 'gitment-header-like-btn';\n  likeButton.innerHTML = '\\n    ' + _icons.heart + '\\n    ' + (likedReaction ? 'Unlike' : 'Like') + '\\n    ' + (meta.reactions && meta.reactions.heart ? ' \\u2022 <strong>' + meta.reactions.heart + '</strong> Liked' : '') + '\\n  ';\n\n  if (likedReaction) {\n    likeButton.classList.add('liked');\n    likeButton.onclick = function () {\n      return instance.unlike();\n    };\n  } else {\n    likeButton.classList.remove('liked');\n    likeButton.onclick = function () {\n      return instance.like();\n    };\n  }\n  container.appendChild(likeButton);\n\n  var commentsCount = document.createElement('span');\n  commentsCount.innerHTML = '\\n    ' + (meta.comments ? ' \\u2022 <strong>' + meta.comments + '</strong> Comments' : '') + '\\n  ';\n  container.appendChild(commentsCount);\n\n  var issueLink = document.createElement('a');\n  issueLink.className = 'gitment-header-issue-link';\n  issueLink.href = meta.html_url || \"javascript:void(0)\";\n  issueLink.target = '_blank';\n  issueLink.innerText = $('Issue Page');\n  container.appendChild(issueLink);\n\n  return container;\n}\n\nfunction renderComments(_ref2, instance) {\n  var meta = _ref2.meta,\n      comments = _ref2.comments,\n      commentReactions = _ref2.commentReactions,\n      currentPage = _ref2.currentPage,\n      user = _ref2.user,\n      error = _ref2.error;\n\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-comments-container';\n\n  if (error) {\n    var errorBlock = document.createElement('div');\n    errorBlock.className = 'gitment-comments-error';\n\n    if (error === _constants.NOT_INITIALIZED_ERROR && user.login && ~(instance.admin || [instance.owner]).map(function (x) {\n      return x.toLowerCase();\n    }).indexOf(user.login.toLowerCase())) {\n      // && user.login.toLowerCase() === instance.owner.toLowerCase()) {\n      var initHint = document.createElement('div');\n      var initButton = document.createElement('button');\n      initButton.className = 'gitment-comments-init-btn';\n      initButton.onclick = function () {\n        initButton.setAttribute('disabled', true);\n        instance.init().catch(function (e) {\n          initButton.removeAttribute('disabled');\n          alert(e);\n        });\n      };\n      initButton.innerText = $('Initialize Comments');\n      initHint.appendChild(initButton);\n      errorBlock.appendChild(initHint);\n    } else {\n      errorBlock.innerText = $(error);\n    }\n    container.appendChild(errorBlock);\n    return container;\n  } else if (comments === undefined) {\n    var loading = document.createElement('div');\n    loading.innerText = $('Loading comments...');\n    loading.className = 'gitment-comments-loading';\n    container.appendChild(loading);\n    return container;\n  } else if (!comments.length) {\n    var emptyBlock = document.createElement('div');\n    emptyBlock.className = 'gitment-comments-empty';\n    emptyBlock.innerText = $('No Comment Yet');\n    container.appendChild(emptyBlock);\n    return container;\n  }\n\n  var commentsList = document.createElement('ul');\n  commentsList.className = 'gitment-comments-list';\n\n  comments.forEach(function (comment) {\n    var createDate = new Date(comment.created_at);\n    var updateDate = new Date(comment.updated_at);\n    var commentItem = document.createElement('li');\n    commentItem.className = 'gitment-comment';\n    commentItem.innerHTML = '\\n      <a class=\"gitment-comment-avatar\" href=\"' + comment.user.html_url + '\" target=\"_blank\">\\n        <img class=\"gitment-comment-avatar-img\" src=\"' + comment.user.avatar_url + '\"/>\\n      </a>\\n      <div class=\"gitment-comment-main\">\\n        <div class=\"gitment-comment-header\">\\n          <a class=\"gitment-comment-name\" href=\"' + comment.user.html_url + '\" target=\"_blank\">\\n            ' + comment.user.login + '\\n          </a>\\n          commented on\\n          <span title=\"' + createDate + '\">' + createDate.toDateString() + '</span>\\n          ' + (createDate.toString() !== updateDate.toString() ? ' \\u2022 <span title=\"comment was edited at ' + updateDate + '\">edited</span>' : '') + '\\n          <div class=\"gitment-comment-like-btn\">' + _icons.heart + ' ' + (comment.reactions.heart || '') + '</div>\\n        </div>\\n        <div class=\"gitment-comment-body gitment-markdown\">' + comment.body_html + '</div>\\n      </div>\\n    ';\n    var likeButton = commentItem.querySelector('.gitment-comment-like-btn');\n    var likedReaction = commentReactions[comment.id] && commentReactions[comment.id].find(function (reaction) {\n      return reaction.content === 'heart' && reaction.user.login === user.login;\n    });\n    if (likedReaction) {\n      likeButton.classList.add('liked');\n      likeButton.onclick = function () {\n        return instance.unlikeAComment(comment.id);\n      };\n    } else {\n      likeButton.classList.remove('liked');\n      likeButton.onclick = function () {\n        return instance.likeAComment(comment.id);\n      };\n    }\n\n    // dirty\n    // use a blank image to trigger height calculating when element rendered\n    var imgTrigger = document.createElement('img');\n    var markdownBody = commentItem.querySelector('.gitment-comment-body');\n    imgTrigger.className = 'gitment-hidden';\n    imgTrigger.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n    imgTrigger.onload = function () {\n      if (markdownBody.clientHeight > instance.maxCommentHeight) {\n        markdownBody.classList.add('gitment-comment-body-folded');\n        markdownBody.style.maxHeight = instance.maxCommentHeight + 'px';\n        markdownBody.title = 'Click to Expand';\n        markdownBody.onclick = function () {\n          markdownBody.classList.remove('gitment-comment-body-folded');\n          markdownBody.style.maxHeight = '';\n          markdownBody.title = '';\n          markdownBody.onclick = null;\n        };\n      }\n    };\n    commentItem.appendChild(imgTrigger);\n\n    commentsList.appendChild(commentItem);\n  });\n\n  container.appendChild(commentsList);\n\n  if (meta) {\n    var pageCount = Math.ceil(meta.comments / instance.perPage);\n    if (pageCount > 1) {\n      var pagination = document.createElement('ul');\n      pagination.className = 'gitment-comments-pagination';\n\n      if (currentPage > 1) {\n        var previousButton = document.createElement('li');\n        previousButton.className = 'gitment-comments-page-item';\n        previousButton.innerText = $('Previous');\n        previousButton.onclick = function () {\n          return instance.goto(currentPage - 1);\n        };\n        pagination.appendChild(previousButton);\n      }\n\n      var _loop = function _loop(i) {\n        var pageItem = document.createElement('li');\n        pageItem.className = 'gitment-comments-page-item';\n        pageItem.innerText = i;\n        pageItem.onclick = function () {\n          return instance.goto(i);\n        };\n        if (currentPage === i) pageItem.classList.add('gitment-selected');\n        pagination.appendChild(pageItem);\n      };\n\n      for (var i = 1; i <= pageCount; i++) {\n        _loop(i);\n      }\n\n      if (currentPage < pageCount) {\n        var nextButton = document.createElement('li');\n        nextButton.className = 'gitment-comments-page-item';\n        nextButton.innerText = $('Next');\n        nextButton.onclick = function () {\n          return instance.goto(currentPage + 1);\n        };\n        pagination.appendChild(nextButton);\n      }\n\n      container.appendChild(pagination);\n    }\n  }\n\n  return container;\n}\n\nfunction renderEditor(_ref3, instance) {\n  var user = _ref3.user,\n      error = _ref3.error;\n\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-editor-container';\n\n  var shouldDisable = user.login && !error ? '' : 'disabled';\n  var disabledTip = user.login ? '' : $('Login to Comment');\n  container.innerHTML = '\\n      ' + (user.login ? '<a class=\"gitment-editor-avatar\" href=\"' + user.html_url + '\" target=\"_blank\">\\n            <img class=\"gitment-editor-avatar-img\" src=\"' + user.avatar_url + '\"/>\\n          </a>' : user.isLoggingIn ? '<div class=\"gitment-editor-avatar\">' + _icons.spinner + '</div>' : '<a class=\"gitment-editor-avatar\" href=\"' + instance.loginLink + '\" title=\"login with GitHub\">\\n              ' + _icons.github + '\\n            </a>') + '\\n    </a>\\n    <div class=\"gitment-editor-main\">\\n      <div class=\"gitment-editor-header\">\\n        <nav class=\"gitment-editor-tabs\">\\n          <button class=\"gitment-editor-tab gitment-selected\">' + $('Write') + '</button>\\n          <button class=\"gitment-editor-tab\">' + $('Preview') + '</button>\\n        </nav>\\n        <div class=\"gitment-editor-login\">\\n          ' + (user.login ? '<a class=\"gitment-editor-logout-link\">' + $('Logout') + '</a>' : user.isLoggingIn ? $('Logging in...') : '<a class=\"gitment-editor-login-link\" href=\"' + instance.loginLink + '\">' + $('Login') + '</a> with GitHub') + '\\n        </div>\\n      </div>\\n      <div class=\"gitment-editor-body\">\\n        <div class=\"gitment-editor-write-field\">\\n          <textarea placeholder=\"' + $('Leave a comment') + '\" title=\"' + disabledTip + '\" ' + shouldDisable + '></textarea>\\n        </div>\\n        <div class=\"gitment-editor-preview-field gitment-hidden\">\\n          <div class=\"gitment-editor-preview gitment-markdown\"></div>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\"gitment-editor-footer\">\\n      <a class=\"gitment-editor-footer-tip\" href=\"https://guides.github.com/features/mastering-markdown/\" target=\"_blank\">\\n        Styling with Markdown is supported\\n      </a>\\n      <button class=\"gitment-editor-submit\" title=\"' + disabledTip + '\" ' + shouldDisable + '>' + $('Comment') + '</button>\\n    </div>\\n  ';\n  if (user.login) {\n    container.querySelector('.gitment-editor-logout-link').onclick = function () {\n      return instance.logout();\n    };\n  }\n\n  var writeField = container.querySelector('.gitment-editor-write-field');\n  var previewField = container.querySelector('.gitment-editor-preview-field');\n\n  var textarea = writeField.querySelector('textarea');\n  textarea.oninput = function () {\n    textarea.style.height = 'auto';\n    var style = window.getComputedStyle(textarea, null);\n    var height = parseInt(style.height, 10);\n    var clientHeight = textarea.clientHeight;\n    var scrollHeight = textarea.scrollHeight;\n    if (clientHeight < scrollHeight) {\n      textarea.style.height = height + scrollHeight - clientHeight + 'px';\n    }\n  };\n\n  var _container$querySelec = container.querySelectorAll('.gitment-editor-tab'),\n      _container$querySelec2 = _slicedToArray(_container$querySelec, 2),\n      writeTab = _container$querySelec2[0],\n      previewTab = _container$querySelec2[1];\n\n  writeTab.onclick = function () {\n    writeTab.classList.add('gitment-selected');\n    previewTab.classList.remove('gitment-selected');\n    writeField.classList.remove('gitment-hidden');\n    previewField.classList.add('gitment-hidden');\n\n    textarea.focus();\n  };\n  previewTab.onclick = function () {\n    previewTab.classList.add('gitment-selected');\n    writeTab.classList.remove('gitment-selected');\n    previewField.classList.remove('gitment-hidden');\n    writeField.classList.add('gitment-hidden');\n\n    var preview = previewField.querySelector('.gitment-editor-preview');\n    var content = textarea.value.trim();\n    if (!content) {\n      preview.innerText = $('Nothing to preview');\n      return;\n    }\n\n    preview.innerText = $('Loading preview...');\n    instance.markdown(content).then(function (html) {\n      return preview.innerHTML = html;\n    });\n  };\n\n  var submitButton = container.querySelector('.gitment-editor-submit');\n  submitButton.onclick = function () {\n    submitButton.innerText = $('Submitting...');\n    submitButton.setAttribute('disabled', true);\n    instance.post(textarea.value.trim()).then(function (data) {\n      textarea.value = '';\n      textarea.style.height = 'auto';\n      submitButton.removeAttribute('disabled');\n      submitButton.innerText = $('Comment');\n    }).catch(function (e) {\n      alert(e);\n      submitButton.removeAttribute('disabled');\n      submitButton.innerText = $('Comment');\n    });\n  };\n\n  return container;\n}\n\nfunction renderFooter(state, instance) {\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-footer-container';\n  container.innerHTML = '\\n    Powered by\\n    <a class=\"gitment-footer-project-link\" href=\"https://github.com/imsun/gitment\" target=\"_blank\">\\n      Gitment\\n    </a>\\n  ';\n  return container;\n}\n\nfunction renderCounter(_ref4, instance) {\n  var meta = _ref4.meta;\n\n  var counter = document.querySelector(\".post-comments-count.gitment-comments-count\");\n  if (counter &&\n  // (instance.id.lastIndexOf(counter.getAttribute('data-xid')) > -1) &&\n  counter.getAttribute('itemprop') == \"commentsCount\") {\n    counter.innerText = meta && meta.comments || 0;\n  }\n}\n\nfunction render(state, instance) {\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n\n  // rewrite by gitmint\n  $ = instance.lang && translator[instance.lang] || translator.fromLanguageCode(container.lang);\n  instance.updateCount = function () {\n    return instance.renderCounter(state, instance);\n  };\n\n  container.className = 'gitment-container gitment-root-container';\n  var parts = (!instance.above) ? ['renderHeader', 'renderComments', 'renderEditor', 'renderFooter']\n    : ['renderHeader', 'renderEditor', 'renderFooter', 'renderComments'];\n  parts.forEach(function(partName) {\n    container.appendChild(instance[partName](state, instance));\n  });\n  return container;\n}\n\nexports.default = { render: render, renderHeader: renderHeader, renderComments: renderComments, renderEditor: renderEditor, renderFooter: renderFooter, renderCounter: renderCounter };\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.http = exports.Query = exports.isString = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.getTargetContainer = getTargetContainer;\n\nvar _constants = __webpack_require__(0);\n\nvar isString = exports.isString = function isString(s) {\n  return toString.call(s) === '[object String]';\n};\n\nfunction getTargetContainer(container) {\n  var targetContainer = void 0;\n  if (container instanceof Element) {\n    targetContainer = container;\n  } else if (isString(container)) {\n    targetContainer = document.getElementById(container);\n  } else {\n    targetContainer = document.createElement('div');\n  }\n\n  return targetContainer;\n}\n\nvar Query = exports.Query = {\n  parse: function parse() {\n    var search = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.location.search;\n\n    if (!search) return {};\n    var queryString = search[0] === '?' ? search.substring(1) : search;\n    var query = {};\n    queryString.split('&').forEach(function (queryStr) {\n      var _queryStr$split = queryStr.split('='),\n          _queryStr$split2 = _slicedToArray(_queryStr$split, 2),\n          key = _queryStr$split2[0],\n          value = _queryStr$split2[1];\n\n      if (key) query[key] = value;\n    });\n\n    return query;\n  },\n  stringify: function stringify(query) {\n    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '?';\n\n    var queryString = Object.keys(query).map(function (key) {\n      return key + '=' + encodeURIComponent(query[key] || '');\n    }).join('&');\n    return queryString ? prefix + queryString : '';\n  }\n};\n\nfunction ajaxFactory(method) {\n  return function (apiPath) {\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var base = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'https://api.github.com';\n\n    var req = new XMLHttpRequest();\n    var token = localStorage.getItem(_constants.LS_ACCESS_TOKEN_KEY);\n    if (base !== 'https://api.github.com') token = null;\n\n    var url = '' + base + apiPath;\n    var body = null;\n    if (method === 'GET' || method === 'DELETE') {\n      url += isString(data) ? data : Query.stringify(data);\n    }\n\n    var p = new Promise(function (resolve, reject) {\n      req.addEventListener('load', function () {\n        var contentType = req.getResponseHeader('content-type');\n        var res = req.responseText;\n\n        var data = res;\n        if (/urlencoded/.test(contentType)) {\n          data = req.responseText ? Query.parse(res) : {};\n          if (data.error) return reject(new Error(data.error_description));\n        } else if (/json/.test(contentType)) {\n          data = req.responseText ? JSON.parse(res) : {};\n          if (data.message) return reject(new Error(data.message));\n        }\n        resolve(data);\n      });\n      req.addEventListener('error', function (error) {\n        return reject(error);\n      });\n    });\n    req.open(method, url, true);\n\n    req.setRequestHeader('Accept', 'application/vnd.github.squirrel-girl-preview, application/vnd.github.html+json, application/x-www-form-urlencoded');\n    if (token) {\n      req.setRequestHeader('Authorization', 'token ' + token);\n    }\n    if (method !== 'GET' && method !== 'DELETE') {\n      if (isString(data)) {\n        body = data;\n        req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n      } else {\n        body = JSON.stringify(data);\n        req.setRequestHeader('Content-Type', 'application/json');\n      }\n    }\n\n    req.send(body);\n    return p;\n  };\n}\n\nvar http = exports.http = {\n  get: ajaxFactory('GET'),\n  post: ajaxFactory('POST'),\n  delete: ajaxFactory('DELETE'),\n  put: ajaxFactory('PUT')\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar g;\n\n// This works in non-strict mode\ng = function () {\n\treturn this;\n}();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mobx = __webpack_require__(1);\n\nvar _constants = __webpack_require__(0);\n\nvar _utils = __webpack_require__(3);\n\nvar _default = __webpack_require__(2);\n\nvar _default2 = _interopRequireDefault(_default);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// @see: https://developer.github.com/apps/building-integrations/setting-up-and-registering-oauth-apps/about-scopes-for-oauth-apps\nvar scope = 'public_repo';\n\n// Github setting of 'Authorization callback URL' in your OAuth application\nvar force_redirect_protocol = '$&';\n// A RegExp to match protocol and domain\nvar rx_url_with_protocol = /^((https?:\\/\\/+){0,1}[^\\/]*)(.*)/;\n\nfunction extendRenderer(instance, renderer) {\n  instance[renderer] = function (container) {\n    var targetContainer = (0, _utils.getTargetContainer)(container);\n    var render = instance.theme[renderer] || instance.defaultTheme[renderer];\n\n    (0, _mobx.autorun)(function () {\n      var e = render(instance.state, instance);\n      if (e) {\n        if (targetContainer.firstChild) {\n          targetContainer.replaceChild(e, targetContainer.firstChild);\n        } else {\n          targetContainer.appendChild(e);\n        }\n      }\n    });\n\n    return targetContainer;\n  };\n}\n\nvar Gitment = function () {\n  _createClass(Gitment, [{\n    key: 'accessToken',\n    get: function get() {\n      return localStorage.getItem(_constants.LS_ACCESS_TOKEN_KEY);\n    },\n    set: function set(token) {\n      localStorage.setItem(_constants.LS_ACCESS_TOKEN_KEY, token);\n    }\n  }, {\n    key: 'loginLink',\n    get: function get() {\n      var oauthUri = 'https://github.com/login/oauth/authorize';\n      var redirect_uri = this.oauth.redirect_uri || window.location.href.replace(/^https?/i, this.oauth.redirect_protocol || force_redirect_protocol);\n\n      var oauthParams = Object.assign({\n        scope: scope,\n        redirect_uri: redirect_uri\n      }, this.oauth);\n\n      return '' + oauthUri + _utils.Query.stringify(oauthParams);\n    }\n  }]);\n\n  function Gitment() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Gitment);\n\n    this.defaultTheme = _default2.default;\n    this.useTheme(_default2.default);\n\n    var internalId;\n    Object.defineProperties(this, {\n      'updateCount': {\n        value: new Function(),\n        writable: true\n      },\n      'id': {\n        get: function get() {\n          return internalId;\n        },\n        set: function set(id) {\n          return internalId = id !== window.location.href ? id : '' + window.location.origin + window.location.pathname + window.location.search;\n        }\n      }\n    });\n\n    Object.assign(this, {\n      id: window.location.href,\n      title: window.document.title,\n      link: window.location.href,\n      desc: '',\n      labels: [],\n      theme: _default2.default,\n      oauth: {},\n      perPage: 20,\n      maxCommentHeight: 250\n    }, options);\n\n    this.useTheme(this.theme);\n\n    var user = {};\n    try {\n      var userInfo = localStorage.getItem(_constants.LS_USER_KEY);\n      if (this.accessToken && userInfo) {\n        Object.assign(user, JSON.parse(userInfo), {\n          fromCache: true\n        });\n      }\n    } catch (e) {\n      localStorage.removeItem(_constants.LS_USER_KEY);\n    }\n\n    this.state = (0, _mobx.observable)({\n      user: user,\n      error: null,\n      meta: {},\n      comments: undefined,\n      reactions: [],\n      commentReactions: {},\n      currentPage: 1\n    });\n\n    // NOTE: the proxy_gateway accept form-urlencoded only!!!\n    //  - PHP implement at https://github.com/aimingoo/intersect\n    var query = _utils.Query.parse();\n    if (query.code) {\n      var _oauth = this.oauth,\n          client_id = _oauth.client_id,\n          client_secret = _oauth.client_secret,\n          proxy_gateway = _oauth.proxy_gateway;\n\n      var code = query.code;\n      delete query.code;\n      var search = _utils.Query.stringify(query);\n      var replacedUrl = '' + window.location.origin + window.location.pathname + search + window.location.hash;\n      history.replaceState({}, '', replacedUrl);\n\n      Object.assign(this, {\n        id: replacedUrl,\n        link: replacedUrl\n      }, options);\n\n      this.state.user.isLoggingIn = true;\n      var logging = !proxy_gateway ? _utils.http.post('https://gh-oauth.imsun.net', { code: code, client_id: client_id, client_secret: client_secret }, '') : _utils.http.post('/login/oauth/access_token', 'code=' + code + '&client_id=' + client_id, proxy_gateway);\n      logging.then(function (data) {\n        _this.accessToken = data.access_token;\n        _this.update();\n      }).catch(function (e) {\n        _this.state.user.isLoggingIn = false;\n        alert(e);\n      });\n    } else {\n      this.update();\n    }\n  }\n\n  _createClass(Gitment, [{\n    key: 'init',\n    value: function init() {\n      var _this2 = this;\n\n      return this.createIssue().then(function () {\n        return _this2.loadComments();\n      }).then(function (comments) {\n        _this2.state.error = null;\n        return comments;\n      });\n    }\n  }, {\n    key: 'useTheme',\n    value: function useTheme() {\n      var _this3 = this;\n\n      var theme = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this.theme = theme;\n\n      var renderers = Object.keys(this.theme);\n      renderers.forEach(function (renderer) {\n        return extendRenderer(_this3, renderer);\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this4 = this;\n\n      return Promise.all([this.loadMeta(), this.loadUserInfo()]).then(function () {\n        return Promise.all([_this4.loadComments().then(function () {\n          return _this4.loadCommentReactions();\n        }), _this4.loadReactions()]);\n      }).catch(function (e) {\n        return _this4.state.error = e;\n      });\n    }\n  }, {\n    key: 'markdown',\n    value: function markdown(text) {\n      return _utils.http.post('/markdown', {\n        text: text,\n        mode: 'gfm'\n      });\n    }\n  }, {\n    key: 'createIssue',\n    value: function createIssue() {\n      var _this5 = this;\n\n      var id = this.id,\n          owner = this.owner,\n          repo = this.repo,\n          title = this.title,\n          link = this.link,\n          desc = this.desc,\n          labels = this.labels;\n\n\n      return _utils.http.post('/repos/' + owner + '/' + repo + '/issues', {\n        title: title,\n        labels: labels.concat(['gitment', id]),\n        body: link + '\\n\\n' + desc\n      }).then(function (meta) {\n        _this5.state.meta = meta;\n        return meta;\n      });\n    }\n  }, {\n    key: 'getIssue',\n    value: function getIssue() {\n      if (this.state.meta.id) return Promise.resolve(this.state.meta);\n\n      return this.loadMeta();\n    }\n  }, {\n    key: 'post',\n    value: function post(body) {\n      var _this6 = this;\n\n      return this.getIssue().then(function (issue) {\n        var matched = issue.comments_url.match(rx_url_with_protocol);\n        return _utils.http.post(matched[3], { body: body }, matched[1] || undefined);\n      }).then(function (data) {\n        _this6.state.meta.comments++;\n        _this6.updateCount();\n        var pageCount = Math.ceil(_this6.state.meta.comments / _this6.perPage);\n        if (_this6.state.currentPage === pageCount) {\n          _this6.state.comments.push(data);\n        }\n        return data;\n      });\n    }\n  }, {\n    key: 'loadMeta',\n    value: function loadMeta() {\n      var _this7 = this;\n\n      var id = this.id,\n          owner = this.owner,\n          admin = this.admin,\n          repo = this.repo;\n\n      return _utils.http.get('/repos/' + owner + '/' + repo + '/issues', { labels: id }).then(function (issues) {\n        if (issues.length) {\n          // recheck creator for organization\n          //  - or check 'issue.user.login and issue.user.site_admin' ?\n          var allowed = (admin || [owner]).map(function (x) {\n            return x.toLowerCase();\n          });\n          issues = issues.filter(function (issue) {\n            return ~allowed.indexOf(issue.user.login.toLowerCase());\n          }).sort(function (left, right) {\n            return new Date(left.created_at) - new Date(right.created_at);\n          });\n        }\n        if (!issues.length) return Promise.reject(_constants.NOT_INITIALIZED_ERROR);\n        _this7.state.meta = issues[0];\n        _this7.updateCount();\n        return issues[0];\n      });\n    }\n  }, {\n    key: 'loadComments',\n    value: function loadComments() {\n      var _this8 = this;\n\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.currentPage;\n\n      return this.getIssue().then(function (issue) {\n        var matched = issue.comments_url.match(rx_url_with_protocol);\n        return _utils.http.get(matched[3], { page: page, per_page: _this8.perPage }, matched[1] || undefined);\n      }).then(function (comments) {\n        _this8.state.comments = comments;\n        return comments;\n      });\n    }\n  }, {\n    key: 'loadUserInfo',\n    value: function loadUserInfo() {\n      var _this9 = this;\n\n      if (!this.accessToken) {\n        this.logout();\n        return Promise.resolve({});\n      }\n\n      return _utils.http.get('/user').then(function (user) {\n        _this9.state.user = user;\n        localStorage.setItem(_constants.LS_USER_KEY, JSON.stringify(user));\n        return user;\n      });\n    }\n  }, {\n    key: 'loadReactions',\n    value: function loadReactions() {\n      var _this10 = this;\n\n      if (!this.accessToken) {\n        this.state.reactions = [];\n        return Promise.resolve([]);\n      }\n\n      return this.getIssue().then(function (issue) {\n        if (!issue.reactions.total_count) return [];\n        return _utils.http.get(issue.reactions.url, {}, '');\n      }).then(function (reactions) {\n        _this10.state.reactions = reactions;\n        return reactions;\n      });\n    }\n  }, {\n    key: 'loadCommentReactions',\n    value: function loadCommentReactions() {\n      var _this11 = this;\n\n      if (!this.accessToken) {\n        this.state.commentReactions = {};\n        return Promise.resolve([]);\n      }\n\n      var comments = this.state.comments;\n      var comentReactions = {};\n\n      return Promise.all(comments.map(function (comment) {\n        if (!comment.reactions.total_count) return [];\n\n        var owner = _this11.owner,\n            repo = _this11.repo;\n\n        return _utils.http.get('/repos/' + owner + '/' + repo + '/issues/comments/' + comment.id + '/reactions', {});\n      })).then(function (reactionsArray) {\n        comments.forEach(function (comment, index) {\n          comentReactions[comment.id] = reactionsArray[index];\n        });\n        _this11.state.commentReactions = comentReactions;\n\n        return comentReactions;\n      });\n    }\n  }, {\n    key: 'login',\n    value: function login() {\n      window.location.href = this.loginLink;\n    }\n  }, {\n    key: 'logout',\n    value: function logout() {\n      localStorage.removeItem(_constants.LS_ACCESS_TOKEN_KEY);\n      localStorage.removeItem(_constants.LS_USER_KEY);\n      this.state.user = {};\n    }\n  }, {\n    key: 'goto',\n    value: function goto(page) {\n      this.state.currentPage = page;\n      this.state.comments = undefined;\n      return this.loadComments(page);\n    }\n  }, {\n    key: 'like',\n    value: function like() {\n      var _this12 = this;\n\n      if (!this.accessToken) {\n        alert('Login to Like');\n        return Promise.reject();\n      }\n\n      var owner = this.owner,\n          repo = this.repo;\n\n\n      return _utils.http.post('/repos/' + owner + '/' + repo + '/issues/' + this.state.meta.number + '/reactions', {\n        content: 'heart'\n      }).then(function (reaction) {\n        _this12.state.reactions.push(reaction);\n        _this12.state.meta.reactions.heart++;\n      });\n    }\n  }, {\n    key: 'unlike',\n    value: function unlike() {\n      var _this13 = this;\n\n      if (!this.accessToken) return Promise.reject();\n\n      var _state = this.state,\n          user = _state.user,\n          reactions = _state.reactions;\n\n      var index = reactions.findIndex(function (reaction) {\n        return reaction.user.login === user.login;\n      });\n      return _utils.http.delete('/reactions/' + reactions[index].id).then(function () {\n        reactions.splice(index, 1);\n        _this13.state.meta.reactions.heart--;\n      });\n    }\n  }, {\n    key: 'likeAComment',\n    value: function likeAComment(commentId) {\n      var _this14 = this;\n\n      if (!this.accessToken) {\n        alert('Login to Like');\n        return Promise.reject();\n      }\n\n      var owner = this.owner,\n          repo = this.repo;\n\n      var comment = this.state.comments.find(function (comment) {\n        return comment.id === commentId;\n      });\n\n      return _utils.http.post('/repos/' + owner + '/' + repo + '/issues/comments/' + commentId + '/reactions', {\n        content: 'heart'\n      }).then(function (reaction) {\n        _this14.state.commentReactions[commentId].push(reaction);\n        comment.reactions.heart++;\n      });\n    }\n  }, {\n    key: 'unlikeAComment',\n    value: function unlikeAComment(commentId) {\n      if (!this.accessToken) return Promise.reject();\n\n      var reactions = this.state.commentReactions[commentId];\n      var comment = this.state.comments.find(function (comment) {\n        return comment.id === commentId;\n      });\n      var user = this.state.user;\n\n      var index = reactions.findIndex(function (reaction) {\n        return reaction.user.login === user.login;\n      });\n\n      return _utils.http.delete('/reactions/' + reactions[index].id).then(function () {\n        reactions.splice(index, 1);\n        comment.reactions.heart--;\n      });\n    }\n  }]);\n\n  return Gitment;\n}();\n\nmodule.exports = Gitment;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Modified from https://github.com/evil-icons/evil-icons\n */\n\nvar close = exports.close = '<svg class=\"gitment-close-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\"><path d=\"M37.304 11.282l1.414 1.414-26.022 26.02-1.414-1.413z\"/><path d=\"M12.696 11.282l26.022 26.02-1.414 1.415-26.022-26.02z\"/></svg>';\nvar github = exports.github = '<svg class=\"gitment-github-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\"><path d=\"M25 10c-8.3 0-15 6.7-15 15 0 6.6 4.3 12.2 10.3 14.2.8.1 1-.3 1-.7v-2.6c-4.2.9-5.1-2-5.1-2-.7-1.7-1.7-2.2-1.7-2.2-1.4-.9.1-.9.1-.9 1.5.1 2.3 1.5 2.3 1.5 1.3 2.3 3.5 1.6 4.4 1.2.1-1 .5-1.6 1-2-3.3-.4-6.8-1.7-6.8-7.4 0-1.6.6-3 1.5-4-.2-.4-.7-1.9.1-4 0 0 1.3-.4 4.1 1.5 1.2-.3 2.5-.5 3.8-.5 1.3 0 2.6.2 3.8.5 2.9-1.9 4.1-1.5 4.1-1.5.8 2.1.3 3.6.1 4 1 1 1.5 2.4 1.5 4 0 5.8-3.5 7-6.8 7.4.5.5 1 1.4 1 2.8v4.1c0 .4.3.9 1 .7 6-2 10.2-7.6 10.2-14.2C40 16.7 33.3 10 25 10z\"/></svg>';\nvar heart = exports.heart = '<svg class=\"gitment-heart-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\"><path d=\"M25 39.7l-.6-.5C11.5 28.7 8 25 8 19c0-5 4-9 9-9 4.1 0 6.4 2.3 8 4.1 1.6-1.8 3.9-4.1 8-4.1 5 0 9 4 9 9 0 6-3.5 9.7-16.4 20.2l-.6.5zM17 12c-3.9 0-7 3.1-7 7 0 5.1 3.2 8.5 15 18.1 11.8-9.6 15-13 15-18.1 0-3.9-3.1-7-7-7-3.5 0-5.4 2.1-6.9 3.8L25 17.1l-1.1-1.3C22.4 14.1 20.5 12 17 12z\"/></svg>';\nvar spinner = exports.spinner = '<svg class=\"gitment-spinner-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\"><path d=\"M25 18c-.6 0-1-.4-1-1V9c0-.6.4-1 1-1s1 .4 1 1v8c0 .6-.4 1-1 1z\"/><path opacity=\".3\" d=\"M25 42c-.6 0-1-.4-1-1v-8c0-.6.4-1 1-1s1 .4 1 1v8c0 .6-.4 1-1 1z\"/><path opacity=\".3\" d=\"M29 19c-.2 0-.3 0-.5-.1-.4-.3-.6-.8-.3-1.3l4-6.9c.3-.4.8-.6 1.3-.3.4.3.6.8.3 1.3l-4 6.9c-.2.2-.5.4-.8.4z\"/><path opacity=\".3\" d=\"M17 39.8c-.2 0-.3 0-.5-.1-.4-.3-.6-.8-.3-1.3l4-6.9c.3-.4.8-.6 1.3-.3.4.3.6.8.3 1.3l-4 6.9c-.2.2-.5.4-.8.4z\"/><path opacity=\".93\" d=\"M21 19c-.3 0-.6-.2-.8-.5l-4-6.9c-.3-.4-.1-1 .3-1.3.4-.3 1-.1 1.3.3l4 6.9c.3.4.1 1-.3 1.3-.2.2-.3.2-.5.2z\"/><path opacity=\".3\" d=\"M33 39.8c-.3 0-.6-.2-.8-.5l-4-6.9c-.3-.4-.1-1 .3-1.3.4-.3 1-.1 1.3.3l4 6.9c.3.4.1 1-.3 1.3-.2.1-.3.2-.5.2z\"/><path opacity=\".65\" d=\"M17 26H9c-.6 0-1-.4-1-1s.4-1 1-1h8c.6 0 1 .4 1 1s-.4 1-1 1z\"/><path opacity=\".3\" d=\"M41 26h-8c-.6 0-1-.4-1-1s.4-1 1-1h8c.6 0 1 .4 1 1s-.4 1-1 1z\"/><path opacity=\".86\" d=\"M18.1 21.9c-.2 0-.3 0-.5-.1l-6.9-4c-.4-.3-.6-.8-.3-1.3.3-.4.8-.6 1.3-.3l6.9 4c.4.3.6.8.3 1.3-.2.3-.5.4-.8.4z\"/><path opacity=\".3\" d=\"M38.9 33.9c-.2 0-.3 0-.5-.1l-6.9-4c-.4-.3-.6-.8-.3-1.3.3-.4.8-.6 1.3-.3l6.9 4c.4.3.6.8.3 1.3-.2.3-.5.4-.8.4z\"/><path opacity=\".44\" d=\"M11.1 33.9c-.3 0-.6-.2-.8-.5-.3-.4-.1-1 .3-1.3l6.9-4c.4-.3 1-.1 1.3.3.3.4.1 1-.3 1.3l-6.9 4c-.1.2-.3.2-.5.2z\"/><path opacity=\".3\" d=\"M31.9 21.9c-.3 0-.6-.2-.8-.5-.3-.4-.1-1 .3-1.3l6.9-4c.4-.3 1-.1 1.3.3.3.4.1 1-.3 1.3l-6.9 4c-.2.2-.3.2-.5.2z\"/></svg>';\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.english = english;\nexports.chinese = chinese;\nexports.chineseTraditional = chineseTraditional;\nexports.fromLanguageCode = fromLanguageCode;\nfunction english(Text) {\n    return Text;\n}\n\nfunction chinese(Text) {\n    return {\n        'Issue Page': '所有评论',\n        'Initialize Comments': '初始化本文的评论页',\n        'Loading comments...': '加载评论...',\n        'Error: Comments Not Initialized': '(未开放评论)',\n        'No Comment Yet': '(还没有评论)',\n        'Previous': '上一页',\n        'Next': '下一页',\n        'Nothing to preview': '（没有预览）',\n        'Loading preview...': '加载预览...',\n        'Submitting...': '正在提交评论...',\n        'Comment': '发送',\n        'Write': '评论',\n        'Preview': '预览',\n        'Logging in...': '登入中...',\n        'Login to Comment': '请登入以发表评论',\n        'Leave a comment': '(发表评论)',\n        'Login': '登入',\n        'Logout': '退出'\n    }[Text] || Text;\n}\n\nfunction chineseTraditional(Text) {\n    return {\n        'Issue Page': '所有評論',\n        'Initialize Comments': '初始化本文的評論頁',\n        'Loading comments...': '加載評論...',\n        'Error: Comments Not Initialized': '(未開放評論)',\n        'No Comment Yet': '(還沒有評論)',\n        'Previous': '上一頁',\n        'Next': '下一頁',\n        'Nothing to preview': '（沒有預覽）',\n        'Loading preview...': '加載預覽...',\n        'Submitting...': '正在提交評論...',\n        'Comment': '發送',\n        'Write': '評論',\n        'Preview': '預覽',\n        'Logging in...': '登入中...',\n        'Login to Comment': '請登入以發表評論',\n        'Leave a comment': '(發表評論)',\n        'Login': '登入',\n        'Logout': '登出'\n    }[Text] || Text;\n}\n\n// @see:\n//  https://www.w3.org/TR/1999/REC-html401-19991224/struct/dirlang.html#h-8.1.1\n//  https://gist.github.com/JamieMason/3748498\nfunction fromLanguageCode(code) {\n    var culture = /^([^-]+)-/;\n    return {\n        'en': english,\n        'zh': chinese,\n        'zh-CN': chinese,\n        'zh-CHS': chinese,\n        'zh-TW': chineseTraditional,\n        'zh-HK': chineseTraditional,\n        'zh-CHT': chineseTraditional,\n        'en-US': english\n    }[code] || culture.test(code) && fromLanguageCode(code.match(culture)[1]) || english;\n}\n\nexports.default = english;\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=gitmint.browser.js.map","source":"assets/css/gitment.js","raw":"var Gitmint =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar LS_ACCESS_TOKEN_KEY = exports.LS_ACCESS_TOKEN_KEY = 'gitment-comments-token';\nvar LS_USER_KEY = exports.LS_USER_KEY = 'gitment-user-info';\n\nvar NOT_INITIALIZED_ERROR = exports.NOT_INITIALIZED_ERROR = new Error('Comments Not Initialized');\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/** MobX - (c) Michel Weststrate 2015, 2016 - MIT Licensed */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n} || function (d, b) {\n    for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n};\n\nfunction __extends(d, b) {\n    extendStatics(d, b);\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n/**\n * Anything that can be used to _store_ state is an Atom in mobx. Atoms have two important jobs\n *\n * 1) detect when they are being _used_ and report this (using reportObserved). This allows mobx to make the connection between running functions and the data they used\n * 2) they should notify mobx whenever they have _changed_. This way mobx can re-run any functions (derivations) that are using this atom.\n */\nvar BaseAtom = function () {\n    /**\n     * Create a new atom. For debugging purposes it is recommended to give it a name.\n     * The onBecomeObserved and onBecomeUnobserved callbacks can be used for resource management.\n     */\n    function BaseAtom(name) {\n        if (name === void 0) {\n            name = \"Atom@\" + getNextId();\n        }\n        this.name = name;\n        this.isPendingUnobservation = true; // for effective unobserving. BaseAtom has true, for extra optimization, so its onBecomeUnobserved never gets called, because it's not needed\n        this.observers = [];\n        this.observersIndexes = {};\n        this.diffValue = 0;\n        this.lastAccessedBy = 0;\n        this.lowestObserverState = IDerivationState.NOT_TRACKING;\n    }\n    BaseAtom.prototype.onBecomeUnobserved = function () {\n        // noop\n    };\n    /**\n     * Invoke this method to notify mobx that your atom has been used somehow.\n     */\n    BaseAtom.prototype.reportObserved = function () {\n        reportObserved(this);\n    };\n    /**\n     * Invoke this method _after_ this method has changed to signal mobx that all its observers should invalidate.\n     */\n    BaseAtom.prototype.reportChanged = function () {\n        startBatch();\n        propagateChanged(this);\n        endBatch();\n    };\n    BaseAtom.prototype.toString = function () {\n        return this.name;\n    };\n    return BaseAtom;\n}();\nvar Atom = function (_super) {\n    __extends(Atom, _super);\n    /**\n     * Create a new atom. For debugging purposes it is recommended to give it a name.\n     * The onBecomeObserved and onBecomeUnobserved callbacks can be used for resource management.\n     */\n    function Atom(name, onBecomeObservedHandler, onBecomeUnobservedHandler) {\n        if (name === void 0) {\n            name = \"Atom@\" + getNextId();\n        }\n        if (onBecomeObservedHandler === void 0) {\n            onBecomeObservedHandler = noop;\n        }\n        if (onBecomeUnobservedHandler === void 0) {\n            onBecomeUnobservedHandler = noop;\n        }\n        var _this = _super.call(this, name) || this;\n        _this.name = name;\n        _this.onBecomeObservedHandler = onBecomeObservedHandler;\n        _this.onBecomeUnobservedHandler = onBecomeUnobservedHandler;\n        _this.isPendingUnobservation = false; // for effective unobserving.\n        _this.isBeingTracked = false;\n        return _this;\n    }\n    Atom.prototype.reportObserved = function () {\n        startBatch();\n        _super.prototype.reportObserved.call(this);\n        if (!this.isBeingTracked) {\n            this.isBeingTracked = true;\n            this.onBecomeObservedHandler();\n        }\n        endBatch();\n        return !!globalState.trackingDerivation;\n        // return doesn't really give useful info, because it can be as well calling computed which calls atom (no reactions)\n        // also it could not trigger when calculating reaction dependent on Atom because Atom's value was cached by computed called by given reaction.\n    };\n    Atom.prototype.onBecomeUnobserved = function () {\n        this.isBeingTracked = false;\n        this.onBecomeUnobservedHandler();\n    };\n    return Atom;\n}(BaseAtom);\nvar isAtom = createInstanceofPredicate(\"Atom\", BaseAtom);\n\nfunction hasInterceptors(interceptable) {\n    return interceptable.interceptors && interceptable.interceptors.length > 0;\n}\nfunction registerInterceptor(interceptable, handler) {\n    var interceptors = interceptable.interceptors || (interceptable.interceptors = []);\n    interceptors.push(handler);\n    return once(function () {\n        var idx = interceptors.indexOf(handler);\n        if (idx !== -1) interceptors.splice(idx, 1);\n    });\n}\nfunction interceptChange(interceptable, change) {\n    var prevU = untrackedStart();\n    try {\n        var interceptors = interceptable.interceptors;\n        if (interceptors) for (var i = 0, l = interceptors.length; i < l; i++) {\n            change = interceptors[i](change);\n            invariant(!change || change.type, \"Intercept handlers should return nothing or a change object\");\n            if (!change) break;\n        }\n        return change;\n    } finally {\n        untrackedEnd(prevU);\n    }\n}\n\nfunction hasListeners(listenable) {\n    return listenable.changeListeners && listenable.changeListeners.length > 0;\n}\nfunction registerListener(listenable, handler) {\n    var listeners = listenable.changeListeners || (listenable.changeListeners = []);\n    listeners.push(handler);\n    return once(function () {\n        var idx = listeners.indexOf(handler);\n        if (idx !== -1) listeners.splice(idx, 1);\n    });\n}\nfunction notifyListeners(listenable, change) {\n    var prevU = untrackedStart();\n    var listeners = listenable.changeListeners;\n    if (!listeners) return;\n    listeners = listeners.slice();\n    for (var i = 0, l = listeners.length; i < l; i++) {\n        listeners[i](change);\n    }\n    untrackedEnd(prevU);\n}\n\nfunction isSpyEnabled() {\n    return !!globalState.spyListeners.length;\n}\nfunction spyReport(event) {\n    if (!globalState.spyListeners.length) return;\n    var listeners = globalState.spyListeners;\n    for (var i = 0, l = listeners.length; i < l; i++) {\n        listeners[i](event);\n    }\n}\nfunction spyReportStart(event) {\n    var change = objectAssign({}, event, { spyReportStart: true });\n    spyReport(change);\n}\nvar END_EVENT = { spyReportEnd: true };\nfunction spyReportEnd(change) {\n    if (change) spyReport(objectAssign({}, change, END_EVENT));else spyReport(END_EVENT);\n}\nfunction spy(listener) {\n    globalState.spyListeners.push(listener);\n    return once(function () {\n        var idx = globalState.spyListeners.indexOf(listener);\n        if (idx !== -1) globalState.spyListeners.splice(idx, 1);\n    });\n}\n\nfunction iteratorSymbol() {\n    return typeof Symbol === \"function\" && Symbol.iterator || \"@@iterator\";\n}\nvar IS_ITERATING_MARKER = \"__$$iterating\";\nfunction arrayAsIterator(array) {\n    // returning an array for entries(), values() etc for maps was a mis-interpretation of the specs..,\n    // yet it is quite convenient to be able to use the response both as array directly and as iterator\n    // it is suboptimal, but alas...\n    invariant(array[IS_ITERATING_MARKER] !== true, \"Illegal state: cannot recycle array as iterator\");\n    addHiddenFinalProp(array, IS_ITERATING_MARKER, true);\n    var idx = -1;\n    addHiddenFinalProp(array, \"next\", function next() {\n        idx++;\n        return {\n            done: idx >= this.length,\n            value: idx < this.length ? this[idx] : undefined\n        };\n    });\n    return array;\n}\nfunction declareIterator(prototType, iteratorFactory) {\n    addHiddenFinalProp(prototType, iteratorSymbol(), iteratorFactory);\n}\n\nvar MAX_SPLICE_SIZE = 10000; // See e.g. https://github.com/mobxjs/mobx/issues/859\n// Detects bug in safari 9.1.1 (or iOS 9 safari mobile). See #364\nvar safariPrototypeSetterInheritanceBug = function () {\n    var v = false;\n    var p = {};\n    Object.defineProperty(p, \"0\", { set: function set() {\n            v = true;\n        } });\n    Object.create(p)[\"0\"] = 1;\n    return v === false;\n}();\n/**\n * This array buffer contains two lists of properties, so that all arrays\n * can recycle their property definitions, which significantly improves performance of creating\n * properties on the fly.\n */\nvar OBSERVABLE_ARRAY_BUFFER_SIZE = 0;\n// Typescript workaround to make sure ObservableArray extends Array\nvar StubArray = function () {\n    function StubArray() {}\n    return StubArray;\n}();\nfunction inherit(ctor, proto) {\n    if (typeof Object[\"setPrototypeOf\"] !== \"undefined\") {\n        Object[\"setPrototypeOf\"](ctor.prototype, proto);\n    } else if (typeof ctor.prototype.__proto__ !== \"undefined\") {\n        ctor.prototype.__proto__ = proto;\n    } else {\n        ctor[\"prototype\"] = proto;\n    }\n}\ninherit(StubArray, Array.prototype);\nvar ObservableArrayAdministration = function () {\n    function ObservableArrayAdministration(name, enhancer, array, owned) {\n        this.array = array;\n        this.owned = owned;\n        this.values = [];\n        this.lastKnownLength = 0;\n        this.interceptors = null;\n        this.changeListeners = null;\n        this.atom = new BaseAtom(name || \"ObservableArray@\" + getNextId());\n        this.enhancer = function (newV, oldV) {\n            return enhancer(newV, oldV, name + \"[..]\");\n        };\n    }\n    ObservableArrayAdministration.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) return this.dehancer(value);\n        return value;\n    };\n    ObservableArrayAdministration.prototype.dehanceValues = function (values) {\n        if (this.dehancer !== undefined) return values.map(this.dehancer);\n        return values;\n    };\n    ObservableArrayAdministration.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableArrayAdministration.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately === void 0) {\n            fireImmediately = false;\n        }\n        if (fireImmediately) {\n            listener({\n                object: this.array,\n                type: \"splice\",\n                index: 0,\n                added: this.values.slice(),\n                addedCount: this.values.length,\n                removed: [],\n                removedCount: 0\n            });\n        }\n        return registerListener(this, listener);\n    };\n    ObservableArrayAdministration.prototype.getArrayLength = function () {\n        this.atom.reportObserved();\n        return this.values.length;\n    };\n    ObservableArrayAdministration.prototype.setArrayLength = function (newLength) {\n        if (typeof newLength !== \"number\" || newLength < 0) throw new Error(\"[mobx.array] Out of range: \" + newLength);\n        var currentLength = this.values.length;\n        if (newLength === currentLength) return;else if (newLength > currentLength) {\n            var newItems = new Array(newLength - currentLength);\n            for (var i = 0; i < newLength - currentLength; i++) {\n                newItems[i] = undefined;\n            } // No Array.fill everywhere...\n            this.spliceWithArray(currentLength, 0, newItems);\n        } else this.spliceWithArray(newLength, currentLength - newLength);\n    };\n    // adds / removes the necessary numeric properties to this object\n    ObservableArrayAdministration.prototype.updateArrayLength = function (oldLength, delta) {\n        if (oldLength !== this.lastKnownLength) throw new Error(\"[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?\");\n        this.lastKnownLength += delta;\n        if (delta > 0 && oldLength + delta + 1 > OBSERVABLE_ARRAY_BUFFER_SIZE) reserveArrayBuffer(oldLength + delta + 1);\n    };\n    ObservableArrayAdministration.prototype.spliceWithArray = function (index, deleteCount, newItems) {\n        var _this = this;\n        checkIfStateModificationsAreAllowed(this.atom);\n        var length = this.values.length;\n        if (index === undefined) index = 0;else if (index > length) index = length;else if (index < 0) index = Math.max(0, length + index);\n        if (arguments.length === 1) deleteCount = length - index;else if (deleteCount === undefined || deleteCount === null) deleteCount = 0;else deleteCount = Math.max(0, Math.min(deleteCount, length - index));\n        if (newItems === undefined) newItems = [];\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                object: this.array,\n                type: \"splice\",\n                index: index,\n                removedCount: deleteCount,\n                added: newItems\n            });\n            if (!change) return EMPTY_ARRAY;\n            deleteCount = change.removedCount;\n            newItems = change.added;\n        }\n        newItems = newItems.map(function (v) {\n            return _this.enhancer(v, undefined);\n        });\n        var lengthDelta = newItems.length - deleteCount;\n        this.updateArrayLength(length, lengthDelta); // create or remove new entries\n        var res = this.spliceItemsIntoValues(index, deleteCount, newItems);\n        if (deleteCount !== 0 || newItems.length !== 0) this.notifyArraySplice(index, newItems, res);\n        return this.dehanceValues(res);\n    };\n    ObservableArrayAdministration.prototype.spliceItemsIntoValues = function (index, deleteCount, newItems) {\n        if (newItems.length < MAX_SPLICE_SIZE) {\n            return (_a = this.values).splice.apply(_a, [index, deleteCount].concat(newItems));\n        } else {\n            var res = this.values.slice(index, index + deleteCount);\n            this.values = this.values.slice(0, index).concat(newItems, this.values.slice(index + deleteCount));\n            return res;\n        }\n        var _a;\n    };\n    ObservableArrayAdministration.prototype.notifyArrayChildUpdate = function (index, newValue, oldValue) {\n        var notifySpy = !this.owned && isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy ? {\n            object: this.array,\n            type: \"update\",\n            index: index, newValue: newValue, oldValue: oldValue\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        this.atom.reportChanged();\n        if (notify) notifyListeners(this, change);\n        if (notifySpy) spyReportEnd();\n    };\n    ObservableArrayAdministration.prototype.notifyArraySplice = function (index, added, removed) {\n        var notifySpy = !this.owned && isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy ? {\n            object: this.array,\n            type: \"splice\",\n            index: index, removed: removed, added: added,\n            removedCount: removed.length,\n            addedCount: added.length\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        this.atom.reportChanged();\n        // conform: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/observe\n        if (notify) notifyListeners(this, change);\n        if (notifySpy) spyReportEnd();\n    };\n    return ObservableArrayAdministration;\n}();\nvar ObservableArray = function (_super) {\n    __extends(ObservableArray, _super);\n    function ObservableArray(initialValues, enhancer, name, owned) {\n        if (name === void 0) {\n            name = \"ObservableArray@\" + getNextId();\n        }\n        if (owned === void 0) {\n            owned = false;\n        }\n        var _this = _super.call(this) || this;\n        var adm = new ObservableArrayAdministration(name, enhancer, _this, owned);\n        addHiddenFinalProp(_this, \"$mobx\", adm);\n        if (initialValues && initialValues.length) {\n            _this.spliceWithArray(0, 0, initialValues);\n        }\n        if (safariPrototypeSetterInheritanceBug) {\n            // Seems that Safari won't use numeric prototype setter untill any * numeric property is\n            // defined on the instance. After that it works fine, even if this property is deleted.\n            Object.defineProperty(adm.array, \"0\", ENTRY_0);\n        }\n        return _this;\n    }\n    ObservableArray.prototype.intercept = function (handler) {\n        return this.$mobx.intercept(handler);\n    };\n    ObservableArray.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately === void 0) {\n            fireImmediately = false;\n        }\n        return this.$mobx.observe(listener, fireImmediately);\n    };\n    ObservableArray.prototype.clear = function () {\n        return this.splice(0);\n    };\n    ObservableArray.prototype.concat = function () {\n        var arrays = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            arrays[_i] = arguments[_i];\n        }\n        this.$mobx.atom.reportObserved();\n        return Array.prototype.concat.apply(this.peek(), arrays.map(function (a) {\n            return isObservableArray(a) ? a.peek() : a;\n        }));\n    };\n    ObservableArray.prototype.replace = function (newItems) {\n        return this.$mobx.spliceWithArray(0, this.$mobx.values.length, newItems);\n    };\n    /**\n     * Converts this array back to a (shallow) javascript structure.\n     * For a deep clone use mobx.toJS\n     */\n    ObservableArray.prototype.toJS = function () {\n        return this.slice();\n    };\n    ObservableArray.prototype.toJSON = function () {\n        // Used by JSON.stringify\n        return this.toJS();\n    };\n    ObservableArray.prototype.peek = function () {\n        this.$mobx.atom.reportObserved();\n        return this.$mobx.dehanceValues(this.$mobx.values);\n    };\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n    ObservableArray.prototype.find = function (predicate, thisArg, fromIndex) {\n        if (fromIndex === void 0) {\n            fromIndex = 0;\n        }\n        var idx = this.findIndex.apply(this, arguments);\n        return idx === -1 ? undefined : this.get(idx);\n    };\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\n    ObservableArray.prototype.findIndex = function (predicate, thisArg, fromIndex) {\n        if (fromIndex === void 0) {\n            fromIndex = 0;\n        }\n        var items = this.peek(),\n            l = items.length;\n        for (var i = fromIndex; i < l; i++) {\n            if (predicate.call(thisArg, items[i], i, this)) return i;\n        }return -1;\n    };\n    /*\n        functions that do alter the internal structure of the array, (based on lib.es6.d.ts)\n        since these functions alter the inner structure of the array, the have side effects.\n        Because the have side effects, they should not be used in computed function,\n        and for that reason the do not call dependencyState.notifyObserved\n        */\n    ObservableArray.prototype.splice = function (index, deleteCount) {\n        var newItems = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            newItems[_i - 2] = arguments[_i];\n        }\n        switch (arguments.length) {\n            case 0:\n                return [];\n            case 1:\n                return this.$mobx.spliceWithArray(index);\n            case 2:\n                return this.$mobx.spliceWithArray(index, deleteCount);\n        }\n        return this.$mobx.spliceWithArray(index, deleteCount, newItems);\n    };\n    ObservableArray.prototype.spliceWithArray = function (index, deleteCount, newItems) {\n        return this.$mobx.spliceWithArray(index, deleteCount, newItems);\n    };\n    ObservableArray.prototype.push = function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var adm = this.$mobx;\n        adm.spliceWithArray(adm.values.length, 0, items);\n        return adm.values.length;\n    };\n    ObservableArray.prototype.pop = function () {\n        return this.splice(Math.max(this.$mobx.values.length - 1, 0), 1)[0];\n    };\n    ObservableArray.prototype.shift = function () {\n        return this.splice(0, 1)[0];\n    };\n    ObservableArray.prototype.unshift = function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var adm = this.$mobx;\n        adm.spliceWithArray(0, 0, items);\n        return adm.values.length;\n    };\n    ObservableArray.prototype.reverse = function () {\n        // reverse by default mutates in place before returning the result\n        // which makes it both a 'derivation' and a 'mutation'.\n        // so we deviate from the default and just make it an dervitation\n        var clone = this.slice();\n        return clone.reverse.apply(clone, arguments);\n    };\n    ObservableArray.prototype.sort = function (compareFn) {\n        // sort by default mutates in place before returning the result\n        // which goes against all good practices. Let's not change the array in place!\n        var clone = this.slice();\n        return clone.sort.apply(clone, arguments);\n    };\n    ObservableArray.prototype.remove = function (value) {\n        var idx = this.$mobx.dehanceValues(this.$mobx.values).indexOf(value);\n        if (idx > -1) {\n            this.splice(idx, 1);\n            return true;\n        }\n        return false;\n    };\n    ObservableArray.prototype.move = function (fromIndex, toIndex) {\n        function checkIndex(index) {\n            if (index < 0) {\n                throw new Error(\"[mobx.array] Index out of bounds: \" + index + \" is negative\");\n            }\n            var length = this.$mobx.values.length;\n            if (index >= length) {\n                throw new Error(\"[mobx.array] Index out of bounds: \" + index + \" is not smaller than \" + length);\n            }\n        }\n        checkIndex.call(this, fromIndex);\n        checkIndex.call(this, toIndex);\n        if (fromIndex === toIndex) {\n            return;\n        }\n        var oldItems = this.$mobx.values;\n        var newItems;\n        if (fromIndex < toIndex) {\n            newItems = oldItems.slice(0, fromIndex).concat(oldItems.slice(fromIndex + 1, toIndex + 1), [oldItems[fromIndex]], oldItems.slice(toIndex + 1));\n        } else {\n            newItems = oldItems.slice(0, toIndex).concat([oldItems[fromIndex]], oldItems.slice(toIndex, fromIndex), oldItems.slice(fromIndex + 1));\n        }\n        this.replace(newItems);\n    };\n    // See #734, in case property accessors are unreliable...\n    ObservableArray.prototype.get = function (index) {\n        var impl = this.$mobx;\n        if (impl) {\n            if (index < impl.values.length) {\n                impl.atom.reportObserved();\n                return impl.dehanceValue(impl.values[index]);\n            }\n            console.warn(\"[mobx.array] Attempt to read an array index (\" + index + \") that is out of bounds (\" + impl.values.length + \"). Please check length first. Out of bound indices will not be tracked by MobX\");\n        }\n        return undefined;\n    };\n    // See #734, in case property accessors are unreliable...\n    ObservableArray.prototype.set = function (index, newValue) {\n        var adm = this.$mobx;\n        var values = adm.values;\n        if (index < values.length) {\n            // update at index in range\n            checkIfStateModificationsAreAllowed(adm.atom);\n            var oldValue = values[index];\n            if (hasInterceptors(adm)) {\n                var change = interceptChange(adm, {\n                    type: \"update\",\n                    object: this,\n                    index: index, newValue: newValue\n                });\n                if (!change) return;\n                newValue = change.newValue;\n            }\n            newValue = adm.enhancer(newValue, oldValue);\n            var changed = newValue !== oldValue;\n            if (changed) {\n                values[index] = newValue;\n                adm.notifyArrayChildUpdate(index, newValue, oldValue);\n            }\n        } else if (index === values.length) {\n            // add a new item\n            adm.spliceWithArray(index, 0, [newValue]);\n        } else {\n            // out of bounds\n            throw new Error(\"[mobx.array] Index out of bounds, \" + index + \" is larger than \" + values.length);\n        }\n    };\n    return ObservableArray;\n}(StubArray);\ndeclareIterator(ObservableArray.prototype, function () {\n    return arrayAsIterator(this.slice());\n});\nObject.defineProperty(ObservableArray.prototype, \"length\", {\n    enumerable: false,\n    configurable: true,\n    get: function get() {\n        return this.$mobx.getArrayLength();\n    },\n    set: function set(newLength) {\n        this.$mobx.setArrayLength(newLength);\n    }\n});\n/**\n * Wrap function from prototype\n */\n[\"every\", \"filter\", \"forEach\", \"indexOf\", \"join\", \"lastIndexOf\", \"map\", \"reduce\", \"reduceRight\", \"slice\", \"some\", \"toString\", \"toLocaleString\"].forEach(function (funcName) {\n    var baseFunc = Array.prototype[funcName];\n    invariant(typeof baseFunc === \"function\", \"Base function not defined on Array prototype: '\" + funcName + \"'\");\n    addHiddenProp(ObservableArray.prototype, funcName, function () {\n        return baseFunc.apply(this.peek(), arguments);\n    });\n});\n/**\n * We don't want those to show up in `for (const key in ar)` ...\n */\nmakeNonEnumerable(ObservableArray.prototype, [\"constructor\", \"intercept\", \"observe\", \"clear\", \"concat\", \"get\", \"replace\", \"toJS\", \"toJSON\", \"peek\", \"find\", \"findIndex\", \"splice\", \"spliceWithArray\", \"push\", \"pop\", \"set\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"remove\", \"move\", \"toString\", \"toLocaleString\"]);\n// See #364\nvar ENTRY_0 = createArrayEntryDescriptor(0);\nfunction createArrayEntryDescriptor(index) {\n    return {\n        enumerable: false,\n        configurable: false,\n        get: function get() {\n            // TODO: Check `this`?, see #752?\n            return this.get(index);\n        },\n        set: function set(value) {\n            this.set(index, value);\n        }\n    };\n}\nfunction createArrayBufferItem(index) {\n    Object.defineProperty(ObservableArray.prototype, \"\" + index, createArrayEntryDescriptor(index));\n}\nfunction reserveArrayBuffer(max) {\n    for (var index = OBSERVABLE_ARRAY_BUFFER_SIZE; index < max; index++) {\n        createArrayBufferItem(index);\n    }OBSERVABLE_ARRAY_BUFFER_SIZE = max;\n}\nreserveArrayBuffer(1000);\nvar isObservableArrayAdministration = createInstanceofPredicate(\"ObservableArrayAdministration\", ObservableArrayAdministration);\nfunction isObservableArray(thing) {\n    return isObject(thing) && isObservableArrayAdministration(thing.$mobx);\n}\n\nvar UNCHANGED = {};\nvar ObservableValue = function (_super) {\n    __extends(ObservableValue, _super);\n    function ObservableValue(value, enhancer, name, notifySpy) {\n        if (name === void 0) {\n            name = \"ObservableValue@\" + getNextId();\n        }\n        if (notifySpy === void 0) {\n            notifySpy = true;\n        }\n        var _this = _super.call(this, name) || this;\n        _this.enhancer = enhancer;\n        _this.hasUnreportedChange = false;\n        _this.dehancer = undefined;\n        _this.value = enhancer(value, undefined, name);\n        if (notifySpy && isSpyEnabled()) {\n            // only notify spy if this is a stand-alone observable\n            spyReport({ type: \"create\", object: _this, newValue: _this.value });\n        }\n        return _this;\n    }\n    ObservableValue.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) return this.dehancer(value);\n        return value;\n    };\n    ObservableValue.prototype.set = function (newValue) {\n        var oldValue = this.value;\n        newValue = this.prepareNewValue(newValue);\n        if (newValue !== UNCHANGED) {\n            var notifySpy = isSpyEnabled();\n            if (notifySpy) {\n                spyReportStart({\n                    type: \"update\",\n                    object: this,\n                    newValue: newValue, oldValue: oldValue\n                });\n            }\n            this.setNewValue(newValue);\n            if (notifySpy) spyReportEnd();\n        }\n    };\n    ObservableValue.prototype.prepareNewValue = function (newValue) {\n        checkIfStateModificationsAreAllowed(this);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, { object: this, type: \"update\", newValue: newValue });\n            if (!change) return UNCHANGED;\n            newValue = change.newValue;\n        }\n        // apply modifier\n        newValue = this.enhancer(newValue, this.value, this.name);\n        return this.value !== newValue ? newValue : UNCHANGED;\n    };\n    ObservableValue.prototype.setNewValue = function (newValue) {\n        var oldValue = this.value;\n        this.value = newValue;\n        this.reportChanged();\n        if (hasListeners(this)) {\n            notifyListeners(this, {\n                type: \"update\",\n                object: this,\n                newValue: newValue, oldValue: oldValue\n            });\n        }\n    };\n    ObservableValue.prototype.get = function () {\n        this.reportObserved();\n        return this.dehanceValue(this.value);\n    };\n    ObservableValue.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableValue.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately) listener({\n            object: this,\n            type: \"update\",\n            newValue: this.value,\n            oldValue: undefined\n        });\n        return registerListener(this, listener);\n    };\n    ObservableValue.prototype.toJSON = function () {\n        return this.get();\n    };\n    ObservableValue.prototype.toString = function () {\n        return this.name + \"[\" + this.value + \"]\";\n    };\n    ObservableValue.prototype.valueOf = function () {\n        return toPrimitive(this.get());\n    };\n    return ObservableValue;\n}(BaseAtom);\nObservableValue.prototype[primitiveSymbol()] = ObservableValue.prototype.valueOf;\nvar isObservableValue = createInstanceofPredicate(\"ObservableValue\", ObservableValue);\n\nvar messages = {\n    \"m001\": \"It is not allowed to assign new values to @action fields\",\n    \"m002\": \"`runInAction` expects a function\",\n    \"m003\": \"`runInAction` expects a function without arguments\",\n    \"m004\": \"autorun expects a function\",\n    \"m005\": \"Warning: attempted to pass an action to autorun. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.\",\n    \"m006\": \"Warning: attempted to pass an action to autorunAsync. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.\",\n    \"m007\": \"reaction only accepts 2 or 3 arguments. If migrating from MobX 2, please provide an options object\",\n    \"m008\": \"wrapping reaction expression in `asReference` is no longer supported, use options object instead\",\n    \"m009\": \"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'. It looks like it was used on a property.\",\n    \"m010\": \"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'\",\n    \"m011\": \"First argument to `computed` should be an expression. If using computed as decorator, don't pass it arguments\",\n    \"m012\": \"computed takes one or two arguments if used as function\",\n    \"m013\": \"[mobx.expr] 'expr' should only be used inside other reactive functions.\",\n    \"m014\": \"extendObservable expected 2 or more arguments\",\n    \"m015\": \"extendObservable expects an object as first argument\",\n    \"m016\": \"extendObservable should not be used on maps, use map.merge instead\",\n    \"m017\": \"all arguments of extendObservable should be objects\",\n    \"m018\": \"extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540\",\n    \"m019\": \"[mobx.isObservable] isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.\",\n    \"m020\": \"modifiers can only be used for individual object properties\",\n    \"m021\": \"observable expects zero or one arguments\",\n    \"m022\": \"@observable can not be used on getters, use @computed instead\",\n    \"m023\": \"Using `transaction` is deprecated, use `runInAction` or `(@)action` instead.\",\n    \"m024\": \"whyRun() can only be used if a derivation is active, or by passing an computed value / reaction explicitly. If you invoked whyRun from inside a computation; the computation is currently suspended but re-evaluating because somebody requested its value.\",\n    \"m025\": \"whyRun can only be used on reactions and computed values\",\n    \"m026\": \"`action` can only be invoked on functions\",\n    \"m028\": \"It is not allowed to set `useStrict` when a derivation is running\",\n    \"m029\": \"INTERNAL ERROR only onBecomeUnobserved shouldn't be called twice in a row\",\n    \"m030a\": \"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: \",\n    \"m030b\": \"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: \",\n    \"m031\": \"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: \",\n    \"m032\": \"* This computation is suspended (not in use by any reaction) and won't run automatically.\\n\tDidn't expect this computation to be suspended at this point?\\n\t  1. Make sure this computation is used by a reaction (reaction, autorun, observer).\\n\t  2. Check whether you are using this computation synchronously (in the same stack as they reaction that needs it).\",\n    \"m033\": \"`observe` doesn't support the fire immediately property for observable maps.\",\n    \"m034\": \"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead\",\n    \"m035\": \"Cannot make the designated object observable; it is not extensible\",\n    \"m036\": \"It is not possible to get index atoms from arrays\",\n    \"m037\": \"Hi there! I'm sorry you have just run into an exception.\\nIf your debugger ends up here, know that some reaction (like the render() of an observer component, autorun or reaction)\\nthrew an exception and that mobx caught it, to avoid that it brings the rest of your application down.\\nThe original cause of the exception (the code that caused this reaction to run (again)), is still in the stack.\\n\\nHowever, more interesting is the actual stack trace of the error itself.\\nHopefully the error is an instanceof Error, because in that case you can inspect the original stack of the error from where it was thrown.\\nSee `error.stack` property, or press the very subtle \\\"(...)\\\" link you see near the console.error message that probably brought you here.\\nThat stack is more interesting than the stack of this console.error itself.\\n\\nIf the exception you see is an exception you created yourself, make sure to use `throw new Error(\\\"Oops\\\")` instead of `throw \\\"Oops\\\"`,\\nbecause the javascript environment will only preserve the original stack trace in the first form.\\n\\nYou can also make sure the debugger pauses the next time this very same exception is thrown by enabling \\\"Pause on caught exception\\\".\\n(Note that it might pause on many other, unrelated exception as well).\\n\\nIf that all doesn't help you out, feel free to open an issue https://github.com/mobxjs/mobx/issues!\\n\",\n    \"m038\": \"Missing items in this list?\\n    1. Check whether all used values are properly marked as observable (use isObservable to verify)\\n    2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.\\n\"\n};\nfunction getMessage(id) {\n    return messages[id];\n}\n\nfunction createAction(actionName, fn) {\n    invariant(typeof fn === \"function\", getMessage(\"m026\"));\n    invariant(typeof actionName === \"string\" && actionName.length > 0, \"actions should have valid names, got: '\" + actionName + \"'\");\n    var res = function res() {\n        return executeAction(actionName, fn, this, arguments);\n    };\n    res.originalFn = fn;\n    res.isMobxAction = true;\n    return res;\n}\nfunction executeAction(actionName, fn, scope, args) {\n    var runInfo = startAction(actionName, fn, scope, args);\n    try {\n        return fn.apply(scope, args);\n    } finally {\n        endAction(runInfo);\n    }\n}\nfunction startAction(actionName, fn, scope, args) {\n    var notifySpy = isSpyEnabled() && !!actionName;\n    var startTime = 0;\n    if (notifySpy) {\n        startTime = Date.now();\n        var l = args && args.length || 0;\n        var flattendArgs = new Array(l);\n        if (l > 0) for (var i = 0; i < l; i++) {\n            flattendArgs[i] = args[i];\n        }spyReportStart({\n            type: \"action\",\n            name: actionName,\n            fn: fn,\n            object: scope,\n            arguments: flattendArgs\n        });\n    }\n    var prevDerivation = untrackedStart();\n    startBatch();\n    var prevAllowStateChanges = allowStateChangesStart(true);\n    return {\n        prevDerivation: prevDerivation,\n        prevAllowStateChanges: prevAllowStateChanges,\n        notifySpy: notifySpy,\n        startTime: startTime\n    };\n}\nfunction endAction(runInfo) {\n    allowStateChangesEnd(runInfo.prevAllowStateChanges);\n    endBatch();\n    untrackedEnd(runInfo.prevDerivation);\n    if (runInfo.notifySpy) spyReportEnd({ time: Date.now() - runInfo.startTime });\n}\nfunction useStrict(strict) {\n    invariant(globalState.trackingDerivation === null, getMessage(\"m028\"));\n    globalState.strictMode = strict;\n    globalState.allowStateChanges = !strict;\n}\nfunction isStrictModeEnabled() {\n    return globalState.strictMode;\n}\nfunction allowStateChanges(allowStateChanges, func) {\n    // TODO: deprecate / refactor this function in next major\n    // Currently only used by `@observer`\n    // Proposed change: remove first param, rename to `forbidStateChanges`,\n    // require error callback instead of the hardcoded error message now used\n    // Use `inAction` instead of allowStateChanges in derivation.ts to check strictMode\n    var prev = allowStateChangesStart(allowStateChanges);\n    var res;\n    try {\n        res = func();\n    } finally {\n        allowStateChangesEnd(prev);\n    }\n    return res;\n}\nfunction allowStateChangesStart(allowStateChanges) {\n    var prev = globalState.allowStateChanges;\n    globalState.allowStateChanges = allowStateChanges;\n    return prev;\n}\nfunction allowStateChangesEnd(prev) {\n    globalState.allowStateChanges = prev;\n}\n\n/**\n * Constructs a decorator, that normalizes the differences between\n * TypeScript and Babel. Mainly caused by the fact that legacy-decorator cannot assign\n * values during instance creation to properties that have a getter setter.\n *\n * - Sigh -\n *\n * Also takes care of the difference between @decorator field and @decorator(args) field, and different forms of values.\n * For performance (cpu and mem) reasons the properties are always defined on the prototype (at least initially).\n * This means that these properties despite being enumerable might not show up in Object.keys() (but they will show up in for...in loops).\n */\nfunction createClassPropertyDecorator(\n/**\n * This function is invoked once, when the property is added to a new instance.\n * When this happens is not strictly determined due to differences in TS and Babel:\n * Typescript: Usually when constructing the new instance\n * Babel, sometimes Typescript: during the first get / set\n * Both: when calling `runLazyInitializers(instance)`\n */\nonInitialize, _get, _set, enumerable,\n/**\n * Can this decorator invoked with arguments? e.g. @decorator(args)\n */\nallowCustomArguments) {\n    function classPropertyDecorator(target, key, descriptor, customArgs, argLen) {\n        if (argLen === void 0) {\n            argLen = 0;\n        }\n        invariant(allowCustomArguments || quacksLikeADecorator(arguments), \"This function is a decorator, but it wasn't invoked like a decorator\");\n        if (!descriptor) {\n            // typescript (except for getter / setters)\n            var newDescriptor = {\n                enumerable: enumerable,\n                configurable: true,\n                get: function get() {\n                    if (!this.__mobxInitializedProps || this.__mobxInitializedProps[key] !== true) typescriptInitializeProperty(this, key, undefined, onInitialize, customArgs, descriptor);\n                    return _get.call(this, key);\n                },\n                set: function set(v) {\n                    if (!this.__mobxInitializedProps || this.__mobxInitializedProps[key] !== true) {\n                        typescriptInitializeProperty(this, key, v, onInitialize, customArgs, descriptor);\n                    } else {\n                        _set.call(this, key, v);\n                    }\n                }\n            };\n            if (arguments.length < 3 || arguments.length === 5 && argLen < 3) {\n                // Typescript target is ES3, so it won't define property for us\n                // or using Reflect.decorate polyfill, which will return no descriptor\n                // (see https://github.com/mobxjs/mobx/issues/333)\n                Object.defineProperty(target, key, newDescriptor);\n            }\n            return newDescriptor;\n        } else {\n            // babel and typescript getter / setter props\n            if (!hasOwnProperty(target, \"__mobxLazyInitializers\")) {\n                addHiddenProp(target, \"__mobxLazyInitializers\", target.__mobxLazyInitializers && target.__mobxLazyInitializers.slice() || [] // support inheritance\n                );\n            }\n            var value_1 = descriptor.value,\n                initializer_1 = descriptor.initializer;\n            target.__mobxLazyInitializers.push(function (instance) {\n                onInitialize(instance, key, initializer_1 ? initializer_1.call(instance) : value_1, customArgs, descriptor);\n            });\n            return {\n                enumerable: enumerable, configurable: true,\n                get: function get() {\n                    if (this.__mobxDidRunLazyInitializers !== true) runLazyInitializers(this);\n                    return _get.call(this, key);\n                },\n                set: function set(v) {\n                    if (this.__mobxDidRunLazyInitializers !== true) runLazyInitializers(this);\n                    _set.call(this, key, v);\n                }\n            };\n        }\n    }\n    if (allowCustomArguments) {\n        /** If custom arguments are allowed, we should return a function that returns a decorator */\n        return function () {\n            /** Direct invocation: @decorator bla */\n            if (quacksLikeADecorator(arguments)) return classPropertyDecorator.apply(null, arguments);\n            /** Indirect invocation: @decorator(args) bla */\n            var outerArgs = arguments;\n            var argLen = arguments.length;\n            return function (target, key, descriptor) {\n                return classPropertyDecorator(target, key, descriptor, outerArgs, argLen);\n            };\n        };\n    }\n    return classPropertyDecorator;\n}\nfunction typescriptInitializeProperty(instance, key, v, onInitialize, customArgs, baseDescriptor) {\n    if (!hasOwnProperty(instance, \"__mobxInitializedProps\")) addHiddenProp(instance, \"__mobxInitializedProps\", {});\n    instance.__mobxInitializedProps[key] = true;\n    onInitialize(instance, key, v, customArgs, baseDescriptor);\n}\nfunction runLazyInitializers(instance) {\n    if (instance.__mobxDidRunLazyInitializers === true) return;\n    if (instance.__mobxLazyInitializers) {\n        addHiddenProp(instance, \"__mobxDidRunLazyInitializers\", true);\n        instance.__mobxDidRunLazyInitializers && instance.__mobxLazyInitializers.forEach(function (initializer) {\n            return initializer(instance);\n        });\n    }\n}\nfunction quacksLikeADecorator(args) {\n    return (args.length === 2 || args.length === 3) && typeof args[1] === \"string\";\n}\n\nvar actionFieldDecorator = createClassPropertyDecorator(function (target, key, value, args, originalDescriptor) {\n    var actionName = args && args.length === 1 ? args[0] : value.name || key || \"<unnamed action>\";\n    var wrappedAction = action(actionName, value);\n    addHiddenProp(target, key, wrappedAction);\n}, function (key) {\n    return this[key];\n}, function () {\n    invariant(false, getMessage(\"m001\"));\n}, false, true);\nvar boundActionDecorator = createClassPropertyDecorator(function (target, key, value) {\n    defineBoundAction(target, key, value);\n}, function (key) {\n    return this[key];\n}, function () {\n    invariant(false, getMessage(\"m001\"));\n}, false, false);\nvar action = function action(arg1, arg2, arg3, arg4) {\n    if (arguments.length === 1 && typeof arg1 === \"function\") return createAction(arg1.name || \"<unnamed action>\", arg1);\n    if (arguments.length === 2 && typeof arg2 === \"function\") return createAction(arg1, arg2);\n    if (arguments.length === 1 && typeof arg1 === \"string\") return namedActionDecorator(arg1);\n    return namedActionDecorator(arg2).apply(null, arguments);\n};\naction.bound = function boundAction(arg1, arg2, arg3) {\n    if (typeof arg1 === \"function\") {\n        var action_1 = createAction(\"<not yet bound action>\", arg1);\n        action_1.autoBind = true;\n        return action_1;\n    }\n    return boundActionDecorator.apply(null, arguments);\n};\nfunction namedActionDecorator(name) {\n    return function (target, prop, descriptor) {\n        if (descriptor && typeof descriptor.value === \"function\") {\n            // TypeScript @action method() { }. Defined on proto before being decorated\n            // Don't use the field decorator if we are just decorating a method\n            descriptor.value = createAction(name, descriptor.value);\n            descriptor.enumerable = false;\n            descriptor.configurable = true;\n            return descriptor;\n        }\n        // bound instance methods\n        return actionFieldDecorator(name).apply(this, arguments);\n    };\n}\nfunction runInAction(arg1, arg2, arg3) {\n    var actionName = typeof arg1 === \"string\" ? arg1 : arg1.name || \"<unnamed action>\";\n    var fn = typeof arg1 === \"function\" ? arg1 : arg2;\n    var scope = typeof arg1 === \"function\" ? arg2 : arg3;\n    invariant(typeof fn === \"function\", getMessage(\"m002\"));\n    invariant(fn.length === 0, getMessage(\"m003\"));\n    invariant(typeof actionName === \"string\" && actionName.length > 0, \"actions should have valid names, got: '\" + actionName + \"'\");\n    return executeAction(actionName, fn, scope, undefined);\n}\nfunction isAction(thing) {\n    return typeof thing === \"function\" && thing.isMobxAction === true;\n}\nfunction defineBoundAction(target, propertyName, fn) {\n    var res = function res() {\n        return executeAction(propertyName, fn, target, arguments);\n    };\n    res.isMobxAction = true;\n    addHiddenProp(target, propertyName, res);\n}\n\nfunction identityComparer(a, b) {\n    return a === b;\n}\nfunction structuralComparer(a, b) {\n    if (typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b)) {\n        return true;\n    }\n    return deepEqual(a, b);\n}\nfunction defaultComparer(a, b) {\n    if (typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b)) {\n        return true;\n    }\n    return identityComparer(a, b);\n}\nvar comparer = {\n    identity: identityComparer,\n    structural: structuralComparer,\n    default: defaultComparer\n};\n\nfunction autorun(arg1, arg2, arg3) {\n    var name, view, scope;\n    if (typeof arg1 === \"string\") {\n        name = arg1;\n        view = arg2;\n        scope = arg3;\n    } else {\n        name = arg1.name || \"Autorun@\" + getNextId();\n        view = arg1;\n        scope = arg2;\n    }\n    invariant(typeof view === \"function\", getMessage(\"m004\"));\n    invariant(isAction(view) === false, getMessage(\"m005\"));\n    if (scope) view = view.bind(scope);\n    var reaction = new Reaction(name, function () {\n        this.track(reactionRunner);\n    });\n    function reactionRunner() {\n        view(reaction);\n    }\n    reaction.schedule();\n    return reaction.getDisposer();\n}\nfunction when(arg1, arg2, arg3, arg4) {\n    var name, predicate, effect, scope;\n    if (typeof arg1 === \"string\") {\n        name = arg1;\n        predicate = arg2;\n        effect = arg3;\n        scope = arg4;\n    } else {\n        name = \"When@\" + getNextId();\n        predicate = arg1;\n        effect = arg2;\n        scope = arg3;\n    }\n    var disposer = autorun(name, function (r) {\n        if (predicate.call(scope)) {\n            r.dispose();\n            var prevUntracked = untrackedStart();\n            effect.call(scope);\n            untrackedEnd(prevUntracked);\n        }\n    });\n    return disposer;\n}\nfunction autorunAsync(arg1, arg2, arg3, arg4) {\n    var name, func, delay, scope;\n    if (typeof arg1 === \"string\") {\n        name = arg1;\n        func = arg2;\n        delay = arg3;\n        scope = arg4;\n    } else {\n        name = arg1.name || \"AutorunAsync@\" + getNextId();\n        func = arg1;\n        delay = arg2;\n        scope = arg3;\n    }\n    invariant(isAction(func) === false, getMessage(\"m006\"));\n    if (delay === void 0) delay = 1;\n    if (scope) func = func.bind(scope);\n    var isScheduled = false;\n    var r = new Reaction(name, function () {\n        if (!isScheduled) {\n            isScheduled = true;\n            setTimeout(function () {\n                isScheduled = false;\n                if (!r.isDisposed) r.track(reactionRunner);\n            }, delay);\n        }\n    });\n    function reactionRunner() {\n        func(r);\n    }\n    r.schedule();\n    return r.getDisposer();\n}\nfunction reaction(expression, effect, arg3) {\n    if (arguments.length > 3) {\n        fail(getMessage(\"m007\"));\n    }\n    if (isModifierDescriptor(expression)) {\n        fail(getMessage(\"m008\"));\n    }\n    var opts;\n    if ((typeof arg3 === \"undefined\" ? \"undefined\" : _typeof(arg3)) === \"object\") {\n        opts = arg3;\n    } else {\n        opts = {};\n    }\n    opts.name = opts.name || expression.name || effect.name || \"Reaction@\" + getNextId();\n    opts.fireImmediately = arg3 === true || opts.fireImmediately === true;\n    opts.delay = opts.delay || 0;\n    opts.compareStructural = opts.compareStructural || opts.struct || false;\n    effect = action(opts.name, opts.context ? effect.bind(opts.context) : effect);\n    if (opts.context) {\n        expression = expression.bind(opts.context);\n    }\n    var firstTime = true;\n    var isScheduled = false;\n    var value;\n    var equals = opts.equals ? opts.equals : opts.compareStructural || opts.struct ? comparer.structural : comparer.default;\n    var r = new Reaction(opts.name, function () {\n        if (firstTime || opts.delay < 1) {\n            reactionRunner();\n        } else if (!isScheduled) {\n            isScheduled = true;\n            setTimeout(function () {\n                isScheduled = false;\n                reactionRunner();\n            }, opts.delay);\n        }\n    });\n    function reactionRunner() {\n        if (r.isDisposed) return;\n        var changed = false;\n        r.track(function () {\n            var nextValue = expression(r);\n            changed = firstTime || !equals(value, nextValue);\n            value = nextValue;\n        });\n        if (firstTime && opts.fireImmediately) effect(value, r);\n        if (!firstTime && changed === true) effect(value, r);\n        if (firstTime) firstTime = false;\n    }\n    r.schedule();\n    return r.getDisposer();\n}\n\n/**\n * A node in the state dependency root that observes other nodes, and can be observed itself.\n *\n * ComputedValue will remember result of the computation for duration of a batch, or being observed\n * During this time it will recompute only when one of its direct dependencies changed,\n * but only when it is being accessed with `ComputedValue.get()`.\n *\n * Implementation description:\n * 1. First time it's being accessed it will compute and remember result\n *    give back remembered result until 2. happens\n * 2. First time any deep dependency change, propagate POSSIBLY_STALE to all observers, wait for 3.\n * 3. When it's being accessed, recompute if any shallow dependency changed.\n *    if result changed: propagate STALE to all observers, that were POSSIBLY_STALE from the last step.\n *    go to step 2. either way\n *\n * If at any point it's outside batch and it isn't observed: reset everything and go to 1.\n */\nvar ComputedValue = function () {\n    /**\n     * Create a new computed value based on a function expression.\n     *\n     * The `name` property is for debug purposes only.\n     *\n     * The `equals` property specifies the comparer function to use to determine if a newly produced\n     * value differs from the previous value. Two comparers are provided in the library; `defaultComparer`\n     * compares based on identity comparison (===), and `structualComparer` deeply compares the structure.\n     * Structural comparison can be convenient if you always produce an new aggregated object and\n     * don't want to notify observers if it is structurally the same.\n     * This is useful for working with vectors, mouse coordinates etc.\n     */\n    function ComputedValue(derivation, scope, equals, name, setter) {\n        this.derivation = derivation;\n        this.scope = scope;\n        this.equals = equals;\n        this.dependenciesState = IDerivationState.NOT_TRACKING;\n        this.observing = []; // nodes we are looking at. Our value depends on these nodes\n        this.newObserving = null; // during tracking it's an array with new observed observers\n        this.isPendingUnobservation = false;\n        this.observers = [];\n        this.observersIndexes = {};\n        this.diffValue = 0;\n        this.runId = 0;\n        this.lastAccessedBy = 0;\n        this.lowestObserverState = IDerivationState.UP_TO_DATE;\n        this.unboundDepsCount = 0;\n        this.__mapid = \"#\" + getNextId();\n        this.value = new CaughtException(null);\n        this.isComputing = false; // to check for cycles\n        this.isRunningSetter = false;\n        this.name = name || \"ComputedValue@\" + getNextId();\n        if (setter) this.setter = createAction(name + \"-setter\", setter);\n    }\n    ComputedValue.prototype.onBecomeStale = function () {\n        propagateMaybeChanged(this);\n    };\n    ComputedValue.prototype.onBecomeUnobserved = function () {\n        clearObserving(this);\n        this.value = undefined;\n    };\n    /**\n     * Returns the current value of this computed value.\n     * Will evaluate its computation first if needed.\n     */\n    ComputedValue.prototype.get = function () {\n        invariant(!this.isComputing, \"Cycle detected in computation \" + this.name, this.derivation);\n        if (globalState.inBatch === 0) {\n            // This is an minor optimization which could be omitted to simplify the code\n            // The computedValue is accessed outside of any mobx stuff. Batch observing should be enough and don't need\n            // tracking as it will never be called again inside this batch.\n            startBatch();\n            if (shouldCompute(this)) this.value = this.computeValue(false);\n            endBatch();\n        } else {\n            reportObserved(this);\n            if (shouldCompute(this)) if (this.trackAndCompute()) propagateChangeConfirmed(this);\n        }\n        var result = this.value;\n        if (isCaughtException(result)) throw result.cause;\n        return result;\n    };\n    ComputedValue.prototype.peek = function () {\n        var res = this.computeValue(false);\n        if (isCaughtException(res)) throw res.cause;\n        return res;\n    };\n    ComputedValue.prototype.set = function (value) {\n        if (this.setter) {\n            invariant(!this.isRunningSetter, \"The setter of computed value '\" + this.name + \"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?\");\n            this.isRunningSetter = true;\n            try {\n                this.setter.call(this.scope, value);\n            } finally {\n                this.isRunningSetter = false;\n            }\n        } else invariant(false, \"[ComputedValue '\" + this.name + \"'] It is not possible to assign a new value to a computed value.\");\n    };\n    ComputedValue.prototype.trackAndCompute = function () {\n        if (isSpyEnabled()) {\n            spyReport({\n                object: this.scope,\n                type: \"compute\",\n                fn: this.derivation\n            });\n        }\n        var oldValue = this.value;\n        var newValue = this.value = this.computeValue(true);\n        return isCaughtException(oldValue) || isCaughtException(newValue) || !this.equals(oldValue, newValue);\n    };\n    ComputedValue.prototype.computeValue = function (track) {\n        this.isComputing = true;\n        globalState.computationDepth++;\n        var res;\n        if (track) {\n            res = trackDerivedFunction(this, this.derivation, this.scope);\n        } else {\n            try {\n                res = this.derivation.call(this.scope);\n            } catch (e) {\n                res = new CaughtException(e);\n            }\n        }\n        globalState.computationDepth--;\n        this.isComputing = false;\n        return res;\n    };\n\n    ComputedValue.prototype.observe = function (listener, fireImmediately) {\n        var _this = this;\n        var firstTime = true;\n        var prevValue = undefined;\n        return autorun(function () {\n            var newValue = _this.get();\n            if (!firstTime || fireImmediately) {\n                var prevU = untrackedStart();\n                listener({\n                    type: \"update\",\n                    object: _this,\n                    newValue: newValue,\n                    oldValue: prevValue\n                });\n                untrackedEnd(prevU);\n            }\n            firstTime = false;\n            prevValue = newValue;\n        });\n    };\n    ComputedValue.prototype.toJSON = function () {\n        return this.get();\n    };\n    ComputedValue.prototype.toString = function () {\n        return this.name + \"[\" + this.derivation.toString() + \"]\";\n    };\n    ComputedValue.prototype.valueOf = function () {\n        return toPrimitive(this.get());\n    };\n\n    ComputedValue.prototype.whyRun = function () {\n        var isTracking = Boolean(globalState.trackingDerivation);\n        var observing = unique(this.isComputing ? this.newObserving : this.observing).map(function (dep) {\n            return dep.name;\n        });\n        var observers = unique(getObservers(this).map(function (dep) {\n            return dep.name;\n        }));\n        return \"\\nWhyRun? computation '\" + this.name + \"':\\n * Running because: \" + (isTracking ? \"[active] the value of this computation is needed by a reaction\" : this.isComputing ? \"[get] The value of this computed was requested outside a reaction\" : \"[idle] not running at the moment\") + \"\\n\" + (this.dependenciesState === IDerivationState.NOT_TRACKING ? getMessage(\"m032\") : \" * This computation will re-run if any of the following observables changes:\\n    \" + joinStrings(observing) + \"\\n    \" + (this.isComputing && isTracking ? \" (... or any observable accessed during the remainder of the current run)\" : \"\") + \"\\n\\t\" + getMessage(\"m038\") + \"\\n\\n  * If the outcome of this computation changes, the following observers will be re-run:\\n    \" + joinStrings(observers) + \"\\n\");\n    };\n    return ComputedValue;\n}();\nComputedValue.prototype[primitiveSymbol()] = ComputedValue.prototype.valueOf;\nvar isComputedValue = createInstanceofPredicate(\"ComputedValue\", ComputedValue);\n\nvar ObservableObjectAdministration = function () {\n    function ObservableObjectAdministration(target, name) {\n        this.target = target;\n        this.name = name;\n        this.values = {};\n        this.changeListeners = null;\n        this.interceptors = null;\n    }\n    /**\n        * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\n        * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\n        * for callback details\n        */\n    ObservableObjectAdministration.prototype.observe = function (callback, fireImmediately) {\n        invariant(fireImmediately !== true, \"`observe` doesn't support the fire immediately property for observable objects.\");\n        return registerListener(this, callback);\n    };\n    ObservableObjectAdministration.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    return ObservableObjectAdministration;\n}();\nfunction asObservableObject(target, name) {\n    if (isObservableObject(target)) return target.$mobx;\n    invariant(Object.isExtensible(target), getMessage(\"m035\"));\n    if (!isPlainObject(target)) name = (target.constructor.name || \"ObservableObject\") + \"@\" + getNextId();\n    if (!name) name = \"ObservableObject@\" + getNextId();\n    var adm = new ObservableObjectAdministration(target, name);\n    addHiddenFinalProp(target, \"$mobx\", adm);\n    return adm;\n}\nfunction defineObservablePropertyFromDescriptor(adm, propName, descriptor, defaultEnhancer) {\n    if (adm.values[propName]) {\n        // already observable property\n        invariant(\"value\" in descriptor, \"The property \" + propName + \" in \" + adm.name + \" is already observable, cannot redefine it as computed property\");\n        adm.target[propName] = descriptor.value; // the property setter will make 'value' reactive if needed.\n        return;\n    }\n    // not yet observable property\n    if (\"value\" in descriptor) {\n        // not a computed value\n        if (isModifierDescriptor(descriptor.value)) {\n            // x : ref(someValue)\n            var modifierDescriptor = descriptor.value;\n            defineObservableProperty(adm, propName, modifierDescriptor.initialValue, modifierDescriptor.enhancer);\n        } else if (isAction(descriptor.value) && descriptor.value.autoBind === true) {\n            defineBoundAction(adm.target, propName, descriptor.value.originalFn);\n        } else if (isComputedValue(descriptor.value)) {\n            // x: computed(someExpr)\n            defineComputedPropertyFromComputedValue(adm, propName, descriptor.value);\n        } else {\n            // x: someValue\n            defineObservableProperty(adm, propName, descriptor.value, defaultEnhancer);\n        }\n    } else {\n        // get x() { return 3 } set x(v) { }\n        defineComputedProperty(adm, propName, descriptor.get, descriptor.set, comparer.default, true);\n    }\n}\nfunction defineObservableProperty(adm, propName, newValue, enhancer) {\n    assertPropertyConfigurable(adm.target, propName);\n    if (hasInterceptors(adm)) {\n        var change = interceptChange(adm, {\n            object: adm.target,\n            name: propName,\n            type: \"add\",\n            newValue: newValue\n        });\n        if (!change) return;\n        newValue = change.newValue;\n    }\n    var observable = adm.values[propName] = new ObservableValue(newValue, enhancer, adm.name + \".\" + propName, false);\n    newValue = observable.value; // observableValue might have changed it\n    Object.defineProperty(adm.target, propName, generateObservablePropConfig(propName));\n    notifyPropertyAddition(adm, adm.target, propName, newValue);\n}\nfunction defineComputedProperty(adm, propName, getter, setter, equals, asInstanceProperty) {\n    if (asInstanceProperty) assertPropertyConfigurable(adm.target, propName);\n    adm.values[propName] = new ComputedValue(getter, adm.target, equals, adm.name + \".\" + propName, setter);\n    if (asInstanceProperty) {\n        Object.defineProperty(adm.target, propName, generateComputedPropConfig(propName));\n    }\n}\nfunction defineComputedPropertyFromComputedValue(adm, propName, computedValue) {\n    var name = adm.name + \".\" + propName;\n    computedValue.name = name;\n    if (!computedValue.scope) computedValue.scope = adm.target;\n    adm.values[propName] = computedValue;\n    Object.defineProperty(adm.target, propName, generateComputedPropConfig(propName));\n}\nvar observablePropertyConfigs = {};\nvar computedPropertyConfigs = {};\nfunction generateObservablePropConfig(propName) {\n    return observablePropertyConfigs[propName] || (observablePropertyConfigs[propName] = {\n        configurable: true,\n        enumerable: true,\n        get: function get() {\n            return this.$mobx.values[propName].get();\n        },\n        set: function set(v) {\n            setPropertyValue(this, propName, v);\n        }\n    });\n}\nfunction generateComputedPropConfig(propName) {\n    return computedPropertyConfigs[propName] || (computedPropertyConfigs[propName] = {\n        configurable: true,\n        enumerable: false,\n        get: function get() {\n            return this.$mobx.values[propName].get();\n        },\n        set: function set(v) {\n            return this.$mobx.values[propName].set(v);\n        }\n    });\n}\nfunction setPropertyValue(instance, name, newValue) {\n    var adm = instance.$mobx;\n    var observable = adm.values[name];\n    // intercept\n    if (hasInterceptors(adm)) {\n        var change = interceptChange(adm, {\n            type: \"update\",\n            object: instance,\n            name: name, newValue: newValue\n        });\n        if (!change) return;\n        newValue = change.newValue;\n    }\n    newValue = observable.prepareNewValue(newValue);\n    // notify spy & observers\n    if (newValue !== UNCHANGED) {\n        var notify = hasListeners(adm);\n        var notifySpy = isSpyEnabled();\n        var change = notify || notifySpy ? {\n            type: \"update\",\n            object: instance,\n            oldValue: observable.value,\n            name: name, newValue: newValue\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        observable.setNewValue(newValue);\n        if (notify) notifyListeners(adm, change);\n        if (notifySpy) spyReportEnd();\n    }\n}\nfunction notifyPropertyAddition(adm, object, name, newValue) {\n    var notify = hasListeners(adm);\n    var notifySpy = isSpyEnabled();\n    var change = notify || notifySpy ? {\n        type: \"add\",\n        object: object, name: name, newValue: newValue\n    } : null;\n    if (notifySpy) spyReportStart(change);\n    if (notify) notifyListeners(adm, change);\n    if (notifySpy) spyReportEnd();\n}\nvar isObservableObjectAdministration = createInstanceofPredicate(\"ObservableObjectAdministration\", ObservableObjectAdministration);\nfunction isObservableObject(thing) {\n    if (isObject(thing)) {\n        // Initializers run lazily when transpiling to babel, so make sure they are run...\n        runLazyInitializers(thing);\n        return isObservableObjectAdministration(thing.$mobx);\n    }\n    return false;\n}\n\n/**\n    * Returns true if the provided value is reactive.\n    * @param value object, function or array\n    * @param property if property is specified, checks whether value.property is reactive.\n    */\nfunction isObservable(value, property) {\n    if (value === null || value === undefined) return false;\n    if (property !== undefined) {\n        if (isObservableArray(value) || isObservableMap(value)) throw new Error(getMessage(\"m019\"));else if (isObservableObject(value)) {\n            var o = value.$mobx;\n            return o.values && !!o.values[property];\n        }\n        return false;\n    }\n    // For first check, see #701\n    return isObservableObject(value) || !!value.$mobx || isAtom(value) || isReaction(value) || isComputedValue(value);\n}\n\nfunction createDecoratorForEnhancer(enhancer) {\n    invariant(!!enhancer, \":(\");\n    return createClassPropertyDecorator(function (target, name, baseValue, _, baseDescriptor) {\n        assertPropertyConfigurable(target, name);\n        invariant(!baseDescriptor || !baseDescriptor.get, getMessage(\"m022\"));\n        var adm = asObservableObject(target, undefined);\n        defineObservableProperty(adm, name, baseValue, enhancer);\n    }, function (name) {\n        var observable = this.$mobx.values[name];\n        if (observable === undefined) return undefined;\n        return observable.get();\n    }, function (name, value) {\n        setPropertyValue(this, name, value);\n    }, true, false);\n}\n\nfunction extendObservable(target) {\n    var properties = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        properties[_i - 1] = arguments[_i];\n    }\n    return extendObservableHelper(target, deepEnhancer, properties);\n}\nfunction extendShallowObservable(target) {\n    var properties = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        properties[_i - 1] = arguments[_i];\n    }\n    return extendObservableHelper(target, referenceEnhancer, properties);\n}\nfunction extendObservableHelper(target, defaultEnhancer, properties) {\n    invariant(arguments.length >= 2, getMessage(\"m014\"));\n    invariant((typeof target === \"undefined\" ? \"undefined\" : _typeof(target)) === \"object\", getMessage(\"m015\"));\n    invariant(!isObservableMap(target), getMessage(\"m016\"));\n    properties.forEach(function (propSet) {\n        invariant((typeof propSet === \"undefined\" ? \"undefined\" : _typeof(propSet)) === \"object\", getMessage(\"m017\"));\n        invariant(!isObservable(propSet), getMessage(\"m018\"));\n    });\n    var adm = asObservableObject(target);\n    var definedProps = {};\n    // Note could be optimised if properties.length === 1\n    for (var i = properties.length - 1; i >= 0; i--) {\n        var propSet = properties[i];\n        for (var key in propSet) {\n            if (definedProps[key] !== true && hasOwnProperty(propSet, key)) {\n                definedProps[key] = true;\n                if (target === propSet && !isPropertyConfigurable(target, key)) continue; // see #111, skip non-configurable or non-writable props for `observable(object)`.\n                var descriptor = Object.getOwnPropertyDescriptor(propSet, key);\n                defineObservablePropertyFromDescriptor(adm, key, descriptor, defaultEnhancer);\n            }\n        }\n    }\n    return target;\n}\n\nvar deepDecorator = createDecoratorForEnhancer(deepEnhancer);\nvar shallowDecorator = createDecoratorForEnhancer(shallowEnhancer);\nvar refDecorator = createDecoratorForEnhancer(referenceEnhancer);\nvar deepStructDecorator = createDecoratorForEnhancer(deepStructEnhancer);\nvar refStructDecorator = createDecoratorForEnhancer(refStructEnhancer);\n/**\n * Turns an object, array or function into a reactive structure.\n * @param v the value which should become observable.\n */\nfunction createObservable(v) {\n    if (v === void 0) {\n        v = undefined;\n    }\n    // @observable someProp;\n    if (typeof arguments[1] === \"string\") return deepDecorator.apply(null, arguments);\n    invariant(arguments.length <= 1, getMessage(\"m021\"));\n    invariant(!isModifierDescriptor(v), getMessage(\"m020\"));\n    // it is an observable already, done\n    if (isObservable(v)) return v;\n    // something that can be converted and mutated?\n    var res = deepEnhancer(v, undefined, undefined);\n    // this value could be converted to a new observable data structure, return it\n    if (res !== v) return res;\n    // otherwise, just box it\n    return observable.box(v);\n}\nvar IObservableFactories = function () {\n    function IObservableFactories() {}\n    IObservableFactories.prototype.box = function (value, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"box\");\n        return new ObservableValue(value, deepEnhancer, name);\n    };\n    IObservableFactories.prototype.shallowBox = function (value, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowBox\");\n        return new ObservableValue(value, referenceEnhancer, name);\n    };\n    IObservableFactories.prototype.array = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"array\");\n        return new ObservableArray(initialValues, deepEnhancer, name);\n    };\n    IObservableFactories.prototype.shallowArray = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowArray\");\n        return new ObservableArray(initialValues, referenceEnhancer, name);\n    };\n    IObservableFactories.prototype.map = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"map\");\n        return new ObservableMap(initialValues, deepEnhancer, name);\n    };\n    IObservableFactories.prototype.shallowMap = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowMap\");\n        return new ObservableMap(initialValues, referenceEnhancer, name);\n    };\n    IObservableFactories.prototype.object = function (props, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"object\");\n        var res = {};\n        // convert to observable object\n        asObservableObject(res, name);\n        // add properties\n        extendObservable(res, props);\n        return res;\n    };\n    IObservableFactories.prototype.shallowObject = function (props, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowObject\");\n        var res = {};\n        asObservableObject(res, name);\n        extendShallowObservable(res, props);\n        return res;\n    };\n    IObservableFactories.prototype.ref = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(referenceEnhancer, arguments[0]);\n        } else {\n            return refDecorator.apply(null, arguments);\n        }\n    };\n    IObservableFactories.prototype.shallow = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(shallowEnhancer, arguments[0]);\n        } else {\n            return shallowDecorator.apply(null, arguments);\n        }\n    };\n    IObservableFactories.prototype.deep = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(deepEnhancer, arguments[0]);\n        } else {\n            return deepDecorator.apply(null, arguments);\n        }\n    };\n    IObservableFactories.prototype.struct = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(deepStructEnhancer, arguments[0]);\n        } else {\n            return deepStructDecorator.apply(null, arguments);\n        }\n    };\n    return IObservableFactories;\n}();\nvar observable = createObservable;\n// weird trick to keep our typings nicely with our funcs, and still extend the observable function\n// ES6 class methods aren't enumerable, can't use Object.keys\nObject.getOwnPropertyNames(IObservableFactories.prototype).filter(function (name) {\n    return name !== \"constructor\";\n}).forEach(function (name) {\n    return observable[name] = IObservableFactories.prototype[name];\n});\nobservable.deep.struct = observable.struct;\nobservable.ref.struct = function () {\n    if (arguments.length < 2) {\n        return createModifierDescriptor(refStructEnhancer, arguments[0]);\n    } else {\n        return refStructDecorator.apply(null, arguments);\n    }\n};\nfunction incorrectlyUsedAsDecorator(methodName) {\n    fail(\"Expected one or two arguments to observable.\" + methodName + \". Did you accidentally try to use observable.\" + methodName + \" as decorator?\");\n}\n\nfunction isModifierDescriptor(thing) {\n    return (typeof thing === \"undefined\" ? \"undefined\" : _typeof(thing)) === \"object\" && thing !== null && thing.isMobxModifierDescriptor === true;\n}\nfunction createModifierDescriptor(enhancer, initialValue) {\n    invariant(!isModifierDescriptor(initialValue), \"Modifiers cannot be nested\");\n    return {\n        isMobxModifierDescriptor: true,\n        initialValue: initialValue,\n        enhancer: enhancer\n    };\n}\nfunction deepEnhancer(v, _, name) {\n    if (isModifierDescriptor(v)) fail(\"You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it\");\n    // it is an observable already, done\n    if (isObservable(v)) return v;\n    // something that can be converted and mutated?\n    if (Array.isArray(v)) return observable.array(v, name);\n    if (isPlainObject(v)) return observable.object(v, name);\n    if (isES6Map(v)) return observable.map(v, name);\n    return v;\n}\nfunction shallowEnhancer(v, _, name) {\n    if (isModifierDescriptor(v)) fail(\"You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it\");\n    if (v === undefined || v === null) return v;\n    if (isObservableObject(v) || isObservableArray(v) || isObservableMap(v)) return v;\n    if (Array.isArray(v)) return observable.shallowArray(v, name);\n    if (isPlainObject(v)) return observable.shallowObject(v, name);\n    if (isES6Map(v)) return observable.shallowMap(v, name);\n    return fail(\"The shallow modifier / decorator can only used in combination with arrays, objects and maps\");\n}\nfunction referenceEnhancer(newValue) {\n    // never turn into an observable\n    return newValue;\n}\nfunction deepStructEnhancer(v, oldValue, name) {\n    // don't confuse structurally compare enhancer with ref enhancer! The latter is probably\n    // more suited for immutable objects\n    if (deepEqual(v, oldValue)) return oldValue;\n    // it is an observable already, done\n    if (isObservable(v)) return v;\n    // something that can be converted and mutated?\n    if (Array.isArray(v)) return new ObservableArray(v, deepStructEnhancer, name);\n    if (isES6Map(v)) return new ObservableMap(v, deepStructEnhancer, name);\n    if (isPlainObject(v)) {\n        var res = {};\n        asObservableObject(res, name);\n        extendObservableHelper(res, deepStructEnhancer, [v]);\n        return res;\n    }\n    return v;\n}\nfunction refStructEnhancer(v, oldValue, name) {\n    if (deepEqual(v, oldValue)) return oldValue;\n    return v;\n}\n\n/**\n * @deprecated\n * During a transaction no views are updated until the end of the transaction.\n * The transaction will be run synchronously nonetheless.\n *\n * Deprecated to simplify api; transactions offer no real benefit above actions.\n *\n * @param action a function that updates some reactive state\n * @returns any value that was returned by the 'action' parameter.\n */\nfunction transaction(action, thisArg) {\n    if (thisArg === void 0) {\n        thisArg = undefined;\n    }\n    deprecated(getMessage(\"m023\"));\n    return runInTransaction.apply(undefined, arguments);\n}\nfunction runInTransaction(action, thisArg) {\n    if (thisArg === void 0) {\n        thisArg = undefined;\n    }\n    return executeAction(\"\", action);\n}\n\nvar ObservableMapMarker = {};\nvar ObservableMap = function () {\n    function ObservableMap(initialData, enhancer, name) {\n        if (enhancer === void 0) {\n            enhancer = deepEnhancer;\n        }\n        if (name === void 0) {\n            name = \"ObservableMap@\" + getNextId();\n        }\n        this.enhancer = enhancer;\n        this.name = name;\n        this.$mobx = ObservableMapMarker;\n        this._data = Object.create(null);\n        this._hasMap = Object.create(null); // hasMap, not hashMap >-).\n        this._keys = new ObservableArray(undefined, referenceEnhancer, this.name + \".keys()\", true);\n        this.interceptors = null;\n        this.changeListeners = null;\n        this.dehancer = undefined;\n        this.merge(initialData);\n    }\n    ObservableMap.prototype._has = function (key) {\n        return typeof this._data[key] !== \"undefined\";\n    };\n    ObservableMap.prototype.has = function (key) {\n        if (!this.isValidKey(key)) return false;\n        key = \"\" + key;\n        if (this._hasMap[key]) return this._hasMap[key].get();\n        return this._updateHasMapEntry(key, false).get();\n    };\n    ObservableMap.prototype.set = function (key, value) {\n        this.assertValidKey(key);\n        key = \"\" + key;\n        var hasKey = this._has(key);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: hasKey ? \"update\" : \"add\",\n                object: this,\n                newValue: value,\n                name: key\n            });\n            if (!change) return this;\n            value = change.newValue;\n        }\n        if (hasKey) {\n            this._updateValue(key, value);\n        } else {\n            this._addValue(key, value);\n        }\n        return this;\n    };\n    ObservableMap.prototype.delete = function (key) {\n        var _this = this;\n        this.assertValidKey(key);\n        key = \"\" + key;\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: \"delete\",\n                object: this,\n                name: key\n            });\n            if (!change) return false;\n        }\n        if (this._has(key)) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy ? {\n                type: \"delete\",\n                object: this,\n                oldValue: this._data[key].value,\n                name: key\n            } : null;\n            if (notifySpy) spyReportStart(change);\n            runInTransaction(function () {\n                _this._keys.remove(key);\n                _this._updateHasMapEntry(key, false);\n                var observable$$1 = _this._data[key];\n                observable$$1.setNewValue(undefined);\n                _this._data[key] = undefined;\n            });\n            if (notify) notifyListeners(this, change);\n            if (notifySpy) spyReportEnd();\n            return true;\n        }\n        return false;\n    };\n    ObservableMap.prototype._updateHasMapEntry = function (key, value) {\n        // optimization; don't fill the hasMap if we are not observing, or remove entry if there are no observers anymore\n        var entry = this._hasMap[key];\n        if (entry) {\n            entry.setNewValue(value);\n        } else {\n            entry = this._hasMap[key] = new ObservableValue(value, referenceEnhancer, this.name + \".\" + key + \"?\", false);\n        }\n        return entry;\n    };\n    ObservableMap.prototype._updateValue = function (name, newValue) {\n        var observable$$1 = this._data[name];\n        newValue = observable$$1.prepareNewValue(newValue);\n        if (newValue !== UNCHANGED) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy ? {\n                type: \"update\",\n                object: this,\n                oldValue: observable$$1.value,\n                name: name, newValue: newValue\n            } : null;\n            if (notifySpy) spyReportStart(change);\n            observable$$1.setNewValue(newValue);\n            if (notify) notifyListeners(this, change);\n            if (notifySpy) spyReportEnd();\n        }\n    };\n    ObservableMap.prototype._addValue = function (name, newValue) {\n        var _this = this;\n        runInTransaction(function () {\n            var observable$$1 = _this._data[name] = new ObservableValue(newValue, _this.enhancer, _this.name + \".\" + name, false);\n            newValue = observable$$1.value; // value might have been changed\n            _this._updateHasMapEntry(name, true);\n            _this._keys.push(name);\n        });\n        var notifySpy = isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy ? {\n            type: \"add\",\n            object: this,\n            name: name,\n            newValue: newValue\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        if (notify) notifyListeners(this, change);\n        if (notifySpy) spyReportEnd();\n    };\n    ObservableMap.prototype.get = function (key) {\n        key = \"\" + key;\n        if (this.has(key)) return this.dehanceValue(this._data[key].get());\n        return this.dehanceValue(undefined);\n    };\n    ObservableMap.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) {\n            return this.dehancer(value);\n        }\n        return value;\n    };\n    ObservableMap.prototype.keys = function () {\n        return arrayAsIterator(this._keys.slice());\n    };\n    ObservableMap.prototype.values = function () {\n        return arrayAsIterator(this._keys.map(this.get, this));\n    };\n    ObservableMap.prototype.entries = function () {\n        var _this = this;\n        return arrayAsIterator(this._keys.map(function (key) {\n            return [key, _this.get(key)];\n        }));\n    };\n    ObservableMap.prototype.forEach = function (callback, thisArg) {\n        var _this = this;\n        this.keys().forEach(function (key) {\n            return callback.call(thisArg, _this.get(key), key, _this);\n        });\n    };\n    /** Merge another object into this object, returns this. */\n    ObservableMap.prototype.merge = function (other) {\n        var _this = this;\n        if (isObservableMap(other)) {\n            other = other.toJS();\n        }\n        runInTransaction(function () {\n            if (isPlainObject(other)) Object.keys(other).forEach(function (key) {\n                return _this.set(key, other[key]);\n            });else if (Array.isArray(other)) other.forEach(function (_a) {\n                var key = _a[0],\n                    value = _a[1];\n                return _this.set(key, value);\n            });else if (isES6Map(other)) other.forEach(function (value, key) {\n                return _this.set(key, value);\n            });else if (other !== null && other !== undefined) fail(\"Cannot initialize map from \" + other);\n        });\n        return this;\n    };\n    ObservableMap.prototype.clear = function () {\n        var _this = this;\n        runInTransaction(function () {\n            untracked(function () {\n                _this.keys().forEach(_this.delete, _this);\n            });\n        });\n    };\n    ObservableMap.prototype.replace = function (values) {\n        var _this = this;\n        runInTransaction(function () {\n            _this.clear();\n            _this.merge(values);\n        });\n        return this;\n    };\n    Object.defineProperty(ObservableMap.prototype, \"size\", {\n        get: function get() {\n            return this._keys.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Returns a shallow non observable object clone of this map.\n     * Note that the values migth still be observable. For a deep clone use mobx.toJS.\n     */\n    ObservableMap.prototype.toJS = function () {\n        var _this = this;\n        var res = {};\n        this.keys().forEach(function (key) {\n            return res[key] = _this.get(key);\n        });\n        return res;\n    };\n    ObservableMap.prototype.toJSON = function () {\n        // Used by JSON.stringify\n        return this.toJS();\n    };\n    ObservableMap.prototype.isValidKey = function (key) {\n        if (key === null || key === undefined) return false;\n        if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"boolean\") return true;\n        return false;\n    };\n    ObservableMap.prototype.assertValidKey = function (key) {\n        if (!this.isValidKey(key)) throw new Error(\"[mobx.map] Invalid key: '\" + key + \"', only strings, numbers and booleans are accepted as key in observable maps.\");\n    };\n    ObservableMap.prototype.toString = function () {\n        var _this = this;\n        return this.name + \"[{ \" + this.keys().map(function (key) {\n            return key + \": \" + (\"\" + _this.get(key));\n        }).join(\", \") + \" }]\";\n    };\n    /**\n     * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\n     * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\n     * for callback details\n     */\n    ObservableMap.prototype.observe = function (listener, fireImmediately) {\n        invariant(fireImmediately !== true, getMessage(\"m033\"));\n        return registerListener(this, listener);\n    };\n    ObservableMap.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    return ObservableMap;\n}();\ndeclareIterator(ObservableMap.prototype, function () {\n    return this.entries();\n});\nfunction map(initialValues) {\n    deprecated(\"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead\");\n    return observable.map(initialValues);\n}\n/* 'var' fixes small-build issue */\nvar isObservableMap = createInstanceofPredicate(\"ObservableMap\", ObservableMap);\n\nvar EMPTY_ARRAY = [];\nObject.freeze(EMPTY_ARRAY);\nfunction getGlobal() {\n    return global;\n}\nfunction getNextId() {\n    return ++globalState.mobxGuid;\n}\nfunction fail(message, thing) {\n    invariant(false, message, thing);\n    throw \"X\"; // unreachable\n}\nfunction invariant(check, message, thing) {\n    if (!check) throw new Error(\"[mobx] Invariant failed: \" + message + (thing ? \" in '\" + thing + \"'\" : \"\"));\n}\n/**\n * Prints a deprecation message, but only one time.\n * Returns false if the deprecated message was already printed before\n */\nvar deprecatedMessages = [];\nfunction deprecated(msg) {\n    if (deprecatedMessages.indexOf(msg) !== -1) return false;\n    deprecatedMessages.push(msg);\n    console.error(\"[mobx] Deprecated: \" + msg);\n    return true;\n}\n/**\n * Makes sure that the provided function is invoked at most once.\n */\nfunction once(func) {\n    var invoked = false;\n    return function () {\n        if (invoked) return;\n        invoked = true;\n        return func.apply(this, arguments);\n    };\n}\nvar noop = function noop() {};\nfunction unique(list) {\n    var res = [];\n    list.forEach(function (item) {\n        if (res.indexOf(item) === -1) res.push(item);\n    });\n    return res;\n}\nfunction joinStrings(things, limit, separator) {\n    if (limit === void 0) {\n        limit = 100;\n    }\n    if (separator === void 0) {\n        separator = \" - \";\n    }\n    if (!things) return \"\";\n    var sliced = things.slice(0, limit);\n    return \"\" + sliced.join(separator) + (things.length > limit ? \" (... and \" + (things.length - limit) + \"more)\" : \"\");\n}\nfunction isObject(value) {\n    return value !== null && (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\";\n}\nfunction isPlainObject(value) {\n    if (value === null || (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) !== \"object\") return false;\n    var proto = Object.getPrototypeOf(value);\n    return proto === Object.prototype || proto === null;\n}\nfunction objectAssign() {\n    var res = arguments[0];\n    for (var i = 1, l = arguments.length; i < l; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n            if (hasOwnProperty(source, key)) {\n                res[key] = source[key];\n            }\n        }\n    }\n    return res;\n}\nvar prototypeHasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(object, propName) {\n    return prototypeHasOwnProperty.call(object, propName);\n}\nfunction makeNonEnumerable(object, propNames) {\n    for (var i = 0; i < propNames.length; i++) {\n        addHiddenProp(object, propNames[i], object[propNames[i]]);\n    }\n}\nfunction addHiddenProp(object, propName, value) {\n    Object.defineProperty(object, propName, {\n        enumerable: false,\n        writable: true,\n        configurable: true,\n        value: value\n    });\n}\nfunction addHiddenFinalProp(object, propName, value) {\n    Object.defineProperty(object, propName, {\n        enumerable: false,\n        writable: false,\n        configurable: true,\n        value: value\n    });\n}\nfunction isPropertyConfigurable(object, prop) {\n    var descriptor = Object.getOwnPropertyDescriptor(object, prop);\n    return !descriptor || descriptor.configurable !== false && descriptor.writable !== false;\n}\nfunction assertPropertyConfigurable(object, prop) {\n    invariant(isPropertyConfigurable(object, prop), \"Cannot make property '\" + prop + \"' observable, it is not configurable and writable in the target object\");\n}\nfunction getEnumerableKeys(obj) {\n    var res = [];\n    for (var key in obj) {\n        res.push(key);\n    }return res;\n}\n/**\n * Naive deepEqual. Doesn't check for prototype, non-enumerable or out-of-range properties on arrays.\n * If you have such a case, you probably should use this function but something fancier :).\n */\nfunction deepEqual(a, b) {\n    if (a === null && b === null) return true;\n    if (a === undefined && b === undefined) return true;\n    if ((typeof a === \"undefined\" ? \"undefined\" : _typeof(a)) !== \"object\") return a === b;\n    var aIsArray = isArrayLike(a);\n    var aIsMap = isMapLike(a);\n    if (aIsArray !== isArrayLike(b)) {\n        return false;\n    } else if (aIsMap !== isMapLike(b)) {\n        return false;\n    } else if (aIsArray) {\n        if (a.length !== b.length) return false;\n        for (var i = a.length - 1; i >= 0; i--) {\n            if (!deepEqual(a[i], b[i])) return false;\n        }return true;\n    } else if (aIsMap) {\n        if (a.size !== b.size) return false;\n        var equals_1 = true;\n        a.forEach(function (value, key) {\n            equals_1 = equals_1 && deepEqual(b.get(key), value);\n        });\n        return equals_1;\n    } else if ((typeof a === \"undefined\" ? \"undefined\" : _typeof(a)) === \"object\" && (typeof b === \"undefined\" ? \"undefined\" : _typeof(b)) === \"object\") {\n        if (a === null || b === null) return false;\n        if (isMapLike(a) && isMapLike(b)) {\n            if (a.size !== b.size) return false;\n            // Freaking inefficient.... Create PR if you run into this :) Much appreciated!\n            return deepEqual(observable.shallowMap(a).entries(), observable.shallowMap(b).entries());\n        }\n        if (getEnumerableKeys(a).length !== getEnumerableKeys(b).length) return false;\n        for (var prop in a) {\n            if (!(prop in b)) return false;\n            if (!deepEqual(a[prop], b[prop])) return false;\n        }\n        return true;\n    }\n    return false;\n}\nfunction createInstanceofPredicate(name, clazz) {\n    var propName = \"isMobX\" + name;\n    clazz.prototype[propName] = true;\n    return function (x) {\n        return isObject(x) && x[propName] === true;\n    };\n}\n/**\n * Returns whether the argument is an array, disregarding observability.\n */\nfunction isArrayLike(x) {\n    return Array.isArray(x) || isObservableArray(x);\n}\nfunction isMapLike(x) {\n    return isES6Map(x) || isObservableMap(x);\n}\nfunction isES6Map(thing) {\n    if (getGlobal().Map !== undefined && thing instanceof getGlobal().Map) return true;\n    return false;\n}\nfunction primitiveSymbol() {\n    return typeof Symbol === \"function\" && Symbol.toPrimitive || \"@@toPrimitive\";\n}\nfunction toPrimitive(value) {\n    return value === null ? null : (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\" ? \"\" + value : value;\n}\n\n/**\n * These values will persist if global state is reset\n */\nvar persistentKeys = [\"mobxGuid\", \"resetId\", \"spyListeners\", \"strictMode\", \"runId\"];\nvar MobXGlobals = function () {\n    function MobXGlobals() {\n        /**\n         * MobXGlobals version.\n         * MobX compatiblity with other versions loaded in memory as long as this version matches.\n         * It indicates that the global state still stores similar information\n         */\n        this.version = 5;\n        /**\n         * Currently running derivation\n         */\n        this.trackingDerivation = null;\n        /**\n         * Are we running a computation currently? (not a reaction)\n         */\n        this.computationDepth = 0;\n        /**\n         * Each time a derivation is tracked, it is assigned a unique run-id\n         */\n        this.runId = 0;\n        /**\n         * 'guid' for general purpose. Will be persisted amongst resets.\n         */\n        this.mobxGuid = 0;\n        /**\n         * Are we in a batch block? (and how many of them)\n         */\n        this.inBatch = 0;\n        /**\n         * Observables that don't have observers anymore, and are about to be\n         * suspended, unless somebody else accesses it in the same batch\n         *\n         * @type {IObservable[]}\n         */\n        this.pendingUnobservations = [];\n        /**\n         * List of scheduled, not yet executed, reactions.\n         */\n        this.pendingReactions = [];\n        /**\n         * Are we currently processing reactions?\n         */\n        this.isRunningReactions = false;\n        /**\n         * Is it allowed to change observables at this point?\n         * In general, MobX doesn't allow that when running computations and React.render.\n         * To ensure that those functions stay pure.\n         */\n        this.allowStateChanges = true;\n        /**\n         * If strict mode is enabled, state changes are by default not allowed\n         */\n        this.strictMode = false;\n        /**\n         * Used by createTransformer to detect that the global state has been reset.\n         */\n        this.resetId = 0;\n        /**\n         * Spy callbacks\n         */\n        this.spyListeners = [];\n        /**\n         * Globally attached error handlers that react specifically to errors in reactions\n         */\n        this.globalReactionErrorHandlers = [];\n    }\n    return MobXGlobals;\n}();\nvar globalState = new MobXGlobals();\nvar shareGlobalStateCalled = false;\nvar runInIsolationCalled = false;\nvar warnedAboutMultipleInstances = false;\n{\n    var global_1 = getGlobal();\n    if (!global_1.__mobxInstanceCount) {\n        global_1.__mobxInstanceCount = 1;\n    } else {\n        global_1.__mobxInstanceCount++;\n        setTimeout(function () {\n            if (!shareGlobalStateCalled && !runInIsolationCalled && !warnedAboutMultipleInstances) {\n                warnedAboutMultipleInstances = true;\n                console.warn(\"[mobx] Warning: there are multiple mobx instances active. This might lead to unexpected results. See https://github.com/mobxjs/mobx/issues/1082 for details.\");\n            }\n        });\n    }\n}\nfunction isolateGlobalState() {\n    runInIsolationCalled = true;\n    getGlobal().__mobxInstanceCount--;\n}\nfunction shareGlobalState() {\n    // TODO: remove in 4.0; just use peer dependencies instead.\n    deprecated(\"Using `shareGlobalState` is not recommended, use peer dependencies instead. See https://github.com/mobxjs/mobx/issues/1082 for details.\");\n    shareGlobalStateCalled = true;\n    var global = getGlobal();\n    var ownState = globalState;\n    /**\n     * Backward compatibility check\n     */\n    if (global.__mobservableTrackingStack || global.__mobservableViewStack) throw new Error(\"[mobx] An incompatible version of mobservable is already loaded.\");\n    if (global.__mobxGlobal && global.__mobxGlobal.version !== ownState.version) throw new Error(\"[mobx] An incompatible version of mobx is already loaded.\");\n    if (global.__mobxGlobal) globalState = global.__mobxGlobal;else global.__mobxGlobal = ownState;\n}\nfunction getGlobalState() {\n    return globalState;\n}\n\n/**\n * For testing purposes only; this will break the internal state of existing observables,\n * but can be used to get back at a stable state after throwing errors\n */\nfunction resetGlobalState() {\n    globalState.resetId++;\n    var defaultGlobals = new MobXGlobals();\n    for (var key in defaultGlobals) {\n        if (persistentKeys.indexOf(key) === -1) globalState[key] = defaultGlobals[key];\n    }globalState.allowStateChanges = !globalState.strictMode;\n}\n\nfunction hasObservers(observable) {\n    return observable.observers && observable.observers.length > 0;\n}\nfunction getObservers(observable) {\n    return observable.observers;\n}\nfunction addObserver(observable, node) {\n    // invariant(node.dependenciesState !== -1, \"INTERNAL ERROR, can add only dependenciesState !== -1\");\n    // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR add already added node\");\n    // invariantObservers(observable);\n    var l = observable.observers.length;\n    if (l) {\n        observable.observersIndexes[node.__mapid] = l;\n    }\n    observable.observers[l] = node;\n    if (observable.lowestObserverState > node.dependenciesState) observable.lowestObserverState = node.dependenciesState;\n    // invariantObservers(observable);\n    // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR didnt add node\");\n}\nfunction removeObserver(observable, node) {\n    // invariant(globalState.inBatch > 0, \"INTERNAL ERROR, remove should be called only inside batch\");\n    // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR remove already removed node\");\n    // invariantObservers(observable);\n    if (observable.observers.length === 1) {\n        // deleting last observer\n        observable.observers.length = 0;\n        queueForUnobservation(observable);\n    } else {\n        // deleting from _observersIndexes is straight forward, to delete from _observers, let's swap `node` with last element\n        var list = observable.observers;\n        var map = observable.observersIndexes;\n        var filler = list.pop(); // get last element, which should fill the place of `node`, so the array doesnt have holes\n        if (filler !== node) {\n            var index = map[node.__mapid] || 0; // getting index of `node`. this is the only place we actually use map.\n            if (index) {\n                map[filler.__mapid] = index;\n            } else {\n                delete map[filler.__mapid];\n            }\n            list[index] = filler;\n        }\n        delete map[node.__mapid];\n    }\n    // invariantObservers(observable);\n    // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR remove already removed node2\");\n}\nfunction queueForUnobservation(observable) {\n    if (!observable.isPendingUnobservation) {\n        // invariant(globalState.inBatch > 0, \"INTERNAL ERROR, remove should be called only inside batch\");\n        // invariant(observable._observers.length === 0, \"INTERNAL ERROR, shuold only queue for unobservation unobserved observables\");\n        observable.isPendingUnobservation = true;\n        globalState.pendingUnobservations.push(observable);\n    }\n}\n/**\n * Batch starts a transaction, at least for purposes of memoizing ComputedValues when nothing else does.\n * During a batch `onBecomeUnobserved` will be called at most once per observable.\n * Avoids unnecessary recalculations.\n */\nfunction startBatch() {\n    globalState.inBatch++;\n}\nfunction endBatch() {\n    if (--globalState.inBatch === 0) {\n        runReactions();\n        // the batch is actually about to finish, all unobserving should happen here.\n        var list = globalState.pendingUnobservations;\n        for (var i = 0; i < list.length; i++) {\n            var observable = list[i];\n            observable.isPendingUnobservation = false;\n            if (observable.observers.length === 0) {\n                observable.onBecomeUnobserved();\n                // NOTE: onBecomeUnobserved might push to `pendingUnobservations`\n            }\n        }\n        globalState.pendingUnobservations = [];\n    }\n}\nfunction reportObserved(observable) {\n    var derivation = globalState.trackingDerivation;\n    if (derivation !== null) {\n        /**\n         * Simple optimization, give each derivation run an unique id (runId)\n         * Check if last time this observable was accessed the same runId is used\n         * if this is the case, the relation is already known\n         */\n        if (derivation.runId !== observable.lastAccessedBy) {\n            observable.lastAccessedBy = derivation.runId;\n            derivation.newObserving[derivation.unboundDepsCount++] = observable;\n        }\n    } else if (observable.observers.length === 0) {\n        queueForUnobservation(observable);\n    }\n}\n/**\n * NOTE: current propagation mechanism will in case of self reruning autoruns behave unexpectedly\n * It will propagate changes to observers from previous run\n * It's hard or maybe impossible (with reasonable perf) to get it right with current approach\n * Hopefully self reruning autoruns aren't a feature people should depend on\n * Also most basic use cases should be ok\n */\n// Called by Atom when its value changes\nfunction propagateChanged(observable) {\n    // invariantLOS(observable, \"changed start\");\n    if (observable.lowestObserverState === IDerivationState.STALE) return;\n    observable.lowestObserverState = IDerivationState.STALE;\n    var observers = observable.observers;\n    var i = observers.length;\n    while (i--) {\n        var d = observers[i];\n        if (d.dependenciesState === IDerivationState.UP_TO_DATE) d.onBecomeStale();\n        d.dependenciesState = IDerivationState.STALE;\n    }\n    // invariantLOS(observable, \"changed end\");\n}\n// Called by ComputedValue when it recalculate and its value changed\nfunction propagateChangeConfirmed(observable) {\n    // invariantLOS(observable, \"confirmed start\");\n    if (observable.lowestObserverState === IDerivationState.STALE) return;\n    observable.lowestObserverState = IDerivationState.STALE;\n    var observers = observable.observers;\n    var i = observers.length;\n    while (i--) {\n        var d = observers[i];\n        if (d.dependenciesState === IDerivationState.POSSIBLY_STALE) d.dependenciesState = IDerivationState.STALE;else if (d.dependenciesState === IDerivationState.UP_TO_DATE) observable.lowestObserverState = IDerivationState.UP_TO_DATE;\n    }\n    // invariantLOS(observable, \"confirmed end\");\n}\n// Used by computed when its dependency changed, but we don't wan't to immediately recompute.\nfunction propagateMaybeChanged(observable) {\n    // invariantLOS(observable, \"maybe start\");\n    if (observable.lowestObserverState !== IDerivationState.UP_TO_DATE) return;\n    observable.lowestObserverState = IDerivationState.POSSIBLY_STALE;\n    var observers = observable.observers;\n    var i = observers.length;\n    while (i--) {\n        var d = observers[i];\n        if (d.dependenciesState === IDerivationState.UP_TO_DATE) {\n            d.dependenciesState = IDerivationState.POSSIBLY_STALE;\n            d.onBecomeStale();\n        }\n    }\n    // invariantLOS(observable, \"maybe end\");\n}\n\nvar IDerivationState;\n(function (IDerivationState) {\n    // before being run or (outside batch and not being observed)\n    // at this point derivation is not holding any data about dependency tree\n    IDerivationState[IDerivationState[\"NOT_TRACKING\"] = -1] = \"NOT_TRACKING\";\n    // no shallow dependency changed since last computation\n    // won't recalculate derivation\n    // this is what makes mobx fast\n    IDerivationState[IDerivationState[\"UP_TO_DATE\"] = 0] = \"UP_TO_DATE\";\n    // some deep dependency changed, but don't know if shallow dependency changed\n    // will require to check first if UP_TO_DATE or POSSIBLY_STALE\n    // currently only ComputedValue will propagate POSSIBLY_STALE\n    //\n    // having this state is second big optimization:\n    // don't have to recompute on every dependency change, but only when it's needed\n    IDerivationState[IDerivationState[\"POSSIBLY_STALE\"] = 1] = \"POSSIBLY_STALE\";\n    // shallow dependency changed\n    // will need to recompute when it's needed\n    IDerivationState[IDerivationState[\"STALE\"] = 2] = \"STALE\";\n})(IDerivationState || (exports.IDerivationState = IDerivationState = {}));\nvar CaughtException = function () {\n    function CaughtException(cause) {\n        this.cause = cause;\n        // Empty\n    }\n    return CaughtException;\n}();\nfunction isCaughtException(e) {\n    return e instanceof CaughtException;\n}\n/**\n * Finds out whether any dependency of the derivation has actually changed.\n * If dependenciesState is 1 then it will recalculate dependencies,\n * if any dependency changed it will propagate it by changing dependenciesState to 2.\n *\n * By iterating over the dependencies in the same order that they were reported and\n * stopping on the first change, all the recalculations are only called for ComputedValues\n * that will be tracked by derivation. That is because we assume that if the first x\n * dependencies of the derivation doesn't change then the derivation should run the same way\n * up until accessing x-th dependency.\n */\nfunction shouldCompute(derivation) {\n    switch (derivation.dependenciesState) {\n        case IDerivationState.UP_TO_DATE:\n            return false;\n        case IDerivationState.NOT_TRACKING:\n        case IDerivationState.STALE:\n            return true;\n        case IDerivationState.POSSIBLY_STALE:\n            {\n                var prevUntracked = untrackedStart(); // no need for those computeds to be reported, they will be picked up in trackDerivedFunction.\n                var obs = derivation.observing,\n                    l = obs.length;\n                for (var i = 0; i < l; i++) {\n                    var obj = obs[i];\n                    if (isComputedValue(obj)) {\n                        try {\n                            obj.get();\n                        } catch (e) {\n                            // we are not interested in the value *or* exception at this moment, but if there is one, notify all\n                            untrackedEnd(prevUntracked);\n                            return true;\n                        }\n                        // if ComputedValue `obj` actually changed it will be computed and propagated to its observers.\n                        // and `derivation` is an observer of `obj`\n                        if (derivation.dependenciesState === IDerivationState.STALE) {\n                            untrackedEnd(prevUntracked);\n                            return true;\n                        }\n                    }\n                }\n                changeDependenciesStateTo0(derivation);\n                untrackedEnd(prevUntracked);\n                return false;\n            }\n    }\n}\nfunction isComputingDerivation() {\n    return globalState.trackingDerivation !== null; // filter out actions inside computations\n}\nfunction checkIfStateModificationsAreAllowed(atom) {\n    var hasObservers$$1 = atom.observers.length > 0;\n    // Should never be possible to change an observed observable from inside computed, see #798\n    if (globalState.computationDepth > 0 && hasObservers$$1) fail(getMessage(\"m031\") + atom.name);\n    // Should not be possible to change observed state outside strict mode, except during initialization, see #563\n    if (!globalState.allowStateChanges && hasObservers$$1) fail(getMessage(globalState.strictMode ? \"m030a\" : \"m030b\") + atom.name);\n}\n/**\n * Executes the provided function `f` and tracks which observables are being accessed.\n * The tracking information is stored on the `derivation` object and the derivation is registered\n * as observer of any of the accessed observables.\n */\nfunction trackDerivedFunction(derivation, f, context) {\n    // pre allocate array allocation + room for variation in deps\n    // array will be trimmed by bindDependencies\n    changeDependenciesStateTo0(derivation);\n    derivation.newObserving = new Array(derivation.observing.length + 100);\n    derivation.unboundDepsCount = 0;\n    derivation.runId = ++globalState.runId;\n    var prevTracking = globalState.trackingDerivation;\n    globalState.trackingDerivation = derivation;\n    var result;\n    try {\n        result = f.call(context);\n    } catch (e) {\n        result = new CaughtException(e);\n    }\n    globalState.trackingDerivation = prevTracking;\n    bindDependencies(derivation);\n    return result;\n}\n/**\n * diffs newObserving with observing.\n * update observing to be newObserving with unique observables\n * notify observers that become observed/unobserved\n */\nfunction bindDependencies(derivation) {\n    // invariant(derivation.dependenciesState !== IDerivationState.NOT_TRACKING, \"INTERNAL ERROR bindDependencies expects derivation.dependenciesState !== -1\");\n    var prevObserving = derivation.observing;\n    var observing = derivation.observing = derivation.newObserving;\n    var lowestNewObservingDerivationState = IDerivationState.UP_TO_DATE;\n    derivation.newObserving = null; // newObserving shouldn't be needed outside tracking\n    // Go through all new observables and check diffValue: (this list can contain duplicates):\n    //   0: first occurrence, change to 1 and keep it\n    //   1: extra occurrence, drop it\n    var i0 = 0,\n        l = derivation.unboundDepsCount;\n    for (var i = 0; i < l; i++) {\n        var dep = observing[i];\n        if (dep.diffValue === 0) {\n            dep.diffValue = 1;\n            if (i0 !== i) observing[i0] = dep;\n            i0++;\n        }\n        // Upcast is 'safe' here, because if dep is IObservable, `dependenciesState` will be undefined,\n        // not hitting the condition\n        if (dep.dependenciesState > lowestNewObservingDerivationState) {\n            lowestNewObservingDerivationState = dep.dependenciesState;\n        }\n    }\n    observing.length = i0;\n    // Go through all old observables and check diffValue: (it is unique after last bindDependencies)\n    //   0: it's not in new observables, unobserve it\n    //   1: it keeps being observed, don't want to notify it. change to 0\n    l = prevObserving.length;\n    while (l--) {\n        var dep = prevObserving[l];\n        if (dep.diffValue === 0) {\n            removeObserver(dep, derivation);\n        }\n        dep.diffValue = 0;\n    }\n    // Go through all new observables and check diffValue: (now it should be unique)\n    //   0: it was set to 0 in last loop. don't need to do anything.\n    //   1: it wasn't observed, let's observe it. set back to 0\n    while (i0--) {\n        var dep = observing[i0];\n        if (dep.diffValue === 1) {\n            dep.diffValue = 0;\n            addObserver(dep, derivation);\n        }\n    }\n    // Some new observed derivations might become stale during this derivation computation\n    // so say had no chance to propagate staleness (#916)\n    if (lowestNewObservingDerivationState !== IDerivationState.UP_TO_DATE) {\n        derivation.dependenciesState = lowestNewObservingDerivationState;\n        derivation.onBecomeStale();\n    }\n}\nfunction clearObserving(derivation) {\n    // invariant(globalState.inBatch > 0, \"INTERNAL ERROR clearObserving should be called only inside batch\");\n    var obs = derivation.observing;\n    derivation.observing = [];\n    var i = obs.length;\n    while (i--) {\n        removeObserver(obs[i], derivation);\n    }derivation.dependenciesState = IDerivationState.NOT_TRACKING;\n}\nfunction untracked(action) {\n    var prev = untrackedStart();\n    var res = action();\n    untrackedEnd(prev);\n    return res;\n}\nfunction untrackedStart() {\n    var prev = globalState.trackingDerivation;\n    globalState.trackingDerivation = null;\n    return prev;\n}\nfunction untrackedEnd(prev) {\n    globalState.trackingDerivation = prev;\n}\n/**\n * needed to keep `lowestObserverState` correct. when changing from (2 or 1) to 0\n *\n */\nfunction changeDependenciesStateTo0(derivation) {\n    if (derivation.dependenciesState === IDerivationState.UP_TO_DATE) return;\n    derivation.dependenciesState = IDerivationState.UP_TO_DATE;\n    var obs = derivation.observing;\n    var i = obs.length;\n    while (i--) {\n        obs[i].lowestObserverState = IDerivationState.UP_TO_DATE;\n    }\n}\n\nvar Reaction = function () {\n    function Reaction(name, onInvalidate) {\n        if (name === void 0) {\n            name = \"Reaction@\" + getNextId();\n        }\n        this.name = name;\n        this.onInvalidate = onInvalidate;\n        this.observing = []; // nodes we are looking at. Our value depends on these nodes\n        this.newObserving = [];\n        this.dependenciesState = IDerivationState.NOT_TRACKING;\n        this.diffValue = 0;\n        this.runId = 0;\n        this.unboundDepsCount = 0;\n        this.__mapid = \"#\" + getNextId();\n        this.isDisposed = false;\n        this._isScheduled = false;\n        this._isTrackPending = false;\n        this._isRunning = false;\n    }\n    Reaction.prototype.onBecomeStale = function () {\n        this.schedule();\n    };\n    Reaction.prototype.schedule = function () {\n        if (!this._isScheduled) {\n            this._isScheduled = true;\n            globalState.pendingReactions.push(this);\n            runReactions();\n        }\n    };\n    Reaction.prototype.isScheduled = function () {\n        return this._isScheduled;\n    };\n    /**\n     * internal, use schedule() if you intend to kick off a reaction\n     */\n    Reaction.prototype.runReaction = function () {\n        if (!this.isDisposed) {\n            startBatch();\n            this._isScheduled = false;\n            if (shouldCompute(this)) {\n                this._isTrackPending = true;\n                this.onInvalidate();\n                if (this._isTrackPending && isSpyEnabled()) {\n                    // onInvalidate didn't trigger track right away..\n                    spyReport({\n                        object: this,\n                        type: \"scheduled-reaction\"\n                    });\n                }\n            }\n            endBatch();\n        }\n    };\n    Reaction.prototype.track = function (fn) {\n        startBatch();\n        var notify = isSpyEnabled();\n        var startTime;\n        if (notify) {\n            startTime = Date.now();\n            spyReportStart({\n                object: this,\n                type: \"reaction\",\n                fn: fn\n            });\n        }\n        this._isRunning = true;\n        var result = trackDerivedFunction(this, fn, undefined);\n        this._isRunning = false;\n        this._isTrackPending = false;\n        if (this.isDisposed) {\n            // disposed during last run. Clean up everything that was bound after the dispose call.\n            clearObserving(this);\n        }\n        if (isCaughtException(result)) this.reportExceptionInDerivation(result.cause);\n        if (notify) {\n            spyReportEnd({\n                time: Date.now() - startTime\n            });\n        }\n        endBatch();\n    };\n    Reaction.prototype.reportExceptionInDerivation = function (error) {\n        var _this = this;\n        if (this.errorHandler) {\n            this.errorHandler(error, this);\n            return;\n        }\n        var message = \"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '\" + this;\n        var messageToUser = getMessage(\"m037\");\n        console.error(message || messageToUser /* latter will not be true, make sure uglify doesn't remove */, error);\n        /** If debugging brought you here, please, read the above message :-). Tnx! */\n        if (isSpyEnabled()) {\n            spyReport({\n                type: \"error\",\n                message: message,\n                error: error,\n                object: this\n            });\n        }\n        globalState.globalReactionErrorHandlers.forEach(function (f) {\n            return f(error, _this);\n        });\n    };\n    Reaction.prototype.dispose = function () {\n        if (!this.isDisposed) {\n            this.isDisposed = true;\n            if (!this._isRunning) {\n                startBatch();\n                clearObserving(this); // if disposed while running, clean up later. Maybe not optimal, but rare case\n                endBatch();\n            }\n        }\n    };\n    Reaction.prototype.getDisposer = function () {\n        var r = this.dispose.bind(this);\n        r.$mobx = this;\n        r.onError = registerErrorHandler;\n        return r;\n    };\n    Reaction.prototype.toString = function () {\n        return \"Reaction[\" + this.name + \"]\";\n    };\n    Reaction.prototype.whyRun = function () {\n        var observing = unique(this._isRunning ? this.newObserving : this.observing).map(function (dep) {\n            return dep.name;\n        });\n        return \"\\nWhyRun? reaction '\" + this.name + \"':\\n * Status: [\" + (this.isDisposed ? \"stopped\" : this._isRunning ? \"running\" : this.isScheduled() ? \"scheduled\" : \"idle\") + \"]\\n * This reaction will re-run if any of the following observables changes:\\n    \" + joinStrings(observing) + \"\\n    \" + (this._isRunning ? \" (... or any observable accessed during the remainder of the current run)\" : \"\") + \"\\n\\t\" + getMessage(\"m038\") + \"\\n\";\n    };\n    return Reaction;\n}();\nfunction registerErrorHandler(handler) {\n    invariant(this && this.$mobx && isReaction(this.$mobx), \"Invalid `this`\");\n    invariant(!this.$mobx.errorHandler, \"Only one onErrorHandler can be registered\");\n    this.$mobx.errorHandler = handler;\n}\nfunction onReactionError(handler) {\n    globalState.globalReactionErrorHandlers.push(handler);\n    return function () {\n        var idx = globalState.globalReactionErrorHandlers.indexOf(handler);\n        if (idx >= 0) globalState.globalReactionErrorHandlers.splice(idx, 1);\n    };\n}\n/**\n * Magic number alert!\n * Defines within how many times a reaction is allowed to re-trigger itself\n * until it is assumed that this is gonna be a never ending loop...\n */\nvar MAX_REACTION_ITERATIONS = 100;\nvar reactionScheduler = function reactionScheduler(f) {\n    return f();\n};\nfunction runReactions() {\n    // Trampolining, if runReactions are already running, new reactions will be picked up\n    if (globalState.inBatch > 0 || globalState.isRunningReactions) return;\n    reactionScheduler(runReactionsHelper);\n}\nfunction runReactionsHelper() {\n    globalState.isRunningReactions = true;\n    var allReactions = globalState.pendingReactions;\n    var iterations = 0;\n    // While running reactions, new reactions might be triggered.\n    // Hence we work with two variables and check whether\n    // we converge to no remaining reactions after a while.\n    while (allReactions.length > 0) {\n        if (++iterations === MAX_REACTION_ITERATIONS) {\n            console.error(\"Reaction doesn't converge to a stable state after \" + MAX_REACTION_ITERATIONS + \" iterations.\" + (\" Probably there is a cycle in the reactive function: \" + allReactions[0]));\n            allReactions.splice(0); // clear reactions\n        }\n        var remainingReactions = allReactions.splice(0);\n        for (var i = 0, l = remainingReactions.length; i < l; i++) {\n            remainingReactions[i].runReaction();\n        }\n    }\n    globalState.isRunningReactions = false;\n}\nvar isReaction = createInstanceofPredicate(\"Reaction\", Reaction);\nfunction setReactionScheduler(fn) {\n    var baseScheduler = reactionScheduler;\n    reactionScheduler = function reactionScheduler(f) {\n        return fn(function () {\n            return baseScheduler(f);\n        });\n    };\n}\n\nfunction asReference(value) {\n    deprecated(\"asReference is deprecated, use observable.ref instead\");\n    return observable.ref(value);\n}\nfunction asStructure(value) {\n    deprecated(\"asStructure is deprecated. Use observable.struct, computed.struct or reaction options instead.\");\n    return observable.struct(value);\n}\nfunction asFlat(value) {\n    deprecated(\"asFlat is deprecated, use observable.shallow instead\");\n    return observable.shallow(value);\n}\nfunction asMap(data) {\n    deprecated(\"asMap is deprecated, use observable.map or observable.shallowMap instead\");\n    return observable.map(data || {});\n}\n\nfunction createComputedDecorator(equals) {\n    return createClassPropertyDecorator(function (target, name, _, __, originalDescriptor) {\n        invariant(typeof originalDescriptor !== \"undefined\", getMessage(\"m009\"));\n        invariant(typeof originalDescriptor.get === \"function\", getMessage(\"m010\"));\n        var adm = asObservableObject(target, \"\");\n        defineComputedProperty(adm, name, originalDescriptor.get, originalDescriptor.set, equals, false);\n    }, function (name) {\n        var observable = this.$mobx.values[name];\n        if (observable === undefined) return undefined;\n        return observable.get();\n    }, function (name, value) {\n        this.$mobx.values[name].set(value);\n    }, false, false);\n}\nvar computedDecorator = createComputedDecorator(comparer.default);\nvar computedStructDecorator = createComputedDecorator(comparer.structural);\n/**\n * Decorator for class properties: @computed get value() { return expr; }.\n * For legacy purposes also invokable as ES5 observable created: `computed(() => expr)`;\n */\nvar computed = function computed(arg1, arg2, arg3) {\n    if (typeof arg2 === \"string\") {\n        return computedDecorator.apply(null, arguments);\n    }\n    invariant(typeof arg1 === \"function\", getMessage(\"m011\"));\n    invariant(arguments.length < 3, getMessage(\"m012\"));\n    var opts = (typeof arg2 === \"undefined\" ? \"undefined\" : _typeof(arg2)) === \"object\" ? arg2 : {};\n    opts.setter = typeof arg2 === \"function\" ? arg2 : opts.setter;\n    var equals = opts.equals ? opts.equals : opts.compareStructural || opts.struct ? comparer.structural : comparer.default;\n    return new ComputedValue(arg1, opts.context, equals, opts.name || arg1.name || \"\", opts.setter);\n};\ncomputed.struct = computedStructDecorator;\ncomputed.equals = createComputedDecorator;\n\nfunction getAtom(thing, property) {\n    if ((typeof thing === \"undefined\" ? \"undefined\" : _typeof(thing)) === \"object\" && thing !== null) {\n        if (isObservableArray(thing)) {\n            invariant(property === undefined, getMessage(\"m036\"));\n            return thing.$mobx.atom;\n        }\n        if (isObservableMap(thing)) {\n            var anyThing = thing;\n            if (property === undefined) return getAtom(anyThing._keys);\n            var observable = anyThing._data[property] || anyThing._hasMap[property];\n            invariant(!!observable, \"the entry '\" + property + \"' does not exist in the observable map '\" + getDebugName(thing) + \"'\");\n            return observable;\n        }\n        // Initializers run lazily when transpiling to babel, so make sure they are run...\n        runLazyInitializers(thing);\n        if (property && !thing.$mobx) thing[property]; // See #1072 // TODO: remove in 4.0\n        if (isObservableObject(thing)) {\n            if (!property) return fail(\"please specify a property\");\n            var observable = thing.$mobx.values[property];\n            invariant(!!observable, \"no observable property '\" + property + \"' found on the observable object '\" + getDebugName(thing) + \"'\");\n            return observable;\n        }\n        if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) {\n            return thing;\n        }\n    } else if (typeof thing === \"function\") {\n        if (isReaction(thing.$mobx)) {\n            // disposer function\n            return thing.$mobx;\n        }\n    }\n    return fail(\"Cannot obtain atom from \" + thing);\n}\nfunction getAdministration(thing, property) {\n    invariant(thing, \"Expecting some object\");\n    if (property !== undefined) return getAdministration(getAtom(thing, property));\n    if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) return thing;\n    if (isObservableMap(thing)) return thing;\n    // Initializers run lazily when transpiling to babel, so make sure they are run...\n    runLazyInitializers(thing);\n    if (thing.$mobx) return thing.$mobx;\n    invariant(false, \"Cannot obtain administration from \" + thing);\n}\nfunction getDebugName(thing, property) {\n    var named;\n    if (property !== undefined) named = getAtom(thing, property);else if (isObservableObject(thing) || isObservableMap(thing)) named = getAdministration(thing);else named = getAtom(thing); // valid for arrays as well\n    return named.name;\n}\n\nfunction isComputed(value, property) {\n    if (value === null || value === undefined) return false;\n    if (property !== undefined) {\n        if (isObservableObject(value) === false) return false;\n        var atom = getAtom(value, property);\n        return isComputedValue(atom);\n    }\n    return isComputedValue(value);\n}\n\nfunction observe(thing, propOrCb, cbOrFire, fireImmediately) {\n    if (typeof cbOrFire === \"function\") return observeObservableProperty(thing, propOrCb, cbOrFire, fireImmediately);else return observeObservable(thing, propOrCb, cbOrFire);\n}\nfunction observeObservable(thing, listener, fireImmediately) {\n    return getAdministration(thing).observe(listener, fireImmediately);\n}\nfunction observeObservableProperty(thing, property, listener, fireImmediately) {\n    return getAdministration(thing, property).observe(listener, fireImmediately);\n}\n\nfunction intercept(thing, propOrHandler, handler) {\n    if (typeof handler === \"function\") return interceptProperty(thing, propOrHandler, handler);else return interceptInterceptable(thing, propOrHandler);\n}\nfunction interceptInterceptable(thing, handler) {\n    return getAdministration(thing).intercept(handler);\n}\nfunction interceptProperty(thing, property, handler) {\n    return getAdministration(thing, property).intercept(handler);\n}\n\n/**\n    * expr can be used to create temporarily views inside views.\n    * This can be improved to improve performance if a value changes often, but usually doesn't affect the outcome of an expression.\n    *\n    * In the following example the expression prevents that a component is rerender _each time_ the selection changes;\n    * instead it will only rerenders when the current todo is (de)selected.\n    *\n    * reactiveComponent((props) => {\n    *     const todo = props.todo;\n    *     const isSelected = mobx.expr(() => props.viewState.selection === todo);\n    *     return <div className={isSelected ? \"todo todo-selected\" : \"todo\"}>{todo.title}</div>\n    * });\n    *\n    */\nfunction expr(expr, scope) {\n    if (!isComputingDerivation()) console.warn(getMessage(\"m013\"));\n    // optimization: would be more efficient if the expr itself wouldn't be evaluated first on the next change, but just a 'changed' signal would be fired\n    return computed(expr, { context: scope }).get();\n}\n\nfunction toJS(source, detectCycles, __alreadySeen) {\n    if (detectCycles === void 0) {\n        detectCycles = true;\n    }\n    if (__alreadySeen === void 0) {\n        __alreadySeen = [];\n    }\n    // optimization: using ES6 map would be more efficient!\n    // optimization: lift this function outside toJS, this makes recursion expensive\n    function cache(value) {\n        if (detectCycles) __alreadySeen.push([source, value]);\n        return value;\n    }\n    if (isObservable(source)) {\n        if (detectCycles && __alreadySeen === null) __alreadySeen = [];\n        if (detectCycles && source !== null && (typeof source === \"undefined\" ? \"undefined\" : _typeof(source)) === \"object\") {\n            for (var i = 0, l = __alreadySeen.length; i < l; i++) {\n                if (__alreadySeen[i][0] === source) return __alreadySeen[i][1];\n            }\n        }\n        if (isObservableArray(source)) {\n            var res = cache([]);\n            var toAdd = source.map(function (value) {\n                return toJS(value, detectCycles, __alreadySeen);\n            });\n            res.length = toAdd.length;\n            for (var i = 0, l = toAdd.length; i < l; i++) {\n                res[i] = toAdd[i];\n            }return res;\n        }\n        if (isObservableObject(source)) {\n            var res = cache({});\n            for (var key in source) {\n                res[key] = toJS(source[key], detectCycles, __alreadySeen);\n            }return res;\n        }\n        if (isObservableMap(source)) {\n            var res_1 = cache({});\n            source.forEach(function (value, key) {\n                return res_1[key] = toJS(value, detectCycles, __alreadySeen);\n            });\n            return res_1;\n        }\n        if (isObservableValue(source)) return toJS(source.get(), detectCycles, __alreadySeen);\n    }\n    return source;\n}\n\nfunction createTransformer(transformer, onCleanup) {\n    invariant(typeof transformer === \"function\" && transformer.length < 2, \"createTransformer expects a function that accepts one argument\");\n    // Memoizes: object id -> reactive view that applies transformer to the object\n    var objectCache = {};\n    // If the resetId changes, we will clear the object cache, see #163\n    // This construction is used to avoid leaking refs to the objectCache directly\n    var resetId = globalState.resetId;\n    // Local transformer class specifically for this transformer\n    var Transformer = function (_super) {\n        __extends(Transformer, _super);\n        function Transformer(sourceIdentifier, sourceObject) {\n            var _this = _super.call(this, function () {\n                return transformer(sourceObject);\n            }, undefined, comparer.default, \"Transformer-\" + transformer.name + \"-\" + sourceIdentifier, undefined) || this;\n            _this.sourceIdentifier = sourceIdentifier;\n            _this.sourceObject = sourceObject;\n            return _this;\n        }\n        Transformer.prototype.onBecomeUnobserved = function () {\n            var lastValue = this.value;\n            _super.prototype.onBecomeUnobserved.call(this);\n            delete objectCache[this.sourceIdentifier];\n            if (onCleanup) onCleanup(lastValue, this.sourceObject);\n        };\n        return Transformer;\n    }(ComputedValue);\n    return function (object) {\n        if (resetId !== globalState.resetId) {\n            objectCache = {};\n            resetId = globalState.resetId;\n        }\n        var identifier = getMemoizationId(object);\n        var reactiveTransformer = objectCache[identifier];\n        if (reactiveTransformer) return reactiveTransformer.get();\n        // Not in cache; create a reactive view\n        reactiveTransformer = objectCache[identifier] = new Transformer(identifier, object);\n        return reactiveTransformer.get();\n    };\n}\nfunction getMemoizationId(object) {\n    if (typeof object === 'string' || typeof object === 'number') return object;\n    if (object === null || (typeof object === \"undefined\" ? \"undefined\" : _typeof(object)) !== \"object\") throw new Error(\"[mobx] transform expected some kind of object or primitive value, got: \" + object);\n    var tid = object.$transformId;\n    if (tid === undefined) {\n        tid = getNextId();\n        addHiddenProp(object, \"$transformId\", tid);\n    }\n    return tid;\n}\n\nfunction log(msg) {\n    console.log(msg);\n    return msg;\n}\nfunction whyRun(thing, prop) {\n    switch (arguments.length) {\n        case 0:\n            thing = globalState.trackingDerivation;\n            if (!thing) return log(getMessage(\"m024\"));\n            break;\n        case 2:\n            thing = getAtom(thing, prop);\n            break;\n    }\n    thing = getAtom(thing);\n    if (isComputedValue(thing)) return log(thing.whyRun());else if (isReaction(thing)) return log(thing.whyRun());\n    return fail(getMessage(\"m025\"));\n}\n\nfunction getDependencyTree(thing, property) {\n    return nodeToDependencyTree(getAtom(thing, property));\n}\nfunction nodeToDependencyTree(node) {\n    var result = {\n        name: node.name\n    };\n    if (node.observing && node.observing.length > 0) result.dependencies = unique(node.observing).map(nodeToDependencyTree);\n    return result;\n}\nfunction getObserverTree(thing, property) {\n    return nodeToObserverTree(getAtom(thing, property));\n}\nfunction nodeToObserverTree(node) {\n    var result = {\n        name: node.name\n    };\n    if (hasObservers(node)) result.observers = getObservers(node).map(nodeToObserverTree);\n    return result;\n}\n\nfunction interceptReads(thing, propOrHandler, handler) {\n    var target;\n    if (isObservableMap(thing) || isObservableArray(thing) || isObservableValue(thing)) {\n        target = getAdministration(thing);\n    } else if (isObservableObject(thing)) {\n        if (typeof propOrHandler !== \"string\") return fail(\"InterceptReads can only be used with a specific property, not with an object in general\");\n        target = getAdministration(thing, propOrHandler);\n    } else {\n        return fail(\"Expected observable map, object or array as first array\");\n    }\n    if (target.dehancer !== undefined) return fail(\"An intercept reader was already established\");\n    target.dehancer = typeof propOrHandler === \"function\" ? propOrHandler : handler;\n    return function () {\n        target.dehancer = undefined;\n    };\n}\n\n/**\n * (c) Michel Weststrate 2015 - 2016\n * MIT Licensed\n *\n * Welcome to the mobx sources! To get an global overview of how MobX internally works,\n * this is a good place to start:\n * https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.xvbh6qd74\n *\n * Source folders:\n * ===============\n *\n * - api/     Most of the public static methods exposed by the module can be found here.\n * - core/    Implementation of the MobX algorithm; atoms, derivations, reactions, dependency trees, optimizations. Cool stuff can be found here.\n * - types/   All the magic that is need to have observable objects, arrays and values is in this folder. Including the modifiers like `asFlat`.\n * - utils/   Utility stuff.\n *\n */\nvar extras = {\n    allowStateChanges: allowStateChanges,\n    deepEqual: deepEqual,\n    getAtom: getAtom,\n    getDebugName: getDebugName,\n    getDependencyTree: getDependencyTree,\n    getAdministration: getAdministration,\n    getGlobalState: getGlobalState,\n    getObserverTree: getObserverTree,\n    interceptReads: interceptReads,\n    isComputingDerivation: isComputingDerivation,\n    isSpyEnabled: isSpyEnabled,\n    onReactionError: onReactionError,\n    reserveArrayBuffer: reserveArrayBuffer,\n    resetGlobalState: resetGlobalState,\n    isolateGlobalState: isolateGlobalState,\n    shareGlobalState: shareGlobalState,\n    spyReport: spyReport,\n    spyReportEnd: spyReportEnd,\n    spyReportStart: spyReportStart,\n    setReactionScheduler: setReactionScheduler\n};\nvar everything = {\n    Reaction: Reaction,\n    untracked: untracked,\n    Atom: Atom, BaseAtom: BaseAtom,\n    useStrict: useStrict, isStrictModeEnabled: isStrictModeEnabled,\n    spy: spy,\n    comparer: comparer,\n    asReference: asReference, asFlat: asFlat, asStructure: asStructure, asMap: asMap,\n    isModifierDescriptor: isModifierDescriptor,\n    isObservableObject: isObservableObject,\n    isBoxedObservable: isObservableValue,\n    isObservableArray: isObservableArray,\n    ObservableMap: ObservableMap, isObservableMap: isObservableMap, map: map,\n    transaction: transaction,\n    observable: observable,\n    computed: computed,\n    isObservable: isObservable,\n    isComputed: isComputed,\n    extendObservable: extendObservable, extendShallowObservable: extendShallowObservable,\n    observe: observe,\n    intercept: intercept,\n    autorun: autorun, autorunAsync: autorunAsync, when: when, reaction: reaction,\n    action: action, isAction: isAction, runInAction: runInAction,\n    expr: expr,\n    toJS: toJS,\n    createTransformer: createTransformer,\n    whyRun: whyRun,\n    isArrayLike: isArrayLike,\n    extras: extras\n};\nvar warnedAboutDefaultExport = false;\nvar _loop_1 = function _loop_1(p) {\n    var val = everything[p];\n    Object.defineProperty(everything, p, {\n        get: function get() {\n            if (!warnedAboutDefaultExport) {\n                warnedAboutDefaultExport = true;\n                console.warn('Using default export (`import mobx from \\'mobx\\'`) is deprecated ' + 'and won’t work in mobx@4.0.0\\n' + 'Use `import * as mobx from \\'mobx\\'` instead');\n            }\n            return val;\n        }\n    });\n};\nfor (var p in everything) {\n    _loop_1(p);\n}\nif ((typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ === \"undefined\" ? \"undefined\" : _typeof(__MOBX_DEVTOOLS_GLOBAL_HOOK__)) === \"object\") {\n    __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({ spy: spy, extras: extras });\n}\n\nexports.extras = extras;\nexports.Reaction = Reaction;\nexports.untracked = untracked;\nexports.IDerivationState = IDerivationState;\nexports.Atom = Atom;\nexports.BaseAtom = BaseAtom;\nexports.useStrict = useStrict;\nexports.isStrictModeEnabled = isStrictModeEnabled;\nexports.spy = spy;\nexports.comparer = comparer;\nexports.asReference = asReference;\nexports.asFlat = asFlat;\nexports.asStructure = asStructure;\nexports.asMap = asMap;\nexports.isModifierDescriptor = isModifierDescriptor;\nexports.isObservableObject = isObservableObject;\nexports.isBoxedObservable = isObservableValue;\nexports.isObservableArray = isObservableArray;\nexports.ObservableMap = ObservableMap;\nexports.isObservableMap = isObservableMap;\nexports.map = map;\nexports.transaction = transaction;\nexports.observable = observable;\nexports.IObservableFactories = IObservableFactories;\nexports.computed = computed;\nexports.isObservable = isObservable;\nexports.isComputed = isComputed;\nexports.extendObservable = extendObservable;\nexports.extendShallowObservable = extendShallowObservable;\nexports.observe = observe;\nexports.intercept = intercept;\nexports.autorun = autorun;\nexports.autorunAsync = autorunAsync;\nexports.when = when;\nexports.reaction = reaction;\nexports.action = action;\nexports.isAction = isAction;\nexports.runInAction = runInAction;\nexports.expr = expr;\nexports.toJS = toJS;\nexports.createTransformer = createTransformer;\nexports.whyRun = whyRun;\nexports.isArrayLike = isArrayLike;\nexports.default = everything;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4)))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _icons = __webpack_require__(6);\n\nvar _constants = __webpack_require__(0);\n\nvar _translator = __webpack_require__(7);\n\nvar translator = _interopRequireWildcard(_translator);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar culture = /^([^-]{1,3})(-|$)/;\nvar $ = function $(x) {\n  return (0, translator.default)(x);\n};\n\nfunction renderHeader(_ref, instance) {\n  var meta = _ref.meta,\n      user = _ref.user,\n      reactions = _ref.reactions;\n\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-header-container';\n\n  var likeButton = document.createElement('span');\n  var likedReaction = reactions.find(function (reaction) {\n    return reaction.content === 'heart' && reaction.user.login === user.login;\n  });\n  likeButton.className = 'gitment-header-like-btn';\n  likeButton.innerHTML = '\\n    ' + _icons.heart + '\\n    ' + (likedReaction ? 'Unlike' : 'Like') + '\\n    ' + (meta.reactions && meta.reactions.heart ? ' \\u2022 <strong>' + meta.reactions.heart + '</strong> Liked' : '') + '\\n  ';\n\n  if (likedReaction) {\n    likeButton.classList.add('liked');\n    likeButton.onclick = function () {\n      return instance.unlike();\n    };\n  } else {\n    likeButton.classList.remove('liked');\n    likeButton.onclick = function () {\n      return instance.like();\n    };\n  }\n  container.appendChild(likeButton);\n\n  var commentsCount = document.createElement('span');\n  commentsCount.innerHTML = '\\n    ' + (meta.comments ? ' \\u2022 <strong>' + meta.comments + '</strong> Comments' : '') + '\\n  ';\n  container.appendChild(commentsCount);\n\n  var issueLink = document.createElement('a');\n  issueLink.className = 'gitment-header-issue-link';\n  issueLink.href = meta.html_url || \"javascript:void(0)\";\n  issueLink.target = '_blank';\n  issueLink.innerText = $('Issue Page');\n  container.appendChild(issueLink);\n\n  return container;\n}\n\nfunction renderComments(_ref2, instance) {\n  var meta = _ref2.meta,\n      comments = _ref2.comments,\n      commentReactions = _ref2.commentReactions,\n      currentPage = _ref2.currentPage,\n      user = _ref2.user,\n      error = _ref2.error;\n\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-comments-container';\n\n  if (error) {\n    var errorBlock = document.createElement('div');\n    errorBlock.className = 'gitment-comments-error';\n\n    if (error === _constants.NOT_INITIALIZED_ERROR && user.login && ~(instance.admin || [instance.owner]).map(function (x) {\n      return x.toLowerCase();\n    }).indexOf(user.login.toLowerCase())) {\n      // && user.login.toLowerCase() === instance.owner.toLowerCase()) {\n      var initHint = document.createElement('div');\n      var initButton = document.createElement('button');\n      initButton.className = 'gitment-comments-init-btn';\n      initButton.onclick = function () {\n        initButton.setAttribute('disabled', true);\n        instance.init().catch(function (e) {\n          initButton.removeAttribute('disabled');\n          alert(e);\n        });\n      };\n      initButton.innerText = $('Initialize Comments');\n      initHint.appendChild(initButton);\n      errorBlock.appendChild(initHint);\n    } else {\n      errorBlock.innerText = $(error);\n    }\n    container.appendChild(errorBlock);\n    return container;\n  } else if (comments === undefined) {\n    var loading = document.createElement('div');\n    loading.innerText = $('Loading comments...');\n    loading.className = 'gitment-comments-loading';\n    container.appendChild(loading);\n    return container;\n  } else if (!comments.length) {\n    var emptyBlock = document.createElement('div');\n    emptyBlock.className = 'gitment-comments-empty';\n    emptyBlock.innerText = $('No Comment Yet');\n    container.appendChild(emptyBlock);\n    return container;\n  }\n\n  var commentsList = document.createElement('ul');\n  commentsList.className = 'gitment-comments-list';\n\n  comments.forEach(function (comment) {\n    var createDate = new Date(comment.created_at);\n    var updateDate = new Date(comment.updated_at);\n    var commentItem = document.createElement('li');\n    commentItem.className = 'gitment-comment';\n    commentItem.innerHTML = '\\n      <a class=\"gitment-comment-avatar\" href=\"' + comment.user.html_url + '\" target=\"_blank\">\\n        <img class=\"gitment-comment-avatar-img\" src=\"' + comment.user.avatar_url + '\"/>\\n      </a>\\n      <div class=\"gitment-comment-main\">\\n        <div class=\"gitment-comment-header\">\\n          <a class=\"gitment-comment-name\" href=\"' + comment.user.html_url + '\" target=\"_blank\">\\n            ' + comment.user.login + '\\n          </a>\\n          commented on\\n          <span title=\"' + createDate + '\">' + createDate.toDateString() + '</span>\\n          ' + (createDate.toString() !== updateDate.toString() ? ' \\u2022 <span title=\"comment was edited at ' + updateDate + '\">edited</span>' : '') + '\\n          <div class=\"gitment-comment-like-btn\">' + _icons.heart + ' ' + (comment.reactions.heart || '') + '</div>\\n        </div>\\n        <div class=\"gitment-comment-body gitment-markdown\">' + comment.body_html + '</div>\\n      </div>\\n    ';\n    var likeButton = commentItem.querySelector('.gitment-comment-like-btn');\n    var likedReaction = commentReactions[comment.id] && commentReactions[comment.id].find(function (reaction) {\n      return reaction.content === 'heart' && reaction.user.login === user.login;\n    });\n    if (likedReaction) {\n      likeButton.classList.add('liked');\n      likeButton.onclick = function () {\n        return instance.unlikeAComment(comment.id);\n      };\n    } else {\n      likeButton.classList.remove('liked');\n      likeButton.onclick = function () {\n        return instance.likeAComment(comment.id);\n      };\n    }\n\n    // dirty\n    // use a blank image to trigger height calculating when element rendered\n    var imgTrigger = document.createElement('img');\n    var markdownBody = commentItem.querySelector('.gitment-comment-body');\n    imgTrigger.className = 'gitment-hidden';\n    imgTrigger.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n    imgTrigger.onload = function () {\n      if (markdownBody.clientHeight > instance.maxCommentHeight) {\n        markdownBody.classList.add('gitment-comment-body-folded');\n        markdownBody.style.maxHeight = instance.maxCommentHeight + 'px';\n        markdownBody.title = 'Click to Expand';\n        markdownBody.onclick = function () {\n          markdownBody.classList.remove('gitment-comment-body-folded');\n          markdownBody.style.maxHeight = '';\n          markdownBody.title = '';\n          markdownBody.onclick = null;\n        };\n      }\n    };\n    commentItem.appendChild(imgTrigger);\n\n    commentsList.appendChild(commentItem);\n  });\n\n  container.appendChild(commentsList);\n\n  if (meta) {\n    var pageCount = Math.ceil(meta.comments / instance.perPage);\n    if (pageCount > 1) {\n      var pagination = document.createElement('ul');\n      pagination.className = 'gitment-comments-pagination';\n\n      if (currentPage > 1) {\n        var previousButton = document.createElement('li');\n        previousButton.className = 'gitment-comments-page-item';\n        previousButton.innerText = $('Previous');\n        previousButton.onclick = function () {\n          return instance.goto(currentPage - 1);\n        };\n        pagination.appendChild(previousButton);\n      }\n\n      var _loop = function _loop(i) {\n        var pageItem = document.createElement('li');\n        pageItem.className = 'gitment-comments-page-item';\n        pageItem.innerText = i;\n        pageItem.onclick = function () {\n          return instance.goto(i);\n        };\n        if (currentPage === i) pageItem.classList.add('gitment-selected');\n        pagination.appendChild(pageItem);\n      };\n\n      for (var i = 1; i <= pageCount; i++) {\n        _loop(i);\n      }\n\n      if (currentPage < pageCount) {\n        var nextButton = document.createElement('li');\n        nextButton.className = 'gitment-comments-page-item';\n        nextButton.innerText = $('Next');\n        nextButton.onclick = function () {\n          return instance.goto(currentPage + 1);\n        };\n        pagination.appendChild(nextButton);\n      }\n\n      container.appendChild(pagination);\n    }\n  }\n\n  return container;\n}\n\nfunction renderEditor(_ref3, instance) {\n  var user = _ref3.user,\n      error = _ref3.error;\n\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-editor-container';\n\n  var shouldDisable = user.login && !error ? '' : 'disabled';\n  var disabledTip = user.login ? '' : $('Login to Comment');\n  container.innerHTML = '\\n      ' + (user.login ? '<a class=\"gitment-editor-avatar\" href=\"' + user.html_url + '\" target=\"_blank\">\\n            <img class=\"gitment-editor-avatar-img\" src=\"' + user.avatar_url + '\"/>\\n          </a>' : user.isLoggingIn ? '<div class=\"gitment-editor-avatar\">' + _icons.spinner + '</div>' : '<a class=\"gitment-editor-avatar\" href=\"' + instance.loginLink + '\" title=\"login with GitHub\">\\n              ' + _icons.github + '\\n            </a>') + '\\n    </a>\\n    <div class=\"gitment-editor-main\">\\n      <div class=\"gitment-editor-header\">\\n        <nav class=\"gitment-editor-tabs\">\\n          <button class=\"gitment-editor-tab gitment-selected\">' + $('Write') + '</button>\\n          <button class=\"gitment-editor-tab\">' + $('Preview') + '</button>\\n        </nav>\\n        <div class=\"gitment-editor-login\">\\n          ' + (user.login ? '<a class=\"gitment-editor-logout-link\">' + $('Logout') + '</a>' : user.isLoggingIn ? $('Logging in...') : '<a class=\"gitment-editor-login-link\" href=\"' + instance.loginLink + '\">' + $('Login') + '</a> with GitHub') + '\\n        </div>\\n      </div>\\n      <div class=\"gitment-editor-body\">\\n        <div class=\"gitment-editor-write-field\">\\n          <textarea placeholder=\"' + $('Leave a comment') + '\" title=\"' + disabledTip + '\" ' + shouldDisable + '></textarea>\\n        </div>\\n        <div class=\"gitment-editor-preview-field gitment-hidden\">\\n          <div class=\"gitment-editor-preview gitment-markdown\"></div>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\"gitment-editor-footer\">\\n      <a class=\"gitment-editor-footer-tip\" href=\"https://guides.github.com/features/mastering-markdown/\" target=\"_blank\">\\n        Styling with Markdown is supported\\n      </a>\\n      <button class=\"gitment-editor-submit\" title=\"' + disabledTip + '\" ' + shouldDisable + '>' + $('Comment') + '</button>\\n    </div>\\n  ';\n  if (user.login) {\n    container.querySelector('.gitment-editor-logout-link').onclick = function () {\n      return instance.logout();\n    };\n  }\n\n  var writeField = container.querySelector('.gitment-editor-write-field');\n  var previewField = container.querySelector('.gitment-editor-preview-field');\n\n  var textarea = writeField.querySelector('textarea');\n  textarea.oninput = function () {\n    textarea.style.height = 'auto';\n    var style = window.getComputedStyle(textarea, null);\n    var height = parseInt(style.height, 10);\n    var clientHeight = textarea.clientHeight;\n    var scrollHeight = textarea.scrollHeight;\n    if (clientHeight < scrollHeight) {\n      textarea.style.height = height + scrollHeight - clientHeight + 'px';\n    }\n  };\n\n  var _container$querySelec = container.querySelectorAll('.gitment-editor-tab'),\n      _container$querySelec2 = _slicedToArray(_container$querySelec, 2),\n      writeTab = _container$querySelec2[0],\n      previewTab = _container$querySelec2[1];\n\n  writeTab.onclick = function () {\n    writeTab.classList.add('gitment-selected');\n    previewTab.classList.remove('gitment-selected');\n    writeField.classList.remove('gitment-hidden');\n    previewField.classList.add('gitment-hidden');\n\n    textarea.focus();\n  };\n  previewTab.onclick = function () {\n    previewTab.classList.add('gitment-selected');\n    writeTab.classList.remove('gitment-selected');\n    previewField.classList.remove('gitment-hidden');\n    writeField.classList.add('gitment-hidden');\n\n    var preview = previewField.querySelector('.gitment-editor-preview');\n    var content = textarea.value.trim();\n    if (!content) {\n      preview.innerText = $('Nothing to preview');\n      return;\n    }\n\n    preview.innerText = $('Loading preview...');\n    instance.markdown(content).then(function (html) {\n      return preview.innerHTML = html;\n    });\n  };\n\n  var submitButton = container.querySelector('.gitment-editor-submit');\n  submitButton.onclick = function () {\n    submitButton.innerText = $('Submitting...');\n    submitButton.setAttribute('disabled', true);\n    instance.post(textarea.value.trim()).then(function (data) {\n      textarea.value = '';\n      textarea.style.height = 'auto';\n      submitButton.removeAttribute('disabled');\n      submitButton.innerText = $('Comment');\n    }).catch(function (e) {\n      alert(e);\n      submitButton.removeAttribute('disabled');\n      submitButton.innerText = $('Comment');\n    });\n  };\n\n  return container;\n}\n\nfunction renderFooter(state, instance) {\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-footer-container';\n  container.innerHTML = '\\n    Powered by\\n    <a class=\"gitment-footer-project-link\" href=\"https://github.com/imsun/gitment\" target=\"_blank\">\\n      Gitment\\n    </a>\\n  ';\n  return container;\n}\n\nfunction renderCounter(_ref4, instance) {\n  var meta = _ref4.meta;\n\n  var counter = document.querySelector(\".post-comments-count.gitment-comments-count\");\n  if (counter &&\n  // (instance.id.lastIndexOf(counter.getAttribute('data-xid')) > -1) &&\n  counter.getAttribute('itemprop') == \"commentsCount\") {\n    counter.innerText = meta && meta.comments || 0;\n  }\n}\n\nfunction render(state, instance) {\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n\n  // rewrite by gitmint\n  $ = instance.lang && translator[instance.lang] || translator.fromLanguageCode(container.lang);\n  instance.updateCount = function () {\n    return instance.renderCounter(state, instance);\n  };\n\n  container.className = 'gitment-container gitment-root-container';\n  var parts = (!instance.above) ? ['renderHeader', 'renderComments', 'renderEditor', 'renderFooter']\n    : ['renderHeader', 'renderEditor', 'renderFooter', 'renderComments'];\n  parts.forEach(function(partName) {\n    container.appendChild(instance[partName](state, instance));\n  });\n  return container;\n}\n\nexports.default = { render: render, renderHeader: renderHeader, renderComments: renderComments, renderEditor: renderEditor, renderFooter: renderFooter, renderCounter: renderCounter };\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.http = exports.Query = exports.isString = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.getTargetContainer = getTargetContainer;\n\nvar _constants = __webpack_require__(0);\n\nvar isString = exports.isString = function isString(s) {\n  return toString.call(s) === '[object String]';\n};\n\nfunction getTargetContainer(container) {\n  var targetContainer = void 0;\n  if (container instanceof Element) {\n    targetContainer = container;\n  } else if (isString(container)) {\n    targetContainer = document.getElementById(container);\n  } else {\n    targetContainer = document.createElement('div');\n  }\n\n  return targetContainer;\n}\n\nvar Query = exports.Query = {\n  parse: function parse() {\n    var search = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.location.search;\n\n    if (!search) return {};\n    var queryString = search[0] === '?' ? search.substring(1) : search;\n    var query = {};\n    queryString.split('&').forEach(function (queryStr) {\n      var _queryStr$split = queryStr.split('='),\n          _queryStr$split2 = _slicedToArray(_queryStr$split, 2),\n          key = _queryStr$split2[0],\n          value = _queryStr$split2[1];\n\n      if (key) query[key] = value;\n    });\n\n    return query;\n  },\n  stringify: function stringify(query) {\n    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '?';\n\n    var queryString = Object.keys(query).map(function (key) {\n      return key + '=' + encodeURIComponent(query[key] || '');\n    }).join('&');\n    return queryString ? prefix + queryString : '';\n  }\n};\n\nfunction ajaxFactory(method) {\n  return function (apiPath) {\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var base = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'https://api.github.com';\n\n    var req = new XMLHttpRequest();\n    var token = localStorage.getItem(_constants.LS_ACCESS_TOKEN_KEY);\n    if (base !== 'https://api.github.com') token = null;\n\n    var url = '' + base + apiPath;\n    var body = null;\n    if (method === 'GET' || method === 'DELETE') {\n      url += isString(data) ? data : Query.stringify(data);\n    }\n\n    var p = new Promise(function (resolve, reject) {\n      req.addEventListener('load', function () {\n        var contentType = req.getResponseHeader('content-type');\n        var res = req.responseText;\n\n        var data = res;\n        if (/urlencoded/.test(contentType)) {\n          data = req.responseText ? Query.parse(res) : {};\n          if (data.error) return reject(new Error(data.error_description));\n        } else if (/json/.test(contentType)) {\n          data = req.responseText ? JSON.parse(res) : {};\n          if (data.message) return reject(new Error(data.message));\n        }\n        resolve(data);\n      });\n      req.addEventListener('error', function (error) {\n        return reject(error);\n      });\n    });\n    req.open(method, url, true);\n\n    req.setRequestHeader('Accept', 'application/vnd.github.squirrel-girl-preview, application/vnd.github.html+json, application/x-www-form-urlencoded');\n    if (token) {\n      req.setRequestHeader('Authorization', 'token ' + token);\n    }\n    if (method !== 'GET' && method !== 'DELETE') {\n      if (isString(data)) {\n        body = data;\n        req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n      } else {\n        body = JSON.stringify(data);\n        req.setRequestHeader('Content-Type', 'application/json');\n      }\n    }\n\n    req.send(body);\n    return p;\n  };\n}\n\nvar http = exports.http = {\n  get: ajaxFactory('GET'),\n  post: ajaxFactory('POST'),\n  delete: ajaxFactory('DELETE'),\n  put: ajaxFactory('PUT')\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar g;\n\n// This works in non-strict mode\ng = function () {\n\treturn this;\n}();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mobx = __webpack_require__(1);\n\nvar _constants = __webpack_require__(0);\n\nvar _utils = __webpack_require__(3);\n\nvar _default = __webpack_require__(2);\n\nvar _default2 = _interopRequireDefault(_default);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// @see: https://developer.github.com/apps/building-integrations/setting-up-and-registering-oauth-apps/about-scopes-for-oauth-apps\nvar scope = 'public_repo';\n\n// Github setting of 'Authorization callback URL' in your OAuth application\nvar force_redirect_protocol = '$&';\n// A RegExp to match protocol and domain\nvar rx_url_with_protocol = /^((https?:\\/\\/+){0,1}[^\\/]*)(.*)/;\n\nfunction extendRenderer(instance, renderer) {\n  instance[renderer] = function (container) {\n    var targetContainer = (0, _utils.getTargetContainer)(container);\n    var render = instance.theme[renderer] || instance.defaultTheme[renderer];\n\n    (0, _mobx.autorun)(function () {\n      var e = render(instance.state, instance);\n      if (e) {\n        if (targetContainer.firstChild) {\n          targetContainer.replaceChild(e, targetContainer.firstChild);\n        } else {\n          targetContainer.appendChild(e);\n        }\n      }\n    });\n\n    return targetContainer;\n  };\n}\n\nvar Gitment = function () {\n  _createClass(Gitment, [{\n    key: 'accessToken',\n    get: function get() {\n      return localStorage.getItem(_constants.LS_ACCESS_TOKEN_KEY);\n    },\n    set: function set(token) {\n      localStorage.setItem(_constants.LS_ACCESS_TOKEN_KEY, token);\n    }\n  }, {\n    key: 'loginLink',\n    get: function get() {\n      var oauthUri = 'https://github.com/login/oauth/authorize';\n      var redirect_uri = this.oauth.redirect_uri || window.location.href.replace(/^https?/i, this.oauth.redirect_protocol || force_redirect_protocol);\n\n      var oauthParams = Object.assign({\n        scope: scope,\n        redirect_uri: redirect_uri\n      }, this.oauth);\n\n      return '' + oauthUri + _utils.Query.stringify(oauthParams);\n    }\n  }]);\n\n  function Gitment() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Gitment);\n\n    this.defaultTheme = _default2.default;\n    this.useTheme(_default2.default);\n\n    var internalId;\n    Object.defineProperties(this, {\n      'updateCount': {\n        value: new Function(),\n        writable: true\n      },\n      'id': {\n        get: function get() {\n          return internalId;\n        },\n        set: function set(id) {\n          return internalId = id !== window.location.href ? id : '' + window.location.origin + window.location.pathname + window.location.search;\n        }\n      }\n    });\n\n    Object.assign(this, {\n      id: window.location.href,\n      title: window.document.title,\n      link: window.location.href,\n      desc: '',\n      labels: [],\n      theme: _default2.default,\n      oauth: {},\n      perPage: 20,\n      maxCommentHeight: 250\n    }, options);\n\n    this.useTheme(this.theme);\n\n    var user = {};\n    try {\n      var userInfo = localStorage.getItem(_constants.LS_USER_KEY);\n      if (this.accessToken && userInfo) {\n        Object.assign(user, JSON.parse(userInfo), {\n          fromCache: true\n        });\n      }\n    } catch (e) {\n      localStorage.removeItem(_constants.LS_USER_KEY);\n    }\n\n    this.state = (0, _mobx.observable)({\n      user: user,\n      error: null,\n      meta: {},\n      comments: undefined,\n      reactions: [],\n      commentReactions: {},\n      currentPage: 1\n    });\n\n    // NOTE: the proxy_gateway accept form-urlencoded only!!!\n    //  - PHP implement at https://github.com/aimingoo/intersect\n    var query = _utils.Query.parse();\n    if (query.code) {\n      var _oauth = this.oauth,\n          client_id = _oauth.client_id,\n          client_secret = _oauth.client_secret,\n          proxy_gateway = _oauth.proxy_gateway;\n\n      var code = query.code;\n      delete query.code;\n      var search = _utils.Query.stringify(query);\n      var replacedUrl = '' + window.location.origin + window.location.pathname + search + window.location.hash;\n      history.replaceState({}, '', replacedUrl);\n\n      Object.assign(this, {\n        id: replacedUrl,\n        link: replacedUrl\n      }, options);\n\n      this.state.user.isLoggingIn = true;\n      var logging = !proxy_gateway ? _utils.http.post('https://gh-oauth.imsun.net', { code: code, client_id: client_id, client_secret: client_secret }, '') : _utils.http.post('/login/oauth/access_token', 'code=' + code + '&client_id=' + client_id, proxy_gateway);\n      logging.then(function (data) {\n        _this.accessToken = data.access_token;\n        _this.update();\n      }).catch(function (e) {\n        _this.state.user.isLoggingIn = false;\n        alert(e);\n      });\n    } else {\n      this.update();\n    }\n  }\n\n  _createClass(Gitment, [{\n    key: 'init',\n    value: function init() {\n      var _this2 = this;\n\n      return this.createIssue().then(function () {\n        return _this2.loadComments();\n      }).then(function (comments) {\n        _this2.state.error = null;\n        return comments;\n      });\n    }\n  }, {\n    key: 'useTheme',\n    value: function useTheme() {\n      var _this3 = this;\n\n      var theme = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this.theme = theme;\n\n      var renderers = Object.keys(this.theme);\n      renderers.forEach(function (renderer) {\n        return extendRenderer(_this3, renderer);\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this4 = this;\n\n      return Promise.all([this.loadMeta(), this.loadUserInfo()]).then(function () {\n        return Promise.all([_this4.loadComments().then(function () {\n          return _this4.loadCommentReactions();\n        }), _this4.loadReactions()]);\n      }).catch(function (e) {\n        return _this4.state.error = e;\n      });\n    }\n  }, {\n    key: 'markdown',\n    value: function markdown(text) {\n      return _utils.http.post('/markdown', {\n        text: text,\n        mode: 'gfm'\n      });\n    }\n  }, {\n    key: 'createIssue',\n    value: function createIssue() {\n      var _this5 = this;\n\n      var id = this.id,\n          owner = this.owner,\n          repo = this.repo,\n          title = this.title,\n          link = this.link,\n          desc = this.desc,\n          labels = this.labels;\n\n\n      return _utils.http.post('/repos/' + owner + '/' + repo + '/issues', {\n        title: title,\n        labels: labels.concat(['gitment', id]),\n        body: link + '\\n\\n' + desc\n      }).then(function (meta) {\n        _this5.state.meta = meta;\n        return meta;\n      });\n    }\n  }, {\n    key: 'getIssue',\n    value: function getIssue() {\n      if (this.state.meta.id) return Promise.resolve(this.state.meta);\n\n      return this.loadMeta();\n    }\n  }, {\n    key: 'post',\n    value: function post(body) {\n      var _this6 = this;\n\n      return this.getIssue().then(function (issue) {\n        var matched = issue.comments_url.match(rx_url_with_protocol);\n        return _utils.http.post(matched[3], { body: body }, matched[1] || undefined);\n      }).then(function (data) {\n        _this6.state.meta.comments++;\n        _this6.updateCount();\n        var pageCount = Math.ceil(_this6.state.meta.comments / _this6.perPage);\n        if (_this6.state.currentPage === pageCount) {\n          _this6.state.comments.push(data);\n        }\n        return data;\n      });\n    }\n  }, {\n    key: 'loadMeta',\n    value: function loadMeta() {\n      var _this7 = this;\n\n      var id = this.id,\n          owner = this.owner,\n          admin = this.admin,\n          repo = this.repo;\n\n      return _utils.http.get('/repos/' + owner + '/' + repo + '/issues', { labels: id }).then(function (issues) {\n        if (issues.length) {\n          // recheck creator for organization\n          //  - or check 'issue.user.login and issue.user.site_admin' ?\n          var allowed = (admin || [owner]).map(function (x) {\n            return x.toLowerCase();\n          });\n          issues = issues.filter(function (issue) {\n            return ~allowed.indexOf(issue.user.login.toLowerCase());\n          }).sort(function (left, right) {\n            return new Date(left.created_at) - new Date(right.created_at);\n          });\n        }\n        if (!issues.length) return Promise.reject(_constants.NOT_INITIALIZED_ERROR);\n        _this7.state.meta = issues[0];\n        _this7.updateCount();\n        return issues[0];\n      });\n    }\n  }, {\n    key: 'loadComments',\n    value: function loadComments() {\n      var _this8 = this;\n\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.currentPage;\n\n      return this.getIssue().then(function (issue) {\n        var matched = issue.comments_url.match(rx_url_with_protocol);\n        return _utils.http.get(matched[3], { page: page, per_page: _this8.perPage }, matched[1] || undefined);\n      }).then(function (comments) {\n        _this8.state.comments = comments;\n        return comments;\n      });\n    }\n  }, {\n    key: 'loadUserInfo',\n    value: function loadUserInfo() {\n      var _this9 = this;\n\n      if (!this.accessToken) {\n        this.logout();\n        return Promise.resolve({});\n      }\n\n      return _utils.http.get('/user').then(function (user) {\n        _this9.state.user = user;\n        localStorage.setItem(_constants.LS_USER_KEY, JSON.stringify(user));\n        return user;\n      });\n    }\n  }, {\n    key: 'loadReactions',\n    value: function loadReactions() {\n      var _this10 = this;\n\n      if (!this.accessToken) {\n        this.state.reactions = [];\n        return Promise.resolve([]);\n      }\n\n      return this.getIssue().then(function (issue) {\n        if (!issue.reactions.total_count) return [];\n        return _utils.http.get(issue.reactions.url, {}, '');\n      }).then(function (reactions) {\n        _this10.state.reactions = reactions;\n        return reactions;\n      });\n    }\n  }, {\n    key: 'loadCommentReactions',\n    value: function loadCommentReactions() {\n      var _this11 = this;\n\n      if (!this.accessToken) {\n        this.state.commentReactions = {};\n        return Promise.resolve([]);\n      }\n\n      var comments = this.state.comments;\n      var comentReactions = {};\n\n      return Promise.all(comments.map(function (comment) {\n        if (!comment.reactions.total_count) return [];\n\n        var owner = _this11.owner,\n            repo = _this11.repo;\n\n        return _utils.http.get('/repos/' + owner + '/' + repo + '/issues/comments/' + comment.id + '/reactions', {});\n      })).then(function (reactionsArray) {\n        comments.forEach(function (comment, index) {\n          comentReactions[comment.id] = reactionsArray[index];\n        });\n        _this11.state.commentReactions = comentReactions;\n\n        return comentReactions;\n      });\n    }\n  }, {\n    key: 'login',\n    value: function login() {\n      window.location.href = this.loginLink;\n    }\n  }, {\n    key: 'logout',\n    value: function logout() {\n      localStorage.removeItem(_constants.LS_ACCESS_TOKEN_KEY);\n      localStorage.removeItem(_constants.LS_USER_KEY);\n      this.state.user = {};\n    }\n  }, {\n    key: 'goto',\n    value: function goto(page) {\n      this.state.currentPage = page;\n      this.state.comments = undefined;\n      return this.loadComments(page);\n    }\n  }, {\n    key: 'like',\n    value: function like() {\n      var _this12 = this;\n\n      if (!this.accessToken) {\n        alert('Login to Like');\n        return Promise.reject();\n      }\n\n      var owner = this.owner,\n          repo = this.repo;\n\n\n      return _utils.http.post('/repos/' + owner + '/' + repo + '/issues/' + this.state.meta.number + '/reactions', {\n        content: 'heart'\n      }).then(function (reaction) {\n        _this12.state.reactions.push(reaction);\n        _this12.state.meta.reactions.heart++;\n      });\n    }\n  }, {\n    key: 'unlike',\n    value: function unlike() {\n      var _this13 = this;\n\n      if (!this.accessToken) return Promise.reject();\n\n      var _state = this.state,\n          user = _state.user,\n          reactions = _state.reactions;\n\n      var index = reactions.findIndex(function (reaction) {\n        return reaction.user.login === user.login;\n      });\n      return _utils.http.delete('/reactions/' + reactions[index].id).then(function () {\n        reactions.splice(index, 1);\n        _this13.state.meta.reactions.heart--;\n      });\n    }\n  }, {\n    key: 'likeAComment',\n    value: function likeAComment(commentId) {\n      var _this14 = this;\n\n      if (!this.accessToken) {\n        alert('Login to Like');\n        return Promise.reject();\n      }\n\n      var owner = this.owner,\n          repo = this.repo;\n\n      var comment = this.state.comments.find(function (comment) {\n        return comment.id === commentId;\n      });\n\n      return _utils.http.post('/repos/' + owner + '/' + repo + '/issues/comments/' + commentId + '/reactions', {\n        content: 'heart'\n      }).then(function (reaction) {\n        _this14.state.commentReactions[commentId].push(reaction);\n        comment.reactions.heart++;\n      });\n    }\n  }, {\n    key: 'unlikeAComment',\n    value: function unlikeAComment(commentId) {\n      if (!this.accessToken) return Promise.reject();\n\n      var reactions = this.state.commentReactions[commentId];\n      var comment = this.state.comments.find(function (comment) {\n        return comment.id === commentId;\n      });\n      var user = this.state.user;\n\n      var index = reactions.findIndex(function (reaction) {\n        return reaction.user.login === user.login;\n      });\n\n      return _utils.http.delete('/reactions/' + reactions[index].id).then(function () {\n        reactions.splice(index, 1);\n        comment.reactions.heart--;\n      });\n    }\n  }]);\n\n  return Gitment;\n}();\n\nmodule.exports = Gitment;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Modified from https://github.com/evil-icons/evil-icons\n */\n\nvar close = exports.close = '<svg class=\"gitment-close-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\"><path d=\"M37.304 11.282l1.414 1.414-26.022 26.02-1.414-1.413z\"/><path d=\"M12.696 11.282l26.022 26.02-1.414 1.415-26.022-26.02z\"/></svg>';\nvar github = exports.github = '<svg class=\"gitment-github-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\"><path d=\"M25 10c-8.3 0-15 6.7-15 15 0 6.6 4.3 12.2 10.3 14.2.8.1 1-.3 1-.7v-2.6c-4.2.9-5.1-2-5.1-2-.7-1.7-1.7-2.2-1.7-2.2-1.4-.9.1-.9.1-.9 1.5.1 2.3 1.5 2.3 1.5 1.3 2.3 3.5 1.6 4.4 1.2.1-1 .5-1.6 1-2-3.3-.4-6.8-1.7-6.8-7.4 0-1.6.6-3 1.5-4-.2-.4-.7-1.9.1-4 0 0 1.3-.4 4.1 1.5 1.2-.3 2.5-.5 3.8-.5 1.3 0 2.6.2 3.8.5 2.9-1.9 4.1-1.5 4.1-1.5.8 2.1.3 3.6.1 4 1 1 1.5 2.4 1.5 4 0 5.8-3.5 7-6.8 7.4.5.5 1 1.4 1 2.8v4.1c0 .4.3.9 1 .7 6-2 10.2-7.6 10.2-14.2C40 16.7 33.3 10 25 10z\"/></svg>';\nvar heart = exports.heart = '<svg class=\"gitment-heart-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\"><path d=\"M25 39.7l-.6-.5C11.5 28.7 8 25 8 19c0-5 4-9 9-9 4.1 0 6.4 2.3 8 4.1 1.6-1.8 3.9-4.1 8-4.1 5 0 9 4 9 9 0 6-3.5 9.7-16.4 20.2l-.6.5zM17 12c-3.9 0-7 3.1-7 7 0 5.1 3.2 8.5 15 18.1 11.8-9.6 15-13 15-18.1 0-3.9-3.1-7-7-7-3.5 0-5.4 2.1-6.9 3.8L25 17.1l-1.1-1.3C22.4 14.1 20.5 12 17 12z\"/></svg>';\nvar spinner = exports.spinner = '<svg class=\"gitment-spinner-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\"><path d=\"M25 18c-.6 0-1-.4-1-1V9c0-.6.4-1 1-1s1 .4 1 1v8c0 .6-.4 1-1 1z\"/><path opacity=\".3\" d=\"M25 42c-.6 0-1-.4-1-1v-8c0-.6.4-1 1-1s1 .4 1 1v8c0 .6-.4 1-1 1z\"/><path opacity=\".3\" d=\"M29 19c-.2 0-.3 0-.5-.1-.4-.3-.6-.8-.3-1.3l4-6.9c.3-.4.8-.6 1.3-.3.4.3.6.8.3 1.3l-4 6.9c-.2.2-.5.4-.8.4z\"/><path opacity=\".3\" d=\"M17 39.8c-.2 0-.3 0-.5-.1-.4-.3-.6-.8-.3-1.3l4-6.9c.3-.4.8-.6 1.3-.3.4.3.6.8.3 1.3l-4 6.9c-.2.2-.5.4-.8.4z\"/><path opacity=\".93\" d=\"M21 19c-.3 0-.6-.2-.8-.5l-4-6.9c-.3-.4-.1-1 .3-1.3.4-.3 1-.1 1.3.3l4 6.9c.3.4.1 1-.3 1.3-.2.2-.3.2-.5.2z\"/><path opacity=\".3\" d=\"M33 39.8c-.3 0-.6-.2-.8-.5l-4-6.9c-.3-.4-.1-1 .3-1.3.4-.3 1-.1 1.3.3l4 6.9c.3.4.1 1-.3 1.3-.2.1-.3.2-.5.2z\"/><path opacity=\".65\" d=\"M17 26H9c-.6 0-1-.4-1-1s.4-1 1-1h8c.6 0 1 .4 1 1s-.4 1-1 1z\"/><path opacity=\".3\" d=\"M41 26h-8c-.6 0-1-.4-1-1s.4-1 1-1h8c.6 0 1 .4 1 1s-.4 1-1 1z\"/><path opacity=\".86\" d=\"M18.1 21.9c-.2 0-.3 0-.5-.1l-6.9-4c-.4-.3-.6-.8-.3-1.3.3-.4.8-.6 1.3-.3l6.9 4c.4.3.6.8.3 1.3-.2.3-.5.4-.8.4z\"/><path opacity=\".3\" d=\"M38.9 33.9c-.2 0-.3 0-.5-.1l-6.9-4c-.4-.3-.6-.8-.3-1.3.3-.4.8-.6 1.3-.3l6.9 4c.4.3.6.8.3 1.3-.2.3-.5.4-.8.4z\"/><path opacity=\".44\" d=\"M11.1 33.9c-.3 0-.6-.2-.8-.5-.3-.4-.1-1 .3-1.3l6.9-4c.4-.3 1-.1 1.3.3.3.4.1 1-.3 1.3l-6.9 4c-.1.2-.3.2-.5.2z\"/><path opacity=\".3\" d=\"M31.9 21.9c-.3 0-.6-.2-.8-.5-.3-.4-.1-1 .3-1.3l6.9-4c.4-.3 1-.1 1.3.3.3.4.1 1-.3 1.3l-6.9 4c-.2.2-.3.2-.5.2z\"/></svg>';\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.english = english;\nexports.chinese = chinese;\nexports.chineseTraditional = chineseTraditional;\nexports.fromLanguageCode = fromLanguageCode;\nfunction english(Text) {\n    return Text;\n}\n\nfunction chinese(Text) {\n    return {\n        'Issue Page': '所有评论',\n        'Initialize Comments': '初始化本文的评论页',\n        'Loading comments...': '加载评论...',\n        'Error: Comments Not Initialized': '(未开放评论)',\n        'No Comment Yet': '(还没有评论)',\n        'Previous': '上一页',\n        'Next': '下一页',\n        'Nothing to preview': '（没有预览）',\n        'Loading preview...': '加载预览...',\n        'Submitting...': '正在提交评论...',\n        'Comment': '发送',\n        'Write': '评论',\n        'Preview': '预览',\n        'Logging in...': '登入中...',\n        'Login to Comment': '请登入以发表评论',\n        'Leave a comment': '(发表评论)',\n        'Login': '登入',\n        'Logout': '退出'\n    }[Text] || Text;\n}\n\nfunction chineseTraditional(Text) {\n    return {\n        'Issue Page': '所有評論',\n        'Initialize Comments': '初始化本文的評論頁',\n        'Loading comments...': '加載評論...',\n        'Error: Comments Not Initialized': '(未開放評論)',\n        'No Comment Yet': '(還沒有評論)',\n        'Previous': '上一頁',\n        'Next': '下一頁',\n        'Nothing to preview': '（沒有預覽）',\n        'Loading preview...': '加載預覽...',\n        'Submitting...': '正在提交評論...',\n        'Comment': '發送',\n        'Write': '評論',\n        'Preview': '預覽',\n        'Logging in...': '登入中...',\n        'Login to Comment': '請登入以發表評論',\n        'Leave a comment': '(發表評論)',\n        'Login': '登入',\n        'Logout': '登出'\n    }[Text] || Text;\n}\n\n// @see:\n//  https://www.w3.org/TR/1999/REC-html401-19991224/struct/dirlang.html#h-8.1.1\n//  https://gist.github.com/JamieMason/3748498\nfunction fromLanguageCode(code) {\n    var culture = /^([^-]+)-/;\n    return {\n        'en': english,\n        'zh': chinese,\n        'zh-CN': chinese,\n        'zh-CHS': chinese,\n        'zh-TW': chineseTraditional,\n        'zh-HK': chineseTraditional,\n        'zh-CHT': chineseTraditional,\n        'en-US': english\n    }[code] || culture.test(code) && fromLanguageCode(code.match(culture)[1]) || english;\n}\n\nexports.default = english;\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=gitmint.browser.js.map","date":"2020-08-14T03:21:57.057Z","updated":"2020-08-14T03:21:57.057Z","path":"assets/css/gitment.js","layout":"false","title":"","comments":1,"_id":"ckntq34eu0029u66t0ujzx1u6","content":"var Gitmint =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar LS_ACCESS_TOKEN_KEY = exports.LS_ACCESS_TOKEN_KEY = 'gitment-comments-token';\nvar LS_USER_KEY = exports.LS_USER_KEY = 'gitment-user-info';\n\nvar NOT_INITIALIZED_ERROR = exports.NOT_INITIALIZED_ERROR = new Error('Comments Not Initialized');\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/** MobX - (c) Michel Weststrate 2015, 2016 - MIT Licensed */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n} || function (d, b) {\n    for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n};\n\nfunction __extends(d, b) {\n    extendStatics(d, b);\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n/**\n * Anything that can be used to _store_ state is an Atom in mobx. Atoms have two important jobs\n *\n * 1) detect when they are being _used_ and report this (using reportObserved). This allows mobx to make the connection between running functions and the data they used\n * 2) they should notify mobx whenever they have _changed_. This way mobx can re-run any functions (derivations) that are using this atom.\n */\nvar BaseAtom = function () {\n    /**\n     * Create a new atom. For debugging purposes it is recommended to give it a name.\n     * The onBecomeObserved and onBecomeUnobserved callbacks can be used for resource management.\n     */\n    function BaseAtom(name) {\n        if (name === void 0) {\n            name = \"Atom@\" + getNextId();\n        }\n        this.name = name;\n        this.isPendingUnobservation = true; // for effective unobserving. BaseAtom has true, for extra optimization, so its onBecomeUnobserved never gets called, because it's not needed\n        this.observers = [];\n        this.observersIndexes = {};\n        this.diffValue = 0;\n        this.lastAccessedBy = 0;\n        this.lowestObserverState = IDerivationState.NOT_TRACKING;\n    }\n    BaseAtom.prototype.onBecomeUnobserved = function () {\n        // noop\n    };\n    /**\n     * Invoke this method to notify mobx that your atom has been used somehow.\n     */\n    BaseAtom.prototype.reportObserved = function () {\n        reportObserved(this);\n    };\n    /**\n     * Invoke this method _after_ this method has changed to signal mobx that all its observers should invalidate.\n     */\n    BaseAtom.prototype.reportChanged = function () {\n        startBatch();\n        propagateChanged(this);\n        endBatch();\n    };\n    BaseAtom.prototype.toString = function () {\n        return this.name;\n    };\n    return BaseAtom;\n}();\nvar Atom = function (_super) {\n    __extends(Atom, _super);\n    /**\n     * Create a new atom. For debugging purposes it is recommended to give it a name.\n     * The onBecomeObserved and onBecomeUnobserved callbacks can be used for resource management.\n     */\n    function Atom(name, onBecomeObservedHandler, onBecomeUnobservedHandler) {\n        if (name === void 0) {\n            name = \"Atom@\" + getNextId();\n        }\n        if (onBecomeObservedHandler === void 0) {\n            onBecomeObservedHandler = noop;\n        }\n        if (onBecomeUnobservedHandler === void 0) {\n            onBecomeUnobservedHandler = noop;\n        }\n        var _this = _super.call(this, name) || this;\n        _this.name = name;\n        _this.onBecomeObservedHandler = onBecomeObservedHandler;\n        _this.onBecomeUnobservedHandler = onBecomeUnobservedHandler;\n        _this.isPendingUnobservation = false; // for effective unobserving.\n        _this.isBeingTracked = false;\n        return _this;\n    }\n    Atom.prototype.reportObserved = function () {\n        startBatch();\n        _super.prototype.reportObserved.call(this);\n        if (!this.isBeingTracked) {\n            this.isBeingTracked = true;\n            this.onBecomeObservedHandler();\n        }\n        endBatch();\n        return !!globalState.trackingDerivation;\n        // return doesn't really give useful info, because it can be as well calling computed which calls atom (no reactions)\n        // also it could not trigger when calculating reaction dependent on Atom because Atom's value was cached by computed called by given reaction.\n    };\n    Atom.prototype.onBecomeUnobserved = function () {\n        this.isBeingTracked = false;\n        this.onBecomeUnobservedHandler();\n    };\n    return Atom;\n}(BaseAtom);\nvar isAtom = createInstanceofPredicate(\"Atom\", BaseAtom);\n\nfunction hasInterceptors(interceptable) {\n    return interceptable.interceptors && interceptable.interceptors.length > 0;\n}\nfunction registerInterceptor(interceptable, handler) {\n    var interceptors = interceptable.interceptors || (interceptable.interceptors = []);\n    interceptors.push(handler);\n    return once(function () {\n        var idx = interceptors.indexOf(handler);\n        if (idx !== -1) interceptors.splice(idx, 1);\n    });\n}\nfunction interceptChange(interceptable, change) {\n    var prevU = untrackedStart();\n    try {\n        var interceptors = interceptable.interceptors;\n        if (interceptors) for (var i = 0, l = interceptors.length; i < l; i++) {\n            change = interceptors[i](change);\n            invariant(!change || change.type, \"Intercept handlers should return nothing or a change object\");\n            if (!change) break;\n        }\n        return change;\n    } finally {\n        untrackedEnd(prevU);\n    }\n}\n\nfunction hasListeners(listenable) {\n    return listenable.changeListeners && listenable.changeListeners.length > 0;\n}\nfunction registerListener(listenable, handler) {\n    var listeners = listenable.changeListeners || (listenable.changeListeners = []);\n    listeners.push(handler);\n    return once(function () {\n        var idx = listeners.indexOf(handler);\n        if (idx !== -1) listeners.splice(idx, 1);\n    });\n}\nfunction notifyListeners(listenable, change) {\n    var prevU = untrackedStart();\n    var listeners = listenable.changeListeners;\n    if (!listeners) return;\n    listeners = listeners.slice();\n    for (var i = 0, l = listeners.length; i < l; i++) {\n        listeners[i](change);\n    }\n    untrackedEnd(prevU);\n}\n\nfunction isSpyEnabled() {\n    return !!globalState.spyListeners.length;\n}\nfunction spyReport(event) {\n    if (!globalState.spyListeners.length) return;\n    var listeners = globalState.spyListeners;\n    for (var i = 0, l = listeners.length; i < l; i++) {\n        listeners[i](event);\n    }\n}\nfunction spyReportStart(event) {\n    var change = objectAssign({}, event, { spyReportStart: true });\n    spyReport(change);\n}\nvar END_EVENT = { spyReportEnd: true };\nfunction spyReportEnd(change) {\n    if (change) spyReport(objectAssign({}, change, END_EVENT));else spyReport(END_EVENT);\n}\nfunction spy(listener) {\n    globalState.spyListeners.push(listener);\n    return once(function () {\n        var idx = globalState.spyListeners.indexOf(listener);\n        if (idx !== -1) globalState.spyListeners.splice(idx, 1);\n    });\n}\n\nfunction iteratorSymbol() {\n    return typeof Symbol === \"function\" && Symbol.iterator || \"@@iterator\";\n}\nvar IS_ITERATING_MARKER = \"__$$iterating\";\nfunction arrayAsIterator(array) {\n    // returning an array for entries(), values() etc for maps was a mis-interpretation of the specs..,\n    // yet it is quite convenient to be able to use the response both as array directly and as iterator\n    // it is suboptimal, but alas...\n    invariant(array[IS_ITERATING_MARKER] !== true, \"Illegal state: cannot recycle array as iterator\");\n    addHiddenFinalProp(array, IS_ITERATING_MARKER, true);\n    var idx = -1;\n    addHiddenFinalProp(array, \"next\", function next() {\n        idx++;\n        return {\n            done: idx >= this.length,\n            value: idx < this.length ? this[idx] : undefined\n        };\n    });\n    return array;\n}\nfunction declareIterator(prototType, iteratorFactory) {\n    addHiddenFinalProp(prototType, iteratorSymbol(), iteratorFactory);\n}\n\nvar MAX_SPLICE_SIZE = 10000; // See e.g. https://github.com/mobxjs/mobx/issues/859\n// Detects bug in safari 9.1.1 (or iOS 9 safari mobile). See #364\nvar safariPrototypeSetterInheritanceBug = function () {\n    var v = false;\n    var p = {};\n    Object.defineProperty(p, \"0\", { set: function set() {\n            v = true;\n        } });\n    Object.create(p)[\"0\"] = 1;\n    return v === false;\n}();\n/**\n * This array buffer contains two lists of properties, so that all arrays\n * can recycle their property definitions, which significantly improves performance of creating\n * properties on the fly.\n */\nvar OBSERVABLE_ARRAY_BUFFER_SIZE = 0;\n// Typescript workaround to make sure ObservableArray extends Array\nvar StubArray = function () {\n    function StubArray() {}\n    return StubArray;\n}();\nfunction inherit(ctor, proto) {\n    if (typeof Object[\"setPrototypeOf\"] !== \"undefined\") {\n        Object[\"setPrototypeOf\"](ctor.prototype, proto);\n    } else if (typeof ctor.prototype.__proto__ !== \"undefined\") {\n        ctor.prototype.__proto__ = proto;\n    } else {\n        ctor[\"prototype\"] = proto;\n    }\n}\ninherit(StubArray, Array.prototype);\nvar ObservableArrayAdministration = function () {\n    function ObservableArrayAdministration(name, enhancer, array, owned) {\n        this.array = array;\n        this.owned = owned;\n        this.values = [];\n        this.lastKnownLength = 0;\n        this.interceptors = null;\n        this.changeListeners = null;\n        this.atom = new BaseAtom(name || \"ObservableArray@\" + getNextId());\n        this.enhancer = function (newV, oldV) {\n            return enhancer(newV, oldV, name + \"[..]\");\n        };\n    }\n    ObservableArrayAdministration.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) return this.dehancer(value);\n        return value;\n    };\n    ObservableArrayAdministration.prototype.dehanceValues = function (values) {\n        if (this.dehancer !== undefined) return values.map(this.dehancer);\n        return values;\n    };\n    ObservableArrayAdministration.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableArrayAdministration.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately === void 0) {\n            fireImmediately = false;\n        }\n        if (fireImmediately) {\n            listener({\n                object: this.array,\n                type: \"splice\",\n                index: 0,\n                added: this.values.slice(),\n                addedCount: this.values.length,\n                removed: [],\n                removedCount: 0\n            });\n        }\n        return registerListener(this, listener);\n    };\n    ObservableArrayAdministration.prototype.getArrayLength = function () {\n        this.atom.reportObserved();\n        return this.values.length;\n    };\n    ObservableArrayAdministration.prototype.setArrayLength = function (newLength) {\n        if (typeof newLength !== \"number\" || newLength < 0) throw new Error(\"[mobx.array] Out of range: \" + newLength);\n        var currentLength = this.values.length;\n        if (newLength === currentLength) return;else if (newLength > currentLength) {\n            var newItems = new Array(newLength - currentLength);\n            for (var i = 0; i < newLength - currentLength; i++) {\n                newItems[i] = undefined;\n            } // No Array.fill everywhere...\n            this.spliceWithArray(currentLength, 0, newItems);\n        } else this.spliceWithArray(newLength, currentLength - newLength);\n    };\n    // adds / removes the necessary numeric properties to this object\n    ObservableArrayAdministration.prototype.updateArrayLength = function (oldLength, delta) {\n        if (oldLength !== this.lastKnownLength) throw new Error(\"[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?\");\n        this.lastKnownLength += delta;\n        if (delta > 0 && oldLength + delta + 1 > OBSERVABLE_ARRAY_BUFFER_SIZE) reserveArrayBuffer(oldLength + delta + 1);\n    };\n    ObservableArrayAdministration.prototype.spliceWithArray = function (index, deleteCount, newItems) {\n        var _this = this;\n        checkIfStateModificationsAreAllowed(this.atom);\n        var length = this.values.length;\n        if (index === undefined) index = 0;else if (index > length) index = length;else if (index < 0) index = Math.max(0, length + index);\n        if (arguments.length === 1) deleteCount = length - index;else if (deleteCount === undefined || deleteCount === null) deleteCount = 0;else deleteCount = Math.max(0, Math.min(deleteCount, length - index));\n        if (newItems === undefined) newItems = [];\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                object: this.array,\n                type: \"splice\",\n                index: index,\n                removedCount: deleteCount,\n                added: newItems\n            });\n            if (!change) return EMPTY_ARRAY;\n            deleteCount = change.removedCount;\n            newItems = change.added;\n        }\n        newItems = newItems.map(function (v) {\n            return _this.enhancer(v, undefined);\n        });\n        var lengthDelta = newItems.length - deleteCount;\n        this.updateArrayLength(length, lengthDelta); // create or remove new entries\n        var res = this.spliceItemsIntoValues(index, deleteCount, newItems);\n        if (deleteCount !== 0 || newItems.length !== 0) this.notifyArraySplice(index, newItems, res);\n        return this.dehanceValues(res);\n    };\n    ObservableArrayAdministration.prototype.spliceItemsIntoValues = function (index, deleteCount, newItems) {\n        if (newItems.length < MAX_SPLICE_SIZE) {\n            return (_a = this.values).splice.apply(_a, [index, deleteCount].concat(newItems));\n        } else {\n            var res = this.values.slice(index, index + deleteCount);\n            this.values = this.values.slice(0, index).concat(newItems, this.values.slice(index + deleteCount));\n            return res;\n        }\n        var _a;\n    };\n    ObservableArrayAdministration.prototype.notifyArrayChildUpdate = function (index, newValue, oldValue) {\n        var notifySpy = !this.owned && isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy ? {\n            object: this.array,\n            type: \"update\",\n            index: index, newValue: newValue, oldValue: oldValue\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        this.atom.reportChanged();\n        if (notify) notifyListeners(this, change);\n        if (notifySpy) spyReportEnd();\n    };\n    ObservableArrayAdministration.prototype.notifyArraySplice = function (index, added, removed) {\n        var notifySpy = !this.owned && isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy ? {\n            object: this.array,\n            type: \"splice\",\n            index: index, removed: removed, added: added,\n            removedCount: removed.length,\n            addedCount: added.length\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        this.atom.reportChanged();\n        // conform: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/observe\n        if (notify) notifyListeners(this, change);\n        if (notifySpy) spyReportEnd();\n    };\n    return ObservableArrayAdministration;\n}();\nvar ObservableArray = function (_super) {\n    __extends(ObservableArray, _super);\n    function ObservableArray(initialValues, enhancer, name, owned) {\n        if (name === void 0) {\n            name = \"ObservableArray@\" + getNextId();\n        }\n        if (owned === void 0) {\n            owned = false;\n        }\n        var _this = _super.call(this) || this;\n        var adm = new ObservableArrayAdministration(name, enhancer, _this, owned);\n        addHiddenFinalProp(_this, \"$mobx\", adm);\n        if (initialValues && initialValues.length) {\n            _this.spliceWithArray(0, 0, initialValues);\n        }\n        if (safariPrototypeSetterInheritanceBug) {\n            // Seems that Safari won't use numeric prototype setter untill any * numeric property is\n            // defined on the instance. After that it works fine, even if this property is deleted.\n            Object.defineProperty(adm.array, \"0\", ENTRY_0);\n        }\n        return _this;\n    }\n    ObservableArray.prototype.intercept = function (handler) {\n        return this.$mobx.intercept(handler);\n    };\n    ObservableArray.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately === void 0) {\n            fireImmediately = false;\n        }\n        return this.$mobx.observe(listener, fireImmediately);\n    };\n    ObservableArray.prototype.clear = function () {\n        return this.splice(0);\n    };\n    ObservableArray.prototype.concat = function () {\n        var arrays = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            arrays[_i] = arguments[_i];\n        }\n        this.$mobx.atom.reportObserved();\n        return Array.prototype.concat.apply(this.peek(), arrays.map(function (a) {\n            return isObservableArray(a) ? a.peek() : a;\n        }));\n    };\n    ObservableArray.prototype.replace = function (newItems) {\n        return this.$mobx.spliceWithArray(0, this.$mobx.values.length, newItems);\n    };\n    /**\n     * Converts this array back to a (shallow) javascript structure.\n     * For a deep clone use mobx.toJS\n     */\n    ObservableArray.prototype.toJS = function () {\n        return this.slice();\n    };\n    ObservableArray.prototype.toJSON = function () {\n        // Used by JSON.stringify\n        return this.toJS();\n    };\n    ObservableArray.prototype.peek = function () {\n        this.$mobx.atom.reportObserved();\n        return this.$mobx.dehanceValues(this.$mobx.values);\n    };\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n    ObservableArray.prototype.find = function (predicate, thisArg, fromIndex) {\n        if (fromIndex === void 0) {\n            fromIndex = 0;\n        }\n        var idx = this.findIndex.apply(this, arguments);\n        return idx === -1 ? undefined : this.get(idx);\n    };\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\n    ObservableArray.prototype.findIndex = function (predicate, thisArg, fromIndex) {\n        if (fromIndex === void 0) {\n            fromIndex = 0;\n        }\n        var items = this.peek(),\n            l = items.length;\n        for (var i = fromIndex; i < l; i++) {\n            if (predicate.call(thisArg, items[i], i, this)) return i;\n        }return -1;\n    };\n    /*\n        functions that do alter the internal structure of the array, (based on lib.es6.d.ts)\n        since these functions alter the inner structure of the array, the have side effects.\n        Because the have side effects, they should not be used in computed function,\n        and for that reason the do not call dependencyState.notifyObserved\n        */\n    ObservableArray.prototype.splice = function (index, deleteCount) {\n        var newItems = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            newItems[_i - 2] = arguments[_i];\n        }\n        switch (arguments.length) {\n            case 0:\n                return [];\n            case 1:\n                return this.$mobx.spliceWithArray(index);\n            case 2:\n                return this.$mobx.spliceWithArray(index, deleteCount);\n        }\n        return this.$mobx.spliceWithArray(index, deleteCount, newItems);\n    };\n    ObservableArray.prototype.spliceWithArray = function (index, deleteCount, newItems) {\n        return this.$mobx.spliceWithArray(index, deleteCount, newItems);\n    };\n    ObservableArray.prototype.push = function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var adm = this.$mobx;\n        adm.spliceWithArray(adm.values.length, 0, items);\n        return adm.values.length;\n    };\n    ObservableArray.prototype.pop = function () {\n        return this.splice(Math.max(this.$mobx.values.length - 1, 0), 1)[0];\n    };\n    ObservableArray.prototype.shift = function () {\n        return this.splice(0, 1)[0];\n    };\n    ObservableArray.prototype.unshift = function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var adm = this.$mobx;\n        adm.spliceWithArray(0, 0, items);\n        return adm.values.length;\n    };\n    ObservableArray.prototype.reverse = function () {\n        // reverse by default mutates in place before returning the result\n        // which makes it both a 'derivation' and a 'mutation'.\n        // so we deviate from the default and just make it an dervitation\n        var clone = this.slice();\n        return clone.reverse.apply(clone, arguments);\n    };\n    ObservableArray.prototype.sort = function (compareFn) {\n        // sort by default mutates in place before returning the result\n        // which goes against all good practices. Let's not change the array in place!\n        var clone = this.slice();\n        return clone.sort.apply(clone, arguments);\n    };\n    ObservableArray.prototype.remove = function (value) {\n        var idx = this.$mobx.dehanceValues(this.$mobx.values).indexOf(value);\n        if (idx > -1) {\n            this.splice(idx, 1);\n            return true;\n        }\n        return false;\n    };\n    ObservableArray.prototype.move = function (fromIndex, toIndex) {\n        function checkIndex(index) {\n            if (index < 0) {\n                throw new Error(\"[mobx.array] Index out of bounds: \" + index + \" is negative\");\n            }\n            var length = this.$mobx.values.length;\n            if (index >= length) {\n                throw new Error(\"[mobx.array] Index out of bounds: \" + index + \" is not smaller than \" + length);\n            }\n        }\n        checkIndex.call(this, fromIndex);\n        checkIndex.call(this, toIndex);\n        if (fromIndex === toIndex) {\n            return;\n        }\n        var oldItems = this.$mobx.values;\n        var newItems;\n        if (fromIndex < toIndex) {\n            newItems = oldItems.slice(0, fromIndex).concat(oldItems.slice(fromIndex + 1, toIndex + 1), [oldItems[fromIndex]], oldItems.slice(toIndex + 1));\n        } else {\n            newItems = oldItems.slice(0, toIndex).concat([oldItems[fromIndex]], oldItems.slice(toIndex, fromIndex), oldItems.slice(fromIndex + 1));\n        }\n        this.replace(newItems);\n    };\n    // See #734, in case property accessors are unreliable...\n    ObservableArray.prototype.get = function (index) {\n        var impl = this.$mobx;\n        if (impl) {\n            if (index < impl.values.length) {\n                impl.atom.reportObserved();\n                return impl.dehanceValue(impl.values[index]);\n            }\n            console.warn(\"[mobx.array] Attempt to read an array index (\" + index + \") that is out of bounds (\" + impl.values.length + \"). Please check length first. Out of bound indices will not be tracked by MobX\");\n        }\n        return undefined;\n    };\n    // See #734, in case property accessors are unreliable...\n    ObservableArray.prototype.set = function (index, newValue) {\n        var adm = this.$mobx;\n        var values = adm.values;\n        if (index < values.length) {\n            // update at index in range\n            checkIfStateModificationsAreAllowed(adm.atom);\n            var oldValue = values[index];\n            if (hasInterceptors(adm)) {\n                var change = interceptChange(adm, {\n                    type: \"update\",\n                    object: this,\n                    index: index, newValue: newValue\n                });\n                if (!change) return;\n                newValue = change.newValue;\n            }\n            newValue = adm.enhancer(newValue, oldValue);\n            var changed = newValue !== oldValue;\n            if (changed) {\n                values[index] = newValue;\n                adm.notifyArrayChildUpdate(index, newValue, oldValue);\n            }\n        } else if (index === values.length) {\n            // add a new item\n            adm.spliceWithArray(index, 0, [newValue]);\n        } else {\n            // out of bounds\n            throw new Error(\"[mobx.array] Index out of bounds, \" + index + \" is larger than \" + values.length);\n        }\n    };\n    return ObservableArray;\n}(StubArray);\ndeclareIterator(ObservableArray.prototype, function () {\n    return arrayAsIterator(this.slice());\n});\nObject.defineProperty(ObservableArray.prototype, \"length\", {\n    enumerable: false,\n    configurable: true,\n    get: function get() {\n        return this.$mobx.getArrayLength();\n    },\n    set: function set(newLength) {\n        this.$mobx.setArrayLength(newLength);\n    }\n});\n/**\n * Wrap function from prototype\n */\n[\"every\", \"filter\", \"forEach\", \"indexOf\", \"join\", \"lastIndexOf\", \"map\", \"reduce\", \"reduceRight\", \"slice\", \"some\", \"toString\", \"toLocaleString\"].forEach(function (funcName) {\n    var baseFunc = Array.prototype[funcName];\n    invariant(typeof baseFunc === \"function\", \"Base function not defined on Array prototype: '\" + funcName + \"'\");\n    addHiddenProp(ObservableArray.prototype, funcName, function () {\n        return baseFunc.apply(this.peek(), arguments);\n    });\n});\n/**\n * We don't want those to show up in `for (const key in ar)` ...\n */\nmakeNonEnumerable(ObservableArray.prototype, [\"constructor\", \"intercept\", \"observe\", \"clear\", \"concat\", \"get\", \"replace\", \"toJS\", \"toJSON\", \"peek\", \"find\", \"findIndex\", \"splice\", \"spliceWithArray\", \"push\", \"pop\", \"set\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"remove\", \"move\", \"toString\", \"toLocaleString\"]);\n// See #364\nvar ENTRY_0 = createArrayEntryDescriptor(0);\nfunction createArrayEntryDescriptor(index) {\n    return {\n        enumerable: false,\n        configurable: false,\n        get: function get() {\n            // TODO: Check `this`?, see #752?\n            return this.get(index);\n        },\n        set: function set(value) {\n            this.set(index, value);\n        }\n    };\n}\nfunction createArrayBufferItem(index) {\n    Object.defineProperty(ObservableArray.prototype, \"\" + index, createArrayEntryDescriptor(index));\n}\nfunction reserveArrayBuffer(max) {\n    for (var index = OBSERVABLE_ARRAY_BUFFER_SIZE; index < max; index++) {\n        createArrayBufferItem(index);\n    }OBSERVABLE_ARRAY_BUFFER_SIZE = max;\n}\nreserveArrayBuffer(1000);\nvar isObservableArrayAdministration = createInstanceofPredicate(\"ObservableArrayAdministration\", ObservableArrayAdministration);\nfunction isObservableArray(thing) {\n    return isObject(thing) && isObservableArrayAdministration(thing.$mobx);\n}\n\nvar UNCHANGED = {};\nvar ObservableValue = function (_super) {\n    __extends(ObservableValue, _super);\n    function ObservableValue(value, enhancer, name, notifySpy) {\n        if (name === void 0) {\n            name = \"ObservableValue@\" + getNextId();\n        }\n        if (notifySpy === void 0) {\n            notifySpy = true;\n        }\n        var _this = _super.call(this, name) || this;\n        _this.enhancer = enhancer;\n        _this.hasUnreportedChange = false;\n        _this.dehancer = undefined;\n        _this.value = enhancer(value, undefined, name);\n        if (notifySpy && isSpyEnabled()) {\n            // only notify spy if this is a stand-alone observable\n            spyReport({ type: \"create\", object: _this, newValue: _this.value });\n        }\n        return _this;\n    }\n    ObservableValue.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) return this.dehancer(value);\n        return value;\n    };\n    ObservableValue.prototype.set = function (newValue) {\n        var oldValue = this.value;\n        newValue = this.prepareNewValue(newValue);\n        if (newValue !== UNCHANGED) {\n            var notifySpy = isSpyEnabled();\n            if (notifySpy) {\n                spyReportStart({\n                    type: \"update\",\n                    object: this,\n                    newValue: newValue, oldValue: oldValue\n                });\n            }\n            this.setNewValue(newValue);\n            if (notifySpy) spyReportEnd();\n        }\n    };\n    ObservableValue.prototype.prepareNewValue = function (newValue) {\n        checkIfStateModificationsAreAllowed(this);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, { object: this, type: \"update\", newValue: newValue });\n            if (!change) return UNCHANGED;\n            newValue = change.newValue;\n        }\n        // apply modifier\n        newValue = this.enhancer(newValue, this.value, this.name);\n        return this.value !== newValue ? newValue : UNCHANGED;\n    };\n    ObservableValue.prototype.setNewValue = function (newValue) {\n        var oldValue = this.value;\n        this.value = newValue;\n        this.reportChanged();\n        if (hasListeners(this)) {\n            notifyListeners(this, {\n                type: \"update\",\n                object: this,\n                newValue: newValue, oldValue: oldValue\n            });\n        }\n    };\n    ObservableValue.prototype.get = function () {\n        this.reportObserved();\n        return this.dehanceValue(this.value);\n    };\n    ObservableValue.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableValue.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately) listener({\n            object: this,\n            type: \"update\",\n            newValue: this.value,\n            oldValue: undefined\n        });\n        return registerListener(this, listener);\n    };\n    ObservableValue.prototype.toJSON = function () {\n        return this.get();\n    };\n    ObservableValue.prototype.toString = function () {\n        return this.name + \"[\" + this.value + \"]\";\n    };\n    ObservableValue.prototype.valueOf = function () {\n        return toPrimitive(this.get());\n    };\n    return ObservableValue;\n}(BaseAtom);\nObservableValue.prototype[primitiveSymbol()] = ObservableValue.prototype.valueOf;\nvar isObservableValue = createInstanceofPredicate(\"ObservableValue\", ObservableValue);\n\nvar messages = {\n    \"m001\": \"It is not allowed to assign new values to @action fields\",\n    \"m002\": \"`runInAction` expects a function\",\n    \"m003\": \"`runInAction` expects a function without arguments\",\n    \"m004\": \"autorun expects a function\",\n    \"m005\": \"Warning: attempted to pass an action to autorun. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.\",\n    \"m006\": \"Warning: attempted to pass an action to autorunAsync. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.\",\n    \"m007\": \"reaction only accepts 2 or 3 arguments. If migrating from MobX 2, please provide an options object\",\n    \"m008\": \"wrapping reaction expression in `asReference` is no longer supported, use options object instead\",\n    \"m009\": \"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'. It looks like it was used on a property.\",\n    \"m010\": \"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'\",\n    \"m011\": \"First argument to `computed` should be an expression. If using computed as decorator, don't pass it arguments\",\n    \"m012\": \"computed takes one or two arguments if used as function\",\n    \"m013\": \"[mobx.expr] 'expr' should only be used inside other reactive functions.\",\n    \"m014\": \"extendObservable expected 2 or more arguments\",\n    \"m015\": \"extendObservable expects an object as first argument\",\n    \"m016\": \"extendObservable should not be used on maps, use map.merge instead\",\n    \"m017\": \"all arguments of extendObservable should be objects\",\n    \"m018\": \"extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540\",\n    \"m019\": \"[mobx.isObservable] isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.\",\n    \"m020\": \"modifiers can only be used for individual object properties\",\n    \"m021\": \"observable expects zero or one arguments\",\n    \"m022\": \"@observable can not be used on getters, use @computed instead\",\n    \"m023\": \"Using `transaction` is deprecated, use `runInAction` or `(@)action` instead.\",\n    \"m024\": \"whyRun() can only be used if a derivation is active, or by passing an computed value / reaction explicitly. If you invoked whyRun from inside a computation; the computation is currently suspended but re-evaluating because somebody requested its value.\",\n    \"m025\": \"whyRun can only be used on reactions and computed values\",\n    \"m026\": \"`action` can only be invoked on functions\",\n    \"m028\": \"It is not allowed to set `useStrict` when a derivation is running\",\n    \"m029\": \"INTERNAL ERROR only onBecomeUnobserved shouldn't be called twice in a row\",\n    \"m030a\": \"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: \",\n    \"m030b\": \"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: \",\n    \"m031\": \"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: \",\n    \"m032\": \"* This computation is suspended (not in use by any reaction) and won't run automatically.\\n\tDidn't expect this computation to be suspended at this point?\\n\t  1. Make sure this computation is used by a reaction (reaction, autorun, observer).\\n\t  2. Check whether you are using this computation synchronously (in the same stack as they reaction that needs it).\",\n    \"m033\": \"`observe` doesn't support the fire immediately property for observable maps.\",\n    \"m034\": \"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead\",\n    \"m035\": \"Cannot make the designated object observable; it is not extensible\",\n    \"m036\": \"It is not possible to get index atoms from arrays\",\n    \"m037\": \"Hi there! I'm sorry you have just run into an exception.\\nIf your debugger ends up here, know that some reaction (like the render() of an observer component, autorun or reaction)\\nthrew an exception and that mobx caught it, to avoid that it brings the rest of your application down.\\nThe original cause of the exception (the code that caused this reaction to run (again)), is still in the stack.\\n\\nHowever, more interesting is the actual stack trace of the error itself.\\nHopefully the error is an instanceof Error, because in that case you can inspect the original stack of the error from where it was thrown.\\nSee `error.stack` property, or press the very subtle \\\"(...)\\\" link you see near the console.error message that probably brought you here.\\nThat stack is more interesting than the stack of this console.error itself.\\n\\nIf the exception you see is an exception you created yourself, make sure to use `throw new Error(\\\"Oops\\\")` instead of `throw \\\"Oops\\\"`,\\nbecause the javascript environment will only preserve the original stack trace in the first form.\\n\\nYou can also make sure the debugger pauses the next time this very same exception is thrown by enabling \\\"Pause on caught exception\\\".\\n(Note that it might pause on many other, unrelated exception as well).\\n\\nIf that all doesn't help you out, feel free to open an issue https://github.com/mobxjs/mobx/issues!\\n\",\n    \"m038\": \"Missing items in this list?\\n    1. Check whether all used values are properly marked as observable (use isObservable to verify)\\n    2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.\\n\"\n};\nfunction getMessage(id) {\n    return messages[id];\n}\n\nfunction createAction(actionName, fn) {\n    invariant(typeof fn === \"function\", getMessage(\"m026\"));\n    invariant(typeof actionName === \"string\" && actionName.length > 0, \"actions should have valid names, got: '\" + actionName + \"'\");\n    var res = function res() {\n        return executeAction(actionName, fn, this, arguments);\n    };\n    res.originalFn = fn;\n    res.isMobxAction = true;\n    return res;\n}\nfunction executeAction(actionName, fn, scope, args) {\n    var runInfo = startAction(actionName, fn, scope, args);\n    try {\n        return fn.apply(scope, args);\n    } finally {\n        endAction(runInfo);\n    }\n}\nfunction startAction(actionName, fn, scope, args) {\n    var notifySpy = isSpyEnabled() && !!actionName;\n    var startTime = 0;\n    if (notifySpy) {\n        startTime = Date.now();\n        var l = args && args.length || 0;\n        var flattendArgs = new Array(l);\n        if (l > 0) for (var i = 0; i < l; i++) {\n            flattendArgs[i] = args[i];\n        }spyReportStart({\n            type: \"action\",\n            name: actionName,\n            fn: fn,\n            object: scope,\n            arguments: flattendArgs\n        });\n    }\n    var prevDerivation = untrackedStart();\n    startBatch();\n    var prevAllowStateChanges = allowStateChangesStart(true);\n    return {\n        prevDerivation: prevDerivation,\n        prevAllowStateChanges: prevAllowStateChanges,\n        notifySpy: notifySpy,\n        startTime: startTime\n    };\n}\nfunction endAction(runInfo) {\n    allowStateChangesEnd(runInfo.prevAllowStateChanges);\n    endBatch();\n    untrackedEnd(runInfo.prevDerivation);\n    if (runInfo.notifySpy) spyReportEnd({ time: Date.now() - runInfo.startTime });\n}\nfunction useStrict(strict) {\n    invariant(globalState.trackingDerivation === null, getMessage(\"m028\"));\n    globalState.strictMode = strict;\n    globalState.allowStateChanges = !strict;\n}\nfunction isStrictModeEnabled() {\n    return globalState.strictMode;\n}\nfunction allowStateChanges(allowStateChanges, func) {\n    // TODO: deprecate / refactor this function in next major\n    // Currently only used by `@observer`\n    // Proposed change: remove first param, rename to `forbidStateChanges`,\n    // require error callback instead of the hardcoded error message now used\n    // Use `inAction` instead of allowStateChanges in derivation.ts to check strictMode\n    var prev = allowStateChangesStart(allowStateChanges);\n    var res;\n    try {\n        res = func();\n    } finally {\n        allowStateChangesEnd(prev);\n    }\n    return res;\n}\nfunction allowStateChangesStart(allowStateChanges) {\n    var prev = globalState.allowStateChanges;\n    globalState.allowStateChanges = allowStateChanges;\n    return prev;\n}\nfunction allowStateChangesEnd(prev) {\n    globalState.allowStateChanges = prev;\n}\n\n/**\n * Constructs a decorator, that normalizes the differences between\n * TypeScript and Babel. Mainly caused by the fact that legacy-decorator cannot assign\n * values during instance creation to properties that have a getter setter.\n *\n * - Sigh -\n *\n * Also takes care of the difference between @decorator field and @decorator(args) field, and different forms of values.\n * For performance (cpu and mem) reasons the properties are always defined on the prototype (at least initially).\n * This means that these properties despite being enumerable might not show up in Object.keys() (but they will show up in for...in loops).\n */\nfunction createClassPropertyDecorator(\n/**\n * This function is invoked once, when the property is added to a new instance.\n * When this happens is not strictly determined due to differences in TS and Babel:\n * Typescript: Usually when constructing the new instance\n * Babel, sometimes Typescript: during the first get / set\n * Both: when calling `runLazyInitializers(instance)`\n */\nonInitialize, _get, _set, enumerable,\n/**\n * Can this decorator invoked with arguments? e.g. @decorator(args)\n */\nallowCustomArguments) {\n    function classPropertyDecorator(target, key, descriptor, customArgs, argLen) {\n        if (argLen === void 0) {\n            argLen = 0;\n        }\n        invariant(allowCustomArguments || quacksLikeADecorator(arguments), \"This function is a decorator, but it wasn't invoked like a decorator\");\n        if (!descriptor) {\n            // typescript (except for getter / setters)\n            var newDescriptor = {\n                enumerable: enumerable,\n                configurable: true,\n                get: function get() {\n                    if (!this.__mobxInitializedProps || this.__mobxInitializedProps[key] !== true) typescriptInitializeProperty(this, key, undefined, onInitialize, customArgs, descriptor);\n                    return _get.call(this, key);\n                },\n                set: function set(v) {\n                    if (!this.__mobxInitializedProps || this.__mobxInitializedProps[key] !== true) {\n                        typescriptInitializeProperty(this, key, v, onInitialize, customArgs, descriptor);\n                    } else {\n                        _set.call(this, key, v);\n                    }\n                }\n            };\n            if (arguments.length < 3 || arguments.length === 5 && argLen < 3) {\n                // Typescript target is ES3, so it won't define property for us\n                // or using Reflect.decorate polyfill, which will return no descriptor\n                // (see https://github.com/mobxjs/mobx/issues/333)\n                Object.defineProperty(target, key, newDescriptor);\n            }\n            return newDescriptor;\n        } else {\n            // babel and typescript getter / setter props\n            if (!hasOwnProperty(target, \"__mobxLazyInitializers\")) {\n                addHiddenProp(target, \"__mobxLazyInitializers\", target.__mobxLazyInitializers && target.__mobxLazyInitializers.slice() || [] // support inheritance\n                );\n            }\n            var value_1 = descriptor.value,\n                initializer_1 = descriptor.initializer;\n            target.__mobxLazyInitializers.push(function (instance) {\n                onInitialize(instance, key, initializer_1 ? initializer_1.call(instance) : value_1, customArgs, descriptor);\n            });\n            return {\n                enumerable: enumerable, configurable: true,\n                get: function get() {\n                    if (this.__mobxDidRunLazyInitializers !== true) runLazyInitializers(this);\n                    return _get.call(this, key);\n                },\n                set: function set(v) {\n                    if (this.__mobxDidRunLazyInitializers !== true) runLazyInitializers(this);\n                    _set.call(this, key, v);\n                }\n            };\n        }\n    }\n    if (allowCustomArguments) {\n        /** If custom arguments are allowed, we should return a function that returns a decorator */\n        return function () {\n            /** Direct invocation: @decorator bla */\n            if (quacksLikeADecorator(arguments)) return classPropertyDecorator.apply(null, arguments);\n            /** Indirect invocation: @decorator(args) bla */\n            var outerArgs = arguments;\n            var argLen = arguments.length;\n            return function (target, key, descriptor) {\n                return classPropertyDecorator(target, key, descriptor, outerArgs, argLen);\n            };\n        };\n    }\n    return classPropertyDecorator;\n}\nfunction typescriptInitializeProperty(instance, key, v, onInitialize, customArgs, baseDescriptor) {\n    if (!hasOwnProperty(instance, \"__mobxInitializedProps\")) addHiddenProp(instance, \"__mobxInitializedProps\", {});\n    instance.__mobxInitializedProps[key] = true;\n    onInitialize(instance, key, v, customArgs, baseDescriptor);\n}\nfunction runLazyInitializers(instance) {\n    if (instance.__mobxDidRunLazyInitializers === true) return;\n    if (instance.__mobxLazyInitializers) {\n        addHiddenProp(instance, \"__mobxDidRunLazyInitializers\", true);\n        instance.__mobxDidRunLazyInitializers && instance.__mobxLazyInitializers.forEach(function (initializer) {\n            return initializer(instance);\n        });\n    }\n}\nfunction quacksLikeADecorator(args) {\n    return (args.length === 2 || args.length === 3) && typeof args[1] === \"string\";\n}\n\nvar actionFieldDecorator = createClassPropertyDecorator(function (target, key, value, args, originalDescriptor) {\n    var actionName = args && args.length === 1 ? args[0] : value.name || key || \"<unnamed action>\";\n    var wrappedAction = action(actionName, value);\n    addHiddenProp(target, key, wrappedAction);\n}, function (key) {\n    return this[key];\n}, function () {\n    invariant(false, getMessage(\"m001\"));\n}, false, true);\nvar boundActionDecorator = createClassPropertyDecorator(function (target, key, value) {\n    defineBoundAction(target, key, value);\n}, function (key) {\n    return this[key];\n}, function () {\n    invariant(false, getMessage(\"m001\"));\n}, false, false);\nvar action = function action(arg1, arg2, arg3, arg4) {\n    if (arguments.length === 1 && typeof arg1 === \"function\") return createAction(arg1.name || \"<unnamed action>\", arg1);\n    if (arguments.length === 2 && typeof arg2 === \"function\") return createAction(arg1, arg2);\n    if (arguments.length === 1 && typeof arg1 === \"string\") return namedActionDecorator(arg1);\n    return namedActionDecorator(arg2).apply(null, arguments);\n};\naction.bound = function boundAction(arg1, arg2, arg3) {\n    if (typeof arg1 === \"function\") {\n        var action_1 = createAction(\"<not yet bound action>\", arg1);\n        action_1.autoBind = true;\n        return action_1;\n    }\n    return boundActionDecorator.apply(null, arguments);\n};\nfunction namedActionDecorator(name) {\n    return function (target, prop, descriptor) {\n        if (descriptor && typeof descriptor.value === \"function\") {\n            // TypeScript @action method() { }. Defined on proto before being decorated\n            // Don't use the field decorator if we are just decorating a method\n            descriptor.value = createAction(name, descriptor.value);\n            descriptor.enumerable = false;\n            descriptor.configurable = true;\n            return descriptor;\n        }\n        // bound instance methods\n        return actionFieldDecorator(name).apply(this, arguments);\n    };\n}\nfunction runInAction(arg1, arg2, arg3) {\n    var actionName = typeof arg1 === \"string\" ? arg1 : arg1.name || \"<unnamed action>\";\n    var fn = typeof arg1 === \"function\" ? arg1 : arg2;\n    var scope = typeof arg1 === \"function\" ? arg2 : arg3;\n    invariant(typeof fn === \"function\", getMessage(\"m002\"));\n    invariant(fn.length === 0, getMessage(\"m003\"));\n    invariant(typeof actionName === \"string\" && actionName.length > 0, \"actions should have valid names, got: '\" + actionName + \"'\");\n    return executeAction(actionName, fn, scope, undefined);\n}\nfunction isAction(thing) {\n    return typeof thing === \"function\" && thing.isMobxAction === true;\n}\nfunction defineBoundAction(target, propertyName, fn) {\n    var res = function res() {\n        return executeAction(propertyName, fn, target, arguments);\n    };\n    res.isMobxAction = true;\n    addHiddenProp(target, propertyName, res);\n}\n\nfunction identityComparer(a, b) {\n    return a === b;\n}\nfunction structuralComparer(a, b) {\n    if (typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b)) {\n        return true;\n    }\n    return deepEqual(a, b);\n}\nfunction defaultComparer(a, b) {\n    if (typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b)) {\n        return true;\n    }\n    return identityComparer(a, b);\n}\nvar comparer = {\n    identity: identityComparer,\n    structural: structuralComparer,\n    default: defaultComparer\n};\n\nfunction autorun(arg1, arg2, arg3) {\n    var name, view, scope;\n    if (typeof arg1 === \"string\") {\n        name = arg1;\n        view = arg2;\n        scope = arg3;\n    } else {\n        name = arg1.name || \"Autorun@\" + getNextId();\n        view = arg1;\n        scope = arg2;\n    }\n    invariant(typeof view === \"function\", getMessage(\"m004\"));\n    invariant(isAction(view) === false, getMessage(\"m005\"));\n    if (scope) view = view.bind(scope);\n    var reaction = new Reaction(name, function () {\n        this.track(reactionRunner);\n    });\n    function reactionRunner() {\n        view(reaction);\n    }\n    reaction.schedule();\n    return reaction.getDisposer();\n}\nfunction when(arg1, arg2, arg3, arg4) {\n    var name, predicate, effect, scope;\n    if (typeof arg1 === \"string\") {\n        name = arg1;\n        predicate = arg2;\n        effect = arg3;\n        scope = arg4;\n    } else {\n        name = \"When@\" + getNextId();\n        predicate = arg1;\n        effect = arg2;\n        scope = arg3;\n    }\n    var disposer = autorun(name, function (r) {\n        if (predicate.call(scope)) {\n            r.dispose();\n            var prevUntracked = untrackedStart();\n            effect.call(scope);\n            untrackedEnd(prevUntracked);\n        }\n    });\n    return disposer;\n}\nfunction autorunAsync(arg1, arg2, arg3, arg4) {\n    var name, func, delay, scope;\n    if (typeof arg1 === \"string\") {\n        name = arg1;\n        func = arg2;\n        delay = arg3;\n        scope = arg4;\n    } else {\n        name = arg1.name || \"AutorunAsync@\" + getNextId();\n        func = arg1;\n        delay = arg2;\n        scope = arg3;\n    }\n    invariant(isAction(func) === false, getMessage(\"m006\"));\n    if (delay === void 0) delay = 1;\n    if (scope) func = func.bind(scope);\n    var isScheduled = false;\n    var r = new Reaction(name, function () {\n        if (!isScheduled) {\n            isScheduled = true;\n            setTimeout(function () {\n                isScheduled = false;\n                if (!r.isDisposed) r.track(reactionRunner);\n            }, delay);\n        }\n    });\n    function reactionRunner() {\n        func(r);\n    }\n    r.schedule();\n    return r.getDisposer();\n}\nfunction reaction(expression, effect, arg3) {\n    if (arguments.length > 3) {\n        fail(getMessage(\"m007\"));\n    }\n    if (isModifierDescriptor(expression)) {\n        fail(getMessage(\"m008\"));\n    }\n    var opts;\n    if ((typeof arg3 === \"undefined\" ? \"undefined\" : _typeof(arg3)) === \"object\") {\n        opts = arg3;\n    } else {\n        opts = {};\n    }\n    opts.name = opts.name || expression.name || effect.name || \"Reaction@\" + getNextId();\n    opts.fireImmediately = arg3 === true || opts.fireImmediately === true;\n    opts.delay = opts.delay || 0;\n    opts.compareStructural = opts.compareStructural || opts.struct || false;\n    effect = action(opts.name, opts.context ? effect.bind(opts.context) : effect);\n    if (opts.context) {\n        expression = expression.bind(opts.context);\n    }\n    var firstTime = true;\n    var isScheduled = false;\n    var value;\n    var equals = opts.equals ? opts.equals : opts.compareStructural || opts.struct ? comparer.structural : comparer.default;\n    var r = new Reaction(opts.name, function () {\n        if (firstTime || opts.delay < 1) {\n            reactionRunner();\n        } else if (!isScheduled) {\n            isScheduled = true;\n            setTimeout(function () {\n                isScheduled = false;\n                reactionRunner();\n            }, opts.delay);\n        }\n    });\n    function reactionRunner() {\n        if (r.isDisposed) return;\n        var changed = false;\n        r.track(function () {\n            var nextValue = expression(r);\n            changed = firstTime || !equals(value, nextValue);\n            value = nextValue;\n        });\n        if (firstTime && opts.fireImmediately) effect(value, r);\n        if (!firstTime && changed === true) effect(value, r);\n        if (firstTime) firstTime = false;\n    }\n    r.schedule();\n    return r.getDisposer();\n}\n\n/**\n * A node in the state dependency root that observes other nodes, and can be observed itself.\n *\n * ComputedValue will remember result of the computation for duration of a batch, or being observed\n * During this time it will recompute only when one of its direct dependencies changed,\n * but only when it is being accessed with `ComputedValue.get()`.\n *\n * Implementation description:\n * 1. First time it's being accessed it will compute and remember result\n *    give back remembered result until 2. happens\n * 2. First time any deep dependency change, propagate POSSIBLY_STALE to all observers, wait for 3.\n * 3. When it's being accessed, recompute if any shallow dependency changed.\n *    if result changed: propagate STALE to all observers, that were POSSIBLY_STALE from the last step.\n *    go to step 2. either way\n *\n * If at any point it's outside batch and it isn't observed: reset everything and go to 1.\n */\nvar ComputedValue = function () {\n    /**\n     * Create a new computed value based on a function expression.\n     *\n     * The `name` property is for debug purposes only.\n     *\n     * The `equals` property specifies the comparer function to use to determine if a newly produced\n     * value differs from the previous value. Two comparers are provided in the library; `defaultComparer`\n     * compares based on identity comparison (===), and `structualComparer` deeply compares the structure.\n     * Structural comparison can be convenient if you always produce an new aggregated object and\n     * don't want to notify observers if it is structurally the same.\n     * This is useful for working with vectors, mouse coordinates etc.\n     */\n    function ComputedValue(derivation, scope, equals, name, setter) {\n        this.derivation = derivation;\n        this.scope = scope;\n        this.equals = equals;\n        this.dependenciesState = IDerivationState.NOT_TRACKING;\n        this.observing = []; // nodes we are looking at. Our value depends on these nodes\n        this.newObserving = null; // during tracking it's an array with new observed observers\n        this.isPendingUnobservation = false;\n        this.observers = [];\n        this.observersIndexes = {};\n        this.diffValue = 0;\n        this.runId = 0;\n        this.lastAccessedBy = 0;\n        this.lowestObserverState = IDerivationState.UP_TO_DATE;\n        this.unboundDepsCount = 0;\n        this.__mapid = \"#\" + getNextId();\n        this.value = new CaughtException(null);\n        this.isComputing = false; // to check for cycles\n        this.isRunningSetter = false;\n        this.name = name || \"ComputedValue@\" + getNextId();\n        if (setter) this.setter = createAction(name + \"-setter\", setter);\n    }\n    ComputedValue.prototype.onBecomeStale = function () {\n        propagateMaybeChanged(this);\n    };\n    ComputedValue.prototype.onBecomeUnobserved = function () {\n        clearObserving(this);\n        this.value = undefined;\n    };\n    /**\n     * Returns the current value of this computed value.\n     * Will evaluate its computation first if needed.\n     */\n    ComputedValue.prototype.get = function () {\n        invariant(!this.isComputing, \"Cycle detected in computation \" + this.name, this.derivation);\n        if (globalState.inBatch === 0) {\n            // This is an minor optimization which could be omitted to simplify the code\n            // The computedValue is accessed outside of any mobx stuff. Batch observing should be enough and don't need\n            // tracking as it will never be called again inside this batch.\n            startBatch();\n            if (shouldCompute(this)) this.value = this.computeValue(false);\n            endBatch();\n        } else {\n            reportObserved(this);\n            if (shouldCompute(this)) if (this.trackAndCompute()) propagateChangeConfirmed(this);\n        }\n        var result = this.value;\n        if (isCaughtException(result)) throw result.cause;\n        return result;\n    };\n    ComputedValue.prototype.peek = function () {\n        var res = this.computeValue(false);\n        if (isCaughtException(res)) throw res.cause;\n        return res;\n    };\n    ComputedValue.prototype.set = function (value) {\n        if (this.setter) {\n            invariant(!this.isRunningSetter, \"The setter of computed value '\" + this.name + \"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?\");\n            this.isRunningSetter = true;\n            try {\n                this.setter.call(this.scope, value);\n            } finally {\n                this.isRunningSetter = false;\n            }\n        } else invariant(false, \"[ComputedValue '\" + this.name + \"'] It is not possible to assign a new value to a computed value.\");\n    };\n    ComputedValue.prototype.trackAndCompute = function () {\n        if (isSpyEnabled()) {\n            spyReport({\n                object: this.scope,\n                type: \"compute\",\n                fn: this.derivation\n            });\n        }\n        var oldValue = this.value;\n        var newValue = this.value = this.computeValue(true);\n        return isCaughtException(oldValue) || isCaughtException(newValue) || !this.equals(oldValue, newValue);\n    };\n    ComputedValue.prototype.computeValue = function (track) {\n        this.isComputing = true;\n        globalState.computationDepth++;\n        var res;\n        if (track) {\n            res = trackDerivedFunction(this, this.derivation, this.scope);\n        } else {\n            try {\n                res = this.derivation.call(this.scope);\n            } catch (e) {\n                res = new CaughtException(e);\n            }\n        }\n        globalState.computationDepth--;\n        this.isComputing = false;\n        return res;\n    };\n\n    ComputedValue.prototype.observe = function (listener, fireImmediately) {\n        var _this = this;\n        var firstTime = true;\n        var prevValue = undefined;\n        return autorun(function () {\n            var newValue = _this.get();\n            if (!firstTime || fireImmediately) {\n                var prevU = untrackedStart();\n                listener({\n                    type: \"update\",\n                    object: _this,\n                    newValue: newValue,\n                    oldValue: prevValue\n                });\n                untrackedEnd(prevU);\n            }\n            firstTime = false;\n            prevValue = newValue;\n        });\n    };\n    ComputedValue.prototype.toJSON = function () {\n        return this.get();\n    };\n    ComputedValue.prototype.toString = function () {\n        return this.name + \"[\" + this.derivation.toString() + \"]\";\n    };\n    ComputedValue.prototype.valueOf = function () {\n        return toPrimitive(this.get());\n    };\n\n    ComputedValue.prototype.whyRun = function () {\n        var isTracking = Boolean(globalState.trackingDerivation);\n        var observing = unique(this.isComputing ? this.newObserving : this.observing).map(function (dep) {\n            return dep.name;\n        });\n        var observers = unique(getObservers(this).map(function (dep) {\n            return dep.name;\n        }));\n        return \"\\nWhyRun? computation '\" + this.name + \"':\\n * Running because: \" + (isTracking ? \"[active] the value of this computation is needed by a reaction\" : this.isComputing ? \"[get] The value of this computed was requested outside a reaction\" : \"[idle] not running at the moment\") + \"\\n\" + (this.dependenciesState === IDerivationState.NOT_TRACKING ? getMessage(\"m032\") : \" * This computation will re-run if any of the following observables changes:\\n    \" + joinStrings(observing) + \"\\n    \" + (this.isComputing && isTracking ? \" (... or any observable accessed during the remainder of the current run)\" : \"\") + \"\\n\\t\" + getMessage(\"m038\") + \"\\n\\n  * If the outcome of this computation changes, the following observers will be re-run:\\n    \" + joinStrings(observers) + \"\\n\");\n    };\n    return ComputedValue;\n}();\nComputedValue.prototype[primitiveSymbol()] = ComputedValue.prototype.valueOf;\nvar isComputedValue = createInstanceofPredicate(\"ComputedValue\", ComputedValue);\n\nvar ObservableObjectAdministration = function () {\n    function ObservableObjectAdministration(target, name) {\n        this.target = target;\n        this.name = name;\n        this.values = {};\n        this.changeListeners = null;\n        this.interceptors = null;\n    }\n    /**\n        * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\n        * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\n        * for callback details\n        */\n    ObservableObjectAdministration.prototype.observe = function (callback, fireImmediately) {\n        invariant(fireImmediately !== true, \"`observe` doesn't support the fire immediately property for observable objects.\");\n        return registerListener(this, callback);\n    };\n    ObservableObjectAdministration.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    return ObservableObjectAdministration;\n}();\nfunction asObservableObject(target, name) {\n    if (isObservableObject(target)) return target.$mobx;\n    invariant(Object.isExtensible(target), getMessage(\"m035\"));\n    if (!isPlainObject(target)) name = (target.constructor.name || \"ObservableObject\") + \"@\" + getNextId();\n    if (!name) name = \"ObservableObject@\" + getNextId();\n    var adm = new ObservableObjectAdministration(target, name);\n    addHiddenFinalProp(target, \"$mobx\", adm);\n    return adm;\n}\nfunction defineObservablePropertyFromDescriptor(adm, propName, descriptor, defaultEnhancer) {\n    if (adm.values[propName]) {\n        // already observable property\n        invariant(\"value\" in descriptor, \"The property \" + propName + \" in \" + adm.name + \" is already observable, cannot redefine it as computed property\");\n        adm.target[propName] = descriptor.value; // the property setter will make 'value' reactive if needed.\n        return;\n    }\n    // not yet observable property\n    if (\"value\" in descriptor) {\n        // not a computed value\n        if (isModifierDescriptor(descriptor.value)) {\n            // x : ref(someValue)\n            var modifierDescriptor = descriptor.value;\n            defineObservableProperty(adm, propName, modifierDescriptor.initialValue, modifierDescriptor.enhancer);\n        } else if (isAction(descriptor.value) && descriptor.value.autoBind === true) {\n            defineBoundAction(adm.target, propName, descriptor.value.originalFn);\n        } else if (isComputedValue(descriptor.value)) {\n            // x: computed(someExpr)\n            defineComputedPropertyFromComputedValue(adm, propName, descriptor.value);\n        } else {\n            // x: someValue\n            defineObservableProperty(adm, propName, descriptor.value, defaultEnhancer);\n        }\n    } else {\n        // get x() { return 3 } set x(v) { }\n        defineComputedProperty(adm, propName, descriptor.get, descriptor.set, comparer.default, true);\n    }\n}\nfunction defineObservableProperty(adm, propName, newValue, enhancer) {\n    assertPropertyConfigurable(adm.target, propName);\n    if (hasInterceptors(adm)) {\n        var change = interceptChange(adm, {\n            object: adm.target,\n            name: propName,\n            type: \"add\",\n            newValue: newValue\n        });\n        if (!change) return;\n        newValue = change.newValue;\n    }\n    var observable = adm.values[propName] = new ObservableValue(newValue, enhancer, adm.name + \".\" + propName, false);\n    newValue = observable.value; // observableValue might have changed it\n    Object.defineProperty(adm.target, propName, generateObservablePropConfig(propName));\n    notifyPropertyAddition(adm, adm.target, propName, newValue);\n}\nfunction defineComputedProperty(adm, propName, getter, setter, equals, asInstanceProperty) {\n    if (asInstanceProperty) assertPropertyConfigurable(adm.target, propName);\n    adm.values[propName] = new ComputedValue(getter, adm.target, equals, adm.name + \".\" + propName, setter);\n    if (asInstanceProperty) {\n        Object.defineProperty(adm.target, propName, generateComputedPropConfig(propName));\n    }\n}\nfunction defineComputedPropertyFromComputedValue(adm, propName, computedValue) {\n    var name = adm.name + \".\" + propName;\n    computedValue.name = name;\n    if (!computedValue.scope) computedValue.scope = adm.target;\n    adm.values[propName] = computedValue;\n    Object.defineProperty(adm.target, propName, generateComputedPropConfig(propName));\n}\nvar observablePropertyConfigs = {};\nvar computedPropertyConfigs = {};\nfunction generateObservablePropConfig(propName) {\n    return observablePropertyConfigs[propName] || (observablePropertyConfigs[propName] = {\n        configurable: true,\n        enumerable: true,\n        get: function get() {\n            return this.$mobx.values[propName].get();\n        },\n        set: function set(v) {\n            setPropertyValue(this, propName, v);\n        }\n    });\n}\nfunction generateComputedPropConfig(propName) {\n    return computedPropertyConfigs[propName] || (computedPropertyConfigs[propName] = {\n        configurable: true,\n        enumerable: false,\n        get: function get() {\n            return this.$mobx.values[propName].get();\n        },\n        set: function set(v) {\n            return this.$mobx.values[propName].set(v);\n        }\n    });\n}\nfunction setPropertyValue(instance, name, newValue) {\n    var adm = instance.$mobx;\n    var observable = adm.values[name];\n    // intercept\n    if (hasInterceptors(adm)) {\n        var change = interceptChange(adm, {\n            type: \"update\",\n            object: instance,\n            name: name, newValue: newValue\n        });\n        if (!change) return;\n        newValue = change.newValue;\n    }\n    newValue = observable.prepareNewValue(newValue);\n    // notify spy & observers\n    if (newValue !== UNCHANGED) {\n        var notify = hasListeners(adm);\n        var notifySpy = isSpyEnabled();\n        var change = notify || notifySpy ? {\n            type: \"update\",\n            object: instance,\n            oldValue: observable.value,\n            name: name, newValue: newValue\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        observable.setNewValue(newValue);\n        if (notify) notifyListeners(adm, change);\n        if (notifySpy) spyReportEnd();\n    }\n}\nfunction notifyPropertyAddition(adm, object, name, newValue) {\n    var notify = hasListeners(adm);\n    var notifySpy = isSpyEnabled();\n    var change = notify || notifySpy ? {\n        type: \"add\",\n        object: object, name: name, newValue: newValue\n    } : null;\n    if (notifySpy) spyReportStart(change);\n    if (notify) notifyListeners(adm, change);\n    if (notifySpy) spyReportEnd();\n}\nvar isObservableObjectAdministration = createInstanceofPredicate(\"ObservableObjectAdministration\", ObservableObjectAdministration);\nfunction isObservableObject(thing) {\n    if (isObject(thing)) {\n        // Initializers run lazily when transpiling to babel, so make sure they are run...\n        runLazyInitializers(thing);\n        return isObservableObjectAdministration(thing.$mobx);\n    }\n    return false;\n}\n\n/**\n    * Returns true if the provided value is reactive.\n    * @param value object, function or array\n    * @param property if property is specified, checks whether value.property is reactive.\n    */\nfunction isObservable(value, property) {\n    if (value === null || value === undefined) return false;\n    if (property !== undefined) {\n        if (isObservableArray(value) || isObservableMap(value)) throw new Error(getMessage(\"m019\"));else if (isObservableObject(value)) {\n            var o = value.$mobx;\n            return o.values && !!o.values[property];\n        }\n        return false;\n    }\n    // For first check, see #701\n    return isObservableObject(value) || !!value.$mobx || isAtom(value) || isReaction(value) || isComputedValue(value);\n}\n\nfunction createDecoratorForEnhancer(enhancer) {\n    invariant(!!enhancer, \":(\");\n    return createClassPropertyDecorator(function (target, name, baseValue, _, baseDescriptor) {\n        assertPropertyConfigurable(target, name);\n        invariant(!baseDescriptor || !baseDescriptor.get, getMessage(\"m022\"));\n        var adm = asObservableObject(target, undefined);\n        defineObservableProperty(adm, name, baseValue, enhancer);\n    }, function (name) {\n        var observable = this.$mobx.values[name];\n        if (observable === undefined) return undefined;\n        return observable.get();\n    }, function (name, value) {\n        setPropertyValue(this, name, value);\n    }, true, false);\n}\n\nfunction extendObservable(target) {\n    var properties = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        properties[_i - 1] = arguments[_i];\n    }\n    return extendObservableHelper(target, deepEnhancer, properties);\n}\nfunction extendShallowObservable(target) {\n    var properties = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        properties[_i - 1] = arguments[_i];\n    }\n    return extendObservableHelper(target, referenceEnhancer, properties);\n}\nfunction extendObservableHelper(target, defaultEnhancer, properties) {\n    invariant(arguments.length >= 2, getMessage(\"m014\"));\n    invariant((typeof target === \"undefined\" ? \"undefined\" : _typeof(target)) === \"object\", getMessage(\"m015\"));\n    invariant(!isObservableMap(target), getMessage(\"m016\"));\n    properties.forEach(function (propSet) {\n        invariant((typeof propSet === \"undefined\" ? \"undefined\" : _typeof(propSet)) === \"object\", getMessage(\"m017\"));\n        invariant(!isObservable(propSet), getMessage(\"m018\"));\n    });\n    var adm = asObservableObject(target);\n    var definedProps = {};\n    // Note could be optimised if properties.length === 1\n    for (var i = properties.length - 1; i >= 0; i--) {\n        var propSet = properties[i];\n        for (var key in propSet) {\n            if (definedProps[key] !== true && hasOwnProperty(propSet, key)) {\n                definedProps[key] = true;\n                if (target === propSet && !isPropertyConfigurable(target, key)) continue; // see #111, skip non-configurable or non-writable props for `observable(object)`.\n                var descriptor = Object.getOwnPropertyDescriptor(propSet, key);\n                defineObservablePropertyFromDescriptor(adm, key, descriptor, defaultEnhancer);\n            }\n        }\n    }\n    return target;\n}\n\nvar deepDecorator = createDecoratorForEnhancer(deepEnhancer);\nvar shallowDecorator = createDecoratorForEnhancer(shallowEnhancer);\nvar refDecorator = createDecoratorForEnhancer(referenceEnhancer);\nvar deepStructDecorator = createDecoratorForEnhancer(deepStructEnhancer);\nvar refStructDecorator = createDecoratorForEnhancer(refStructEnhancer);\n/**\n * Turns an object, array or function into a reactive structure.\n * @param v the value which should become observable.\n */\nfunction createObservable(v) {\n    if (v === void 0) {\n        v = undefined;\n    }\n    // @observable someProp;\n    if (typeof arguments[1] === \"string\") return deepDecorator.apply(null, arguments);\n    invariant(arguments.length <= 1, getmessage(\"m021\")); invariant(!ismodifierdescriptor(v), getmessage(\"m020\")); it is an observable already, done if (isobservable(v)) return v; something that can be converted and mutated? var res=\"deepEnhancer(v,\" undefined, undefined); this value could to a new data structure, (res !=\"=\" v) res; otherwise, just box observable.box(v); } iobservablefactories=\"function\" () { function iobservablefactories() {} iobservablefactories.prototype.box=\"function\" (value, name) (arguments.length> 2) incorrectlyUsedAsDecorator(\"box\");\n        return new ObservableValue(value, deepEnhancer, name);\n    };\n    IObservableFactories.prototype.shallowBox = function (value, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowBox\");\n        return new ObservableValue(value, referenceEnhancer, name);\n    };\n    IObservableFactories.prototype.array = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"array\");\n        return new ObservableArray(initialValues, deepEnhancer, name);\n    };\n    IObservableFactories.prototype.shallowArray = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowArray\");\n        return new ObservableArray(initialValues, referenceEnhancer, name);\n    };\n    IObservableFactories.prototype.map = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"map\");\n        return new ObservableMap(initialValues, deepEnhancer, name);\n    };\n    IObservableFactories.prototype.shallowMap = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowMap\");\n        return new ObservableMap(initialValues, referenceEnhancer, name);\n    };\n    IObservableFactories.prototype.object = function (props, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"object\");\n        var res = {};\n        // convert to observable object\n        asObservableObject(res, name);\n        // add properties\n        extendObservable(res, props);\n        return res;\n    };\n    IObservableFactories.prototype.shallowObject = function (props, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowObject\");\n        var res = {};\n        asObservableObject(res, name);\n        extendShallowObservable(res, props);\n        return res;\n    };\n    IObservableFactories.prototype.ref = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(referenceEnhancer, arguments[0]);\n        } else {\n            return refDecorator.apply(null, arguments);\n        }\n    };\n    IObservableFactories.prototype.shallow = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(shallowEnhancer, arguments[0]);\n        } else {\n            return shallowDecorator.apply(null, arguments);\n        }\n    };\n    IObservableFactories.prototype.deep = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(deepEnhancer, arguments[0]);\n        } else {\n            return deepDecorator.apply(null, arguments);\n        }\n    };\n    IObservableFactories.prototype.struct = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(deepStructEnhancer, arguments[0]);\n        } else {\n            return deepStructDecorator.apply(null, arguments);\n        }\n    };\n    return IObservableFactories;\n}();\nvar observable = createObservable;\n// weird trick to keep our typings nicely with our funcs, and still extend the observable function\n// ES6 class methods aren't enumerable, can't use Object.keys\nObject.getOwnPropertyNames(IObservableFactories.prototype).filter(function (name) {\n    return name !== \"constructor\";\n}).forEach(function (name) {\n    return observable[name] = IObservableFactories.prototype[name];\n});\nobservable.deep.struct = observable.struct;\nobservable.ref.struct = function () {\n    if (arguments.length < 2) {\n        return createModifierDescriptor(refStructEnhancer, arguments[0]);\n    } else {\n        return refStructDecorator.apply(null, arguments);\n    }\n};\nfunction incorrectlyUsedAsDecorator(methodName) {\n    fail(\"Expected one or two arguments to observable.\" + methodName + \". Did you accidentally try to use observable.\" + methodName + \" as decorator?\");\n}\n\nfunction isModifierDescriptor(thing) {\n    return (typeof thing === \"undefined\" ? \"undefined\" : _typeof(thing)) === \"object\" && thing !== null && thing.isMobxModifierDescriptor === true;\n}\nfunction createModifierDescriptor(enhancer, initialValue) {\n    invariant(!isModifierDescriptor(initialValue), \"Modifiers cannot be nested\");\n    return {\n        isMobxModifierDescriptor: true,\n        initialValue: initialValue,\n        enhancer: enhancer\n    };\n}\nfunction deepEnhancer(v, _, name) {\n    if (isModifierDescriptor(v)) fail(\"You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it\");\n    // it is an observable already, done\n    if (isObservable(v)) return v;\n    // something that can be converted and mutated?\n    if (Array.isArray(v)) return observable.array(v, name);\n    if (isPlainObject(v)) return observable.object(v, name);\n    if (isES6Map(v)) return observable.map(v, name);\n    return v;\n}\nfunction shallowEnhancer(v, _, name) {\n    if (isModifierDescriptor(v)) fail(\"You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it\");\n    if (v === undefined || v === null) return v;\n    if (isObservableObject(v) || isObservableArray(v) || isObservableMap(v)) return v;\n    if (Array.isArray(v)) return observable.shallowArray(v, name);\n    if (isPlainObject(v)) return observable.shallowObject(v, name);\n    if (isES6Map(v)) return observable.shallowMap(v, name);\n    return fail(\"The shallow modifier / decorator can only used in combination with arrays, objects and maps\");\n}\nfunction referenceEnhancer(newValue) {\n    // never turn into an observable\n    return newValue;\n}\nfunction deepStructEnhancer(v, oldValue, name) {\n    // don't confuse structurally compare enhancer with ref enhancer! The latter is probably\n    // more suited for immutable objects\n    if (deepEqual(v, oldValue)) return oldValue;\n    // it is an observable already, done\n    if (isObservable(v)) return v;\n    // something that can be converted and mutated?\n    if (Array.isArray(v)) return new ObservableArray(v, deepStructEnhancer, name);\n    if (isES6Map(v)) return new ObservableMap(v, deepStructEnhancer, name);\n    if (isPlainObject(v)) {\n        var res = {};\n        asObservableObject(res, name);\n        extendObservableHelper(res, deepStructEnhancer, [v]);\n        return res;\n    }\n    return v;\n}\nfunction refStructEnhancer(v, oldValue, name) {\n    if (deepEqual(v, oldValue)) return oldValue;\n    return v;\n}\n\n/**\n * @deprecated\n * During a transaction no views are updated until the end of the transaction.\n * The transaction will be run synchronously nonetheless.\n *\n * Deprecated to simplify api; transactions offer no real benefit above actions.\n *\n * @param action a function that updates some reactive state\n * @returns any value that was returned by the 'action' parameter.\n */\nfunction transaction(action, thisArg) {\n    if (thisArg === void 0) {\n        thisArg = undefined;\n    }\n    deprecated(getMessage(\"m023\"));\n    return runInTransaction.apply(undefined, arguments);\n}\nfunction runInTransaction(action, thisArg) {\n    if (thisArg === void 0) {\n        thisArg = undefined;\n    }\n    return executeAction(\"\", action);\n}\n\nvar ObservableMapMarker = {};\nvar ObservableMap = function () {\n    function ObservableMap(initialData, enhancer, name) {\n        if (enhancer === void 0) {\n            enhancer = deepEnhancer;\n        }\n        if (name === void 0) {\n            name = \"ObservableMap@\" + getNextId();\n        }\n        this.enhancer = enhancer;\n        this.name = name;\n        this.$mobx = ObservableMapMarker;\n        this._data = Object.create(null);\n        this._hasMap = Object.create(null); // hasMap, not hashMap >-).\n        this._keys = new ObservableArray(undefined, referenceEnhancer, this.name + \".keys()\", true);\n        this.interceptors = null;\n        this.changeListeners = null;\n        this.dehancer = undefined;\n        this.merge(initialData);\n    }\n    ObservableMap.prototype._has = function (key) {\n        return typeof this._data[key] !== \"undefined\";\n    };\n    ObservableMap.prototype.has = function (key) {\n        if (!this.isValidKey(key)) return false;\n        key = \"\" + key;\n        if (this._hasMap[key]) return this._hasMap[key].get();\n        return this._updateHasMapEntry(key, false).get();\n    };\n    ObservableMap.prototype.set = function (key, value) {\n        this.assertValidKey(key);\n        key = \"\" + key;\n        var hasKey = this._has(key);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: hasKey ? \"update\" : \"add\",\n                object: this,\n                newValue: value,\n                name: key\n            });\n            if (!change) return this;\n            value = change.newValue;\n        }\n        if (hasKey) {\n            this._updateValue(key, value);\n        } else {\n            this._addValue(key, value);\n        }\n        return this;\n    };\n    ObservableMap.prototype.delete = function (key) {\n        var _this = this;\n        this.assertValidKey(key);\n        key = \"\" + key;\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: \"delete\",\n                object: this,\n                name: key\n            });\n            if (!change) return false;\n        }\n        if (this._has(key)) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy ? {\n                type: \"delete\",\n                object: this,\n                oldValue: this._data[key].value,\n                name: key\n            } : null;\n            if (notifySpy) spyReportStart(change);\n            runInTransaction(function () {\n                _this._keys.remove(key);\n                _this._updateHasMapEntry(key, false);\n                var observable$$1 = _this._data[key];\n                observable$$1.setNewValue(undefined);\n                _this._data[key] = undefined;\n            });\n            if (notify) notifyListeners(this, change);\n            if (notifySpy) spyReportEnd();\n            return true;\n        }\n        return false;\n    };\n    ObservableMap.prototype._updateHasMapEntry = function (key, value) {\n        // optimization; don't fill the hasMap if we are not observing, or remove entry if there are no observers anymore\n        var entry = this._hasMap[key];\n        if (entry) {\n            entry.setNewValue(value);\n        } else {\n            entry = this._hasMap[key] = new ObservableValue(value, referenceEnhancer, this.name + \".\" + key + \"?\", false);\n        }\n        return entry;\n    };\n    ObservableMap.prototype._updateValue = function (name, newValue) {\n        var observable$$1 = this._data[name];\n        newValue = observable$$1.prepareNewValue(newValue);\n        if (newValue !== UNCHANGED) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy ? {\n                type: \"update\",\n                object: this,\n                oldValue: observable$$1.value,\n                name: name, newValue: newValue\n            } : null;\n            if (notifySpy) spyReportStart(change);\n            observable$$1.setNewValue(newValue);\n            if (notify) notifyListeners(this, change);\n            if (notifySpy) spyReportEnd();\n        }\n    };\n    ObservableMap.prototype._addValue = function (name, newValue) {\n        var _this = this;\n        runInTransaction(function () {\n            var observable$$1 = _this._data[name] = new ObservableValue(newValue, _this.enhancer, _this.name + \".\" + name, false);\n            newValue = observable$$1.value; // value might have been changed\n            _this._updateHasMapEntry(name, true);\n            _this._keys.push(name);\n        });\n        var notifySpy = isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy ? {\n            type: \"add\",\n            object: this,\n            name: name,\n            newValue: newValue\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        if (notify) notifyListeners(this, change);\n        if (notifySpy) spyReportEnd();\n    };\n    ObservableMap.prototype.get = function (key) {\n        key = \"\" + key;\n        if (this.has(key)) return this.dehanceValue(this._data[key].get());\n        return this.dehanceValue(undefined);\n    };\n    ObservableMap.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) {\n            return this.dehancer(value);\n        }\n        return value;\n    };\n    ObservableMap.prototype.keys = function () {\n        return arrayAsIterator(this._keys.slice());\n    };\n    ObservableMap.prototype.values = function () {\n        return arrayAsIterator(this._keys.map(this.get, this));\n    };\n    ObservableMap.prototype.entries = function () {\n        var _this = this;\n        return arrayAsIterator(this._keys.map(function (key) {\n            return [key, _this.get(key)];\n        }));\n    };\n    ObservableMap.prototype.forEach = function (callback, thisArg) {\n        var _this = this;\n        this.keys().forEach(function (key) {\n            return callback.call(thisArg, _this.get(key), key, _this);\n        });\n    };\n    /** Merge another object into this object, returns this. */\n    ObservableMap.prototype.merge = function (other) {\n        var _this = this;\n        if (isObservableMap(other)) {\n            other = other.toJS();\n        }\n        runInTransaction(function () {\n            if (isPlainObject(other)) Object.keys(other).forEach(function (key) {\n                return _this.set(key, other[key]);\n            });else if (Array.isArray(other)) other.forEach(function (_a) {\n                var key = _a[0],\n                    value = _a[1];\n                return _this.set(key, value);\n            });else if (isES6Map(other)) other.forEach(function (value, key) {\n                return _this.set(key, value);\n            });else if (other !== null && other !== undefined) fail(\"Cannot initialize map from \" + other);\n        });\n        return this;\n    };\n    ObservableMap.prototype.clear = function () {\n        var _this = this;\n        runInTransaction(function () {\n            untracked(function () {\n                _this.keys().forEach(_this.delete, _this);\n            });\n        });\n    };\n    ObservableMap.prototype.replace = function (values) {\n        var _this = this;\n        runInTransaction(function () {\n            _this.clear();\n            _this.merge(values);\n        });\n        return this;\n    };\n    Object.defineProperty(ObservableMap.prototype, \"size\", {\n        get: function get() {\n            return this._keys.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Returns a shallow non observable object clone of this map.\n     * Note that the values migth still be observable. For a deep clone use mobx.toJS.\n     */\n    ObservableMap.prototype.toJS = function () {\n        var _this = this;\n        var res = {};\n        this.keys().forEach(function (key) {\n            return res[key] = _this.get(key);\n        });\n        return res;\n    };\n    ObservableMap.prototype.toJSON = function () {\n        // Used by JSON.stringify\n        return this.toJS();\n    };\n    ObservableMap.prototype.isValidKey = function (key) {\n        if (key === null || key === undefined) return false;\n        if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"boolean\") return true;\n        return false;\n    };\n    ObservableMap.prototype.assertValidKey = function (key) {\n        if (!this.isValidKey(key)) throw new Error(\"[mobx.map] Invalid key: '\" + key + \"', only strings, numbers and booleans are accepted as key in observable maps.\");\n    };\n    ObservableMap.prototype.toString = function () {\n        var _this = this;\n        return this.name + \"[{ \" + this.keys().map(function (key) {\n            return key + \": \" + (\"\" + _this.get(key));\n        }).join(\", \") + \" }]\";\n    };\n    /**\n     * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\n     * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\n     * for callback details\n     */\n    ObservableMap.prototype.observe = function (listener, fireImmediately) {\n        invariant(fireImmediately !== true, getMessage(\"m033\"));\n        return registerListener(this, listener);\n    };\n    ObservableMap.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    return ObservableMap;\n}();\ndeclareIterator(ObservableMap.prototype, function () {\n    return this.entries();\n});\nfunction map(initialValues) {\n    deprecated(\"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead\");\n    return observable.map(initialValues);\n}\n/* 'var' fixes small-build issue */\nvar isObservableMap = createInstanceofPredicate(\"ObservableMap\", ObservableMap);\n\nvar EMPTY_ARRAY = [];\nObject.freeze(EMPTY_ARRAY);\nfunction getGlobal() {\n    return global;\n}\nfunction getNextId() {\n    return ++globalState.mobxGuid;\n}\nfunction fail(message, thing) {\n    invariant(false, message, thing);\n    throw \"X\"; // unreachable\n}\nfunction invariant(check, message, thing) {\n    if (!check) throw new Error(\"[mobx] Invariant failed: \" + message + (thing ? \" in '\" + thing + \"'\" : \"\"));\n}\n/**\n * Prints a deprecation message, but only one time.\n * Returns false if the deprecated message was already printed before\n */\nvar deprecatedMessages = [];\nfunction deprecated(msg) {\n    if (deprecatedMessages.indexOf(msg) !== -1) return false;\n    deprecatedMessages.push(msg);\n    console.error(\"[mobx] Deprecated: \" + msg);\n    return true;\n}\n/**\n * Makes sure that the provided function is invoked at most once.\n */\nfunction once(func) {\n    var invoked = false;\n    return function () {\n        if (invoked) return;\n        invoked = true;\n        return func.apply(this, arguments);\n    };\n}\nvar noop = function noop() {};\nfunction unique(list) {\n    var res = [];\n    list.forEach(function (item) {\n        if (res.indexOf(item) === -1) res.push(item);\n    });\n    return res;\n}\nfunction joinStrings(things, limit, separator) {\n    if (limit === void 0) {\n        limit = 100;\n    }\n    if (separator === void 0) {\n        separator = \" - \";\n    }\n    if (!things) return \"\";\n    var sliced = things.slice(0, limit);\n    return \"\" + sliced.join(separator) + (things.length > limit ? \" (... and \" + (things.length - limit) + \"more)\" : \"\");\n}\nfunction isObject(value) {\n    return value !== null && (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\";\n}\nfunction isPlainObject(value) {\n    if (value === null || (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) !== \"object\") return false;\n    var proto = Object.getPrototypeOf(value);\n    return proto === Object.prototype || proto === null;\n}\nfunction objectAssign() {\n    var res = arguments[0];\n    for (var i = 1, l = arguments.length; i < l; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n            if (hasOwnProperty(source, key)) {\n                res[key] = source[key];\n            }\n        }\n    }\n    return res;\n}\nvar prototypeHasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(object, propName) {\n    return prototypeHasOwnProperty.call(object, propName);\n}\nfunction makeNonEnumerable(object, propNames) {\n    for (var i = 0; i < propNames.length; i++) {\n        addHiddenProp(object, propNames[i], object[propNames[i]]);\n    }\n}\nfunction addHiddenProp(object, propName, value) {\n    Object.defineProperty(object, propName, {\n        enumerable: false,\n        writable: true,\n        configurable: true,\n        value: value\n    });\n}\nfunction addHiddenFinalProp(object, propName, value) {\n    Object.defineProperty(object, propName, {\n        enumerable: false,\n        writable: false,\n        configurable: true,\n        value: value\n    });\n}\nfunction isPropertyConfigurable(object, prop) {\n    var descriptor = Object.getOwnPropertyDescriptor(object, prop);\n    return !descriptor || descriptor.configurable !== false && descriptor.writable !== false;\n}\nfunction assertPropertyConfigurable(object, prop) {\n    invariant(isPropertyConfigurable(object, prop), \"Cannot make property '\" + prop + \"' observable, it is not configurable and writable in the target object\");\n}\nfunction getEnumerableKeys(obj) {\n    var res = [];\n    for (var key in obj) {\n        res.push(key);\n    }return res;\n}\n/**\n * Naive deepEqual. Doesn't check for prototype, non-enumerable or out-of-range properties on arrays.\n * If you have such a case, you probably should use this function but something fancier :).\n */\nfunction deepEqual(a, b) {\n    if (a === null && b === null) return true;\n    if (a === undefined && b === undefined) return true;\n    if ((typeof a === \"undefined\" ? \"undefined\" : _typeof(a)) !== \"object\") return a === b;\n    var aIsArray = isArrayLike(a);\n    var aIsMap = isMapLike(a);\n    if (aIsArray !== isArrayLike(b)) {\n        return false;\n    } else if (aIsMap !== isMapLike(b)) {\n        return false;\n    } else if (aIsArray) {\n        if (a.length !== b.length) return false;\n        for (var i = a.length - 1; i >= 0; i--) {\n            if (!deepEqual(a[i], b[i])) return false;\n        }return true;\n    } else if (aIsMap) {\n        if (a.size !== b.size) return false;\n        var equals_1 = true;\n        a.forEach(function (value, key) {\n            equals_1 = equals_1 && deepEqual(b.get(key), value);\n        });\n        return equals_1;\n    } else if ((typeof a === \"undefined\" ? \"undefined\" : _typeof(a)) === \"object\" && (typeof b === \"undefined\" ? \"undefined\" : _typeof(b)) === \"object\") {\n        if (a === null || b === null) return false;\n        if (isMapLike(a) && isMapLike(b)) {\n            if (a.size !== b.size) return false;\n            // Freaking inefficient.... Create PR if you run into this :) Much appreciated!\n            return deepEqual(observable.shallowMap(a).entries(), observable.shallowMap(b).entries());\n        }\n        if (getEnumerableKeys(a).length !== getEnumerableKeys(b).length) return false;\n        for (var prop in a) {\n            if (!(prop in b)) return false;\n            if (!deepEqual(a[prop], b[prop])) return false;\n        }\n        return true;\n    }\n    return false;\n}\nfunction createInstanceofPredicate(name, clazz) {\n    var propName = \"isMobX\" + name;\n    clazz.prototype[propName] = true;\n    return function (x) {\n        return isObject(x) && x[propName] === true;\n    };\n}\n/**\n * Returns whether the argument is an array, disregarding observability.\n */\nfunction isArrayLike(x) {\n    return Array.isArray(x) || isObservableArray(x);\n}\nfunction isMapLike(x) {\n    return isES6Map(x) || isObservableMap(x);\n}\nfunction isES6Map(thing) {\n    if (getGlobal().Map !== undefined && thing instanceof getGlobal().Map) return true;\n    return false;\n}\nfunction primitiveSymbol() {\n    return typeof Symbol === \"function\" && Symbol.toPrimitive || \"@@toPrimitive\";\n}\nfunction toPrimitive(value) {\n    return value === null ? null : (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\" ? \"\" + value : value;\n}\n\n/**\n * These values will persist if global state is reset\n */\nvar persistentKeys = [\"mobxGuid\", \"resetId\", \"spyListeners\", \"strictMode\", \"runId\"];\nvar MobXGlobals = function () {\n    function MobXGlobals() {\n        /**\n         * MobXGlobals version.\n         * MobX compatiblity with other versions loaded in memory as long as this version matches.\n         * It indicates that the global state still stores similar information\n         */\n        this.version = 5;\n        /**\n         * Currently running derivation\n         */\n        this.trackingDerivation = null;\n        /**\n         * Are we running a computation currently? (not a reaction)\n         */\n        this.computationDepth = 0;\n        /**\n         * Each time a derivation is tracked, it is assigned a unique run-id\n         */\n        this.runId = 0;\n        /**\n         * 'guid' for general purpose. Will be persisted amongst resets.\n         */\n        this.mobxGuid = 0;\n        /**\n         * Are we in a batch block? (and how many of them)\n         */\n        this.inBatch = 0;\n        /**\n         * Observables that don't have observers anymore, and are about to be\n         * suspended, unless somebody else accesses it in the same batch\n         *\n         * @type {IObservable[]}\n         */\n        this.pendingUnobservations = [];\n        /**\n         * List of scheduled, not yet executed, reactions.\n         */\n        this.pendingReactions = [];\n        /**\n         * Are we currently processing reactions?\n         */\n        this.isRunningReactions = false;\n        /**\n         * Is it allowed to change observables at this point?\n         * In general, MobX doesn't allow that when running computations and React.render.\n         * To ensure that those functions stay pure.\n         */\n        this.allowStateChanges = true;\n        /**\n         * If strict mode is enabled, state changes are by default not allowed\n         */\n        this.strictMode = false;\n        /**\n         * Used by createTransformer to detect that the global state has been reset.\n         */\n        this.resetId = 0;\n        /**\n         * Spy callbacks\n         */\n        this.spyListeners = [];\n        /**\n         * Globally attached error handlers that react specifically to errors in reactions\n         */\n        this.globalReactionErrorHandlers = [];\n    }\n    return MobXGlobals;\n}();\nvar globalState = new MobXGlobals();\nvar shareGlobalStateCalled = false;\nvar runInIsolationCalled = false;\nvar warnedAboutMultipleInstances = false;\n{\n    var global_1 = getGlobal();\n    if (!global_1.__mobxInstanceCount) {\n        global_1.__mobxInstanceCount = 1;\n    } else {\n        global_1.__mobxInstanceCount++;\n        setTimeout(function () {\n            if (!shareGlobalStateCalled && !runInIsolationCalled && !warnedAboutMultipleInstances) {\n                warnedAboutMultipleInstances = true;\n                console.warn(\"[mobx] Warning: there are multiple mobx instances active. This might lead to unexpected results. See https://github.com/mobxjs/mobx/issues/1082 for details.\");\n            }\n        });\n    }\n}\nfunction isolateGlobalState() {\n    runInIsolationCalled = true;\n    getGlobal().__mobxInstanceCount--;\n}\nfunction shareGlobalState() {\n    // TODO: remove in 4.0; just use peer dependencies instead.\n    deprecated(\"Using `shareGlobalState` is not recommended, use peer dependencies instead. See https://github.com/mobxjs/mobx/issues/1082 for details.\");\n    shareGlobalStateCalled = true;\n    var global = getGlobal();\n    var ownState = globalState;\n    /**\n     * Backward compatibility check\n     */\n    if (global.__mobservableTrackingStack || global.__mobservableViewStack) throw new Error(\"[mobx] An incompatible version of mobservable is already loaded.\");\n    if (global.__mobxGlobal && global.__mobxGlobal.version !== ownState.version) throw new Error(\"[mobx] An incompatible version of mobx is already loaded.\");\n    if (global.__mobxGlobal) globalState = global.__mobxGlobal;else global.__mobxGlobal = ownState;\n}\nfunction getGlobalState() {\n    return globalState;\n}\n\n/**\n * For testing purposes only; this will break the internal state of existing observables,\n * but can be used to get back at a stable state after throwing errors\n */\nfunction resetGlobalState() {\n    globalState.resetId++;\n    var defaultGlobals = new MobXGlobals();\n    for (var key in defaultGlobals) {\n        if (persistentKeys.indexOf(key) === -1) globalState[key] = defaultGlobals[key];\n    }globalState.allowStateChanges = !globalState.strictMode;\n}\n\nfunction hasObservers(observable) {\n    return observable.observers && observable.observers.length > 0;\n}\nfunction getObservers(observable) {\n    return observable.observers;\n}\nfunction addObserver(observable, node) {\n    // invariant(node.dependenciesState !== -1, \"INTERNAL ERROR, can add only dependenciesState !== -1\");\n    // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR add already added node\");\n    // invariantObservers(observable);\n    var l = observable.observers.length;\n    if (l) {\n        observable.observersIndexes[node.__mapid] = l;\n    }\n    observable.observers[l] = node;\n    if (observable.lowestObserverState > node.dependenciesState) observable.lowestObserverState = node.dependenciesState;\n    // invariantObservers(observable);\n    // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR didnt add node\");\n}\nfunction removeObserver(observable, node) {\n    // invariant(globalState.inBatch > 0, \"INTERNAL ERROR, remove should be called only inside batch\");\n    // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR remove already removed node\");\n    // invariantObservers(observable);\n    if (observable.observers.length === 1) {\n        // deleting last observer\n        observable.observers.length = 0;\n        queueForUnobservation(observable);\n    } else {\n        // deleting from _observersIndexes is straight forward, to delete from _observers, let's swap `node` with last element\n        var list = observable.observers;\n        var map = observable.observersIndexes;\n        var filler = list.pop(); // get last element, which should fill the place of `node`, so the array doesnt have holes\n        if (filler !== node) {\n            var index = map[node.__mapid] || 0; // getting index of `node`. this is the only place we actually use map.\n            if (index) {\n                map[filler.__mapid] = index;\n            } else {\n                delete map[filler.__mapid];\n            }\n            list[index] = filler;\n        }\n        delete map[node.__mapid];\n    }\n    // invariantObservers(observable);\n    // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR remove already removed node2\");\n}\nfunction queueForUnobservation(observable) {\n    if (!observable.isPendingUnobservation) {\n        // invariant(globalState.inBatch > 0, \"INTERNAL ERROR, remove should be called only inside batch\");\n        // invariant(observable._observers.length === 0, \"INTERNAL ERROR, shuold only queue for unobservation unobserved observables\");\n        observable.isPendingUnobservation = true;\n        globalState.pendingUnobservations.push(observable);\n    }\n}\n/**\n * Batch starts a transaction, at least for purposes of memoizing ComputedValues when nothing else does.\n * During a batch `onBecomeUnobserved` will be called at most once per observable.\n * Avoids unnecessary recalculations.\n */\nfunction startBatch() {\n    globalState.inBatch++;\n}\nfunction endBatch() {\n    if (--globalState.inBatch === 0) {\n        runReactions();\n        // the batch is actually about to finish, all unobserving should happen here.\n        var list = globalState.pendingUnobservations;\n        for (var i = 0; i < list.length; i++) {\n            var observable = list[i];\n            observable.isPendingUnobservation = false;\n            if (observable.observers.length === 0) {\n                observable.onBecomeUnobserved();\n                // NOTE: onBecomeUnobserved might push to `pendingUnobservations`\n            }\n        }\n        globalState.pendingUnobservations = [];\n    }\n}\nfunction reportObserved(observable) {\n    var derivation = globalState.trackingDerivation;\n    if (derivation !== null) {\n        /**\n         * Simple optimization, give each derivation run an unique id (runId)\n         * Check if last time this observable was accessed the same runId is used\n         * if this is the case, the relation is already known\n         */\n        if (derivation.runId !== observable.lastAccessedBy) {\n            observable.lastAccessedBy = derivation.runId;\n            derivation.newObserving[derivation.unboundDepsCount++] = observable;\n        }\n    } else if (observable.observers.length === 0) {\n        queueForUnobservation(observable);\n    }\n}\n/**\n * NOTE: current propagation mechanism will in case of self reruning autoruns behave unexpectedly\n * It will propagate changes to observers from previous run\n * It's hard or maybe impossible (with reasonable perf) to get it right with current approach\n * Hopefully self reruning autoruns aren't a feature people should depend on\n * Also most basic use cases should be ok\n */\n// Called by Atom when its value changes\nfunction propagateChanged(observable) {\n    // invariantLOS(observable, \"changed start\");\n    if (observable.lowestObserverState === IDerivationState.STALE) return;\n    observable.lowestObserverState = IDerivationState.STALE;\n    var observers = observable.observers;\n    var i = observers.length;\n    while (i--) {\n        var d = observers[i];\n        if (d.dependenciesState === IDerivationState.UP_TO_DATE) d.onBecomeStale();\n        d.dependenciesState = IDerivationState.STALE;\n    }\n    // invariantLOS(observable, \"changed end\");\n}\n// Called by ComputedValue when it recalculate and its value changed\nfunction propagateChangeConfirmed(observable) {\n    // invariantLOS(observable, \"confirmed start\");\n    if (observable.lowestObserverState === IDerivationState.STALE) return;\n    observable.lowestObserverState = IDerivationState.STALE;\n    var observers = observable.observers;\n    var i = observers.length;\n    while (i--) {\n        var d = observers[i];\n        if (d.dependenciesState === IDerivationState.POSSIBLY_STALE) d.dependenciesState = IDerivationState.STALE;else if (d.dependenciesState === IDerivationState.UP_TO_DATE) observable.lowestObserverState = IDerivationState.UP_TO_DATE;\n    }\n    // invariantLOS(observable, \"confirmed end\");\n}\n// Used by computed when its dependency changed, but we don't wan't to immediately recompute.\nfunction propagateMaybeChanged(observable) {\n    // invariantLOS(observable, \"maybe start\");\n    if (observable.lowestObserverState !== IDerivationState.UP_TO_DATE) return;\n    observable.lowestObserverState = IDerivationState.POSSIBLY_STALE;\n    var observers = observable.observers;\n    var i = observers.length;\n    while (i--) {\n        var d = observers[i];\n        if (d.dependenciesState === IDerivationState.UP_TO_DATE) {\n            d.dependenciesState = IDerivationState.POSSIBLY_STALE;\n            d.onBecomeStale();\n        }\n    }\n    // invariantLOS(observable, \"maybe end\");\n}\n\nvar IDerivationState;\n(function (IDerivationState) {\n    // before being run or (outside batch and not being observed)\n    // at this point derivation is not holding any data about dependency tree\n    IDerivationState[IDerivationState[\"NOT_TRACKING\"] = -1] = \"NOT_TRACKING\";\n    // no shallow dependency changed since last computation\n    // won't recalculate derivation\n    // this is what makes mobx fast\n    IDerivationState[IDerivationState[\"UP_TO_DATE\"] = 0] = \"UP_TO_DATE\";\n    // some deep dependency changed, but don't know if shallow dependency changed\n    // will require to check first if UP_TO_DATE or POSSIBLY_STALE\n    // currently only ComputedValue will propagate POSSIBLY_STALE\n    //\n    // having this state is second big optimization:\n    // don't have to recompute on every dependency change, but only when it's needed\n    IDerivationState[IDerivationState[\"POSSIBLY_STALE\"] = 1] = \"POSSIBLY_STALE\";\n    // shallow dependency changed\n    // will need to recompute when it's needed\n    IDerivationState[IDerivationState[\"STALE\"] = 2] = \"STALE\";\n})(IDerivationState || (exports.IDerivationState = IDerivationState = {}));\nvar CaughtException = function () {\n    function CaughtException(cause) {\n        this.cause = cause;\n        // Empty\n    }\n    return CaughtException;\n}();\nfunction isCaughtException(e) {\n    return e instanceof CaughtException;\n}\n/**\n * Finds out whether any dependency of the derivation has actually changed.\n * If dependenciesState is 1 then it will recalculate dependencies,\n * if any dependency changed it will propagate it by changing dependenciesState to 2.\n *\n * By iterating over the dependencies in the same order that they were reported and\n * stopping on the first change, all the recalculations are only called for ComputedValues\n * that will be tracked by derivation. That is because we assume that if the first x\n * dependencies of the derivation doesn't change then the derivation should run the same way\n * up until accessing x-th dependency.\n */\nfunction shouldCompute(derivation) {\n    switch (derivation.dependenciesState) {\n        case IDerivationState.UP_TO_DATE:\n            return false;\n        case IDerivationState.NOT_TRACKING:\n        case IDerivationState.STALE:\n            return true;\n        case IDerivationState.POSSIBLY_STALE:\n            {\n                var prevUntracked = untrackedStart(); // no need for those computeds to be reported, they will be picked up in trackDerivedFunction.\n                var obs = derivation.observing,\n                    l = obs.length;\n                for (var i = 0; i < l; i++) {\n                    var obj = obs[i];\n                    if (isComputedValue(obj)) {\n                        try {\n                            obj.get();\n                        } catch (e) {\n                            // we are not interested in the value *or* exception at this moment, but if there is one, notify all\n                            untrackedEnd(prevUntracked);\n                            return true;\n                        }\n                        // if ComputedValue `obj` actually changed it will be computed and propagated to its observers.\n                        // and `derivation` is an observer of `obj`\n                        if (derivation.dependenciesState === IDerivationState.STALE) {\n                            untrackedEnd(prevUntracked);\n                            return true;\n                        }\n                    }\n                }\n                changeDependenciesStateTo0(derivation);\n                untrackedEnd(prevUntracked);\n                return false;\n            }\n    }\n}\nfunction isComputingDerivation() {\n    return globalState.trackingDerivation !== null; // filter out actions inside computations\n}\nfunction checkIfStateModificationsAreAllowed(atom) {\n    var hasObservers$$1 = atom.observers.length > 0;\n    // Should never be possible to change an observed observable from inside computed, see #798\n    if (globalState.computationDepth > 0 && hasObservers$$1) fail(getMessage(\"m031\") + atom.name);\n    // Should not be possible to change observed state outside strict mode, except during initialization, see #563\n    if (!globalState.allowStateChanges && hasObservers$$1) fail(getMessage(globalState.strictMode ? \"m030a\" : \"m030b\") + atom.name);\n}\n/**\n * Executes the provided function `f` and tracks which observables are being accessed.\n * The tracking information is stored on the `derivation` object and the derivation is registered\n * as observer of any of the accessed observables.\n */\nfunction trackDerivedFunction(derivation, f, context) {\n    // pre allocate array allocation + room for variation in deps\n    // array will be trimmed by bindDependencies\n    changeDependenciesStateTo0(derivation);\n    derivation.newObserving = new Array(derivation.observing.length + 100);\n    derivation.unboundDepsCount = 0;\n    derivation.runId = ++globalState.runId;\n    var prevTracking = globalState.trackingDerivation;\n    globalState.trackingDerivation = derivation;\n    var result;\n    try {\n        result = f.call(context);\n    } catch (e) {\n        result = new CaughtException(e);\n    }\n    globalState.trackingDerivation = prevTracking;\n    bindDependencies(derivation);\n    return result;\n}\n/**\n * diffs newObserving with observing.\n * update observing to be newObserving with unique observables\n * notify observers that become observed/unobserved\n */\nfunction bindDependencies(derivation) {\n    // invariant(derivation.dependenciesState !== IDerivationState.NOT_TRACKING, \"INTERNAL ERROR bindDependencies expects derivation.dependenciesState !== -1\");\n    var prevObserving = derivation.observing;\n    var observing = derivation.observing = derivation.newObserving;\n    var lowestNewObservingDerivationState = IDerivationState.UP_TO_DATE;\n    derivation.newObserving = null; // newObserving shouldn't be needed outside tracking\n    // Go through all new observables and check diffValue: (this list can contain duplicates):\n    //   0: first occurrence, change to 1 and keep it\n    //   1: extra occurrence, drop it\n    var i0 = 0,\n        l = derivation.unboundDepsCount;\n    for (var i = 0; i < l; i++) {\n        var dep = observing[i];\n        if (dep.diffValue === 0) {\n            dep.diffValue = 1;\n            if (i0 !== i) observing[i0] = dep;\n            i0++;\n        }\n        // Upcast is 'safe' here, because if dep is IObservable, `dependenciesState` will be undefined,\n        // not hitting the condition\n        if (dep.dependenciesState > lowestNewObservingDerivationState) {\n            lowestNewObservingDerivationState = dep.dependenciesState;\n        }\n    }\n    observing.length = i0;\n    // Go through all old observables and check diffValue: (it is unique after last bindDependencies)\n    //   0: it's not in new observables, unobserve it\n    //   1: it keeps being observed, don't want to notify it. change to 0\n    l = prevObserving.length;\n    while (l--) {\n        var dep = prevObserving[l];\n        if (dep.diffValue === 0) {\n            removeObserver(dep, derivation);\n        }\n        dep.diffValue = 0;\n    }\n    // Go through all new observables and check diffValue: (now it should be unique)\n    //   0: it was set to 0 in last loop. don't need to do anything.\n    //   1: it wasn't observed, let's observe it. set back to 0\n    while (i0--) {\n        var dep = observing[i0];\n        if (dep.diffValue === 1) {\n            dep.diffValue = 0;\n            addObserver(dep, derivation);\n        }\n    }\n    // Some new observed derivations might become stale during this derivation computation\n    // so say had no chance to propagate staleness (#916)\n    if (lowestNewObservingDerivationState !== IDerivationState.UP_TO_DATE) {\n        derivation.dependenciesState = lowestNewObservingDerivationState;\n        derivation.onBecomeStale();\n    }\n}\nfunction clearObserving(derivation) {\n    // invariant(globalState.inBatch > 0, \"INTERNAL ERROR clearObserving should be called only inside batch\");\n    var obs = derivation.observing;\n    derivation.observing = [];\n    var i = obs.length;\n    while (i--) {\n        removeObserver(obs[i], derivation);\n    }derivation.dependenciesState = IDerivationState.NOT_TRACKING;\n}\nfunction untracked(action) {\n    var prev = untrackedStart();\n    var res = action();\n    untrackedEnd(prev);\n    return res;\n}\nfunction untrackedStart() {\n    var prev = globalState.trackingDerivation;\n    globalState.trackingDerivation = null;\n    return prev;\n}\nfunction untrackedEnd(prev) {\n    globalState.trackingDerivation = prev;\n}\n/**\n * needed to keep `lowestObserverState` correct. when changing from (2 or 1) to 0\n *\n */\nfunction changeDependenciesStateTo0(derivation) {\n    if (derivation.dependenciesState === IDerivationState.UP_TO_DATE) return;\n    derivation.dependenciesState = IDerivationState.UP_TO_DATE;\n    var obs = derivation.observing;\n    var i = obs.length;\n    while (i--) {\n        obs[i].lowestObserverState = IDerivationState.UP_TO_DATE;\n    }\n}\n\nvar Reaction = function () {\n    function Reaction(name, onInvalidate) {\n        if (name === void 0) {\n            name = \"Reaction@\" + getNextId();\n        }\n        this.name = name;\n        this.onInvalidate = onInvalidate;\n        this.observing = []; // nodes we are looking at. Our value depends on these nodes\n        this.newObserving = [];\n        this.dependenciesState = IDerivationState.NOT_TRACKING;\n        this.diffValue = 0;\n        this.runId = 0;\n        this.unboundDepsCount = 0;\n        this.__mapid = \"#\" + getNextId();\n        this.isDisposed = false;\n        this._isScheduled = false;\n        this._isTrackPending = false;\n        this._isRunning = false;\n    }\n    Reaction.prototype.onBecomeStale = function () {\n        this.schedule();\n    };\n    Reaction.prototype.schedule = function () {\n        if (!this._isScheduled) {\n            this._isScheduled = true;\n            globalState.pendingReactions.push(this);\n            runReactions();\n        }\n    };\n    Reaction.prototype.isScheduled = function () {\n        return this._isScheduled;\n    };\n    /**\n     * internal, use schedule() if you intend to kick off a reaction\n     */\n    Reaction.prototype.runReaction = function () {\n        if (!this.isDisposed) {\n            startBatch();\n            this._isScheduled = false;\n            if (shouldCompute(this)) {\n                this._isTrackPending = true;\n                this.onInvalidate();\n                if (this._isTrackPending && isSpyEnabled()) {\n                    // onInvalidate didn't trigger track right away..\n                    spyReport({\n                        object: this,\n                        type: \"scheduled-reaction\"\n                    });\n                }\n            }\n            endBatch();\n        }\n    };\n    Reaction.prototype.track = function (fn) {\n        startBatch();\n        var notify = isSpyEnabled();\n        var startTime;\n        if (notify) {\n            startTime = Date.now();\n            spyReportStart({\n                object: this,\n                type: \"reaction\",\n                fn: fn\n            });\n        }\n        this._isRunning = true;\n        var result = trackDerivedFunction(this, fn, undefined);\n        this._isRunning = false;\n        this._isTrackPending = false;\n        if (this.isDisposed) {\n            // disposed during last run. Clean up everything that was bound after the dispose call.\n            clearObserving(this);\n        }\n        if (isCaughtException(result)) this.reportExceptionInDerivation(result.cause);\n        if (notify) {\n            spyReportEnd({\n                time: Date.now() - startTime\n            });\n        }\n        endBatch();\n    };\n    Reaction.prototype.reportExceptionInDerivation = function (error) {\n        var _this = this;\n        if (this.errorHandler) {\n            this.errorHandler(error, this);\n            return;\n        }\n        var message = \"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '\" + this;\n        var messageToUser = getMessage(\"m037\");\n        console.error(message || messageToUser /* latter will not be true, make sure uglify doesn't remove */, error);\n        /** If debugging brought you here, please, read the above message :-). Tnx! */\n        if (isSpyEnabled()) {\n            spyReport({\n                type: \"error\",\n                message: message,\n                error: error,\n                object: this\n            });\n        }\n        globalState.globalReactionErrorHandlers.forEach(function (f) {\n            return f(error, _this);\n        });\n    };\n    Reaction.prototype.dispose = function () {\n        if (!this.isDisposed) {\n            this.isDisposed = true;\n            if (!this._isRunning) {\n                startBatch();\n                clearObserving(this); // if disposed while running, clean up later. Maybe not optimal, but rare case\n                endBatch();\n            }\n        }\n    };\n    Reaction.prototype.getDisposer = function () {\n        var r = this.dispose.bind(this);\n        r.$mobx = this;\n        r.onError = registerErrorHandler;\n        return r;\n    };\n    Reaction.prototype.toString = function () {\n        return \"Reaction[\" + this.name + \"]\";\n    };\n    Reaction.prototype.whyRun = function () {\n        var observing = unique(this._isRunning ? this.newObserving : this.observing).map(function (dep) {\n            return dep.name;\n        });\n        return \"\\nWhyRun? reaction '\" + this.name + \"':\\n * Status: [\" + (this.isDisposed ? \"stopped\" : this._isRunning ? \"running\" : this.isScheduled() ? \"scheduled\" : \"idle\") + \"]\\n * This reaction will re-run if any of the following observables changes:\\n    \" + joinStrings(observing) + \"\\n    \" + (this._isRunning ? \" (... or any observable accessed during the remainder of the current run)\" : \"\") + \"\\n\\t\" + getMessage(\"m038\") + \"\\n\";\n    };\n    return Reaction;\n}();\nfunction registerErrorHandler(handler) {\n    invariant(this && this.$mobx && isReaction(this.$mobx), \"Invalid `this`\");\n    invariant(!this.$mobx.errorHandler, \"Only one onErrorHandler can be registered\");\n    this.$mobx.errorHandler = handler;\n}\nfunction onReactionError(handler) {\n    globalState.globalReactionErrorHandlers.push(handler);\n    return function () {\n        var idx = globalState.globalReactionErrorHandlers.indexOf(handler);\n        if (idx >= 0) globalState.globalReactionErrorHandlers.splice(idx, 1);\n    };\n}\n/**\n * Magic number alert!\n * Defines within how many times a reaction is allowed to re-trigger itself\n * until it is assumed that this is gonna be a never ending loop...\n */\nvar MAX_REACTION_ITERATIONS = 100;\nvar reactionScheduler = function reactionScheduler(f) {\n    return f();\n};\nfunction runReactions() {\n    // Trampolining, if runReactions are already running, new reactions will be picked up\n    if (globalState.inBatch > 0 || globalState.isRunningReactions) return;\n    reactionScheduler(runReactionsHelper);\n}\nfunction runReactionsHelper() {\n    globalState.isRunningReactions = true;\n    var allReactions = globalState.pendingReactions;\n    var iterations = 0;\n    // While running reactions, new reactions might be triggered.\n    // Hence we work with two variables and check whether\n    // we converge to no remaining reactions after a while.\n    while (allReactions.length > 0) {\n        if (++iterations === MAX_REACTION_ITERATIONS) {\n            console.error(\"Reaction doesn't converge to a stable state after \" + MAX_REACTION_ITERATIONS + \" iterations.\" + (\" Probably there is a cycle in the reactive function: \" + allReactions[0]));\n            allReactions.splice(0); // clear reactions\n        }\n        var remainingReactions = allReactions.splice(0);\n        for (var i = 0, l = remainingReactions.length; i < l; i++) {\n            remainingReactions[i].runReaction();\n        }\n    }\n    globalState.isRunningReactions = false;\n}\nvar isReaction = createInstanceofPredicate(\"Reaction\", Reaction);\nfunction setReactionScheduler(fn) {\n    var baseScheduler = reactionScheduler;\n    reactionScheduler = function reactionScheduler(f) {\n        return fn(function () {\n            return baseScheduler(f);\n        });\n    };\n}\n\nfunction asReference(value) {\n    deprecated(\"asReference is deprecated, use observable.ref instead\");\n    return observable.ref(value);\n}\nfunction asStructure(value) {\n    deprecated(\"asStructure is deprecated. Use observable.struct, computed.struct or reaction options instead.\");\n    return observable.struct(value);\n}\nfunction asFlat(value) {\n    deprecated(\"asFlat is deprecated, use observable.shallow instead\");\n    return observable.shallow(value);\n}\nfunction asMap(data) {\n    deprecated(\"asMap is deprecated, use observable.map or observable.shallowMap instead\");\n    return observable.map(data || {});\n}\n\nfunction createComputedDecorator(equals) {\n    return createClassPropertyDecorator(function (target, name, _, __, originalDescriptor) {\n        invariant(typeof originalDescriptor !== \"undefined\", getMessage(\"m009\"));\n        invariant(typeof originalDescriptor.get === \"function\", getMessage(\"m010\"));\n        var adm = asObservableObject(target, \"\");\n        defineComputedProperty(adm, name, originalDescriptor.get, originalDescriptor.set, equals, false);\n    }, function (name) {\n        var observable = this.$mobx.values[name];\n        if (observable === undefined) return undefined;\n        return observable.get();\n    }, function (name, value) {\n        this.$mobx.values[name].set(value);\n    }, false, false);\n}\nvar computedDecorator = createComputedDecorator(comparer.default);\nvar computedStructDecorator = createComputedDecorator(comparer.structural);\n/**\n * Decorator for class properties: @computed get value() { return expr; }.\n * For legacy purposes also invokable as ES5 observable created: `computed(() => expr)`;\n */\nvar computed = function computed(arg1, arg2, arg3) {\n    if (typeof arg2 === \"string\") {\n        return computedDecorator.apply(null, arguments);\n    }\n    invariant(typeof arg1 === \"function\", getMessage(\"m011\"));\n    invariant(arguments.length < 3, getMessage(\"m012\"));\n    var opts = (typeof arg2 === \"undefined\" ? \"undefined\" : _typeof(arg2)) === \"object\" ? arg2 : {};\n    opts.setter = typeof arg2 === \"function\" ? arg2 : opts.setter;\n    var equals = opts.equals ? opts.equals : opts.compareStructural || opts.struct ? comparer.structural : comparer.default;\n    return new ComputedValue(arg1, opts.context, equals, opts.name || arg1.name || \"\", opts.setter);\n};\ncomputed.struct = computedStructDecorator;\ncomputed.equals = createComputedDecorator;\n\nfunction getAtom(thing, property) {\n    if ((typeof thing === \"undefined\" ? \"undefined\" : _typeof(thing)) === \"object\" && thing !== null) {\n        if (isObservableArray(thing)) {\n            invariant(property === undefined, getMessage(\"m036\"));\n            return thing.$mobx.atom;\n        }\n        if (isObservableMap(thing)) {\n            var anyThing = thing;\n            if (property === undefined) return getAtom(anyThing._keys);\n            var observable = anyThing._data[property] || anyThing._hasMap[property];\n            invariant(!!observable, \"the entry '\" + property + \"' does not exist in the observable map '\" + getDebugName(thing) + \"'\");\n            return observable;\n        }\n        // Initializers run lazily when transpiling to babel, so make sure they are run...\n        runLazyInitializers(thing);\n        if (property && !thing.$mobx) thing[property]; // See #1072 // TODO: remove in 4.0\n        if (isObservableObject(thing)) {\n            if (!property) return fail(\"please specify a property\");\n            var observable = thing.$mobx.values[property];\n            invariant(!!observable, \"no observable property '\" + property + \"' found on the observable object '\" + getDebugName(thing) + \"'\");\n            return observable;\n        }\n        if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) {\n            return thing;\n        }\n    } else if (typeof thing === \"function\") {\n        if (isReaction(thing.$mobx)) {\n            // disposer function\n            return thing.$mobx;\n        }\n    }\n    return fail(\"Cannot obtain atom from \" + thing);\n}\nfunction getAdministration(thing, property) {\n    invariant(thing, \"Expecting some object\");\n    if (property !== undefined) return getAdministration(getAtom(thing, property));\n    if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) return thing;\n    if (isObservableMap(thing)) return thing;\n    // Initializers run lazily when transpiling to babel, so make sure they are run...\n    runLazyInitializers(thing);\n    if (thing.$mobx) return thing.$mobx;\n    invariant(false, \"Cannot obtain administration from \" + thing);\n}\nfunction getDebugName(thing, property) {\n    var named;\n    if (property !== undefined) named = getAtom(thing, property);else if (isObservableObject(thing) || isObservableMap(thing)) named = getAdministration(thing);else named = getAtom(thing); // valid for arrays as well\n    return named.name;\n}\n\nfunction isComputed(value, property) {\n    if (value === null || value === undefined) return false;\n    if (property !== undefined) {\n        if (isObservableObject(value) === false) return false;\n        var atom = getAtom(value, property);\n        return isComputedValue(atom);\n    }\n    return isComputedValue(value);\n}\n\nfunction observe(thing, propOrCb, cbOrFire, fireImmediately) {\n    if (typeof cbOrFire === \"function\") return observeObservableProperty(thing, propOrCb, cbOrFire, fireImmediately);else return observeObservable(thing, propOrCb, cbOrFire);\n}\nfunction observeObservable(thing, listener, fireImmediately) {\n    return getAdministration(thing).observe(listener, fireImmediately);\n}\nfunction observeObservableProperty(thing, property, listener, fireImmediately) {\n    return getAdministration(thing, property).observe(listener, fireImmediately);\n}\n\nfunction intercept(thing, propOrHandler, handler) {\n    if (typeof handler === \"function\") return interceptProperty(thing, propOrHandler, handler);else return interceptInterceptable(thing, propOrHandler);\n}\nfunction interceptInterceptable(thing, handler) {\n    return getAdministration(thing).intercept(handler);\n}\nfunction interceptProperty(thing, property, handler) {\n    return getAdministration(thing, property).intercept(handler);\n}\n\n/**\n    * expr can be used to create temporarily views inside views.\n    * This can be improved to improve performance if a value changes often, but usually doesn't affect the outcome of an expression.\n    *\n    * In the following example the expression prevents that a component is rerender _each time_ the selection changes;\n    * instead it will only rerenders when the current todo is (de)selected.\n    *\n    * reactiveComponent((props) => {\n    *     const todo = props.todo;\n    *     const isSelected = mobx.expr(() => props.viewState.selection === todo);\n    *     return <div classname=\"{isSelected\" ? \"todo todo-selected\" : \"todo\"}>{todo.title}</div>\n    * });\n    *\n    */\nfunction expr(expr, scope) {\n    if (!isComputingDerivation()) console.warn(getMessage(\"m013\"));\n    // optimization: would be more efficient if the expr itself wouldn't be evaluated first on the next change, but just a 'changed' signal would be fired\n    return computed(expr, { context: scope }).get();\n}\n\nfunction toJS(source, detectCycles, __alreadySeen) {\n    if (detectCycles === void 0) {\n        detectCycles = true;\n    }\n    if (__alreadySeen === void 0) {\n        __alreadySeen = [];\n    }\n    // optimization: using ES6 map would be more efficient!\n    // optimization: lift this function outside toJS, this makes recursion expensive\n    function cache(value) {\n        if (detectCycles) __alreadySeen.push([source, value]);\n        return value;\n    }\n    if (isObservable(source)) {\n        if (detectCycles && __alreadySeen === null) __alreadySeen = [];\n        if (detectCycles && source !== null && (typeof source === \"undefined\" ? \"undefined\" : _typeof(source)) === \"object\") {\n            for (var i = 0, l = __alreadySeen.length; i < l; i++) {\n                if (__alreadySeen[i][0] === source) return __alreadySeen[i][1];\n            }\n        }\n        if (isObservableArray(source)) {\n            var res = cache([]);\n            var toAdd = source.map(function (value) {\n                return toJS(value, detectCycles, __alreadySeen);\n            });\n            res.length = toAdd.length;\n            for (var i = 0, l = toAdd.length; i < l; i++) {\n                res[i] = toAdd[i];\n            }return res;\n        }\n        if (isObservableObject(source)) {\n            var res = cache({});\n            for (var key in source) {\n                res[key] = toJS(source[key], detectCycles, __alreadySeen);\n            }return res;\n        }\n        if (isObservableMap(source)) {\n            var res_1 = cache({});\n            source.forEach(function (value, key) {\n                return res_1[key] = toJS(value, detectCycles, __alreadySeen);\n            });\n            return res_1;\n        }\n        if (isObservableValue(source)) return toJS(source.get(), detectCycles, __alreadySeen);\n    }\n    return source;\n}\n\nfunction createTransformer(transformer, onCleanup) {\n    invariant(typeof transformer === \"function\" && transformer.length < 2, \"createTransformer expects a function that accepts one argument\");\n    // Memoizes: object id -> reactive view that applies transformer to the object\n    var objectCache = {};\n    // If the resetId changes, we will clear the object cache, see #163\n    // This construction is used to avoid leaking refs to the objectCache directly\n    var resetId = globalState.resetId;\n    // Local transformer class specifically for this transformer\n    var Transformer = function (_super) {\n        __extends(Transformer, _super);\n        function Transformer(sourceIdentifier, sourceObject) {\n            var _this = _super.call(this, function () {\n                return transformer(sourceObject);\n            }, undefined, comparer.default, \"Transformer-\" + transformer.name + \"-\" + sourceIdentifier, undefined) || this;\n            _this.sourceIdentifier = sourceIdentifier;\n            _this.sourceObject = sourceObject;\n            return _this;\n        }\n        Transformer.prototype.onBecomeUnobserved = function () {\n            var lastValue = this.value;\n            _super.prototype.onBecomeUnobserved.call(this);\n            delete objectCache[this.sourceIdentifier];\n            if (onCleanup) onCleanup(lastValue, this.sourceObject);\n        };\n        return Transformer;\n    }(ComputedValue);\n    return function (object) {\n        if (resetId !== globalState.resetId) {\n            objectCache = {};\n            resetId = globalState.resetId;\n        }\n        var identifier = getMemoizationId(object);\n        var reactiveTransformer = objectCache[identifier];\n        if (reactiveTransformer) return reactiveTransformer.get();\n        // Not in cache; create a reactive view\n        reactiveTransformer = objectCache[identifier] = new Transformer(identifier, object);\n        return reactiveTransformer.get();\n    };\n}\nfunction getMemoizationId(object) {\n    if (typeof object === 'string' || typeof object === 'number') return object;\n    if (object === null || (typeof object === \"undefined\" ? \"undefined\" : _typeof(object)) !== \"object\") throw new Error(\"[mobx] transform expected some kind of object or primitive value, got: \" + object);\n    var tid = object.$transformId;\n    if (tid === undefined) {\n        tid = getNextId();\n        addHiddenProp(object, \"$transformId\", tid);\n    }\n    return tid;\n}\n\nfunction log(msg) {\n    console.log(msg);\n    return msg;\n}\nfunction whyRun(thing, prop) {\n    switch (arguments.length) {\n        case 0:\n            thing = globalState.trackingDerivation;\n            if (!thing) return log(getMessage(\"m024\"));\n            break;\n        case 2:\n            thing = getAtom(thing, prop);\n            break;\n    }\n    thing = getAtom(thing);\n    if (isComputedValue(thing)) return log(thing.whyRun());else if (isReaction(thing)) return log(thing.whyRun());\n    return fail(getMessage(\"m025\"));\n}\n\nfunction getDependencyTree(thing, property) {\n    return nodeToDependencyTree(getAtom(thing, property));\n}\nfunction nodeToDependencyTree(node) {\n    var result = {\n        name: node.name\n    };\n    if (node.observing && node.observing.length > 0) result.dependencies = unique(node.observing).map(nodeToDependencyTree);\n    return result;\n}\nfunction getObserverTree(thing, property) {\n    return nodeToObserverTree(getAtom(thing, property));\n}\nfunction nodeToObserverTree(node) {\n    var result = {\n        name: node.name\n    };\n    if (hasObservers(node)) result.observers = getObservers(node).map(nodeToObserverTree);\n    return result;\n}\n\nfunction interceptReads(thing, propOrHandler, handler) {\n    var target;\n    if (isObservableMap(thing) || isObservableArray(thing) || isObservableValue(thing)) {\n        target = getAdministration(thing);\n    } else if (isObservableObject(thing)) {\n        if (typeof propOrHandler !== \"string\") return fail(\"InterceptReads can only be used with a specific property, not with an object in general\");\n        target = getAdministration(thing, propOrHandler);\n    } else {\n        return fail(\"Expected observable map, object or array as first array\");\n    }\n    if (target.dehancer !== undefined) return fail(\"An intercept reader was already established\");\n    target.dehancer = typeof propOrHandler === \"function\" ? propOrHandler : handler;\n    return function () {\n        target.dehancer = undefined;\n    };\n}\n\n/**\n * (c) Michel Weststrate 2015 - 2016\n * MIT Licensed\n *\n * Welcome to the mobx sources! To get an global overview of how MobX internally works,\n * this is a good place to start:\n * https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.xvbh6qd74\n *\n * Source folders:\n * ===============\n *\n * - api/     Most of the public static methods exposed by the module can be found here.\n * - core/    Implementation of the MobX algorithm; atoms, derivations, reactions, dependency trees, optimizations. Cool stuff can be found here.\n * - types/   All the magic that is need to have observable objects, arrays and values is in this folder. Including the modifiers like `asFlat`.\n * - utils/   Utility stuff.\n *\n */\nvar extras = {\n    allowStateChanges: allowStateChanges,\n    deepEqual: deepEqual,\n    getAtom: getAtom,\n    getDebugName: getDebugName,\n    getDependencyTree: getDependencyTree,\n    getAdministration: getAdministration,\n    getGlobalState: getGlobalState,\n    getObserverTree: getObserverTree,\n    interceptReads: interceptReads,\n    isComputingDerivation: isComputingDerivation,\n    isSpyEnabled: isSpyEnabled,\n    onReactionError: onReactionError,\n    reserveArrayBuffer: reserveArrayBuffer,\n    resetGlobalState: resetGlobalState,\n    isolateGlobalState: isolateGlobalState,\n    shareGlobalState: shareGlobalState,\n    spyReport: spyReport,\n    spyReportEnd: spyReportEnd,\n    spyReportStart: spyReportStart,\n    setReactionScheduler: setReactionScheduler\n};\nvar everything = {\n    Reaction: Reaction,\n    untracked: untracked,\n    Atom: Atom, BaseAtom: BaseAtom,\n    useStrict: useStrict, isStrictModeEnabled: isStrictModeEnabled,\n    spy: spy,\n    comparer: comparer,\n    asReference: asReference, asFlat: asFlat, asStructure: asStructure, asMap: asMap,\n    isModifierDescriptor: isModifierDescriptor,\n    isObservableObject: isObservableObject,\n    isBoxedObservable: isObservableValue,\n    isObservableArray: isObservableArray,\n    ObservableMap: ObservableMap, isObservableMap: isObservableMap, map: map,\n    transaction: transaction,\n    observable: observable,\n    computed: computed,\n    isObservable: isObservable,\n    isComputed: isComputed,\n    extendObservable: extendObservable, extendShallowObservable: extendShallowObservable,\n    observe: observe,\n    intercept: intercept,\n    autorun: autorun, autorunAsync: autorunAsync, when: when, reaction: reaction,\n    action: action, isAction: isAction, runInAction: runInAction,\n    expr: expr,\n    toJS: toJS,\n    createTransformer: createTransformer,\n    whyRun: whyRun,\n    isArrayLike: isArrayLike,\n    extras: extras\n};\nvar warnedAboutDefaultExport = false;\nvar _loop_1 = function _loop_1(p) {\n    var val = everything[p];\n    Object.defineProperty(everything, p, {\n        get: function get() {\n            if (!warnedAboutDefaultExport) {\n                warnedAboutDefaultExport = true;\n                console.warn('Using default export (`import mobx from \\'mobx\\'`) is deprecated ' + 'and won’t work in mobx@4.0.0\\n' + 'Use `import * as mobx from \\'mobx\\'` instead');\n            }\n            return val;\n        }\n    });\n};\nfor (var p in everything) {\n    _loop_1(p);\n}\nif ((typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ === \"undefined\" ? \"undefined\" : _typeof(__MOBX_DEVTOOLS_GLOBAL_HOOK__)) === \"object\") {\n    __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({ spy: spy, extras: extras });\n}\n\nexports.extras = extras;\nexports.Reaction = Reaction;\nexports.untracked = untracked;\nexports.IDerivationState = IDerivationState;\nexports.Atom = Atom;\nexports.BaseAtom = BaseAtom;\nexports.useStrict = useStrict;\nexports.isStrictModeEnabled = isStrictModeEnabled;\nexports.spy = spy;\nexports.comparer = comparer;\nexports.asReference = asReference;\nexports.asFlat = asFlat;\nexports.asStructure = asStructure;\nexports.asMap = asMap;\nexports.isModifierDescriptor = isModifierDescriptor;\nexports.isObservableObject = isObservableObject;\nexports.isBoxedObservable = isObservableValue;\nexports.isObservableArray = isObservableArray;\nexports.ObservableMap = ObservableMap;\nexports.isObservableMap = isObservableMap;\nexports.map = map;\nexports.transaction = transaction;\nexports.observable = observable;\nexports.IObservableFactories = IObservableFactories;\nexports.computed = computed;\nexports.isObservable = isObservable;\nexports.isComputed = isComputed;\nexports.extendObservable = extendObservable;\nexports.extendShallowObservable = extendShallowObservable;\nexports.observe = observe;\nexports.intercept = intercept;\nexports.autorun = autorun;\nexports.autorunAsync = autorunAsync;\nexports.when = when;\nexports.reaction = reaction;\nexports.action = action;\nexports.isAction = isAction;\nexports.runInAction = runInAction;\nexports.expr = expr;\nexports.toJS = toJS;\nexports.createTransformer = createTransformer;\nexports.whyRun = whyRun;\nexports.isArrayLike = isArrayLike;\nexports.default = everything;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4)))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _icons = __webpack_require__(6);\n\nvar _constants = __webpack_require__(0);\n\nvar _translator = __webpack_require__(7);\n\nvar translator = _interopRequireWildcard(_translator);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar culture = /^([^-]{1,3})(-|$)/;\nvar $ = function $(x) {\n  return (0, translator.default)(x);\n};\n\nfunction renderHeader(_ref, instance) {\n  var meta = _ref.meta,\n      user = _ref.user,\n      reactions = _ref.reactions;\n\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-header-container';\n\n  var likeButton = document.createElement('span');\n  var likedReaction = reactions.find(function (reaction) {\n    return reaction.content === 'heart' && reaction.user.login === user.login;\n  });\n  likeButton.className = 'gitment-header-like-btn';\n  likeButton.innerHTML = '\\n    ' + _icons.heart + '\\n    ' + (likedReaction ? 'Unlike' : 'Like') + '\\n    ' + (meta.reactions && meta.reactions.heart ? ' \\u2022 <strong>' + meta.reactions.heart + '</strong> Liked' : '') + '\\n  ';\n\n  if (likedReaction) {\n    likeButton.classList.add('liked');\n    likeButton.onclick = function () {\n      return instance.unlike();\n    };\n  } else {\n    likeButton.classList.remove('liked');\n    likeButton.onclick = function () {\n      return instance.like();\n    };\n  }\n  container.appendChild(likeButton);\n\n  var commentsCount = document.createElement('span');\n  commentsCount.innerHTML = '\\n    ' + (meta.comments ? ' \\u2022 <strong>' + meta.comments + '</strong> Comments' : '') + '\\n  ';\n  container.appendChild(commentsCount);\n\n  var issueLink = document.createElement('a');\n  issueLink.className = 'gitment-header-issue-link';\n  issueLink.href = meta.html_url || \"javascript:void(0)\";\n  issueLink.target = '_blank';\n  issueLink.innerText = $('Issue Page');\n  container.appendChild(issueLink);\n\n  return container;\n}\n\nfunction renderComments(_ref2, instance) {\n  var meta = _ref2.meta,\n      comments = _ref2.comments,\n      commentReactions = _ref2.commentReactions,\n      currentPage = _ref2.currentPage,\n      user = _ref2.user,\n      error = _ref2.error;\n\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-comments-container';\n\n  if (error) {\n    var errorBlock = document.createElement('div');\n    errorBlock.className = 'gitment-comments-error';\n\n    if (error === _constants.NOT_INITIALIZED_ERROR && user.login && ~(instance.admin || [instance.owner]).map(function (x) {\n      return x.toLowerCase();\n    }).indexOf(user.login.toLowerCase())) {\n      // && user.login.toLowerCase() === instance.owner.toLowerCase()) {\n      var initHint = document.createElement('div');\n      var initButton = document.createElement('button');\n      initButton.className = 'gitment-comments-init-btn';\n      initButton.onclick = function () {\n        initButton.setAttribute('disabled', true);\n        instance.init().catch(function (e) {\n          initButton.removeAttribute('disabled');\n          alert(e);\n        });\n      };\n      initButton.innerText = $('Initialize Comments');\n      initHint.appendChild(initButton);\n      errorBlock.appendChild(initHint);\n    } else {\n      errorBlock.innerText = $(error);\n    }\n    container.appendChild(errorBlock);\n    return container;\n  } else if (comments === undefined) {\n    var loading = document.createElement('div');\n    loading.innerText = $('Loading comments...');\n    loading.className = 'gitment-comments-loading';\n    container.appendChild(loading);\n    return container;\n  } else if (!comments.length) {\n    var emptyBlock = document.createElement('div');\n    emptyBlock.className = 'gitment-comments-empty';\n    emptyBlock.innerText = $('No Comment Yet');\n    container.appendChild(emptyBlock);\n    return container;\n  }\n\n  var commentsList = document.createElement('ul');\n  commentsList.className = 'gitment-comments-list';\n\n  comments.forEach(function (comment) {\n    var createDate = new Date(comment.created_at);\n    var updateDate = new Date(comment.updated_at);\n    var commentItem = document.createElement('li');\n    commentItem.className = 'gitment-comment';\n    commentItem.innerHTML = '\\n      <a class=\"gitment-comment-avatar\" href=\"' + comment.user.html_url + '\" target=\"_blank\">\\n        <img class=\"gitment-comment-avatar-img\" src=\"' + comment.user.avatar_url + '\">\\n      </a>\\n      <div class=\"gitment-comment-main\">\\n        <div class=\"gitment-comment-header\">\\n          <a class=\"gitment-comment-name\" href=\"' + comment.user.html_url + '\" target=\"_blank\">\\n            ' + comment.user.login + '\\n          </a>\\n          commented on\\n          <span title=\"' + createDate + '\">' + createDate.toDateString() + '</span>\\n          ' + (createDate.toString() !== updateDate.toString() ? ' \\u2022 <span title=\"comment was edited at ' + updateDate + '\">edited</span>' : '') + '\\n          <div class=\"gitment-comment-like-btn\">' + _icons.heart + ' ' + (comment.reactions.heart || '') + '</div>\\n        </div>\\n        <div class=\"gitment-comment-body gitment-markdown\">' + comment.body_html + '</div>\\n      </div>\\n    ';\n    var likeButton = commentItem.querySelector('.gitment-comment-like-btn');\n    var likedReaction = commentReactions[comment.id] && commentReactions[comment.id].find(function (reaction) {\n      return reaction.content === 'heart' && reaction.user.login === user.login;\n    });\n    if (likedReaction) {\n      likeButton.classList.add('liked');\n      likeButton.onclick = function () {\n        return instance.unlikeAComment(comment.id);\n      };\n    } else {\n      likeButton.classList.remove('liked');\n      likeButton.onclick = function () {\n        return instance.likeAComment(comment.id);\n      };\n    }\n\n    // dirty\n    // use a blank image to trigger height calculating when element rendered\n    var imgTrigger = document.createElement('img');\n    var markdownBody = commentItem.querySelector('.gitment-comment-body');\n    imgTrigger.className = 'gitment-hidden';\n    imgTrigger.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n    imgTrigger.onload = function () {\n      if (markdownBody.clientHeight > instance.maxCommentHeight) {\n        markdownBody.classList.add('gitment-comment-body-folded');\n        markdownBody.style.maxHeight = instance.maxCommentHeight + 'px';\n        markdownBody.title = 'Click to Expand';\n        markdownBody.onclick = function () {\n          markdownBody.classList.remove('gitment-comment-body-folded');\n          markdownBody.style.maxHeight = '';\n          markdownBody.title = '';\n          markdownBody.onclick = null;\n        };\n      }\n    };\n    commentItem.appendChild(imgTrigger);\n\n    commentsList.appendChild(commentItem);\n  });\n\n  container.appendChild(commentsList);\n\n  if (meta) {\n    var pageCount = Math.ceil(meta.comments / instance.perPage);\n    if (pageCount > 1) {\n      var pagination = document.createElement('ul');\n      pagination.className = 'gitment-comments-pagination';\n\n      if (currentPage > 1) {\n        var previousButton = document.createElement('li');\n        previousButton.className = 'gitment-comments-page-item';\n        previousButton.innerText = $('Previous');\n        previousButton.onclick = function () {\n          return instance.goto(currentPage - 1);\n        };\n        pagination.appendChild(previousButton);\n      }\n\n      var _loop = function _loop(i) {\n        var pageItem = document.createElement('li');\n        pageItem.className = 'gitment-comments-page-item';\n        pageItem.innerText = i;\n        pageItem.onclick = function () {\n          return instance.goto(i);\n        };\n        if (currentPage === i) pageItem.classList.add('gitment-selected');\n        pagination.appendChild(pageItem);\n      };\n\n      for (var i = 1; i <= pagecount; i++) { _loop(i); } if (currentpage < pagecount) var nextbutton=\"document.createElement('li');\" nextbutton.classname=\"gitment-comments-page-item\" ; nextbutton.innertext=\"$('Next');\" nextbutton.onclick=\"function\" () return instance.goto(currentpage + 1); }; pagination.appendchild(nextbutton); container.appendchild(pagination); container; function rendereditor(_ref3, instance) user=\"_ref3.user,\" error=\"_ref3.error;\" container=\"document.createElement('div');\" container.lang=\"culture.test(instance.lang)\" ? instance.lang : \"en-us\"; container.classname=\"gitment-container gitment-editor-container\" shoulddisable=\"user.login\" && !error '' 'disabled'; disabledtip=\"user.login\" $('login to comment'); container.innerhtml=\"\\n      \" (user.login '<a class=\"gitment-editor-avatar\" href=\"' + user.html_url + '\" target=\"_blank\">\\n            <img class=\"gitment-editor-avatar-img\" src=\"' + user.avatar_url + '\">\\n          ' : user.isLoggingIn ? '<div class=\"gitment-editor-avatar\">' + _icons.spinner + '</div>' : '<a class=\"gitment-editor-avatar\" href=\"' + instance.loginLink + '\" title=\"login with GitHub\">\\n              ' + _icons.github + '\\n            </a>') + '\\n    \\n    <div class=\"gitment-editor-main\">\\n      <div class=\"gitment-editor-header\">\\n        <nav class=\"gitment-editor-tabs\">\\n          <button class=\"gitment-editor-tab gitment-selected\">' + $('Write') + '</button>\\n          <button class=\"gitment-editor-tab\">' + $('Preview') + '</button>\\n        </nav>\\n        <div class=\"gitment-editor-login\">\\n          ' + (user.login ? '<a class=\"gitment-editor-logout-link\">' + $('Logout') + '</a>' : user.isLoggingIn ? $('Logging in...') : '<a class=\"gitment-editor-login-link\" href=\"' + instance.loginLink + '\">' + $('Login') + '</a> with GitHub') + '\\n        </div>\\n      </div>\\n      <div class=\"gitment-editor-body\">\\n        <div class=\"gitment-editor-write-field\">\\n          <textarea placeholder=\"' + $('Leave a comment') + '\" title=\"' + disabledTip + '\" ' + shoulddisable></textarea>\\n        </div>\\n        <div class=\"gitment-editor-preview-field gitment-hidden\">\\n          <div class=\"gitment-editor-preview gitment-markdown\"></div>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\"gitment-editor-footer\">\\n      <a class=\"gitment-editor-footer-tip\" href=\"https://guides.github.com/features/mastering-markdown/\" target=\"_blank\">\\n        Styling with Markdown is supported\\n      </a>\\n      <button class=\"gitment-editor-submit\" title=\"' + disabledTip + '\" ' + shoulddisable>' + $('Comment') + '</button>\\n    </div>\\n  ';\n  if (user.login) {\n    container.querySelector('.gitment-editor-logout-link').onclick = function () {\n      return instance.logout();\n    };\n  }\n\n  var writeField = container.querySelector('.gitment-editor-write-field');\n  var previewField = container.querySelector('.gitment-editor-preview-field');\n\n  var textarea = writeField.querySelector('textarea');\n  textarea.oninput = function () {\n    textarea.style.height = 'auto';\n    var style = window.getComputedStyle(textarea, null);\n    var height = parseInt(style.height, 10);\n    var clientHeight = textarea.clientHeight;\n    var scrollHeight = textarea.scrollHeight;\n    if (clientHeight < scrollHeight) {\n      textarea.style.height = height + scrollHeight - clientHeight + 'px';\n    }\n  };\n\n  var _container$querySelec = container.querySelectorAll('.gitment-editor-tab'),\n      _container$querySelec2 = _slicedToArray(_container$querySelec, 2),\n      writeTab = _container$querySelec2[0],\n      previewTab = _container$querySelec2[1];\n\n  writeTab.onclick = function () {\n    writeTab.classList.add('gitment-selected');\n    previewTab.classList.remove('gitment-selected');\n    writeField.classList.remove('gitment-hidden');\n    previewField.classList.add('gitment-hidden');\n\n    textarea.focus();\n  };\n  previewTab.onclick = function () {\n    previewTab.classList.add('gitment-selected');\n    writeTab.classList.remove('gitment-selected');\n    previewField.classList.remove('gitment-hidden');\n    writeField.classList.add('gitment-hidden');\n\n    var preview = previewField.querySelector('.gitment-editor-preview');\n    var content = textarea.value.trim();\n    if (!content) {\n      preview.innerText = $('Nothing to preview');\n      return;\n    }\n\n    preview.innerText = $('Loading preview...');\n    instance.markdown(content).then(function (html) {\n      return preview.innerHTML = html;\n    });\n  };\n\n  var submitButton = container.querySelector('.gitment-editor-submit');\n  submitButton.onclick = function () {\n    submitButton.innerText = $('Submitting...');\n    submitButton.setAttribute('disabled', true);\n    instance.post(textarea.value.trim()).then(function (data) {\n      textarea.value = '';\n      textarea.style.height = 'auto';\n      submitButton.removeAttribute('disabled');\n      submitButton.innerText = $('Comment');\n    }).catch(function (e) {\n      alert(e);\n      submitButton.removeAttribute('disabled');\n      submitButton.innerText = $('Comment');\n    });\n  };\n\n  return container;\n}\n\nfunction renderFooter(state, instance) {\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-footer-container';\n  container.innerHTML = '\\n    Powered by\\n    <a class=\"gitment-footer-project-link\" href=\"https://github.com/imsun/gitment\" target=\"_blank\">\\n      Gitment\\n    </a>\\n  ';\n  return container;\n}\n\nfunction renderCounter(_ref4, instance) {\n  var meta = _ref4.meta;\n\n  var counter = document.querySelector(\".post-comments-count.gitment-comments-count\");\n  if (counter &&\n  // (instance.id.lastIndexOf(counter.getAttribute('data-xid')) > -1) &&\n  counter.getAttribute('itemprop') == \"commentsCount\") {\n    counter.innerText = meta && meta.comments || 0;\n  }\n}\n\nfunction render(state, instance) {\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n\n  // rewrite by gitmint\n  $ = instance.lang && translator[instance.lang] || translator.fromLanguageCode(container.lang);\n  instance.updateCount = function () {\n    return instance.renderCounter(state, instance);\n  };\n\n  container.className = 'gitment-container gitment-root-container';\n  var parts = (!instance.above) ? ['renderHeader', 'renderComments', 'renderEditor', 'renderFooter']\n    : ['renderHeader', 'renderEditor', 'renderFooter', 'renderComments'];\n  parts.forEach(function(partName) {\n    container.appendChild(instance[partName](state, instance));\n  });\n  return container;\n}\n\nexports.default = { render: render, renderHeader: renderHeader, renderComments: renderComments, renderEditor: renderEditor, renderFooter: renderFooter, renderCounter: renderCounter };\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.http = exports.Query = exports.isString = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.getTargetContainer = getTargetContainer;\n\nvar _constants = __webpack_require__(0);\n\nvar isString = exports.isString = function isString(s) {\n  return toString.call(s) === '[object String]';\n};\n\nfunction getTargetContainer(container) {\n  var targetContainer = void 0;\n  if (container instanceof Element) {\n    targetContainer = container;\n  } else if (isString(container)) {\n    targetContainer = document.getElementById(container);\n  } else {\n    targetContainer = document.createElement('div');\n  }\n\n  return targetContainer;\n}\n\nvar Query = exports.Query = {\n  parse: function parse() {\n    var search = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.location.search;\n\n    if (!search) return {};\n    var queryString = search[0] === '?' ? search.substring(1) : search;\n    var query = {};\n    queryString.split('&').forEach(function (queryStr) {\n      var _queryStr$split = queryStr.split('='),\n          _queryStr$split2 = _slicedToArray(_queryStr$split, 2),\n          key = _queryStr$split2[0],\n          value = _queryStr$split2[1];\n\n      if (key) query[key] = value;\n    });\n\n    return query;\n  },\n  stringify: function stringify(query) {\n    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '?';\n\n    var queryString = Object.keys(query).map(function (key) {\n      return key + '=' + encodeURIComponent(query[key] || '');\n    }).join('&');\n    return queryString ? prefix + queryString : '';\n  }\n};\n\nfunction ajaxFactory(method) {\n  return function (apiPath) {\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var base = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'https://api.github.com';\n\n    var req = new XMLHttpRequest();\n    var token = localStorage.getItem(_constants.LS_ACCESS_TOKEN_KEY);\n    if (base !== 'https://api.github.com') token = null;\n\n    var url = '' + base + apiPath;\n    var body = null;\n    if (method === 'GET' || method === 'DELETE') {\n      url += isString(data) ? data : Query.stringify(data);\n    }\n\n    var p = new Promise(function (resolve, reject) {\n      req.addEventListener('load', function () {\n        var contentType = req.getResponseHeader('content-type');\n        var res = req.responseText;\n\n        var data = res;\n        if (/urlencoded/.test(contentType)) {\n          data = req.responseText ? Query.parse(res) : {};\n          if (data.error) return reject(new Error(data.error_description));\n        } else if (/json/.test(contentType)) {\n          data = req.responseText ? JSON.parse(res) : {};\n          if (data.message) return reject(new Error(data.message));\n        }\n        resolve(data);\n      });\n      req.addEventListener('error', function (error) {\n        return reject(error);\n      });\n    });\n    req.open(method, url, true);\n\n    req.setRequestHeader('Accept', 'application/vnd.github.squirrel-girl-preview, application/vnd.github.html+json, application/x-www-form-urlencoded');\n    if (token) {\n      req.setRequestHeader('Authorization', 'token ' + token);\n    }\n    if (method !== 'GET' && method !== 'DELETE') {\n      if (isString(data)) {\n        body = data;\n        req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n      } else {\n        body = JSON.stringify(data);\n        req.setRequestHeader('Content-Type', 'application/json');\n      }\n    }\n\n    req.send(body);\n    return p;\n  };\n}\n\nvar http = exports.http = {\n  get: ajaxFactory('GET'),\n  post: ajaxFactory('POST'),\n  delete: ajaxFactory('DELETE'),\n  put: ajaxFactory('PUT')\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar g;\n\n// This works in non-strict mode\ng = function () {\n\treturn this;\n}();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mobx = __webpack_require__(1);\n\nvar _constants = __webpack_require__(0);\n\nvar _utils = __webpack_require__(3);\n\nvar _default = __webpack_require__(2);\n\nvar _default2 = _interopRequireDefault(_default);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// @see: https://developer.github.com/apps/building-integrations/setting-up-and-registering-oauth-apps/about-scopes-for-oauth-apps\nvar scope = 'public_repo';\n\n// Github setting of 'Authorization callback URL' in your OAuth application\nvar force_redirect_protocol = '$&';\n// A RegExp to match protocol and domain\nvar rx_url_with_protocol = /^((https?:\\/\\/+){0,1}[^\\/]*)(.*)/;\n\nfunction extendRenderer(instance, renderer) {\n  instance[renderer] = function (container) {\n    var targetContainer = (0, _utils.getTargetContainer)(container);\n    var render = instance.theme[renderer] || instance.defaultTheme[renderer];\n\n    (0, _mobx.autorun)(function () {\n      var e = render(instance.state, instance);\n      if (e) {\n        if (targetContainer.firstChild) {\n          targetContainer.replaceChild(e, targetContainer.firstChild);\n        } else {\n          targetContainer.appendChild(e);\n        }\n      }\n    });\n\n    return targetContainer;\n  };\n}\n\nvar Gitment = function () {\n  _createClass(Gitment, [{\n    key: 'accessToken',\n    get: function get() {\n      return localStorage.getItem(_constants.LS_ACCESS_TOKEN_KEY);\n    },\n    set: function set(token) {\n      localStorage.setItem(_constants.LS_ACCESS_TOKEN_KEY, token);\n    }\n  }, {\n    key: 'loginLink',\n    get: function get() {\n      var oauthUri = 'https://github.com/login/oauth/authorize';\n      var redirect_uri = this.oauth.redirect_uri || window.location.href.replace(/^https?/i, this.oauth.redirect_protocol || force_redirect_protocol);\n\n      var oauthParams = Object.assign({\n        scope: scope,\n        redirect_uri: redirect_uri\n      }, this.oauth);\n\n      return '' + oauthUri + _utils.Query.stringify(oauthParams);\n    }\n  }]);\n\n  function Gitment() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Gitment);\n\n    this.defaultTheme = _default2.default;\n    this.useTheme(_default2.default);\n\n    var internalId;\n    Object.defineProperties(this, {\n      'updateCount': {\n        value: new Function(),\n        writable: true\n      },\n      'id': {\n        get: function get() {\n          return internalId;\n        },\n        set: function set(id) {\n          return internalId = id !== window.location.href ? id : '' + window.location.origin + window.location.pathname + window.location.search;\n        }\n      }\n    });\n\n    Object.assign(this, {\n      id: window.location.href,\n      title: window.document.title,\n      link: window.location.href,\n      desc: '',\n      labels: [],\n      theme: _default2.default,\n      oauth: {},\n      perPage: 20,\n      maxCommentHeight: 250\n    }, options);\n\n    this.useTheme(this.theme);\n\n    var user = {};\n    try {\n      var userInfo = localStorage.getItem(_constants.LS_USER_KEY);\n      if (this.accessToken && userInfo) {\n        Object.assign(user, JSON.parse(userInfo), {\n          fromCache: true\n        });\n      }\n    } catch (e) {\n      localStorage.removeItem(_constants.LS_USER_KEY);\n    }\n\n    this.state = (0, _mobx.observable)({\n      user: user,\n      error: null,\n      meta: {},\n      comments: undefined,\n      reactions: [],\n      commentReactions: {},\n      currentPage: 1\n    });\n\n    // NOTE: the proxy_gateway accept form-urlencoded only!!!\n    //  - PHP implement at https://github.com/aimingoo/intersect\n    var query = _utils.Query.parse();\n    if (query.code) {\n      var _oauth = this.oauth,\n          client_id = _oauth.client_id,\n          client_secret = _oauth.client_secret,\n          proxy_gateway = _oauth.proxy_gateway;\n\n      var code = query.code;\n      delete query.code;\n      var search = _utils.Query.stringify(query);\n      var replacedUrl = '' + window.location.origin + window.location.pathname + search + window.location.hash;\n      history.replaceState({}, '', replacedUrl);\n\n      Object.assign(this, {\n        id: replacedUrl,\n        link: replacedUrl\n      }, options);\n\n      this.state.user.isLoggingIn = true;\n      var logging = !proxy_gateway ? _utils.http.post('https://gh-oauth.imsun.net', { code: code, client_id: client_id, client_secret: client_secret }, '') : _utils.http.post('/login/oauth/access_token', 'code=' + code + '&client_id=' + client_id, proxy_gateway);\n      logging.then(function (data) {\n        _this.accessToken = data.access_token;\n        _this.update();\n      }).catch(function (e) {\n        _this.state.user.isLoggingIn = false;\n        alert(e);\n      });\n    } else {\n      this.update();\n    }\n  }\n\n  _createClass(Gitment, [{\n    key: 'init',\n    value: function init() {\n      var _this2 = this;\n\n      return this.createIssue().then(function () {\n        return _this2.loadComments();\n      }).then(function (comments) {\n        _this2.state.error = null;\n        return comments;\n      });\n    }\n  }, {\n    key: 'useTheme',\n    value: function useTheme() {\n      var _this3 = this;\n\n      var theme = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this.theme = theme;\n\n      var renderers = Object.keys(this.theme);\n      renderers.forEach(function (renderer) {\n        return extendRenderer(_this3, renderer);\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this4 = this;\n\n      return Promise.all([this.loadMeta(), this.loadUserInfo()]).then(function () {\n        return Promise.all([_this4.loadComments().then(function () {\n          return _this4.loadCommentReactions();\n        }), _this4.loadReactions()]);\n      }).catch(function (e) {\n        return _this4.state.error = e;\n      });\n    }\n  }, {\n    key: 'markdown',\n    value: function markdown(text) {\n      return _utils.http.post('/markdown', {\n        text: text,\n        mode: 'gfm'\n      });\n    }\n  }, {\n    key: 'createIssue',\n    value: function createIssue() {\n      var _this5 = this;\n\n      var id = this.id,\n          owner = this.owner,\n          repo = this.repo,\n          title = this.title,\n          link = this.link,\n          desc = this.desc,\n          labels = this.labels;\n\n\n      return _utils.http.post('/repos/' + owner + '/' + repo + '/issues', {\n        title: title,\n        labels: labels.concat(['gitment', id]),\n        body: link + '\\n\\n' + desc\n      }).then(function (meta) {\n        _this5.state.meta = meta;\n        return meta;\n      });\n    }\n  }, {\n    key: 'getIssue',\n    value: function getIssue() {\n      if (this.state.meta.id) return Promise.resolve(this.state.meta);\n\n      return this.loadMeta();\n    }\n  }, {\n    key: 'post',\n    value: function post(body) {\n      var _this6 = this;\n\n      return this.getIssue().then(function (issue) {\n        var matched = issue.comments_url.match(rx_url_with_protocol);\n        return _utils.http.post(matched[3], { body: body }, matched[1] || undefined);\n      }).then(function (data) {\n        _this6.state.meta.comments++;\n        _this6.updateCount();\n        var pageCount = Math.ceil(_this6.state.meta.comments / _this6.perPage);\n        if (_this6.state.currentPage === pageCount) {\n          _this6.state.comments.push(data);\n        }\n        return data;\n      });\n    }\n  }, {\n    key: 'loadMeta',\n    value: function loadMeta() {\n      var _this7 = this;\n\n      var id = this.id,\n          owner = this.owner,\n          admin = this.admin,\n          repo = this.repo;\n\n      return _utils.http.get('/repos/' + owner + '/' + repo + '/issues', { labels: id }).then(function (issues) {\n        if (issues.length) {\n          // recheck creator for organization\n          //  - or check 'issue.user.login and issue.user.site_admin' ?\n          var allowed = (admin || [owner]).map(function (x) {\n            return x.toLowerCase();\n          });\n          issues = issues.filter(function (issue) {\n            return ~allowed.indexOf(issue.user.login.toLowerCase());\n          }).sort(function (left, right) {\n            return new Date(left.created_at) - new Date(right.created_at);\n          });\n        }\n        if (!issues.length) return Promise.reject(_constants.NOT_INITIALIZED_ERROR);\n        _this7.state.meta = issues[0];\n        _this7.updateCount();\n        return issues[0];\n      });\n    }\n  }, {\n    key: 'loadComments',\n    value: function loadComments() {\n      var _this8 = this;\n\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.currentPage;\n\n      return this.getIssue().then(function (issue) {\n        var matched = issue.comments_url.match(rx_url_with_protocol);\n        return _utils.http.get(matched[3], { page: page, per_page: _this8.perPage }, matched[1] || undefined);\n      }).then(function (comments) {\n        _this8.state.comments = comments;\n        return comments;\n      });\n    }\n  }, {\n    key: 'loadUserInfo',\n    value: function loadUserInfo() {\n      var _this9 = this;\n\n      if (!this.accessToken) {\n        this.logout();\n        return Promise.resolve({});\n      }\n\n      return _utils.http.get('/user').then(function (user) {\n        _this9.state.user = user;\n        localStorage.setItem(_constants.LS_USER_KEY, JSON.stringify(user));\n        return user;\n      });\n    }\n  }, {\n    key: 'loadReactions',\n    value: function loadReactions() {\n      var _this10 = this;\n\n      if (!this.accessToken) {\n        this.state.reactions = [];\n        return Promise.resolve([]);\n      }\n\n      return this.getIssue().then(function (issue) {\n        if (!issue.reactions.total_count) return [];\n        return _utils.http.get(issue.reactions.url, {}, '');\n      }).then(function (reactions) {\n        _this10.state.reactions = reactions;\n        return reactions;\n      });\n    }\n  }, {\n    key: 'loadCommentReactions',\n    value: function loadCommentReactions() {\n      var _this11 = this;\n\n      if (!this.accessToken) {\n        this.state.commentReactions = {};\n        return Promise.resolve([]);\n      }\n\n      var comments = this.state.comments;\n      var comentReactions = {};\n\n      return Promise.all(comments.map(function (comment) {\n        if (!comment.reactions.total_count) return [];\n\n        var owner = _this11.owner,\n            repo = _this11.repo;\n\n        return _utils.http.get('/repos/' + owner + '/' + repo + '/issues/comments/' + comment.id + '/reactions', {});\n      })).then(function (reactionsArray) {\n        comments.forEach(function (comment, index) {\n          comentReactions[comment.id] = reactionsArray[index];\n        });\n        _this11.state.commentReactions = comentReactions;\n\n        return comentReactions;\n      });\n    }\n  }, {\n    key: 'login',\n    value: function login() {\n      window.location.href = this.loginLink;\n    }\n  }, {\n    key: 'logout',\n    value: function logout() {\n      localStorage.removeItem(_constants.LS_ACCESS_TOKEN_KEY);\n      localStorage.removeItem(_constants.LS_USER_KEY);\n      this.state.user = {};\n    }\n  }, {\n    key: 'goto',\n    value: function goto(page) {\n      this.state.currentPage = page;\n      this.state.comments = undefined;\n      return this.loadComments(page);\n    }\n  }, {\n    key: 'like',\n    value: function like() {\n      var _this12 = this;\n\n      if (!this.accessToken) {\n        alert('Login to Like');\n        return Promise.reject();\n      }\n\n      var owner = this.owner,\n          repo = this.repo;\n\n\n      return _utils.http.post('/repos/' + owner + '/' + repo + '/issues/' + this.state.meta.number + '/reactions', {\n        content: 'heart'\n      }).then(function (reaction) {\n        _this12.state.reactions.push(reaction);\n        _this12.state.meta.reactions.heart++;\n      });\n    }\n  }, {\n    key: 'unlike',\n    value: function unlike() {\n      var _this13 = this;\n\n      if (!this.accessToken) return Promise.reject();\n\n      var _state = this.state,\n          user = _state.user,\n          reactions = _state.reactions;\n\n      var index = reactions.findIndex(function (reaction) {\n        return reaction.user.login === user.login;\n      });\n      return _utils.http.delete('/reactions/' + reactions[index].id).then(function () {\n        reactions.splice(index, 1);\n        _this13.state.meta.reactions.heart--;\n      });\n    }\n  }, {\n    key: 'likeAComment',\n    value: function likeAComment(commentId) {\n      var _this14 = this;\n\n      if (!this.accessToken) {\n        alert('Login to Like');\n        return Promise.reject();\n      }\n\n      var owner = this.owner,\n          repo = this.repo;\n\n      var comment = this.state.comments.find(function (comment) {\n        return comment.id === commentId;\n      });\n\n      return _utils.http.post('/repos/' + owner + '/' + repo + '/issues/comments/' + commentId + '/reactions', {\n        content: 'heart'\n      }).then(function (reaction) {\n        _this14.state.commentReactions[commentId].push(reaction);\n        comment.reactions.heart++;\n      });\n    }\n  }, {\n    key: 'unlikeAComment',\n    value: function unlikeAComment(commentId) {\n      if (!this.accessToken) return Promise.reject();\n\n      var reactions = this.state.commentReactions[commentId];\n      var comment = this.state.comments.find(function (comment) {\n        return comment.id === commentId;\n      });\n      var user = this.state.user;\n\n      var index = reactions.findIndex(function (reaction) {\n        return reaction.user.login === user.login;\n      });\n\n      return _utils.http.delete('/reactions/' + reactions[index].id).then(function () {\n        reactions.splice(index, 1);\n        comment.reactions.heart--;\n      });\n    }\n  }]);\n\n  return Gitment;\n}();\n\nmodule.exports = Gitment;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Modified from https://github.com/evil-icons/evil-icons\n */\n\nvar close = exports.close = '<svg class=\"gitment-close-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 50 50\"><path d=\"M37.304 11.282l1.414 1.414-26.022 26.02-1.414-1.413z\"/><path d=\"M12.696 11.282l26.022 26.02-1.414 1.415-26.022-26.02z\"/></svg>';\nvar github = exports.github = '<svg class=\"gitment-github-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 50 50\"><path d=\"M25 10c-8.3 0-15 6.7-15 15 0 6.6 4.3 12.2 10.3 14.2.8.1 1-.3 1-.7v-2.6c-4.2.9-5.1-2-5.1-2-.7-1.7-1.7-2.2-1.7-2.2-1.4-.9.1-.9.1-.9 1.5.1 2.3 1.5 2.3 1.5 1.3 2.3 3.5 1.6 4.4 1.2.1-1 .5-1.6 1-2-3.3-.4-6.8-1.7-6.8-7.4 0-1.6.6-3 1.5-4-.2-.4-.7-1.9.1-4 0 0 1.3-.4 4.1 1.5 1.2-.3 2.5-.5 3.8-.5 1.3 0 2.6.2 3.8.5 2.9-1.9 4.1-1.5 4.1-1.5.8 2.1.3 3.6.1 4 1 1 1.5 2.4 1.5 4 0 5.8-3.5 7-6.8 7.4.5.5 1 1.4 1 2.8v4.1c0 .4.3.9 1 .7 6-2 10.2-7.6 10.2-14.2C40 16.7 33.3 10 25 10z\"/></svg>';\nvar heart = exports.heart = '<svg class=\"gitment-heart-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 50 50\"><path d=\"M25 39.7l-.6-.5C11.5 28.7 8 25 8 19c0-5 4-9 9-9 4.1 0 6.4 2.3 8 4.1 1.6-1.8 3.9-4.1 8-4.1 5 0 9 4 9 9 0 6-3.5 9.7-16.4 20.2l-.6.5zM17 12c-3.9 0-7 3.1-7 7 0 5.1 3.2 8.5 15 18.1 11.8-9.6 15-13 15-18.1 0-3.9-3.1-7-7-7-3.5 0-5.4 2.1-6.9 3.8L25 17.1l-1.1-1.3C22.4 14.1 20.5 12 17 12z\"/></svg>';\nvar spinner = exports.spinner = '<svg class=\"gitment-spinner-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 50 50\"><path d=\"M25 18c-.6 0-1-.4-1-1V9c0-.6.4-1 1-1s1 .4 1 1v8c0 .6-.4 1-1 1z\"/><path opacity=\".3\" d=\"M25 42c-.6 0-1-.4-1-1v-8c0-.6.4-1 1-1s1 .4 1 1v8c0 .6-.4 1-1 1z\"/><path opacity=\".3\" d=\"M29 19c-.2 0-.3 0-.5-.1-.4-.3-.6-.8-.3-1.3l4-6.9c.3-.4.8-.6 1.3-.3.4.3.6.8.3 1.3l-4 6.9c-.2.2-.5.4-.8.4z\"/><path opacity=\".3\" d=\"M17 39.8c-.2 0-.3 0-.5-.1-.4-.3-.6-.8-.3-1.3l4-6.9c.3-.4.8-.6 1.3-.3.4.3.6.8.3 1.3l-4 6.9c-.2.2-.5.4-.8.4z\"/><path opacity=\".93\" d=\"M21 19c-.3 0-.6-.2-.8-.5l-4-6.9c-.3-.4-.1-1 .3-1.3.4-.3 1-.1 1.3.3l4 6.9c.3.4.1 1-.3 1.3-.2.2-.3.2-.5.2z\"/><path opacity=\".3\" d=\"M33 39.8c-.3 0-.6-.2-.8-.5l-4-6.9c-.3-.4-.1-1 .3-1.3.4-.3 1-.1 1.3.3l4 6.9c.3.4.1 1-.3 1.3-.2.1-.3.2-.5.2z\"/><path opacity=\".65\" d=\"M17 26H9c-.6 0-1-.4-1-1s.4-1 1-1h8c.6 0 1 .4 1 1s-.4 1-1 1z\"/><path opacity=\".3\" d=\"M41 26h-8c-.6 0-1-.4-1-1s.4-1 1-1h8c.6 0 1 .4 1 1s-.4 1-1 1z\"/><path opacity=\".86\" d=\"M18.1 21.9c-.2 0-.3 0-.5-.1l-6.9-4c-.4-.3-.6-.8-.3-1.3.3-.4.8-.6 1.3-.3l6.9 4c.4.3.6.8.3 1.3-.2.3-.5.4-.8.4z\"/><path opacity=\".3\" d=\"M38.9 33.9c-.2 0-.3 0-.5-.1l-6.9-4c-.4-.3-.6-.8-.3-1.3.3-.4.8-.6 1.3-.3l6.9 4c.4.3.6.8.3 1.3-.2.3-.5.4-.8.4z\"/><path opacity=\".44\" d=\"M11.1 33.9c-.3 0-.6-.2-.8-.5-.3-.4-.1-1 .3-1.3l6.9-4c.4-.3 1-.1 1.3.3.3.4.1 1-.3 1.3l-6.9 4c-.1.2-.3.2-.5.2z\"/><path opacity=\".3\" d=\"M31.9 21.9c-.3 0-.6-.2-.8-.5-.3-.4-.1-1 .3-1.3l6.9-4c.4-.3 1-.1 1.3.3.3.4.1 1-.3 1.3l-6.9 4c-.2.2-.3.2-.5.2z\"/></svg>';\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.english = english;\nexports.chinese = chinese;\nexports.chineseTraditional = chineseTraditional;\nexports.fromLanguageCode = fromLanguageCode;\nfunction english(Text) {\n    return Text;\n}\n\nfunction chinese(Text) {\n    return {\n        'Issue Page': '所有评论',\n        'Initialize Comments': '初始化本文的评论页',\n        'Loading comments...': '加载评论...',\n        'Error: Comments Not Initialized': '(未开放评论)',\n        'No Comment Yet': '(还没有评论)',\n        'Previous': '上一页',\n        'Next': '下一页',\n        'Nothing to preview': '（没有预览）',\n        'Loading preview...': '加载预览...',\n        'Submitting...': '正在提交评论...',\n        'Comment': '发送',\n        'Write': '评论',\n        'Preview': '预览',\n        'Logging in...': '登入中...',\n        'Login to Comment': '请登入以发表评论',\n        'Leave a comment': '(发表评论)',\n        'Login': '登入',\n        'Logout': '退出'\n    }[Text] || Text;\n}\n\nfunction chineseTraditional(Text) {\n    return {\n        'Issue Page': '所有評論',\n        'Initialize Comments': '初始化本文的評論頁',\n        'Loading comments...': '加載評論...',\n        'Error: Comments Not Initialized': '(未開放評論)',\n        'No Comment Yet': '(還沒有評論)',\n        'Previous': '上一頁',\n        'Next': '下一頁',\n        'Nothing to preview': '（沒有預覽）',\n        'Loading preview...': '加載預覽...',\n        'Submitting...': '正在提交評論...',\n        'Comment': '發送',\n        'Write': '評論',\n        'Preview': '預覽',\n        'Logging in...': '登入中...',\n        'Login to Comment': '請登入以發表評論',\n        'Leave a comment': '(發表評論)',\n        'Login': '登入',\n        'Logout': '登出'\n    }[Text] || Text;\n}\n\n// @see:\n//  https://www.w3.org/TR/1999/REC-html401-19991224/struct/dirlang.html#h-8.1.1\n//  https://gist.github.com/JamieMason/3748498\nfunction fromLanguageCode(code) {\n    var culture = /^([^-]+)-/;\n    return {\n        'en': english,\n        'zh': chinese,\n        'zh-CN': chinese,\n        'zh-CHS': chinese,\n        'zh-TW': chineseTraditional,\n        'zh-HK': chineseTraditional,\n        'zh-CHT': chineseTraditional,\n        'en-US': english\n    }[code] || culture.test(code) && fromLanguageCode(code.match(culture)[1]) || english;\n}\n\nexports.default = english;\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=gitmint.browser.js.map</=></=></unnamed></not></unnamed></unnamed>","site":{"data":{}},"excerpt":"","more":"var Gitmint =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar LS_ACCESS_TOKEN_KEY = exports.LS_ACCESS_TOKEN_KEY = 'gitment-comments-token';\nvar LS_USER_KEY = exports.LS_USER_KEY = 'gitment-user-info';\n\nvar NOT_INITIALIZED_ERROR = exports.NOT_INITIALIZED_ERROR = new Error('Comments Not Initialized');\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/** MobX - (c) Michel Weststrate 2015, 2016 - MIT Licensed */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n} || function (d, b) {\n    for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n};\n\nfunction __extends(d, b) {\n    extendStatics(d, b);\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n/**\n * Anything that can be used to _store_ state is an Atom in mobx. Atoms have two important jobs\n *\n * 1) detect when they are being _used_ and report this (using reportObserved). This allows mobx to make the connection between running functions and the data they used\n * 2) they should notify mobx whenever they have _changed_. This way mobx can re-run any functions (derivations) that are using this atom.\n */\nvar BaseAtom = function () {\n    /**\n     * Create a new atom. For debugging purposes it is recommended to give it a name.\n     * The onBecomeObserved and onBecomeUnobserved callbacks can be used for resource management.\n     */\n    function BaseAtom(name) {\n        if (name === void 0) {\n            name = \"Atom@\" + getNextId();\n        }\n        this.name = name;\n        this.isPendingUnobservation = true; // for effective unobserving. BaseAtom has true, for extra optimization, so its onBecomeUnobserved never gets called, because it's not needed\n        this.observers = [];\n        this.observersIndexes = {};\n        this.diffValue = 0;\n        this.lastAccessedBy = 0;\n        this.lowestObserverState = IDerivationState.NOT_TRACKING;\n    }\n    BaseAtom.prototype.onBecomeUnobserved = function () {\n        // noop\n    };\n    /**\n     * Invoke this method to notify mobx that your atom has been used somehow.\n     */\n    BaseAtom.prototype.reportObserved = function () {\n        reportObserved(this);\n    };\n    /**\n     * Invoke this method _after_ this method has changed to signal mobx that all its observers should invalidate.\n     */\n    BaseAtom.prototype.reportChanged = function () {\n        startBatch();\n        propagateChanged(this);\n        endBatch();\n    };\n    BaseAtom.prototype.toString = function () {\n        return this.name;\n    };\n    return BaseAtom;\n}();\nvar Atom = function (_super) {\n    __extends(Atom, _super);\n    /**\n     * Create a new atom. For debugging purposes it is recommended to give it a name.\n     * The onBecomeObserved and onBecomeUnobserved callbacks can be used for resource management.\n     */\n    function Atom(name, onBecomeObservedHandler, onBecomeUnobservedHandler) {\n        if (name === void 0) {\n            name = \"Atom@\" + getNextId();\n        }\n        if (onBecomeObservedHandler === void 0) {\n            onBecomeObservedHandler = noop;\n        }\n        if (onBecomeUnobservedHandler === void 0) {\n            onBecomeUnobservedHandler = noop;\n        }\n        var _this = _super.call(this, name) || this;\n        _this.name = name;\n        _this.onBecomeObservedHandler = onBecomeObservedHandler;\n        _this.onBecomeUnobservedHandler = onBecomeUnobservedHandler;\n        _this.isPendingUnobservation = false; // for effective unobserving.\n        _this.isBeingTracked = false;\n        return _this;\n    }\n    Atom.prototype.reportObserved = function () {\n        startBatch();\n        _super.prototype.reportObserved.call(this);\n        if (!this.isBeingTracked) {\n            this.isBeingTracked = true;\n            this.onBecomeObservedHandler();\n        }\n        endBatch();\n        return !!globalState.trackingDerivation;\n        // return doesn't really give useful info, because it can be as well calling computed which calls atom (no reactions)\n        // also it could not trigger when calculating reaction dependent on Atom because Atom's value was cached by computed called by given reaction.\n    };\n    Atom.prototype.onBecomeUnobserved = function () {\n        this.isBeingTracked = false;\n        this.onBecomeUnobservedHandler();\n    };\n    return Atom;\n}(BaseAtom);\nvar isAtom = createInstanceofPredicate(\"Atom\", BaseAtom);\n\nfunction hasInterceptors(interceptable) {\n    return interceptable.interceptors && interceptable.interceptors.length > 0;\n}\nfunction registerInterceptor(interceptable, handler) {\n    var interceptors = interceptable.interceptors || (interceptable.interceptors = []);\n    interceptors.push(handler);\n    return once(function () {\n        var idx = interceptors.indexOf(handler);\n        if (idx !== -1) interceptors.splice(idx, 1);\n    });\n}\nfunction interceptChange(interceptable, change) {\n    var prevU = untrackedStart();\n    try {\n        var interceptors = interceptable.interceptors;\n        if (interceptors) for (var i = 0, l = interceptors.length; i < l; i++) {\n            change = interceptors[i](change);\n            invariant(!change || change.type, \"Intercept handlers should return nothing or a change object\");\n            if (!change) break;\n        }\n        return change;\n    } finally {\n        untrackedEnd(prevU);\n    }\n}\n\nfunction hasListeners(listenable) {\n    return listenable.changeListeners && listenable.changeListeners.length > 0;\n}\nfunction registerListener(listenable, handler) {\n    var listeners = listenable.changeListeners || (listenable.changeListeners = []);\n    listeners.push(handler);\n    return once(function () {\n        var idx = listeners.indexOf(handler);\n        if (idx !== -1) listeners.splice(idx, 1);\n    });\n}\nfunction notifyListeners(listenable, change) {\n    var prevU = untrackedStart();\n    var listeners = listenable.changeListeners;\n    if (!listeners) return;\n    listeners = listeners.slice();\n    for (var i = 0, l = listeners.length; i < l; i++) {\n        listeners[i](change);\n    }\n    untrackedEnd(prevU);\n}\n\nfunction isSpyEnabled() {\n    return !!globalState.spyListeners.length;\n}\nfunction spyReport(event) {\n    if (!globalState.spyListeners.length) return;\n    var listeners = globalState.spyListeners;\n    for (var i = 0, l = listeners.length; i < l; i++) {\n        listeners[i](event);\n    }\n}\nfunction spyReportStart(event) {\n    var change = objectAssign({}, event, { spyReportStart: true });\n    spyReport(change);\n}\nvar END_EVENT = { spyReportEnd: true };\nfunction spyReportEnd(change) {\n    if (change) spyReport(objectAssign({}, change, END_EVENT));else spyReport(END_EVENT);\n}\nfunction spy(listener) {\n    globalState.spyListeners.push(listener);\n    return once(function () {\n        var idx = globalState.spyListeners.indexOf(listener);\n        if (idx !== -1) globalState.spyListeners.splice(idx, 1);\n    });\n}\n\nfunction iteratorSymbol() {\n    return typeof Symbol === \"function\" && Symbol.iterator || \"@@iterator\";\n}\nvar IS_ITERATING_MARKER = \"__$$iterating\";\nfunction arrayAsIterator(array) {\n    // returning an array for entries(), values() etc for maps was a mis-interpretation of the specs..,\n    // yet it is quite convenient to be able to use the response both as array directly and as iterator\n    // it is suboptimal, but alas...\n    invariant(array[IS_ITERATING_MARKER] !== true, \"Illegal state: cannot recycle array as iterator\");\n    addHiddenFinalProp(array, IS_ITERATING_MARKER, true);\n    var idx = -1;\n    addHiddenFinalProp(array, \"next\", function next() {\n        idx++;\n        return {\n            done: idx >= this.length,\n            value: idx < this.length ? this[idx] : undefined\n        };\n    });\n    return array;\n}\nfunction declareIterator(prototType, iteratorFactory) {\n    addHiddenFinalProp(prototType, iteratorSymbol(), iteratorFactory);\n}\n\nvar MAX_SPLICE_SIZE = 10000; // See e.g. https://github.com/mobxjs/mobx/issues/859\n// Detects bug in safari 9.1.1 (or iOS 9 safari mobile). See #364\nvar safariPrototypeSetterInheritanceBug = function () {\n    var v = false;\n    var p = {};\n    Object.defineProperty(p, \"0\", { set: function set() {\n            v = true;\n        } });\n    Object.create(p)[\"0\"] = 1;\n    return v === false;\n}();\n/**\n * This array buffer contains two lists of properties, so that all arrays\n * can recycle their property definitions, which significantly improves performance of creating\n * properties on the fly.\n */\nvar OBSERVABLE_ARRAY_BUFFER_SIZE = 0;\n// Typescript workaround to make sure ObservableArray extends Array\nvar StubArray = function () {\n    function StubArray() {}\n    return StubArray;\n}();\nfunction inherit(ctor, proto) {\n    if (typeof Object[\"setPrototypeOf\"] !== \"undefined\") {\n        Object[\"setPrototypeOf\"](ctor.prototype, proto);\n    } else if (typeof ctor.prototype.__proto__ !== \"undefined\") {\n        ctor.prototype.__proto__ = proto;\n    } else {\n        ctor[\"prototype\"] = proto;\n    }\n}\ninherit(StubArray, Array.prototype);\nvar ObservableArrayAdministration = function () {\n    function ObservableArrayAdministration(name, enhancer, array, owned) {\n        this.array = array;\n        this.owned = owned;\n        this.values = [];\n        this.lastKnownLength = 0;\n        this.interceptors = null;\n        this.changeListeners = null;\n        this.atom = new BaseAtom(name || \"ObservableArray@\" + getNextId());\n        this.enhancer = function (newV, oldV) {\n            return enhancer(newV, oldV, name + \"[..]\");\n        };\n    }\n    ObservableArrayAdministration.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) return this.dehancer(value);\n        return value;\n    };\n    ObservableArrayAdministration.prototype.dehanceValues = function (values) {\n        if (this.dehancer !== undefined) return values.map(this.dehancer);\n        return values;\n    };\n    ObservableArrayAdministration.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableArrayAdministration.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately === void 0) {\n            fireImmediately = false;\n        }\n        if (fireImmediately) {\n            listener({\n                object: this.array,\n                type: \"splice\",\n                index: 0,\n                added: this.values.slice(),\n                addedCount: this.values.length,\n                removed: [],\n                removedCount: 0\n            });\n        }\n        return registerListener(this, listener);\n    };\n    ObservableArrayAdministration.prototype.getArrayLength = function () {\n        this.atom.reportObserved();\n        return this.values.length;\n    };\n    ObservableArrayAdministration.prototype.setArrayLength = function (newLength) {\n        if (typeof newLength !== \"number\" || newLength < 0) throw new Error(\"[mobx.array] Out of range: \" + newLength);\n        var currentLength = this.values.length;\n        if (newLength === currentLength) return;else if (newLength > currentLength) {\n            var newItems = new Array(newLength - currentLength);\n            for (var i = 0; i < newLength - currentLength; i++) {\n                newItems[i] = undefined;\n            } // No Array.fill everywhere...\n            this.spliceWithArray(currentLength, 0, newItems);\n        } else this.spliceWithArray(newLength, currentLength - newLength);\n    };\n    // adds / removes the necessary numeric properties to this object\n    ObservableArrayAdministration.prototype.updateArrayLength = function (oldLength, delta) {\n        if (oldLength !== this.lastKnownLength) throw new Error(\"[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?\");\n        this.lastKnownLength += delta;\n        if (delta > 0 && oldLength + delta + 1 > OBSERVABLE_ARRAY_BUFFER_SIZE) reserveArrayBuffer(oldLength + delta + 1);\n    };\n    ObservableArrayAdministration.prototype.spliceWithArray = function (index, deleteCount, newItems) {\n        var _this = this;\n        checkIfStateModificationsAreAllowed(this.atom);\n        var length = this.values.length;\n        if (index === undefined) index = 0;else if (index > length) index = length;else if (index < 0) index = Math.max(0, length + index);\n        if (arguments.length === 1) deleteCount = length - index;else if (deleteCount === undefined || deleteCount === null) deleteCount = 0;else deleteCount = Math.max(0, Math.min(deleteCount, length - index));\n        if (newItems === undefined) newItems = [];\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                object: this.array,\n                type: \"splice\",\n                index: index,\n                removedCount: deleteCount,\n                added: newItems\n            });\n            if (!change) return EMPTY_ARRAY;\n            deleteCount = change.removedCount;\n            newItems = change.added;\n        }\n        newItems = newItems.map(function (v) {\n            return _this.enhancer(v, undefined);\n        });\n        var lengthDelta = newItems.length - deleteCount;\n        this.updateArrayLength(length, lengthDelta); // create or remove new entries\n        var res = this.spliceItemsIntoValues(index, deleteCount, newItems);\n        if (deleteCount !== 0 || newItems.length !== 0) this.notifyArraySplice(index, newItems, res);\n        return this.dehanceValues(res);\n    };\n    ObservableArrayAdministration.prototype.spliceItemsIntoValues = function (index, deleteCount, newItems) {\n        if (newItems.length < MAX_SPLICE_SIZE) {\n            return (_a = this.values).splice.apply(_a, [index, deleteCount].concat(newItems));\n        } else {\n            var res = this.values.slice(index, index + deleteCount);\n            this.values = this.values.slice(0, index).concat(newItems, this.values.slice(index + deleteCount));\n            return res;\n        }\n        var _a;\n    };\n    ObservableArrayAdministration.prototype.notifyArrayChildUpdate = function (index, newValue, oldValue) {\n        var notifySpy = !this.owned && isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy ? {\n            object: this.array,\n            type: \"update\",\n            index: index, newValue: newValue, oldValue: oldValue\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        this.atom.reportChanged();\n        if (notify) notifyListeners(this, change);\n        if (notifySpy) spyReportEnd();\n    };\n    ObservableArrayAdministration.prototype.notifyArraySplice = function (index, added, removed) {\n        var notifySpy = !this.owned && isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy ? {\n            object: this.array,\n            type: \"splice\",\n            index: index, removed: removed, added: added,\n            removedCount: removed.length,\n            addedCount: added.length\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        this.atom.reportChanged();\n        // conform: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/observe\n        if (notify) notifyListeners(this, change);\n        if (notifySpy) spyReportEnd();\n    };\n    return ObservableArrayAdministration;\n}();\nvar ObservableArray = function (_super) {\n    __extends(ObservableArray, _super);\n    function ObservableArray(initialValues, enhancer, name, owned) {\n        if (name === void 0) {\n            name = \"ObservableArray@\" + getNextId();\n        }\n        if (owned === void 0) {\n            owned = false;\n        }\n        var _this = _super.call(this) || this;\n        var adm = new ObservableArrayAdministration(name, enhancer, _this, owned);\n        addHiddenFinalProp(_this, \"$mobx\", adm);\n        if (initialValues && initialValues.length) {\n            _this.spliceWithArray(0, 0, initialValues);\n        }\n        if (safariPrototypeSetterInheritanceBug) {\n            // Seems that Safari won't use numeric prototype setter untill any * numeric property is\n            // defined on the instance. After that it works fine, even if this property is deleted.\n            Object.defineProperty(adm.array, \"0\", ENTRY_0);\n        }\n        return _this;\n    }\n    ObservableArray.prototype.intercept = function (handler) {\n        return this.$mobx.intercept(handler);\n    };\n    ObservableArray.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately === void 0) {\n            fireImmediately = false;\n        }\n        return this.$mobx.observe(listener, fireImmediately);\n    };\n    ObservableArray.prototype.clear = function () {\n        return this.splice(0);\n    };\n    ObservableArray.prototype.concat = function () {\n        var arrays = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            arrays[_i] = arguments[_i];\n        }\n        this.$mobx.atom.reportObserved();\n        return Array.prototype.concat.apply(this.peek(), arrays.map(function (a) {\n            return isObservableArray(a) ? a.peek() : a;\n        }));\n    };\n    ObservableArray.prototype.replace = function (newItems) {\n        return this.$mobx.spliceWithArray(0, this.$mobx.values.length, newItems);\n    };\n    /**\n     * Converts this array back to a (shallow) javascript structure.\n     * For a deep clone use mobx.toJS\n     */\n    ObservableArray.prototype.toJS = function () {\n        return this.slice();\n    };\n    ObservableArray.prototype.toJSON = function () {\n        // Used by JSON.stringify\n        return this.toJS();\n    };\n    ObservableArray.prototype.peek = function () {\n        this.$mobx.atom.reportObserved();\n        return this.$mobx.dehanceValues(this.$mobx.values);\n    };\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n    ObservableArray.prototype.find = function (predicate, thisArg, fromIndex) {\n        if (fromIndex === void 0) {\n            fromIndex = 0;\n        }\n        var idx = this.findIndex.apply(this, arguments);\n        return idx === -1 ? undefined : this.get(idx);\n    };\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\n    ObservableArray.prototype.findIndex = function (predicate, thisArg, fromIndex) {\n        if (fromIndex === void 0) {\n            fromIndex = 0;\n        }\n        var items = this.peek(),\n            l = items.length;\n        for (var i = fromIndex; i < l; i++) {\n            if (predicate.call(thisArg, items[i], i, this)) return i;\n        }return -1;\n    };\n    /*\n        functions that do alter the internal structure of the array, (based on lib.es6.d.ts)\n        since these functions alter the inner structure of the array, the have side effects.\n        Because the have side effects, they should not be used in computed function,\n        and for that reason the do not call dependencyState.notifyObserved\n        */\n    ObservableArray.prototype.splice = function (index, deleteCount) {\n        var newItems = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            newItems[_i - 2] = arguments[_i];\n        }\n        switch (arguments.length) {\n            case 0:\n                return [];\n            case 1:\n                return this.$mobx.spliceWithArray(index);\n            case 2:\n                return this.$mobx.spliceWithArray(index, deleteCount);\n        }\n        return this.$mobx.spliceWithArray(index, deleteCount, newItems);\n    };\n    ObservableArray.prototype.spliceWithArray = function (index, deleteCount, newItems) {\n        return this.$mobx.spliceWithArray(index, deleteCount, newItems);\n    };\n    ObservableArray.prototype.push = function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var adm = this.$mobx;\n        adm.spliceWithArray(adm.values.length, 0, items);\n        return adm.values.length;\n    };\n    ObservableArray.prototype.pop = function () {\n        return this.splice(Math.max(this.$mobx.values.length - 1, 0), 1)[0];\n    };\n    ObservableArray.prototype.shift = function () {\n        return this.splice(0, 1)[0];\n    };\n    ObservableArray.prototype.unshift = function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var adm = this.$mobx;\n        adm.spliceWithArray(0, 0, items);\n        return adm.values.length;\n    };\n    ObservableArray.prototype.reverse = function () {\n        // reverse by default mutates in place before returning the result\n        // which makes it both a 'derivation' and a 'mutation'.\n        // so we deviate from the default and just make it an dervitation\n        var clone = this.slice();\n        return clone.reverse.apply(clone, arguments);\n    };\n    ObservableArray.prototype.sort = function (compareFn) {\n        // sort by default mutates in place before returning the result\n        // which goes against all good practices. Let's not change the array in place!\n        var clone = this.slice();\n        return clone.sort.apply(clone, arguments);\n    };\n    ObservableArray.prototype.remove = function (value) {\n        var idx = this.$mobx.dehanceValues(this.$mobx.values).indexOf(value);\n        if (idx > -1) {\n            this.splice(idx, 1);\n            return true;\n        }\n        return false;\n    };\n    ObservableArray.prototype.move = function (fromIndex, toIndex) {\n        function checkIndex(index) {\n            if (index < 0) {\n                throw new Error(\"[mobx.array] Index out of bounds: \" + index + \" is negative\");\n            }\n            var length = this.$mobx.values.length;\n            if (index >= length) {\n                throw new Error(\"[mobx.array] Index out of bounds: \" + index + \" is not smaller than \" + length);\n            }\n        }\n        checkIndex.call(this, fromIndex);\n        checkIndex.call(this, toIndex);\n        if (fromIndex === toIndex) {\n            return;\n        }\n        var oldItems = this.$mobx.values;\n        var newItems;\n        if (fromIndex < toIndex) {\n            newItems = oldItems.slice(0, fromIndex).concat(oldItems.slice(fromIndex + 1, toIndex + 1), [oldItems[fromIndex]], oldItems.slice(toIndex + 1));\n        } else {\n            newItems = oldItems.slice(0, toIndex).concat([oldItems[fromIndex]], oldItems.slice(toIndex, fromIndex), oldItems.slice(fromIndex + 1));\n        }\n        this.replace(newItems);\n    };\n    // See #734, in case property accessors are unreliable...\n    ObservableArray.prototype.get = function (index) {\n        var impl = this.$mobx;\n        if (impl) {\n            if (index < impl.values.length) {\n                impl.atom.reportObserved();\n                return impl.dehanceValue(impl.values[index]);\n            }\n            console.warn(\"[mobx.array] Attempt to read an array index (\" + index + \") that is out of bounds (\" + impl.values.length + \"). Please check length first. Out of bound indices will not be tracked by MobX\");\n        }\n        return undefined;\n    };\n    // See #734, in case property accessors are unreliable...\n    ObservableArray.prototype.set = function (index, newValue) {\n        var adm = this.$mobx;\n        var values = adm.values;\n        if (index < values.length) {\n            // update at index in range\n            checkIfStateModificationsAreAllowed(adm.atom);\n            var oldValue = values[index];\n            if (hasInterceptors(adm)) {\n                var change = interceptChange(adm, {\n                    type: \"update\",\n                    object: this,\n                    index: index, newValue: newValue\n                });\n                if (!change) return;\n                newValue = change.newValue;\n            }\n            newValue = adm.enhancer(newValue, oldValue);\n            var changed = newValue !== oldValue;\n            if (changed) {\n                values[index] = newValue;\n                adm.notifyArrayChildUpdate(index, newValue, oldValue);\n            }\n        } else if (index === values.length) {\n            // add a new item\n            adm.spliceWithArray(index, 0, [newValue]);\n        } else {\n            // out of bounds\n            throw new Error(\"[mobx.array] Index out of bounds, \" + index + \" is larger than \" + values.length);\n        }\n    };\n    return ObservableArray;\n}(StubArray);\ndeclareIterator(ObservableArray.prototype, function () {\n    return arrayAsIterator(this.slice());\n});\nObject.defineProperty(ObservableArray.prototype, \"length\", {\n    enumerable: false,\n    configurable: true,\n    get: function get() {\n        return this.$mobx.getArrayLength();\n    },\n    set: function set(newLength) {\n        this.$mobx.setArrayLength(newLength);\n    }\n});\n/**\n * Wrap function from prototype\n */\n[\"every\", \"filter\", \"forEach\", \"indexOf\", \"join\", \"lastIndexOf\", \"map\", \"reduce\", \"reduceRight\", \"slice\", \"some\", \"toString\", \"toLocaleString\"].forEach(function (funcName) {\n    var baseFunc = Array.prototype[funcName];\n    invariant(typeof baseFunc === \"function\", \"Base function not defined on Array prototype: '\" + funcName + \"'\");\n    addHiddenProp(ObservableArray.prototype, funcName, function () {\n        return baseFunc.apply(this.peek(), arguments);\n    });\n});\n/**\n * We don't want those to show up in `for (const key in ar)` ...\n */\nmakeNonEnumerable(ObservableArray.prototype, [\"constructor\", \"intercept\", \"observe\", \"clear\", \"concat\", \"get\", \"replace\", \"toJS\", \"toJSON\", \"peek\", \"find\", \"findIndex\", \"splice\", \"spliceWithArray\", \"push\", \"pop\", \"set\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"remove\", \"move\", \"toString\", \"toLocaleString\"]);\n// See #364\nvar ENTRY_0 = createArrayEntryDescriptor(0);\nfunction createArrayEntryDescriptor(index) {\n    return {\n        enumerable: false,\n        configurable: false,\n        get: function get() {\n            // TODO: Check `this`?, see #752?\n            return this.get(index);\n        },\n        set: function set(value) {\n            this.set(index, value);\n        }\n    };\n}\nfunction createArrayBufferItem(index) {\n    Object.defineProperty(ObservableArray.prototype, \"\" + index, createArrayEntryDescriptor(index));\n}\nfunction reserveArrayBuffer(max) {\n    for (var index = OBSERVABLE_ARRAY_BUFFER_SIZE; index < max; index++) {\n        createArrayBufferItem(index);\n    }OBSERVABLE_ARRAY_BUFFER_SIZE = max;\n}\nreserveArrayBuffer(1000);\nvar isObservableArrayAdministration = createInstanceofPredicate(\"ObservableArrayAdministration\", ObservableArrayAdministration);\nfunction isObservableArray(thing) {\n    return isObject(thing) && isObservableArrayAdministration(thing.$mobx);\n}\n\nvar UNCHANGED = {};\nvar ObservableValue = function (_super) {\n    __extends(ObservableValue, _super);\n    function ObservableValue(value, enhancer, name, notifySpy) {\n        if (name === void 0) {\n            name = \"ObservableValue@\" + getNextId();\n        }\n        if (notifySpy === void 0) {\n            notifySpy = true;\n        }\n        var _this = _super.call(this, name) || this;\n        _this.enhancer = enhancer;\n        _this.hasUnreportedChange = false;\n        _this.dehancer = undefined;\n        _this.value = enhancer(value, undefined, name);\n        if (notifySpy && isSpyEnabled()) {\n            // only notify spy if this is a stand-alone observable\n            spyReport({ type: \"create\", object: _this, newValue: _this.value });\n        }\n        return _this;\n    }\n    ObservableValue.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) return this.dehancer(value);\n        return value;\n    };\n    ObservableValue.prototype.set = function (newValue) {\n        var oldValue = this.value;\n        newValue = this.prepareNewValue(newValue);\n        if (newValue !== UNCHANGED) {\n            var notifySpy = isSpyEnabled();\n            if (notifySpy) {\n                spyReportStart({\n                    type: \"update\",\n                    object: this,\n                    newValue: newValue, oldValue: oldValue\n                });\n            }\n            this.setNewValue(newValue);\n            if (notifySpy) spyReportEnd();\n        }\n    };\n    ObservableValue.prototype.prepareNewValue = function (newValue) {\n        checkIfStateModificationsAreAllowed(this);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, { object: this, type: \"update\", newValue: newValue });\n            if (!change) return UNCHANGED;\n            newValue = change.newValue;\n        }\n        // apply modifier\n        newValue = this.enhancer(newValue, this.value, this.name);\n        return this.value !== newValue ? newValue : UNCHANGED;\n    };\n    ObservableValue.prototype.setNewValue = function (newValue) {\n        var oldValue = this.value;\n        this.value = newValue;\n        this.reportChanged();\n        if (hasListeners(this)) {\n            notifyListeners(this, {\n                type: \"update\",\n                object: this,\n                newValue: newValue, oldValue: oldValue\n            });\n        }\n    };\n    ObservableValue.prototype.get = function () {\n        this.reportObserved();\n        return this.dehanceValue(this.value);\n    };\n    ObservableValue.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableValue.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately) listener({\n            object: this,\n            type: \"update\",\n            newValue: this.value,\n            oldValue: undefined\n        });\n        return registerListener(this, listener);\n    };\n    ObservableValue.prototype.toJSON = function () {\n        return this.get();\n    };\n    ObservableValue.prototype.toString = function () {\n        return this.name + \"[\" + this.value + \"]\";\n    };\n    ObservableValue.prototype.valueOf = function () {\n        return toPrimitive(this.get());\n    };\n    return ObservableValue;\n}(BaseAtom);\nObservableValue.prototype[primitiveSymbol()] = ObservableValue.prototype.valueOf;\nvar isObservableValue = createInstanceofPredicate(\"ObservableValue\", ObservableValue);\n\nvar messages = {\n    \"m001\": \"It is not allowed to assign new values to @action fields\",\n    \"m002\": \"`runInAction` expects a function\",\n    \"m003\": \"`runInAction` expects a function without arguments\",\n    \"m004\": \"autorun expects a function\",\n    \"m005\": \"Warning: attempted to pass an action to autorun. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.\",\n    \"m006\": \"Warning: attempted to pass an action to autorunAsync. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.\",\n    \"m007\": \"reaction only accepts 2 or 3 arguments. If migrating from MobX 2, please provide an options object\",\n    \"m008\": \"wrapping reaction expression in `asReference` is no longer supported, use options object instead\",\n    \"m009\": \"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'. It looks like it was used on a property.\",\n    \"m010\": \"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'\",\n    \"m011\": \"First argument to `computed` should be an expression. If using computed as decorator, don't pass it arguments\",\n    \"m012\": \"computed takes one or two arguments if used as function\",\n    \"m013\": \"[mobx.expr] 'expr' should only be used inside other reactive functions.\",\n    \"m014\": \"extendObservable expected 2 or more arguments\",\n    \"m015\": \"extendObservable expects an object as first argument\",\n    \"m016\": \"extendObservable should not be used on maps, use map.merge instead\",\n    \"m017\": \"all arguments of extendObservable should be objects\",\n    \"m018\": \"extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540\",\n    \"m019\": \"[mobx.isObservable] isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.\",\n    \"m020\": \"modifiers can only be used for individual object properties\",\n    \"m021\": \"observable expects zero or one arguments\",\n    \"m022\": \"@observable can not be used on getters, use @computed instead\",\n    \"m023\": \"Using `transaction` is deprecated, use `runInAction` or `(@)action` instead.\",\n    \"m024\": \"whyRun() can only be used if a derivation is active, or by passing an computed value / reaction explicitly. If you invoked whyRun from inside a computation; the computation is currently suspended but re-evaluating because somebody requested its value.\",\n    \"m025\": \"whyRun can only be used on reactions and computed values\",\n    \"m026\": \"`action` can only be invoked on functions\",\n    \"m028\": \"It is not allowed to set `useStrict` when a derivation is running\",\n    \"m029\": \"INTERNAL ERROR only onBecomeUnobserved shouldn't be called twice in a row\",\n    \"m030a\": \"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: \",\n    \"m030b\": \"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: \",\n    \"m031\": \"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: \",\n    \"m032\": \"* This computation is suspended (not in use by any reaction) and won't run automatically.\\n\tDidn't expect this computation to be suspended at this point?\\n\t  1. Make sure this computation is used by a reaction (reaction, autorun, observer).\\n\t  2. Check whether you are using this computation synchronously (in the same stack as they reaction that needs it).\",\n    \"m033\": \"`observe` doesn't support the fire immediately property for observable maps.\",\n    \"m034\": \"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead\",\n    \"m035\": \"Cannot make the designated object observable; it is not extensible\",\n    \"m036\": \"It is not possible to get index atoms from arrays\",\n    \"m037\": \"Hi there! I'm sorry you have just run into an exception.\\nIf your debugger ends up here, know that some reaction (like the render() of an observer component, autorun or reaction)\\nthrew an exception and that mobx caught it, to avoid that it brings the rest of your application down.\\nThe original cause of the exception (the code that caused this reaction to run (again)), is still in the stack.\\n\\nHowever, more interesting is the actual stack trace of the error itself.\\nHopefully the error is an instanceof Error, because in that case you can inspect the original stack of the error from where it was thrown.\\nSee `error.stack` property, or press the very subtle \\\"(...)\\\" link you see near the console.error message that probably brought you here.\\nThat stack is more interesting than the stack of this console.error itself.\\n\\nIf the exception you see is an exception you created yourself, make sure to use `throw new Error(\\\"Oops\\\")` instead of `throw \\\"Oops\\\"`,\\nbecause the javascript environment will only preserve the original stack trace in the first form.\\n\\nYou can also make sure the debugger pauses the next time this very same exception is thrown by enabling \\\"Pause on caught exception\\\".\\n(Note that it might pause on many other, unrelated exception as well).\\n\\nIf that all doesn't help you out, feel free to open an issue https://github.com/mobxjs/mobx/issues!\\n\",\n    \"m038\": \"Missing items in this list?\\n    1. Check whether all used values are properly marked as observable (use isObservable to verify)\\n    2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.\\n\"\n};\nfunction getMessage(id) {\n    return messages[id];\n}\n\nfunction createAction(actionName, fn) {\n    invariant(typeof fn === \"function\", getMessage(\"m026\"));\n    invariant(typeof actionName === \"string\" && actionName.length > 0, \"actions should have valid names, got: '\" + actionName + \"'\");\n    var res = function res() {\n        return executeAction(actionName, fn, this, arguments);\n    };\n    res.originalFn = fn;\n    res.isMobxAction = true;\n    return res;\n}\nfunction executeAction(actionName, fn, scope, args) {\n    var runInfo = startAction(actionName, fn, scope, args);\n    try {\n        return fn.apply(scope, args);\n    } finally {\n        endAction(runInfo);\n    }\n}\nfunction startAction(actionName, fn, scope, args) {\n    var notifySpy = isSpyEnabled() && !!actionName;\n    var startTime = 0;\n    if (notifySpy) {\n        startTime = Date.now();\n        var l = args && args.length || 0;\n        var flattendArgs = new Array(l);\n        if (l > 0) for (var i = 0; i < l; i++) {\n            flattendArgs[i] = args[i];\n        }spyReportStart({\n            type: \"action\",\n            name: actionName,\n            fn: fn,\n            object: scope,\n            arguments: flattendArgs\n        });\n    }\n    var prevDerivation = untrackedStart();\n    startBatch();\n    var prevAllowStateChanges = allowStateChangesStart(true);\n    return {\n        prevDerivation: prevDerivation,\n        prevAllowStateChanges: prevAllowStateChanges,\n        notifySpy: notifySpy,\n        startTime: startTime\n    };\n}\nfunction endAction(runInfo) {\n    allowStateChangesEnd(runInfo.prevAllowStateChanges);\n    endBatch();\n    untrackedEnd(runInfo.prevDerivation);\n    if (runInfo.notifySpy) spyReportEnd({ time: Date.now() - runInfo.startTime });\n}\nfunction useStrict(strict) {\n    invariant(globalState.trackingDerivation === null, getMessage(\"m028\"));\n    globalState.strictMode = strict;\n    globalState.allowStateChanges = !strict;\n}\nfunction isStrictModeEnabled() {\n    return globalState.strictMode;\n}\nfunction allowStateChanges(allowStateChanges, func) {\n    // TODO: deprecate / refactor this function in next major\n    // Currently only used by `@observer`\n    // Proposed change: remove first param, rename to `forbidStateChanges`,\n    // require error callback instead of the hardcoded error message now used\n    // Use `inAction` instead of allowStateChanges in derivation.ts to check strictMode\n    var prev = allowStateChangesStart(allowStateChanges);\n    var res;\n    try {\n        res = func();\n    } finally {\n        allowStateChangesEnd(prev);\n    }\n    return res;\n}\nfunction allowStateChangesStart(allowStateChanges) {\n    var prev = globalState.allowStateChanges;\n    globalState.allowStateChanges = allowStateChanges;\n    return prev;\n}\nfunction allowStateChangesEnd(prev) {\n    globalState.allowStateChanges = prev;\n}\n\n/**\n * Constructs a decorator, that normalizes the differences between\n * TypeScript and Babel. Mainly caused by the fact that legacy-decorator cannot assign\n * values during instance creation to properties that have a getter setter.\n *\n * - Sigh -\n *\n * Also takes care of the difference between @decorator field and @decorator(args) field, and different forms of values.\n * For performance (cpu and mem) reasons the properties are always defined on the prototype (at least initially).\n * This means that these properties despite being enumerable might not show up in Object.keys() (but they will show up in for...in loops).\n */\nfunction createClassPropertyDecorator(\n/**\n * This function is invoked once, when the property is added to a new instance.\n * When this happens is not strictly determined due to differences in TS and Babel:\n * Typescript: Usually when constructing the new instance\n * Babel, sometimes Typescript: during the first get / set\n * Both: when calling `runLazyInitializers(instance)`\n */\nonInitialize, _get, _set, enumerable,\n/**\n * Can this decorator invoked with arguments? e.g. @decorator(args)\n */\nallowCustomArguments) {\n    function classPropertyDecorator(target, key, descriptor, customArgs, argLen) {\n        if (argLen === void 0) {\n            argLen = 0;\n        }\n        invariant(allowCustomArguments || quacksLikeADecorator(arguments), \"This function is a decorator, but it wasn't invoked like a decorator\");\n        if (!descriptor) {\n            // typescript (except for getter / setters)\n            var newDescriptor = {\n                enumerable: enumerable,\n                configurable: true,\n                get: function get() {\n                    if (!this.__mobxInitializedProps || this.__mobxInitializedProps[key] !== true) typescriptInitializeProperty(this, key, undefined, onInitialize, customArgs, descriptor);\n                    return _get.call(this, key);\n                },\n                set: function set(v) {\n                    if (!this.__mobxInitializedProps || this.__mobxInitializedProps[key] !== true) {\n                        typescriptInitializeProperty(this, key, v, onInitialize, customArgs, descriptor);\n                    } else {\n                        _set.call(this, key, v);\n                    }\n                }\n            };\n            if (arguments.length < 3 || arguments.length === 5 && argLen < 3) {\n                // Typescript target is ES3, so it won't define property for us\n                // or using Reflect.decorate polyfill, which will return no descriptor\n                // (see https://github.com/mobxjs/mobx/issues/333)\n                Object.defineProperty(target, key, newDescriptor);\n            }\n            return newDescriptor;\n        } else {\n            // babel and typescript getter / setter props\n            if (!hasOwnProperty(target, \"__mobxLazyInitializers\")) {\n                addHiddenProp(target, \"__mobxLazyInitializers\", target.__mobxLazyInitializers && target.__mobxLazyInitializers.slice() || [] // support inheritance\n                );\n            }\n            var value_1 = descriptor.value,\n                initializer_1 = descriptor.initializer;\n            target.__mobxLazyInitializers.push(function (instance) {\n                onInitialize(instance, key, initializer_1 ? initializer_1.call(instance) : value_1, customArgs, descriptor);\n            });\n            return {\n                enumerable: enumerable, configurable: true,\n                get: function get() {\n                    if (this.__mobxDidRunLazyInitializers !== true) runLazyInitializers(this);\n                    return _get.call(this, key);\n                },\n                set: function set(v) {\n                    if (this.__mobxDidRunLazyInitializers !== true) runLazyInitializers(this);\n                    _set.call(this, key, v);\n                }\n            };\n        }\n    }\n    if (allowCustomArguments) {\n        /** If custom arguments are allowed, we should return a function that returns a decorator */\n        return function () {\n            /** Direct invocation: @decorator bla */\n            if (quacksLikeADecorator(arguments)) return classPropertyDecorator.apply(null, arguments);\n            /** Indirect invocation: @decorator(args) bla */\n            var outerArgs = arguments;\n            var argLen = arguments.length;\n            return function (target, key, descriptor) {\n                return classPropertyDecorator(target, key, descriptor, outerArgs, argLen);\n            };\n        };\n    }\n    return classPropertyDecorator;\n}\nfunction typescriptInitializeProperty(instance, key, v, onInitialize, customArgs, baseDescriptor) {\n    if (!hasOwnProperty(instance, \"__mobxInitializedProps\")) addHiddenProp(instance, \"__mobxInitializedProps\", {});\n    instance.__mobxInitializedProps[key] = true;\n    onInitialize(instance, key, v, customArgs, baseDescriptor);\n}\nfunction runLazyInitializers(instance) {\n    if (instance.__mobxDidRunLazyInitializers === true) return;\n    if (instance.__mobxLazyInitializers) {\n        addHiddenProp(instance, \"__mobxDidRunLazyInitializers\", true);\n        instance.__mobxDidRunLazyInitializers && instance.__mobxLazyInitializers.forEach(function (initializer) {\n            return initializer(instance);\n        });\n    }\n}\nfunction quacksLikeADecorator(args) {\n    return (args.length === 2 || args.length === 3) && typeof args[1] === \"string\";\n}\n\nvar actionFieldDecorator = createClassPropertyDecorator(function (target, key, value, args, originalDescriptor) {\n    var actionName = args && args.length === 1 ? args[0] : value.name || key || \"<unnamed action>\";\n    var wrappedAction = action(actionName, value);\n    addHiddenProp(target, key, wrappedAction);\n}, function (key) {\n    return this[key];\n}, function () {\n    invariant(false, getMessage(\"m001\"));\n}, false, true);\nvar boundActionDecorator = createClassPropertyDecorator(function (target, key, value) {\n    defineBoundAction(target, key, value);\n}, function (key) {\n    return this[key];\n}, function () {\n    invariant(false, getMessage(\"m001\"));\n}, false, false);\nvar action = function action(arg1, arg2, arg3, arg4) {\n    if (arguments.length === 1 && typeof arg1 === \"function\") return createAction(arg1.name || \"<unnamed action>\", arg1);\n    if (arguments.length === 2 && typeof arg2 === \"function\") return createAction(arg1, arg2);\n    if (arguments.length === 1 && typeof arg1 === \"string\") return namedActionDecorator(arg1);\n    return namedActionDecorator(arg2).apply(null, arguments);\n};\naction.bound = function boundAction(arg1, arg2, arg3) {\n    if (typeof arg1 === \"function\") {\n        var action_1 = createAction(\"<not yet bound action>\", arg1);\n        action_1.autoBind = true;\n        return action_1;\n    }\n    return boundActionDecorator.apply(null, arguments);\n};\nfunction namedActionDecorator(name) {\n    return function (target, prop, descriptor) {\n        if (descriptor && typeof descriptor.value === \"function\") {\n            // TypeScript @action method() { }. Defined on proto before being decorated\n            // Don't use the field decorator if we are just decorating a method\n            descriptor.value = createAction(name, descriptor.value);\n            descriptor.enumerable = false;\n            descriptor.configurable = true;\n            return descriptor;\n        }\n        // bound instance methods\n        return actionFieldDecorator(name).apply(this, arguments);\n    };\n}\nfunction runInAction(arg1, arg2, arg3) {\n    var actionName = typeof arg1 === \"string\" ? arg1 : arg1.name || \"<unnamed action>\";\n    var fn = typeof arg1 === \"function\" ? arg1 : arg2;\n    var scope = typeof arg1 === \"function\" ? arg2 : arg3;\n    invariant(typeof fn === \"function\", getMessage(\"m002\"));\n    invariant(fn.length === 0, getMessage(\"m003\"));\n    invariant(typeof actionName === \"string\" && actionName.length > 0, \"actions should have valid names, got: '\" + actionName + \"'\");\n    return executeAction(actionName, fn, scope, undefined);\n}\nfunction isAction(thing) {\n    return typeof thing === \"function\" && thing.isMobxAction === true;\n}\nfunction defineBoundAction(target, propertyName, fn) {\n    var res = function res() {\n        return executeAction(propertyName, fn, target, arguments);\n    };\n    res.isMobxAction = true;\n    addHiddenProp(target, propertyName, res);\n}\n\nfunction identityComparer(a, b) {\n    return a === b;\n}\nfunction structuralComparer(a, b) {\n    if (typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b)) {\n        return true;\n    }\n    return deepEqual(a, b);\n}\nfunction defaultComparer(a, b) {\n    if (typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b)) {\n        return true;\n    }\n    return identityComparer(a, b);\n}\nvar comparer = {\n    identity: identityComparer,\n    structural: structuralComparer,\n    default: defaultComparer\n};\n\nfunction autorun(arg1, arg2, arg3) {\n    var name, view, scope;\n    if (typeof arg1 === \"string\") {\n        name = arg1;\n        view = arg2;\n        scope = arg3;\n    } else {\n        name = arg1.name || \"Autorun@\" + getNextId();\n        view = arg1;\n        scope = arg2;\n    }\n    invariant(typeof view === \"function\", getMessage(\"m004\"));\n    invariant(isAction(view) === false, getMessage(\"m005\"));\n    if (scope) view = view.bind(scope);\n    var reaction = new Reaction(name, function () {\n        this.track(reactionRunner);\n    });\n    function reactionRunner() {\n        view(reaction);\n    }\n    reaction.schedule();\n    return reaction.getDisposer();\n}\nfunction when(arg1, arg2, arg3, arg4) {\n    var name, predicate, effect, scope;\n    if (typeof arg1 === \"string\") {\n        name = arg1;\n        predicate = arg2;\n        effect = arg3;\n        scope = arg4;\n    } else {\n        name = \"When@\" + getNextId();\n        predicate = arg1;\n        effect = arg2;\n        scope = arg3;\n    }\n    var disposer = autorun(name, function (r) {\n        if (predicate.call(scope)) {\n            r.dispose();\n            var prevUntracked = untrackedStart();\n            effect.call(scope);\n            untrackedEnd(prevUntracked);\n        }\n    });\n    return disposer;\n}\nfunction autorunAsync(arg1, arg2, arg3, arg4) {\n    var name, func, delay, scope;\n    if (typeof arg1 === \"string\") {\n        name = arg1;\n        func = arg2;\n        delay = arg3;\n        scope = arg4;\n    } else {\n        name = arg1.name || \"AutorunAsync@\" + getNextId();\n        func = arg1;\n        delay = arg2;\n        scope = arg3;\n    }\n    invariant(isAction(func) === false, getMessage(\"m006\"));\n    if (delay === void 0) delay = 1;\n    if (scope) func = func.bind(scope);\n    var isScheduled = false;\n    var r = new Reaction(name, function () {\n        if (!isScheduled) {\n            isScheduled = true;\n            setTimeout(function () {\n                isScheduled = false;\n                if (!r.isDisposed) r.track(reactionRunner);\n            }, delay);\n        }\n    });\n    function reactionRunner() {\n        func(r);\n    }\n    r.schedule();\n    return r.getDisposer();\n}\nfunction reaction(expression, effect, arg3) {\n    if (arguments.length > 3) {\n        fail(getMessage(\"m007\"));\n    }\n    if (isModifierDescriptor(expression)) {\n        fail(getMessage(\"m008\"));\n    }\n    var opts;\n    if ((typeof arg3 === \"undefined\" ? \"undefined\" : _typeof(arg3)) === \"object\") {\n        opts = arg3;\n    } else {\n        opts = {};\n    }\n    opts.name = opts.name || expression.name || effect.name || \"Reaction@\" + getNextId();\n    opts.fireImmediately = arg3 === true || opts.fireImmediately === true;\n    opts.delay = opts.delay || 0;\n    opts.compareStructural = opts.compareStructural || opts.struct || false;\n    effect = action(opts.name, opts.context ? effect.bind(opts.context) : effect);\n    if (opts.context) {\n        expression = expression.bind(opts.context);\n    }\n    var firstTime = true;\n    var isScheduled = false;\n    var value;\n    var equals = opts.equals ? opts.equals : opts.compareStructural || opts.struct ? comparer.structural : comparer.default;\n    var r = new Reaction(opts.name, function () {\n        if (firstTime || opts.delay < 1) {\n            reactionRunner();\n        } else if (!isScheduled) {\n            isScheduled = true;\n            setTimeout(function () {\n                isScheduled = false;\n                reactionRunner();\n            }, opts.delay);\n        }\n    });\n    function reactionRunner() {\n        if (r.isDisposed) return;\n        var changed = false;\n        r.track(function () {\n            var nextValue = expression(r);\n            changed = firstTime || !equals(value, nextValue);\n            value = nextValue;\n        });\n        if (firstTime && opts.fireImmediately) effect(value, r);\n        if (!firstTime && changed === true) effect(value, r);\n        if (firstTime) firstTime = false;\n    }\n    r.schedule();\n    return r.getDisposer();\n}\n\n/**\n * A node in the state dependency root that observes other nodes, and can be observed itself.\n *\n * ComputedValue will remember result of the computation for duration of a batch, or being observed\n * During this time it will recompute only when one of its direct dependencies changed,\n * but only when it is being accessed with `ComputedValue.get()`.\n *\n * Implementation description:\n * 1. First time it's being accessed it will compute and remember result\n *    give back remembered result until 2. happens\n * 2. First time any deep dependency change, propagate POSSIBLY_STALE to all observers, wait for 3.\n * 3. When it's being accessed, recompute if any shallow dependency changed.\n *    if result changed: propagate STALE to all observers, that were POSSIBLY_STALE from the last step.\n *    go to step 2. either way\n *\n * If at any point it's outside batch and it isn't observed: reset everything and go to 1.\n */\nvar ComputedValue = function () {\n    /**\n     * Create a new computed value based on a function expression.\n     *\n     * The `name` property is for debug purposes only.\n     *\n     * The `equals` property specifies the comparer function to use to determine if a newly produced\n     * value differs from the previous value. Two comparers are provided in the library; `defaultComparer`\n     * compares based on identity comparison (===), and `structualComparer` deeply compares the structure.\n     * Structural comparison can be convenient if you always produce an new aggregated object and\n     * don't want to notify observers if it is structurally the same.\n     * This is useful for working with vectors, mouse coordinates etc.\n     */\n    function ComputedValue(derivation, scope, equals, name, setter) {\n        this.derivation = derivation;\n        this.scope = scope;\n        this.equals = equals;\n        this.dependenciesState = IDerivationState.NOT_TRACKING;\n        this.observing = []; // nodes we are looking at. Our value depends on these nodes\n        this.newObserving = null; // during tracking it's an array with new observed observers\n        this.isPendingUnobservation = false;\n        this.observers = [];\n        this.observersIndexes = {};\n        this.diffValue = 0;\n        this.runId = 0;\n        this.lastAccessedBy = 0;\n        this.lowestObserverState = IDerivationState.UP_TO_DATE;\n        this.unboundDepsCount = 0;\n        this.__mapid = \"#\" + getNextId();\n        this.value = new CaughtException(null);\n        this.isComputing = false; // to check for cycles\n        this.isRunningSetter = false;\n        this.name = name || \"ComputedValue@\" + getNextId();\n        if (setter) this.setter = createAction(name + \"-setter\", setter);\n    }\n    ComputedValue.prototype.onBecomeStale = function () {\n        propagateMaybeChanged(this);\n    };\n    ComputedValue.prototype.onBecomeUnobserved = function () {\n        clearObserving(this);\n        this.value = undefined;\n    };\n    /**\n     * Returns the current value of this computed value.\n     * Will evaluate its computation first if needed.\n     */\n    ComputedValue.prototype.get = function () {\n        invariant(!this.isComputing, \"Cycle detected in computation \" + this.name, this.derivation);\n        if (globalState.inBatch === 0) {\n            // This is an minor optimization which could be omitted to simplify the code\n            // The computedValue is accessed outside of any mobx stuff. Batch observing should be enough and don't need\n            // tracking as it will never be called again inside this batch.\n            startBatch();\n            if (shouldCompute(this)) this.value = this.computeValue(false);\n            endBatch();\n        } else {\n            reportObserved(this);\n            if (shouldCompute(this)) if (this.trackAndCompute()) propagateChangeConfirmed(this);\n        }\n        var result = this.value;\n        if (isCaughtException(result)) throw result.cause;\n        return result;\n    };\n    ComputedValue.prototype.peek = function () {\n        var res = this.computeValue(false);\n        if (isCaughtException(res)) throw res.cause;\n        return res;\n    };\n    ComputedValue.prototype.set = function (value) {\n        if (this.setter) {\n            invariant(!this.isRunningSetter, \"The setter of computed value '\" + this.name + \"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?\");\n            this.isRunningSetter = true;\n            try {\n                this.setter.call(this.scope, value);\n            } finally {\n                this.isRunningSetter = false;\n            }\n        } else invariant(false, \"[ComputedValue '\" + this.name + \"'] It is not possible to assign a new value to a computed value.\");\n    };\n    ComputedValue.prototype.trackAndCompute = function () {\n        if (isSpyEnabled()) {\n            spyReport({\n                object: this.scope,\n                type: \"compute\",\n                fn: this.derivation\n            });\n        }\n        var oldValue = this.value;\n        var newValue = this.value = this.computeValue(true);\n        return isCaughtException(oldValue) || isCaughtException(newValue) || !this.equals(oldValue, newValue);\n    };\n    ComputedValue.prototype.computeValue = function (track) {\n        this.isComputing = true;\n        globalState.computationDepth++;\n        var res;\n        if (track) {\n            res = trackDerivedFunction(this, this.derivation, this.scope);\n        } else {\n            try {\n                res = this.derivation.call(this.scope);\n            } catch (e) {\n                res = new CaughtException(e);\n            }\n        }\n        globalState.computationDepth--;\n        this.isComputing = false;\n        return res;\n    };\n\n    ComputedValue.prototype.observe = function (listener, fireImmediately) {\n        var _this = this;\n        var firstTime = true;\n        var prevValue = undefined;\n        return autorun(function () {\n            var newValue = _this.get();\n            if (!firstTime || fireImmediately) {\n                var prevU = untrackedStart();\n                listener({\n                    type: \"update\",\n                    object: _this,\n                    newValue: newValue,\n                    oldValue: prevValue\n                });\n                untrackedEnd(prevU);\n            }\n            firstTime = false;\n            prevValue = newValue;\n        });\n    };\n    ComputedValue.prototype.toJSON = function () {\n        return this.get();\n    };\n    ComputedValue.prototype.toString = function () {\n        return this.name + \"[\" + this.derivation.toString() + \"]\";\n    };\n    ComputedValue.prototype.valueOf = function () {\n        return toPrimitive(this.get());\n    };\n\n    ComputedValue.prototype.whyRun = function () {\n        var isTracking = Boolean(globalState.trackingDerivation);\n        var observing = unique(this.isComputing ? this.newObserving : this.observing).map(function (dep) {\n            return dep.name;\n        });\n        var observers = unique(getObservers(this).map(function (dep) {\n            return dep.name;\n        }));\n        return \"\\nWhyRun? computation '\" + this.name + \"':\\n * Running because: \" + (isTracking ? \"[active] the value of this computation is needed by a reaction\" : this.isComputing ? \"[get] The value of this computed was requested outside a reaction\" : \"[idle] not running at the moment\") + \"\\n\" + (this.dependenciesState === IDerivationState.NOT_TRACKING ? getMessage(\"m032\") : \" * This computation will re-run if any of the following observables changes:\\n    \" + joinStrings(observing) + \"\\n    \" + (this.isComputing && isTracking ? \" (... or any observable accessed during the remainder of the current run)\" : \"\") + \"\\n\\t\" + getMessage(\"m038\") + \"\\n\\n  * If the outcome of this computation changes, the following observers will be re-run:\\n    \" + joinStrings(observers) + \"\\n\");\n    };\n    return ComputedValue;\n}();\nComputedValue.prototype[primitiveSymbol()] = ComputedValue.prototype.valueOf;\nvar isComputedValue = createInstanceofPredicate(\"ComputedValue\", ComputedValue);\n\nvar ObservableObjectAdministration = function () {\n    function ObservableObjectAdministration(target, name) {\n        this.target = target;\n        this.name = name;\n        this.values = {};\n        this.changeListeners = null;\n        this.interceptors = null;\n    }\n    /**\n        * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\n        * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\n        * for callback details\n        */\n    ObservableObjectAdministration.prototype.observe = function (callback, fireImmediately) {\n        invariant(fireImmediately !== true, \"`observe` doesn't support the fire immediately property for observable objects.\");\n        return registerListener(this, callback);\n    };\n    ObservableObjectAdministration.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    return ObservableObjectAdministration;\n}();\nfunction asObservableObject(target, name) {\n    if (isObservableObject(target)) return target.$mobx;\n    invariant(Object.isExtensible(target), getMessage(\"m035\"));\n    if (!isPlainObject(target)) name = (target.constructor.name || \"ObservableObject\") + \"@\" + getNextId();\n    if (!name) name = \"ObservableObject@\" + getNextId();\n    var adm = new ObservableObjectAdministration(target, name);\n    addHiddenFinalProp(target, \"$mobx\", adm);\n    return adm;\n}\nfunction defineObservablePropertyFromDescriptor(adm, propName, descriptor, defaultEnhancer) {\n    if (adm.values[propName]) {\n        // already observable property\n        invariant(\"value\" in descriptor, \"The property \" + propName + \" in \" + adm.name + \" is already observable, cannot redefine it as computed property\");\n        adm.target[propName] = descriptor.value; // the property setter will make 'value' reactive if needed.\n        return;\n    }\n    // not yet observable property\n    if (\"value\" in descriptor) {\n        // not a computed value\n        if (isModifierDescriptor(descriptor.value)) {\n            // x : ref(someValue)\n            var modifierDescriptor = descriptor.value;\n            defineObservableProperty(adm, propName, modifierDescriptor.initialValue, modifierDescriptor.enhancer);\n        } else if (isAction(descriptor.value) && descriptor.value.autoBind === true) {\n            defineBoundAction(adm.target, propName, descriptor.value.originalFn);\n        } else if (isComputedValue(descriptor.value)) {\n            // x: computed(someExpr)\n            defineComputedPropertyFromComputedValue(adm, propName, descriptor.value);\n        } else {\n            // x: someValue\n            defineObservableProperty(adm, propName, descriptor.value, defaultEnhancer);\n        }\n    } else {\n        // get x() { return 3 } set x(v) { }\n        defineComputedProperty(adm, propName, descriptor.get, descriptor.set, comparer.default, true);\n    }\n}\nfunction defineObservableProperty(adm, propName, newValue, enhancer) {\n    assertPropertyConfigurable(adm.target, propName);\n    if (hasInterceptors(adm)) {\n        var change = interceptChange(adm, {\n            object: adm.target,\n            name: propName,\n            type: \"add\",\n            newValue: newValue\n        });\n        if (!change) return;\n        newValue = change.newValue;\n    }\n    var observable = adm.values[propName] = new ObservableValue(newValue, enhancer, adm.name + \".\" + propName, false);\n    newValue = observable.value; // observableValue might have changed it\n    Object.defineProperty(adm.target, propName, generateObservablePropConfig(propName));\n    notifyPropertyAddition(adm, adm.target, propName, newValue);\n}\nfunction defineComputedProperty(adm, propName, getter, setter, equals, asInstanceProperty) {\n    if (asInstanceProperty) assertPropertyConfigurable(adm.target, propName);\n    adm.values[propName] = new ComputedValue(getter, adm.target, equals, adm.name + \".\" + propName, setter);\n    if (asInstanceProperty) {\n        Object.defineProperty(adm.target, propName, generateComputedPropConfig(propName));\n    }\n}\nfunction defineComputedPropertyFromComputedValue(adm, propName, computedValue) {\n    var name = adm.name + \".\" + propName;\n    computedValue.name = name;\n    if (!computedValue.scope) computedValue.scope = adm.target;\n    adm.values[propName] = computedValue;\n    Object.defineProperty(adm.target, propName, generateComputedPropConfig(propName));\n}\nvar observablePropertyConfigs = {};\nvar computedPropertyConfigs = {};\nfunction generateObservablePropConfig(propName) {\n    return observablePropertyConfigs[propName] || (observablePropertyConfigs[propName] = {\n        configurable: true,\n        enumerable: true,\n        get: function get() {\n            return this.$mobx.values[propName].get();\n        },\n        set: function set(v) {\n            setPropertyValue(this, propName, v);\n        }\n    });\n}\nfunction generateComputedPropConfig(propName) {\n    return computedPropertyConfigs[propName] || (computedPropertyConfigs[propName] = {\n        configurable: true,\n        enumerable: false,\n        get: function get() {\n            return this.$mobx.values[propName].get();\n        },\n        set: function set(v) {\n            return this.$mobx.values[propName].set(v);\n        }\n    });\n}\nfunction setPropertyValue(instance, name, newValue) {\n    var adm = instance.$mobx;\n    var observable = adm.values[name];\n    // intercept\n    if (hasInterceptors(adm)) {\n        var change = interceptChange(adm, {\n            type: \"update\",\n            object: instance,\n            name: name, newValue: newValue\n        });\n        if (!change) return;\n        newValue = change.newValue;\n    }\n    newValue = observable.prepareNewValue(newValue);\n    // notify spy & observers\n    if (newValue !== UNCHANGED) {\n        var notify = hasListeners(adm);\n        var notifySpy = isSpyEnabled();\n        var change = notify || notifySpy ? {\n            type: \"update\",\n            object: instance,\n            oldValue: observable.value,\n            name: name, newValue: newValue\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        observable.setNewValue(newValue);\n        if (notify) notifyListeners(adm, change);\n        if (notifySpy) spyReportEnd();\n    }\n}\nfunction notifyPropertyAddition(adm, object, name, newValue) {\n    var notify = hasListeners(adm);\n    var notifySpy = isSpyEnabled();\n    var change = notify || notifySpy ? {\n        type: \"add\",\n        object: object, name: name, newValue: newValue\n    } : null;\n    if (notifySpy) spyReportStart(change);\n    if (notify) notifyListeners(adm, change);\n    if (notifySpy) spyReportEnd();\n}\nvar isObservableObjectAdministration = createInstanceofPredicate(\"ObservableObjectAdministration\", ObservableObjectAdministration);\nfunction isObservableObject(thing) {\n    if (isObject(thing)) {\n        // Initializers run lazily when transpiling to babel, so make sure they are run...\n        runLazyInitializers(thing);\n        return isObservableObjectAdministration(thing.$mobx);\n    }\n    return false;\n}\n\n/**\n    * Returns true if the provided value is reactive.\n    * @param value object, function or array\n    * @param property if property is specified, checks whether value.property is reactive.\n    */\nfunction isObservable(value, property) {\n    if (value === null || value === undefined) return false;\n    if (property !== undefined) {\n        if (isObservableArray(value) || isObservableMap(value)) throw new Error(getMessage(\"m019\"));else if (isObservableObject(value)) {\n            var o = value.$mobx;\n            return o.values && !!o.values[property];\n        }\n        return false;\n    }\n    // For first check, see #701\n    return isObservableObject(value) || !!value.$mobx || isAtom(value) || isReaction(value) || isComputedValue(value);\n}\n\nfunction createDecoratorForEnhancer(enhancer) {\n    invariant(!!enhancer, \":(\");\n    return createClassPropertyDecorator(function (target, name, baseValue, _, baseDescriptor) {\n        assertPropertyConfigurable(target, name);\n        invariant(!baseDescriptor || !baseDescriptor.get, getMessage(\"m022\"));\n        var adm = asObservableObject(target, undefined);\n        defineObservableProperty(adm, name, baseValue, enhancer);\n    }, function (name) {\n        var observable = this.$mobx.values[name];\n        if (observable === undefined) return undefined;\n        return observable.get();\n    }, function (name, value) {\n        setPropertyValue(this, name, value);\n    }, true, false);\n}\n\nfunction extendObservable(target) {\n    var properties = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        properties[_i - 1] = arguments[_i];\n    }\n    return extendObservableHelper(target, deepEnhancer, properties);\n}\nfunction extendShallowObservable(target) {\n    var properties = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        properties[_i - 1] = arguments[_i];\n    }\n    return extendObservableHelper(target, referenceEnhancer, properties);\n}\nfunction extendObservableHelper(target, defaultEnhancer, properties) {\n    invariant(arguments.length >= 2, getMessage(\"m014\"));\n    invariant((typeof target === \"undefined\" ? \"undefined\" : _typeof(target)) === \"object\", getMessage(\"m015\"));\n    invariant(!isObservableMap(target), getMessage(\"m016\"));\n    properties.forEach(function (propSet) {\n        invariant((typeof propSet === \"undefined\" ? \"undefined\" : _typeof(propSet)) === \"object\", getMessage(\"m017\"));\n        invariant(!isObservable(propSet), getMessage(\"m018\"));\n    });\n    var adm = asObservableObject(target);\n    var definedProps = {};\n    // Note could be optimised if properties.length === 1\n    for (var i = properties.length - 1; i >= 0; i--) {\n        var propSet = properties[i];\n        for (var key in propSet) {\n            if (definedProps[key] !== true && hasOwnProperty(propSet, key)) {\n                definedProps[key] = true;\n                if (target === propSet && !isPropertyConfigurable(target, key)) continue; // see #111, skip non-configurable or non-writable props for `observable(object)`.\n                var descriptor = Object.getOwnPropertyDescriptor(propSet, key);\n                defineObservablePropertyFromDescriptor(adm, key, descriptor, defaultEnhancer);\n            }\n        }\n    }\n    return target;\n}\n\nvar deepDecorator = createDecoratorForEnhancer(deepEnhancer);\nvar shallowDecorator = createDecoratorForEnhancer(shallowEnhancer);\nvar refDecorator = createDecoratorForEnhancer(referenceEnhancer);\nvar deepStructDecorator = createDecoratorForEnhancer(deepStructEnhancer);\nvar refStructDecorator = createDecoratorForEnhancer(refStructEnhancer);\n/**\n * Turns an object, array or function into a reactive structure.\n * @param v the value which should become observable.\n */\nfunction createObservable(v) {\n    if (v === void 0) {\n        v = undefined;\n    }\n    // @observable someProp;\n    if (typeof arguments[1] === \"string\") return deepDecorator.apply(null, arguments);\n    invariant(arguments.length <= 1, getmessage(\"m021\")); invariant(!ismodifierdescriptor(v), getmessage(\"m020\")); it is an observable already, done if (isobservable(v)) return v; something that can be converted and mutated? var res=\"deepEnhancer(v,\" undefined, undefined); this value could to a new data structure, (res !=\"=\" v) res; otherwise, just box observable.box(v); } iobservablefactories=\"function\" () { function iobservablefactories() {} iobservablefactories.prototype.box=\"function\" (value, name) (arguments.length> 2) incorrectlyUsedAsDecorator(\"box\");\n        return new ObservableValue(value, deepEnhancer, name);\n    };\n    IObservableFactories.prototype.shallowBox = function (value, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowBox\");\n        return new ObservableValue(value, referenceEnhancer, name);\n    };\n    IObservableFactories.prototype.array = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"array\");\n        return new ObservableArray(initialValues, deepEnhancer, name);\n    };\n    IObservableFactories.prototype.shallowArray = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowArray\");\n        return new ObservableArray(initialValues, referenceEnhancer, name);\n    };\n    IObservableFactories.prototype.map = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"map\");\n        return new ObservableMap(initialValues, deepEnhancer, name);\n    };\n    IObservableFactories.prototype.shallowMap = function (initialValues, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowMap\");\n        return new ObservableMap(initialValues, referenceEnhancer, name);\n    };\n    IObservableFactories.prototype.object = function (props, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"object\");\n        var res = {};\n        // convert to observable object\n        asObservableObject(res, name);\n        // add properties\n        extendObservable(res, props);\n        return res;\n    };\n    IObservableFactories.prototype.shallowObject = function (props, name) {\n        if (arguments.length > 2) incorrectlyUsedAsDecorator(\"shallowObject\");\n        var res = {};\n        asObservableObject(res, name);\n        extendShallowObservable(res, props);\n        return res;\n    };\n    IObservableFactories.prototype.ref = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(referenceEnhancer, arguments[0]);\n        } else {\n            return refDecorator.apply(null, arguments);\n        }\n    };\n    IObservableFactories.prototype.shallow = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(shallowEnhancer, arguments[0]);\n        } else {\n            return shallowDecorator.apply(null, arguments);\n        }\n    };\n    IObservableFactories.prototype.deep = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(deepEnhancer, arguments[0]);\n        } else {\n            return deepDecorator.apply(null, arguments);\n        }\n    };\n    IObservableFactories.prototype.struct = function () {\n        if (arguments.length < 2) {\n            // although ref creates actually a modifier descriptor, the type of the resultig properties\n            // of the object is `T` in the end, when the descriptors are interpreted\n            return createModifierDescriptor(deepStructEnhancer, arguments[0]);\n        } else {\n            return deepStructDecorator.apply(null, arguments);\n        }\n    };\n    return IObservableFactories;\n}();\nvar observable = createObservable;\n// weird trick to keep our typings nicely with our funcs, and still extend the observable function\n// ES6 class methods aren't enumerable, can't use Object.keys\nObject.getOwnPropertyNames(IObservableFactories.prototype).filter(function (name) {\n    return name !== \"constructor\";\n}).forEach(function (name) {\n    return observable[name] = IObservableFactories.prototype[name];\n});\nobservable.deep.struct = observable.struct;\nobservable.ref.struct = function () {\n    if (arguments.length < 2) {\n        return createModifierDescriptor(refStructEnhancer, arguments[0]);\n    } else {\n        return refStructDecorator.apply(null, arguments);\n    }\n};\nfunction incorrectlyUsedAsDecorator(methodName) {\n    fail(\"Expected one or two arguments to observable.\" + methodName + \". Did you accidentally try to use observable.\" + methodName + \" as decorator?\");\n}\n\nfunction isModifierDescriptor(thing) {\n    return (typeof thing === \"undefined\" ? \"undefined\" : _typeof(thing)) === \"object\" && thing !== null && thing.isMobxModifierDescriptor === true;\n}\nfunction createModifierDescriptor(enhancer, initialValue) {\n    invariant(!isModifierDescriptor(initialValue), \"Modifiers cannot be nested\");\n    return {\n        isMobxModifierDescriptor: true,\n        initialValue: initialValue,\n        enhancer: enhancer\n    };\n}\nfunction deepEnhancer(v, _, name) {\n    if (isModifierDescriptor(v)) fail(\"You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it\");\n    // it is an observable already, done\n    if (isObservable(v)) return v;\n    // something that can be converted and mutated?\n    if (Array.isArray(v)) return observable.array(v, name);\n    if (isPlainObject(v)) return observable.object(v, name);\n    if (isES6Map(v)) return observable.map(v, name);\n    return v;\n}\nfunction shallowEnhancer(v, _, name) {\n    if (isModifierDescriptor(v)) fail(\"You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it\");\n    if (v === undefined || v === null) return v;\n    if (isObservableObject(v) || isObservableArray(v) || isObservableMap(v)) return v;\n    if (Array.isArray(v)) return observable.shallowArray(v, name);\n    if (isPlainObject(v)) return observable.shallowObject(v, name);\n    if (isES6Map(v)) return observable.shallowMap(v, name);\n    return fail(\"The shallow modifier / decorator can only used in combination with arrays, objects and maps\");\n}\nfunction referenceEnhancer(newValue) {\n    // never turn into an observable\n    return newValue;\n}\nfunction deepStructEnhancer(v, oldValue, name) {\n    // don't confuse structurally compare enhancer with ref enhancer! The latter is probably\n    // more suited for immutable objects\n    if (deepEqual(v, oldValue)) return oldValue;\n    // it is an observable already, done\n    if (isObservable(v)) return v;\n    // something that can be converted and mutated?\n    if (Array.isArray(v)) return new ObservableArray(v, deepStructEnhancer, name);\n    if (isES6Map(v)) return new ObservableMap(v, deepStructEnhancer, name);\n    if (isPlainObject(v)) {\n        var res = {};\n        asObservableObject(res, name);\n        extendObservableHelper(res, deepStructEnhancer, [v]);\n        return res;\n    }\n    return v;\n}\nfunction refStructEnhancer(v, oldValue, name) {\n    if (deepEqual(v, oldValue)) return oldValue;\n    return v;\n}\n\n/**\n * @deprecated\n * During a transaction no views are updated until the end of the transaction.\n * The transaction will be run synchronously nonetheless.\n *\n * Deprecated to simplify api; transactions offer no real benefit above actions.\n *\n * @param action a function that updates some reactive state\n * @returns any value that was returned by the 'action' parameter.\n */\nfunction transaction(action, thisArg) {\n    if (thisArg === void 0) {\n        thisArg = undefined;\n    }\n    deprecated(getMessage(\"m023\"));\n    return runInTransaction.apply(undefined, arguments);\n}\nfunction runInTransaction(action, thisArg) {\n    if (thisArg === void 0) {\n        thisArg = undefined;\n    }\n    return executeAction(\"\", action);\n}\n\nvar ObservableMapMarker = {};\nvar ObservableMap = function () {\n    function ObservableMap(initialData, enhancer, name) {\n        if (enhancer === void 0) {\n            enhancer = deepEnhancer;\n        }\n        if (name === void 0) {\n            name = \"ObservableMap@\" + getNextId();\n        }\n        this.enhancer = enhancer;\n        this.name = name;\n        this.$mobx = ObservableMapMarker;\n        this._data = Object.create(null);\n        this._hasMap = Object.create(null); // hasMap, not hashMap >-).\n        this._keys = new ObservableArray(undefined, referenceEnhancer, this.name + \".keys()\", true);\n        this.interceptors = null;\n        this.changeListeners = null;\n        this.dehancer = undefined;\n        this.merge(initialData);\n    }\n    ObservableMap.prototype._has = function (key) {\n        return typeof this._data[key] !== \"undefined\";\n    };\n    ObservableMap.prototype.has = function (key) {\n        if (!this.isValidKey(key)) return false;\n        key = \"\" + key;\n        if (this._hasMap[key]) return this._hasMap[key].get();\n        return this._updateHasMapEntry(key, false).get();\n    };\n    ObservableMap.prototype.set = function (key, value) {\n        this.assertValidKey(key);\n        key = \"\" + key;\n        var hasKey = this._has(key);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: hasKey ? \"update\" : \"add\",\n                object: this,\n                newValue: value,\n                name: key\n            });\n            if (!change) return this;\n            value = change.newValue;\n        }\n        if (hasKey) {\n            this._updateValue(key, value);\n        } else {\n            this._addValue(key, value);\n        }\n        return this;\n    };\n    ObservableMap.prototype.delete = function (key) {\n        var _this = this;\n        this.assertValidKey(key);\n        key = \"\" + key;\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: \"delete\",\n                object: this,\n                name: key\n            });\n            if (!change) return false;\n        }\n        if (this._has(key)) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy ? {\n                type: \"delete\",\n                object: this,\n                oldValue: this._data[key].value,\n                name: key\n            } : null;\n            if (notifySpy) spyReportStart(change);\n            runInTransaction(function () {\n                _this._keys.remove(key);\n                _this._updateHasMapEntry(key, false);\n                var observable$$1 = _this._data[key];\n                observable$$1.setNewValue(undefined);\n                _this._data[key] = undefined;\n            });\n            if (notify) notifyListeners(this, change);\n            if (notifySpy) spyReportEnd();\n            return true;\n        }\n        return false;\n    };\n    ObservableMap.prototype._updateHasMapEntry = function (key, value) {\n        // optimization; don't fill the hasMap if we are not observing, or remove entry if there are no observers anymore\n        var entry = this._hasMap[key];\n        if (entry) {\n            entry.setNewValue(value);\n        } else {\n            entry = this._hasMap[key] = new ObservableValue(value, referenceEnhancer, this.name + \".\" + key + \"?\", false);\n        }\n        return entry;\n    };\n    ObservableMap.prototype._updateValue = function (name, newValue) {\n        var observable$$1 = this._data[name];\n        newValue = observable$$1.prepareNewValue(newValue);\n        if (newValue !== UNCHANGED) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy ? {\n                type: \"update\",\n                object: this,\n                oldValue: observable$$1.value,\n                name: name, newValue: newValue\n            } : null;\n            if (notifySpy) spyReportStart(change);\n            observable$$1.setNewValue(newValue);\n            if (notify) notifyListeners(this, change);\n            if (notifySpy) spyReportEnd();\n        }\n    };\n    ObservableMap.prototype._addValue = function (name, newValue) {\n        var _this = this;\n        runInTransaction(function () {\n            var observable$$1 = _this._data[name] = new ObservableValue(newValue, _this.enhancer, _this.name + \".\" + name, false);\n            newValue = observable$$1.value; // value might have been changed\n            _this._updateHasMapEntry(name, true);\n            _this._keys.push(name);\n        });\n        var notifySpy = isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy ? {\n            type: \"add\",\n            object: this,\n            name: name,\n            newValue: newValue\n        } : null;\n        if (notifySpy) spyReportStart(change);\n        if (notify) notifyListeners(this, change);\n        if (notifySpy) spyReportEnd();\n    };\n    ObservableMap.prototype.get = function (key) {\n        key = \"\" + key;\n        if (this.has(key)) return this.dehanceValue(this._data[key].get());\n        return this.dehanceValue(undefined);\n    };\n    ObservableMap.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) {\n            return this.dehancer(value);\n        }\n        return value;\n    };\n    ObservableMap.prototype.keys = function () {\n        return arrayAsIterator(this._keys.slice());\n    };\n    ObservableMap.prototype.values = function () {\n        return arrayAsIterator(this._keys.map(this.get, this));\n    };\n    ObservableMap.prototype.entries = function () {\n        var _this = this;\n        return arrayAsIterator(this._keys.map(function (key) {\n            return [key, _this.get(key)];\n        }));\n    };\n    ObservableMap.prototype.forEach = function (callback, thisArg) {\n        var _this = this;\n        this.keys().forEach(function (key) {\n            return callback.call(thisArg, _this.get(key), key, _this);\n        });\n    };\n    /** Merge another object into this object, returns this. */\n    ObservableMap.prototype.merge = function (other) {\n        var _this = this;\n        if (isObservableMap(other)) {\n            other = other.toJS();\n        }\n        runInTransaction(function () {\n            if (isPlainObject(other)) Object.keys(other).forEach(function (key) {\n                return _this.set(key, other[key]);\n            });else if (Array.isArray(other)) other.forEach(function (_a) {\n                var key = _a[0],\n                    value = _a[1];\n                return _this.set(key, value);\n            });else if (isES6Map(other)) other.forEach(function (value, key) {\n                return _this.set(key, value);\n            });else if (other !== null && other !== undefined) fail(\"Cannot initialize map from \" + other);\n        });\n        return this;\n    };\n    ObservableMap.prototype.clear = function () {\n        var _this = this;\n        runInTransaction(function () {\n            untracked(function () {\n                _this.keys().forEach(_this.delete, _this);\n            });\n        });\n    };\n    ObservableMap.prototype.replace = function (values) {\n        var _this = this;\n        runInTransaction(function () {\n            _this.clear();\n            _this.merge(values);\n        });\n        return this;\n    };\n    Object.defineProperty(ObservableMap.prototype, \"size\", {\n        get: function get() {\n            return this._keys.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Returns a shallow non observable object clone of this map.\n     * Note that the values migth still be observable. For a deep clone use mobx.toJS.\n     */\n    ObservableMap.prototype.toJS = function () {\n        var _this = this;\n        var res = {};\n        this.keys().forEach(function (key) {\n            return res[key] = _this.get(key);\n        });\n        return res;\n    };\n    ObservableMap.prototype.toJSON = function () {\n        // Used by JSON.stringify\n        return this.toJS();\n    };\n    ObservableMap.prototype.isValidKey = function (key) {\n        if (key === null || key === undefined) return false;\n        if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"boolean\") return true;\n        return false;\n    };\n    ObservableMap.prototype.assertValidKey = function (key) {\n        if (!this.isValidKey(key)) throw new Error(\"[mobx.map] Invalid key: '\" + key + \"', only strings, numbers and booleans are accepted as key in observable maps.\");\n    };\n    ObservableMap.prototype.toString = function () {\n        var _this = this;\n        return this.name + \"[{ \" + this.keys().map(function (key) {\n            return key + \": \" + (\"\" + _this.get(key));\n        }).join(\", \") + \" }]\";\n    };\n    /**\n     * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\n     * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\n     * for callback details\n     */\n    ObservableMap.prototype.observe = function (listener, fireImmediately) {\n        invariant(fireImmediately !== true, getMessage(\"m033\"));\n        return registerListener(this, listener);\n    };\n    ObservableMap.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    return ObservableMap;\n}();\ndeclareIterator(ObservableMap.prototype, function () {\n    return this.entries();\n});\nfunction map(initialValues) {\n    deprecated(\"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead\");\n    return observable.map(initialValues);\n}\n/* 'var' fixes small-build issue */\nvar isObservableMap = createInstanceofPredicate(\"ObservableMap\", ObservableMap);\n\nvar EMPTY_ARRAY = [];\nObject.freeze(EMPTY_ARRAY);\nfunction getGlobal() {\n    return global;\n}\nfunction getNextId() {\n    return ++globalState.mobxGuid;\n}\nfunction fail(message, thing) {\n    invariant(false, message, thing);\n    throw \"X\"; // unreachable\n}\nfunction invariant(check, message, thing) {\n    if (!check) throw new Error(\"[mobx] Invariant failed: \" + message + (thing ? \" in '\" + thing + \"'\" : \"\"));\n}\n/**\n * Prints a deprecation message, but only one time.\n * Returns false if the deprecated message was already printed before\n */\nvar deprecatedMessages = [];\nfunction deprecated(msg) {\n    if (deprecatedMessages.indexOf(msg) !== -1) return false;\n    deprecatedMessages.push(msg);\n    console.error(\"[mobx] Deprecated: \" + msg);\n    return true;\n}\n/**\n * Makes sure that the provided function is invoked at most once.\n */\nfunction once(func) {\n    var invoked = false;\n    return function () {\n        if (invoked) return;\n        invoked = true;\n        return func.apply(this, arguments);\n    };\n}\nvar noop = function noop() {};\nfunction unique(list) {\n    var res = [];\n    list.forEach(function (item) {\n        if (res.indexOf(item) === -1) res.push(item);\n    });\n    return res;\n}\nfunction joinStrings(things, limit, separator) {\n    if (limit === void 0) {\n        limit = 100;\n    }\n    if (separator === void 0) {\n        separator = \" - \";\n    }\n    if (!things) return \"\";\n    var sliced = things.slice(0, limit);\n    return \"\" + sliced.join(separator) + (things.length > limit ? \" (... and \" + (things.length - limit) + \"more)\" : \"\");\n}\nfunction isObject(value) {\n    return value !== null && (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\";\n}\nfunction isPlainObject(value) {\n    if (value === null || (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) !== \"object\") return false;\n    var proto = Object.getPrototypeOf(value);\n    return proto === Object.prototype || proto === null;\n}\nfunction objectAssign() {\n    var res = arguments[0];\n    for (var i = 1, l = arguments.length; i < l; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n            if (hasOwnProperty(source, key)) {\n                res[key] = source[key];\n            }\n        }\n    }\n    return res;\n}\nvar prototypeHasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(object, propName) {\n    return prototypeHasOwnProperty.call(object, propName);\n}\nfunction makeNonEnumerable(object, propNames) {\n    for (var i = 0; i < propNames.length; i++) {\n        addHiddenProp(object, propNames[i], object[propNames[i]]);\n    }\n}\nfunction addHiddenProp(object, propName, value) {\n    Object.defineProperty(object, propName, {\n        enumerable: false,\n        writable: true,\n        configurable: true,\n        value: value\n    });\n}\nfunction addHiddenFinalProp(object, propName, value) {\n    Object.defineProperty(object, propName, {\n        enumerable: false,\n        writable: false,\n        configurable: true,\n        value: value\n    });\n}\nfunction isPropertyConfigurable(object, prop) {\n    var descriptor = Object.getOwnPropertyDescriptor(object, prop);\n    return !descriptor || descriptor.configurable !== false && descriptor.writable !== false;\n}\nfunction assertPropertyConfigurable(object, prop) {\n    invariant(isPropertyConfigurable(object, prop), \"Cannot make property '\" + prop + \"' observable, it is not configurable and writable in the target object\");\n}\nfunction getEnumerableKeys(obj) {\n    var res = [];\n    for (var key in obj) {\n        res.push(key);\n    }return res;\n}\n/**\n * Naive deepEqual. Doesn't check for prototype, non-enumerable or out-of-range properties on arrays.\n * If you have such a case, you probably should use this function but something fancier :).\n */\nfunction deepEqual(a, b) {\n    if (a === null && b === null) return true;\n    if (a === undefined && b === undefined) return true;\n    if ((typeof a === \"undefined\" ? \"undefined\" : _typeof(a)) !== \"object\") return a === b;\n    var aIsArray = isArrayLike(a);\n    var aIsMap = isMapLike(a);\n    if (aIsArray !== isArrayLike(b)) {\n        return false;\n    } else if (aIsMap !== isMapLike(b)) {\n        return false;\n    } else if (aIsArray) {\n        if (a.length !== b.length) return false;\n        for (var i = a.length - 1; i >= 0; i--) {\n            if (!deepEqual(a[i], b[i])) return false;\n        }return true;\n    } else if (aIsMap) {\n        if (a.size !== b.size) return false;\n        var equals_1 = true;\n        a.forEach(function (value, key) {\n            equals_1 = equals_1 && deepEqual(b.get(key), value);\n        });\n        return equals_1;\n    } else if ((typeof a === \"undefined\" ? \"undefined\" : _typeof(a)) === \"object\" && (typeof b === \"undefined\" ? \"undefined\" : _typeof(b)) === \"object\") {\n        if (a === null || b === null) return false;\n        if (isMapLike(a) && isMapLike(b)) {\n            if (a.size !== b.size) return false;\n            // Freaking inefficient.... Create PR if you run into this :) Much appreciated!\n            return deepEqual(observable.shallowMap(a).entries(), observable.shallowMap(b).entries());\n        }\n        if (getEnumerableKeys(a).length !== getEnumerableKeys(b).length) return false;\n        for (var prop in a) {\n            if (!(prop in b)) return false;\n            if (!deepEqual(a[prop], b[prop])) return false;\n        }\n        return true;\n    }\n    return false;\n}\nfunction createInstanceofPredicate(name, clazz) {\n    var propName = \"isMobX\" + name;\n    clazz.prototype[propName] = true;\n    return function (x) {\n        return isObject(x) && x[propName] === true;\n    };\n}\n/**\n * Returns whether the argument is an array, disregarding observability.\n */\nfunction isArrayLike(x) {\n    return Array.isArray(x) || isObservableArray(x);\n}\nfunction isMapLike(x) {\n    return isES6Map(x) || isObservableMap(x);\n}\nfunction isES6Map(thing) {\n    if (getGlobal().Map !== undefined && thing instanceof getGlobal().Map) return true;\n    return false;\n}\nfunction primitiveSymbol() {\n    return typeof Symbol === \"function\" && Symbol.toPrimitive || \"@@toPrimitive\";\n}\nfunction toPrimitive(value) {\n    return value === null ? null : (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\" ? \"\" + value : value;\n}\n\n/**\n * These values will persist if global state is reset\n */\nvar persistentKeys = [\"mobxGuid\", \"resetId\", \"spyListeners\", \"strictMode\", \"runId\"];\nvar MobXGlobals = function () {\n    function MobXGlobals() {\n        /**\n         * MobXGlobals version.\n         * MobX compatiblity with other versions loaded in memory as long as this version matches.\n         * It indicates that the global state still stores similar information\n         */\n        this.version = 5;\n        /**\n         * Currently running derivation\n         */\n        this.trackingDerivation = null;\n        /**\n         * Are we running a computation currently? (not a reaction)\n         */\n        this.computationDepth = 0;\n        /**\n         * Each time a derivation is tracked, it is assigned a unique run-id\n         */\n        this.runId = 0;\n        /**\n         * 'guid' for general purpose. Will be persisted amongst resets.\n         */\n        this.mobxGuid = 0;\n        /**\n         * Are we in a batch block? (and how many of them)\n         */\n        this.inBatch = 0;\n        /**\n         * Observables that don't have observers anymore, and are about to be\n         * suspended, unless somebody else accesses it in the same batch\n         *\n         * @type {IObservable[]}\n         */\n        this.pendingUnobservations = [];\n        /**\n         * List of scheduled, not yet executed, reactions.\n         */\n        this.pendingReactions = [];\n        /**\n         * Are we currently processing reactions?\n         */\n        this.isRunningReactions = false;\n        /**\n         * Is it allowed to change observables at this point?\n         * In general, MobX doesn't allow that when running computations and React.render.\n         * To ensure that those functions stay pure.\n         */\n        this.allowStateChanges = true;\n        /**\n         * If strict mode is enabled, state changes are by default not allowed\n         */\n        this.strictMode = false;\n        /**\n         * Used by createTransformer to detect that the global state has been reset.\n         */\n        this.resetId = 0;\n        /**\n         * Spy callbacks\n         */\n        this.spyListeners = [];\n        /**\n         * Globally attached error handlers that react specifically to errors in reactions\n         */\n        this.globalReactionErrorHandlers = [];\n    }\n    return MobXGlobals;\n}();\nvar globalState = new MobXGlobals();\nvar shareGlobalStateCalled = false;\nvar runInIsolationCalled = false;\nvar warnedAboutMultipleInstances = false;\n{\n    var global_1 = getGlobal();\n    if (!global_1.__mobxInstanceCount) {\n        global_1.__mobxInstanceCount = 1;\n    } else {\n        global_1.__mobxInstanceCount++;\n        setTimeout(function () {\n            if (!shareGlobalStateCalled && !runInIsolationCalled && !warnedAboutMultipleInstances) {\n                warnedAboutMultipleInstances = true;\n                console.warn(\"[mobx] Warning: there are multiple mobx instances active. This might lead to unexpected results. See https://github.com/mobxjs/mobx/issues/1082 for details.\");\n            }\n        });\n    }\n}\nfunction isolateGlobalState() {\n    runInIsolationCalled = true;\n    getGlobal().__mobxInstanceCount--;\n}\nfunction shareGlobalState() {\n    // TODO: remove in 4.0; just use peer dependencies instead.\n    deprecated(\"Using `shareGlobalState` is not recommended, use peer dependencies instead. See https://github.com/mobxjs/mobx/issues/1082 for details.\");\n    shareGlobalStateCalled = true;\n    var global = getGlobal();\n    var ownState = globalState;\n    /**\n     * Backward compatibility check\n     */\n    if (global.__mobservableTrackingStack || global.__mobservableViewStack) throw new Error(\"[mobx] An incompatible version of mobservable is already loaded.\");\n    if (global.__mobxGlobal && global.__mobxGlobal.version !== ownState.version) throw new Error(\"[mobx] An incompatible version of mobx is already loaded.\");\n    if (global.__mobxGlobal) globalState = global.__mobxGlobal;else global.__mobxGlobal = ownState;\n}\nfunction getGlobalState() {\n    return globalState;\n}\n\n/**\n * For testing purposes only; this will break the internal state of existing observables,\n * but can be used to get back at a stable state after throwing errors\n */\nfunction resetGlobalState() {\n    globalState.resetId++;\n    var defaultGlobals = new MobXGlobals();\n    for (var key in defaultGlobals) {\n        if (persistentKeys.indexOf(key) === -1) globalState[key] = defaultGlobals[key];\n    }globalState.allowStateChanges = !globalState.strictMode;\n}\n\nfunction hasObservers(observable) {\n    return observable.observers && observable.observers.length > 0;\n}\nfunction getObservers(observable) {\n    return observable.observers;\n}\nfunction addObserver(observable, node) {\n    // invariant(node.dependenciesState !== -1, \"INTERNAL ERROR, can add only dependenciesState !== -1\");\n    // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR add already added node\");\n    // invariantObservers(observable);\n    var l = observable.observers.length;\n    if (l) {\n        observable.observersIndexes[node.__mapid] = l;\n    }\n    observable.observers[l] = node;\n    if (observable.lowestObserverState > node.dependenciesState) observable.lowestObserverState = node.dependenciesState;\n    // invariantObservers(observable);\n    // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR didnt add node\");\n}\nfunction removeObserver(observable, node) {\n    // invariant(globalState.inBatch > 0, \"INTERNAL ERROR, remove should be called only inside batch\");\n    // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR remove already removed node\");\n    // invariantObservers(observable);\n    if (observable.observers.length === 1) {\n        // deleting last observer\n        observable.observers.length = 0;\n        queueForUnobservation(observable);\n    } else {\n        // deleting from _observersIndexes is straight forward, to delete from _observers, let's swap `node` with last element\n        var list = observable.observers;\n        var map = observable.observersIndexes;\n        var filler = list.pop(); // get last element, which should fill the place of `node`, so the array doesnt have holes\n        if (filler !== node) {\n            var index = map[node.__mapid] || 0; // getting index of `node`. this is the only place we actually use map.\n            if (index) {\n                map[filler.__mapid] = index;\n            } else {\n                delete map[filler.__mapid];\n            }\n            list[index] = filler;\n        }\n        delete map[node.__mapid];\n    }\n    // invariantObservers(observable);\n    // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR remove already removed node2\");\n}\nfunction queueForUnobservation(observable) {\n    if (!observable.isPendingUnobservation) {\n        // invariant(globalState.inBatch > 0, \"INTERNAL ERROR, remove should be called only inside batch\");\n        // invariant(observable._observers.length === 0, \"INTERNAL ERROR, shuold only queue for unobservation unobserved observables\");\n        observable.isPendingUnobservation = true;\n        globalState.pendingUnobservations.push(observable);\n    }\n}\n/**\n * Batch starts a transaction, at least for purposes of memoizing ComputedValues when nothing else does.\n * During a batch `onBecomeUnobserved` will be called at most once per observable.\n * Avoids unnecessary recalculations.\n */\nfunction startBatch() {\n    globalState.inBatch++;\n}\nfunction endBatch() {\n    if (--globalState.inBatch === 0) {\n        runReactions();\n        // the batch is actually about to finish, all unobserving should happen here.\n        var list = globalState.pendingUnobservations;\n        for (var i = 0; i < list.length; i++) {\n            var observable = list[i];\n            observable.isPendingUnobservation = false;\n            if (observable.observers.length === 0) {\n                observable.onBecomeUnobserved();\n                // NOTE: onBecomeUnobserved might push to `pendingUnobservations`\n            }\n        }\n        globalState.pendingUnobservations = [];\n    }\n}\nfunction reportObserved(observable) {\n    var derivation = globalState.trackingDerivation;\n    if (derivation !== null) {\n        /**\n         * Simple optimization, give each derivation run an unique id (runId)\n         * Check if last time this observable was accessed the same runId is used\n         * if this is the case, the relation is already known\n         */\n        if (derivation.runId !== observable.lastAccessedBy) {\n            observable.lastAccessedBy = derivation.runId;\n            derivation.newObserving[derivation.unboundDepsCount++] = observable;\n        }\n    } else if (observable.observers.length === 0) {\n        queueForUnobservation(observable);\n    }\n}\n/**\n * NOTE: current propagation mechanism will in case of self reruning autoruns behave unexpectedly\n * It will propagate changes to observers from previous run\n * It's hard or maybe impossible (with reasonable perf) to get it right with current approach\n * Hopefully self reruning autoruns aren't a feature people should depend on\n * Also most basic use cases should be ok\n */\n// Called by Atom when its value changes\nfunction propagateChanged(observable) {\n    // invariantLOS(observable, \"changed start\");\n    if (observable.lowestObserverState === IDerivationState.STALE) return;\n    observable.lowestObserverState = IDerivationState.STALE;\n    var observers = observable.observers;\n    var i = observers.length;\n    while (i--) {\n        var d = observers[i];\n        if (d.dependenciesState === IDerivationState.UP_TO_DATE) d.onBecomeStale();\n        d.dependenciesState = IDerivationState.STALE;\n    }\n    // invariantLOS(observable, \"changed end\");\n}\n// Called by ComputedValue when it recalculate and its value changed\nfunction propagateChangeConfirmed(observable) {\n    // invariantLOS(observable, \"confirmed start\");\n    if (observable.lowestObserverState === IDerivationState.STALE) return;\n    observable.lowestObserverState = IDerivationState.STALE;\n    var observers = observable.observers;\n    var i = observers.length;\n    while (i--) {\n        var d = observers[i];\n        if (d.dependenciesState === IDerivationState.POSSIBLY_STALE) d.dependenciesState = IDerivationState.STALE;else if (d.dependenciesState === IDerivationState.UP_TO_DATE) observable.lowestObserverState = IDerivationState.UP_TO_DATE;\n    }\n    // invariantLOS(observable, \"confirmed end\");\n}\n// Used by computed when its dependency changed, but we don't wan't to immediately recompute.\nfunction propagateMaybeChanged(observable) {\n    // invariantLOS(observable, \"maybe start\");\n    if (observable.lowestObserverState !== IDerivationState.UP_TO_DATE) return;\n    observable.lowestObserverState = IDerivationState.POSSIBLY_STALE;\n    var observers = observable.observers;\n    var i = observers.length;\n    while (i--) {\n        var d = observers[i];\n        if (d.dependenciesState === IDerivationState.UP_TO_DATE) {\n            d.dependenciesState = IDerivationState.POSSIBLY_STALE;\n            d.onBecomeStale();\n        }\n    }\n    // invariantLOS(observable, \"maybe end\");\n}\n\nvar IDerivationState;\n(function (IDerivationState) {\n    // before being run or (outside batch and not being observed)\n    // at this point derivation is not holding any data about dependency tree\n    IDerivationState[IDerivationState[\"NOT_TRACKING\"] = -1] = \"NOT_TRACKING\";\n    // no shallow dependency changed since last computation\n    // won't recalculate derivation\n    // this is what makes mobx fast\n    IDerivationState[IDerivationState[\"UP_TO_DATE\"] = 0] = \"UP_TO_DATE\";\n    // some deep dependency changed, but don't know if shallow dependency changed\n    // will require to check first if UP_TO_DATE or POSSIBLY_STALE\n    // currently only ComputedValue will propagate POSSIBLY_STALE\n    //\n    // having this state is second big optimization:\n    // don't have to recompute on every dependency change, but only when it's needed\n    IDerivationState[IDerivationState[\"POSSIBLY_STALE\"] = 1] = \"POSSIBLY_STALE\";\n    // shallow dependency changed\n    // will need to recompute when it's needed\n    IDerivationState[IDerivationState[\"STALE\"] = 2] = \"STALE\";\n})(IDerivationState || (exports.IDerivationState = IDerivationState = {}));\nvar CaughtException = function () {\n    function CaughtException(cause) {\n        this.cause = cause;\n        // Empty\n    }\n    return CaughtException;\n}();\nfunction isCaughtException(e) {\n    return e instanceof CaughtException;\n}\n/**\n * Finds out whether any dependency of the derivation has actually changed.\n * If dependenciesState is 1 then it will recalculate dependencies,\n * if any dependency changed it will propagate it by changing dependenciesState to 2.\n *\n * By iterating over the dependencies in the same order that they were reported and\n * stopping on the first change, all the recalculations are only called for ComputedValues\n * that will be tracked by derivation. That is because we assume that if the first x\n * dependencies of the derivation doesn't change then the derivation should run the same way\n * up until accessing x-th dependency.\n */\nfunction shouldCompute(derivation) {\n    switch (derivation.dependenciesState) {\n        case IDerivationState.UP_TO_DATE:\n            return false;\n        case IDerivationState.NOT_TRACKING:\n        case IDerivationState.STALE:\n            return true;\n        case IDerivationState.POSSIBLY_STALE:\n            {\n                var prevUntracked = untrackedStart(); // no need for those computeds to be reported, they will be picked up in trackDerivedFunction.\n                var obs = derivation.observing,\n                    l = obs.length;\n                for (var i = 0; i < l; i++) {\n                    var obj = obs[i];\n                    if (isComputedValue(obj)) {\n                        try {\n                            obj.get();\n                        } catch (e) {\n                            // we are not interested in the value *or* exception at this moment, but if there is one, notify all\n                            untrackedEnd(prevUntracked);\n                            return true;\n                        }\n                        // if ComputedValue `obj` actually changed it will be computed and propagated to its observers.\n                        // and `derivation` is an observer of `obj`\n                        if (derivation.dependenciesState === IDerivationState.STALE) {\n                            untrackedEnd(prevUntracked);\n                            return true;\n                        }\n                    }\n                }\n                changeDependenciesStateTo0(derivation);\n                untrackedEnd(prevUntracked);\n                return false;\n            }\n    }\n}\nfunction isComputingDerivation() {\n    return globalState.trackingDerivation !== null; // filter out actions inside computations\n}\nfunction checkIfStateModificationsAreAllowed(atom) {\n    var hasObservers$$1 = atom.observers.length > 0;\n    // Should never be possible to change an observed observable from inside computed, see #798\n    if (globalState.computationDepth > 0 && hasObservers$$1) fail(getMessage(\"m031\") + atom.name);\n    // Should not be possible to change observed state outside strict mode, except during initialization, see #563\n    if (!globalState.allowStateChanges && hasObservers$$1) fail(getMessage(globalState.strictMode ? \"m030a\" : \"m030b\") + atom.name);\n}\n/**\n * Executes the provided function `f` and tracks which observables are being accessed.\n * The tracking information is stored on the `derivation` object and the derivation is registered\n * as observer of any of the accessed observables.\n */\nfunction trackDerivedFunction(derivation, f, context) {\n    // pre allocate array allocation + room for variation in deps\n    // array will be trimmed by bindDependencies\n    changeDependenciesStateTo0(derivation);\n    derivation.newObserving = new Array(derivation.observing.length + 100);\n    derivation.unboundDepsCount = 0;\n    derivation.runId = ++globalState.runId;\n    var prevTracking = globalState.trackingDerivation;\n    globalState.trackingDerivation = derivation;\n    var result;\n    try {\n        result = f.call(context);\n    } catch (e) {\n        result = new CaughtException(e);\n    }\n    globalState.trackingDerivation = prevTracking;\n    bindDependencies(derivation);\n    return result;\n}\n/**\n * diffs newObserving with observing.\n * update observing to be newObserving with unique observables\n * notify observers that become observed/unobserved\n */\nfunction bindDependencies(derivation) {\n    // invariant(derivation.dependenciesState !== IDerivationState.NOT_TRACKING, \"INTERNAL ERROR bindDependencies expects derivation.dependenciesState !== -1\");\n    var prevObserving = derivation.observing;\n    var observing = derivation.observing = derivation.newObserving;\n    var lowestNewObservingDerivationState = IDerivationState.UP_TO_DATE;\n    derivation.newObserving = null; // newObserving shouldn't be needed outside tracking\n    // Go through all new observables and check diffValue: (this list can contain duplicates):\n    //   0: first occurrence, change to 1 and keep it\n    //   1: extra occurrence, drop it\n    var i0 = 0,\n        l = derivation.unboundDepsCount;\n    for (var i = 0; i < l; i++) {\n        var dep = observing[i];\n        if (dep.diffValue === 0) {\n            dep.diffValue = 1;\n            if (i0 !== i) observing[i0] = dep;\n            i0++;\n        }\n        // Upcast is 'safe' here, because if dep is IObservable, `dependenciesState` will be undefined,\n        // not hitting the condition\n        if (dep.dependenciesState > lowestNewObservingDerivationState) {\n            lowestNewObservingDerivationState = dep.dependenciesState;\n        }\n    }\n    observing.length = i0;\n    // Go through all old observables and check diffValue: (it is unique after last bindDependencies)\n    //   0: it's not in new observables, unobserve it\n    //   1: it keeps being observed, don't want to notify it. change to 0\n    l = prevObserving.length;\n    while (l--) {\n        var dep = prevObserving[l];\n        if (dep.diffValue === 0) {\n            removeObserver(dep, derivation);\n        }\n        dep.diffValue = 0;\n    }\n    // Go through all new observables and check diffValue: (now it should be unique)\n    //   0: it was set to 0 in last loop. don't need to do anything.\n    //   1: it wasn't observed, let's observe it. set back to 0\n    while (i0--) {\n        var dep = observing[i0];\n        if (dep.diffValue === 1) {\n            dep.diffValue = 0;\n            addObserver(dep, derivation);\n        }\n    }\n    // Some new observed derivations might become stale during this derivation computation\n    // so say had no chance to propagate staleness (#916)\n    if (lowestNewObservingDerivationState !== IDerivationState.UP_TO_DATE) {\n        derivation.dependenciesState = lowestNewObservingDerivationState;\n        derivation.onBecomeStale();\n    }\n}\nfunction clearObserving(derivation) {\n    // invariant(globalState.inBatch > 0, \"INTERNAL ERROR clearObserving should be called only inside batch\");\n    var obs = derivation.observing;\n    derivation.observing = [];\n    var i = obs.length;\n    while (i--) {\n        removeObserver(obs[i], derivation);\n    }derivation.dependenciesState = IDerivationState.NOT_TRACKING;\n}\nfunction untracked(action) {\n    var prev = untrackedStart();\n    var res = action();\n    untrackedEnd(prev);\n    return res;\n}\nfunction untrackedStart() {\n    var prev = globalState.trackingDerivation;\n    globalState.trackingDerivation = null;\n    return prev;\n}\nfunction untrackedEnd(prev) {\n    globalState.trackingDerivation = prev;\n}\n/**\n * needed to keep `lowestObserverState` correct. when changing from (2 or 1) to 0\n *\n */\nfunction changeDependenciesStateTo0(derivation) {\n    if (derivation.dependenciesState === IDerivationState.UP_TO_DATE) return;\n    derivation.dependenciesState = IDerivationState.UP_TO_DATE;\n    var obs = derivation.observing;\n    var i = obs.length;\n    while (i--) {\n        obs[i].lowestObserverState = IDerivationState.UP_TO_DATE;\n    }\n}\n\nvar Reaction = function () {\n    function Reaction(name, onInvalidate) {\n        if (name === void 0) {\n            name = \"Reaction@\" + getNextId();\n        }\n        this.name = name;\n        this.onInvalidate = onInvalidate;\n        this.observing = []; // nodes we are looking at. Our value depends on these nodes\n        this.newObserving = [];\n        this.dependenciesState = IDerivationState.NOT_TRACKING;\n        this.diffValue = 0;\n        this.runId = 0;\n        this.unboundDepsCount = 0;\n        this.__mapid = \"#\" + getNextId();\n        this.isDisposed = false;\n        this._isScheduled = false;\n        this._isTrackPending = false;\n        this._isRunning = false;\n    }\n    Reaction.prototype.onBecomeStale = function () {\n        this.schedule();\n    };\n    Reaction.prototype.schedule = function () {\n        if (!this._isScheduled) {\n            this._isScheduled = true;\n            globalState.pendingReactions.push(this);\n            runReactions();\n        }\n    };\n    Reaction.prototype.isScheduled = function () {\n        return this._isScheduled;\n    };\n    /**\n     * internal, use schedule() if you intend to kick off a reaction\n     */\n    Reaction.prototype.runReaction = function () {\n        if (!this.isDisposed) {\n            startBatch();\n            this._isScheduled = false;\n            if (shouldCompute(this)) {\n                this._isTrackPending = true;\n                this.onInvalidate();\n                if (this._isTrackPending && isSpyEnabled()) {\n                    // onInvalidate didn't trigger track right away..\n                    spyReport({\n                        object: this,\n                        type: \"scheduled-reaction\"\n                    });\n                }\n            }\n            endBatch();\n        }\n    };\n    Reaction.prototype.track = function (fn) {\n        startBatch();\n        var notify = isSpyEnabled();\n        var startTime;\n        if (notify) {\n            startTime = Date.now();\n            spyReportStart({\n                object: this,\n                type: \"reaction\",\n                fn: fn\n            });\n        }\n        this._isRunning = true;\n        var result = trackDerivedFunction(this, fn, undefined);\n        this._isRunning = false;\n        this._isTrackPending = false;\n        if (this.isDisposed) {\n            // disposed during last run. Clean up everything that was bound after the dispose call.\n            clearObserving(this);\n        }\n        if (isCaughtException(result)) this.reportExceptionInDerivation(result.cause);\n        if (notify) {\n            spyReportEnd({\n                time: Date.now() - startTime\n            });\n        }\n        endBatch();\n    };\n    Reaction.prototype.reportExceptionInDerivation = function (error) {\n        var _this = this;\n        if (this.errorHandler) {\n            this.errorHandler(error, this);\n            return;\n        }\n        var message = \"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '\" + this;\n        var messageToUser = getMessage(\"m037\");\n        console.error(message || messageToUser /* latter will not be true, make sure uglify doesn't remove */, error);\n        /** If debugging brought you here, please, read the above message :-). Tnx! */\n        if (isSpyEnabled()) {\n            spyReport({\n                type: \"error\",\n                message: message,\n                error: error,\n                object: this\n            });\n        }\n        globalState.globalReactionErrorHandlers.forEach(function (f) {\n            return f(error, _this);\n        });\n    };\n    Reaction.prototype.dispose = function () {\n        if (!this.isDisposed) {\n            this.isDisposed = true;\n            if (!this._isRunning) {\n                startBatch();\n                clearObserving(this); // if disposed while running, clean up later. Maybe not optimal, but rare case\n                endBatch();\n            }\n        }\n    };\n    Reaction.prototype.getDisposer = function () {\n        var r = this.dispose.bind(this);\n        r.$mobx = this;\n        r.onError = registerErrorHandler;\n        return r;\n    };\n    Reaction.prototype.toString = function () {\n        return \"Reaction[\" + this.name + \"]\";\n    };\n    Reaction.prototype.whyRun = function () {\n        var observing = unique(this._isRunning ? this.newObserving : this.observing).map(function (dep) {\n            return dep.name;\n        });\n        return \"\\nWhyRun? reaction '\" + this.name + \"':\\n * Status: [\" + (this.isDisposed ? \"stopped\" : this._isRunning ? \"running\" : this.isScheduled() ? \"scheduled\" : \"idle\") + \"]\\n * This reaction will re-run if any of the following observables changes:\\n    \" + joinStrings(observing) + \"\\n    \" + (this._isRunning ? \" (... or any observable accessed during the remainder of the current run)\" : \"\") + \"\\n\\t\" + getMessage(\"m038\") + \"\\n\";\n    };\n    return Reaction;\n}();\nfunction registerErrorHandler(handler) {\n    invariant(this && this.$mobx && isReaction(this.$mobx), \"Invalid `this`\");\n    invariant(!this.$mobx.errorHandler, \"Only one onErrorHandler can be registered\");\n    this.$mobx.errorHandler = handler;\n}\nfunction onReactionError(handler) {\n    globalState.globalReactionErrorHandlers.push(handler);\n    return function () {\n        var idx = globalState.globalReactionErrorHandlers.indexOf(handler);\n        if (idx >= 0) globalState.globalReactionErrorHandlers.splice(idx, 1);\n    };\n}\n/**\n * Magic number alert!\n * Defines within how many times a reaction is allowed to re-trigger itself\n * until it is assumed that this is gonna be a never ending loop...\n */\nvar MAX_REACTION_ITERATIONS = 100;\nvar reactionScheduler = function reactionScheduler(f) {\n    return f();\n};\nfunction runReactions() {\n    // Trampolining, if runReactions are already running, new reactions will be picked up\n    if (globalState.inBatch > 0 || globalState.isRunningReactions) return;\n    reactionScheduler(runReactionsHelper);\n}\nfunction runReactionsHelper() {\n    globalState.isRunningReactions = true;\n    var allReactions = globalState.pendingReactions;\n    var iterations = 0;\n    // While running reactions, new reactions might be triggered.\n    // Hence we work with two variables and check whether\n    // we converge to no remaining reactions after a while.\n    while (allReactions.length > 0) {\n        if (++iterations === MAX_REACTION_ITERATIONS) {\n            console.error(\"Reaction doesn't converge to a stable state after \" + MAX_REACTION_ITERATIONS + \" iterations.\" + (\" Probably there is a cycle in the reactive function: \" + allReactions[0]));\n            allReactions.splice(0); // clear reactions\n        }\n        var remainingReactions = allReactions.splice(0);\n        for (var i = 0, l = remainingReactions.length; i < l; i++) {\n            remainingReactions[i].runReaction();\n        }\n    }\n    globalState.isRunningReactions = false;\n}\nvar isReaction = createInstanceofPredicate(\"Reaction\", Reaction);\nfunction setReactionScheduler(fn) {\n    var baseScheduler = reactionScheduler;\n    reactionScheduler = function reactionScheduler(f) {\n        return fn(function () {\n            return baseScheduler(f);\n        });\n    };\n}\n\nfunction asReference(value) {\n    deprecated(\"asReference is deprecated, use observable.ref instead\");\n    return observable.ref(value);\n}\nfunction asStructure(value) {\n    deprecated(\"asStructure is deprecated. Use observable.struct, computed.struct or reaction options instead.\");\n    return observable.struct(value);\n}\nfunction asFlat(value) {\n    deprecated(\"asFlat is deprecated, use observable.shallow instead\");\n    return observable.shallow(value);\n}\nfunction asMap(data) {\n    deprecated(\"asMap is deprecated, use observable.map or observable.shallowMap instead\");\n    return observable.map(data || {});\n}\n\nfunction createComputedDecorator(equals) {\n    return createClassPropertyDecorator(function (target, name, _, __, originalDescriptor) {\n        invariant(typeof originalDescriptor !== \"undefined\", getMessage(\"m009\"));\n        invariant(typeof originalDescriptor.get === \"function\", getMessage(\"m010\"));\n        var adm = asObservableObject(target, \"\");\n        defineComputedProperty(adm, name, originalDescriptor.get, originalDescriptor.set, equals, false);\n    }, function (name) {\n        var observable = this.$mobx.values[name];\n        if (observable === undefined) return undefined;\n        return observable.get();\n    }, function (name, value) {\n        this.$mobx.values[name].set(value);\n    }, false, false);\n}\nvar computedDecorator = createComputedDecorator(comparer.default);\nvar computedStructDecorator = createComputedDecorator(comparer.structural);\n/**\n * Decorator for class properties: @computed get value() { return expr; }.\n * For legacy purposes also invokable as ES5 observable created: `computed(() => expr)`;\n */\nvar computed = function computed(arg1, arg2, arg3) {\n    if (typeof arg2 === \"string\") {\n        return computedDecorator.apply(null, arguments);\n    }\n    invariant(typeof arg1 === \"function\", getMessage(\"m011\"));\n    invariant(arguments.length < 3, getMessage(\"m012\"));\n    var opts = (typeof arg2 === \"undefined\" ? \"undefined\" : _typeof(arg2)) === \"object\" ? arg2 : {};\n    opts.setter = typeof arg2 === \"function\" ? arg2 : opts.setter;\n    var equals = opts.equals ? opts.equals : opts.compareStructural || opts.struct ? comparer.structural : comparer.default;\n    return new ComputedValue(arg1, opts.context, equals, opts.name || arg1.name || \"\", opts.setter);\n};\ncomputed.struct = computedStructDecorator;\ncomputed.equals = createComputedDecorator;\n\nfunction getAtom(thing, property) {\n    if ((typeof thing === \"undefined\" ? \"undefined\" : _typeof(thing)) === \"object\" && thing !== null) {\n        if (isObservableArray(thing)) {\n            invariant(property === undefined, getMessage(\"m036\"));\n            return thing.$mobx.atom;\n        }\n        if (isObservableMap(thing)) {\n            var anyThing = thing;\n            if (property === undefined) return getAtom(anyThing._keys);\n            var observable = anyThing._data[property] || anyThing._hasMap[property];\n            invariant(!!observable, \"the entry '\" + property + \"' does not exist in the observable map '\" + getDebugName(thing) + \"'\");\n            return observable;\n        }\n        // Initializers run lazily when transpiling to babel, so make sure they are run...\n        runLazyInitializers(thing);\n        if (property && !thing.$mobx) thing[property]; // See #1072 // TODO: remove in 4.0\n        if (isObservableObject(thing)) {\n            if (!property) return fail(\"please specify a property\");\n            var observable = thing.$mobx.values[property];\n            invariant(!!observable, \"no observable property '\" + property + \"' found on the observable object '\" + getDebugName(thing) + \"'\");\n            return observable;\n        }\n        if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) {\n            return thing;\n        }\n    } else if (typeof thing === \"function\") {\n        if (isReaction(thing.$mobx)) {\n            // disposer function\n            return thing.$mobx;\n        }\n    }\n    return fail(\"Cannot obtain atom from \" + thing);\n}\nfunction getAdministration(thing, property) {\n    invariant(thing, \"Expecting some object\");\n    if (property !== undefined) return getAdministration(getAtom(thing, property));\n    if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) return thing;\n    if (isObservableMap(thing)) return thing;\n    // Initializers run lazily when transpiling to babel, so make sure they are run...\n    runLazyInitializers(thing);\n    if (thing.$mobx) return thing.$mobx;\n    invariant(false, \"Cannot obtain administration from \" + thing);\n}\nfunction getDebugName(thing, property) {\n    var named;\n    if (property !== undefined) named = getAtom(thing, property);else if (isObservableObject(thing) || isObservableMap(thing)) named = getAdministration(thing);else named = getAtom(thing); // valid for arrays as well\n    return named.name;\n}\n\nfunction isComputed(value, property) {\n    if (value === null || value === undefined) return false;\n    if (property !== undefined) {\n        if (isObservableObject(value) === false) return false;\n        var atom = getAtom(value, property);\n        return isComputedValue(atom);\n    }\n    return isComputedValue(value);\n}\n\nfunction observe(thing, propOrCb, cbOrFire, fireImmediately) {\n    if (typeof cbOrFire === \"function\") return observeObservableProperty(thing, propOrCb, cbOrFire, fireImmediately);else return observeObservable(thing, propOrCb, cbOrFire);\n}\nfunction observeObservable(thing, listener, fireImmediately) {\n    return getAdministration(thing).observe(listener, fireImmediately);\n}\nfunction observeObservableProperty(thing, property, listener, fireImmediately) {\n    return getAdministration(thing, property).observe(listener, fireImmediately);\n}\n\nfunction intercept(thing, propOrHandler, handler) {\n    if (typeof handler === \"function\") return interceptProperty(thing, propOrHandler, handler);else return interceptInterceptable(thing, propOrHandler);\n}\nfunction interceptInterceptable(thing, handler) {\n    return getAdministration(thing).intercept(handler);\n}\nfunction interceptProperty(thing, property, handler) {\n    return getAdministration(thing, property).intercept(handler);\n}\n\n/**\n    * expr can be used to create temporarily views inside views.\n    * This can be improved to improve performance if a value changes often, but usually doesn't affect the outcome of an expression.\n    *\n    * In the following example the expression prevents that a component is rerender _each time_ the selection changes;\n    * instead it will only rerenders when the current todo is (de)selected.\n    *\n    * reactiveComponent((props) => {\n    *     const todo = props.todo;\n    *     const isSelected = mobx.expr(() => props.viewState.selection === todo);\n    *     return <div classname=\"{isSelected\" ? \"todo todo-selected\" : \"todo\"}>{todo.title}</div>\n    * });\n    *\n    */\nfunction expr(expr, scope) {\n    if (!isComputingDerivation()) console.warn(getMessage(\"m013\"));\n    // optimization: would be more efficient if the expr itself wouldn't be evaluated first on the next change, but just a 'changed' signal would be fired\n    return computed(expr, { context: scope }).get();\n}\n\nfunction toJS(source, detectCycles, __alreadySeen) {\n    if (detectCycles === void 0) {\n        detectCycles = true;\n    }\n    if (__alreadySeen === void 0) {\n        __alreadySeen = [];\n    }\n    // optimization: using ES6 map would be more efficient!\n    // optimization: lift this function outside toJS, this makes recursion expensive\n    function cache(value) {\n        if (detectCycles) __alreadySeen.push([source, value]);\n        return value;\n    }\n    if (isObservable(source)) {\n        if (detectCycles && __alreadySeen === null) __alreadySeen = [];\n        if (detectCycles && source !== null && (typeof source === \"undefined\" ? \"undefined\" : _typeof(source)) === \"object\") {\n            for (var i = 0, l = __alreadySeen.length; i < l; i++) {\n                if (__alreadySeen[i][0] === source) return __alreadySeen[i][1];\n            }\n        }\n        if (isObservableArray(source)) {\n            var res = cache([]);\n            var toAdd = source.map(function (value) {\n                return toJS(value, detectCycles, __alreadySeen);\n            });\n            res.length = toAdd.length;\n            for (var i = 0, l = toAdd.length; i < l; i++) {\n                res[i] = toAdd[i];\n            }return res;\n        }\n        if (isObservableObject(source)) {\n            var res = cache({});\n            for (var key in source) {\n                res[key] = toJS(source[key], detectCycles, __alreadySeen);\n            }return res;\n        }\n        if (isObservableMap(source)) {\n            var res_1 = cache({});\n            source.forEach(function (value, key) {\n                return res_1[key] = toJS(value, detectCycles, __alreadySeen);\n            });\n            return res_1;\n        }\n        if (isObservableValue(source)) return toJS(source.get(), detectCycles, __alreadySeen);\n    }\n    return source;\n}\n\nfunction createTransformer(transformer, onCleanup) {\n    invariant(typeof transformer === \"function\" && transformer.length < 2, \"createTransformer expects a function that accepts one argument\");\n    // Memoizes: object id -> reactive view that applies transformer to the object\n    var objectCache = {};\n    // If the resetId changes, we will clear the object cache, see #163\n    // This construction is used to avoid leaking refs to the objectCache directly\n    var resetId = globalState.resetId;\n    // Local transformer class specifically for this transformer\n    var Transformer = function (_super) {\n        __extends(Transformer, _super);\n        function Transformer(sourceIdentifier, sourceObject) {\n            var _this = _super.call(this, function () {\n                return transformer(sourceObject);\n            }, undefined, comparer.default, \"Transformer-\" + transformer.name + \"-\" + sourceIdentifier, undefined) || this;\n            _this.sourceIdentifier = sourceIdentifier;\n            _this.sourceObject = sourceObject;\n            return _this;\n        }\n        Transformer.prototype.onBecomeUnobserved = function () {\n            var lastValue = this.value;\n            _super.prototype.onBecomeUnobserved.call(this);\n            delete objectCache[this.sourceIdentifier];\n            if (onCleanup) onCleanup(lastValue, this.sourceObject);\n        };\n        return Transformer;\n    }(ComputedValue);\n    return function (object) {\n        if (resetId !== globalState.resetId) {\n            objectCache = {};\n            resetId = globalState.resetId;\n        }\n        var identifier = getMemoizationId(object);\n        var reactiveTransformer = objectCache[identifier];\n        if (reactiveTransformer) return reactiveTransformer.get();\n        // Not in cache; create a reactive view\n        reactiveTransformer = objectCache[identifier] = new Transformer(identifier, object);\n        return reactiveTransformer.get();\n    };\n}\nfunction getMemoizationId(object) {\n    if (typeof object === 'string' || typeof object === 'number') return object;\n    if (object === null || (typeof object === \"undefined\" ? \"undefined\" : _typeof(object)) !== \"object\") throw new Error(\"[mobx] transform expected some kind of object or primitive value, got: \" + object);\n    var tid = object.$transformId;\n    if (tid === undefined) {\n        tid = getNextId();\n        addHiddenProp(object, \"$transformId\", tid);\n    }\n    return tid;\n}\n\nfunction log(msg) {\n    console.log(msg);\n    return msg;\n}\nfunction whyRun(thing, prop) {\n    switch (arguments.length) {\n        case 0:\n            thing = globalState.trackingDerivation;\n            if (!thing) return log(getMessage(\"m024\"));\n            break;\n        case 2:\n            thing = getAtom(thing, prop);\n            break;\n    }\n    thing = getAtom(thing);\n    if (isComputedValue(thing)) return log(thing.whyRun());else if (isReaction(thing)) return log(thing.whyRun());\n    return fail(getMessage(\"m025\"));\n}\n\nfunction getDependencyTree(thing, property) {\n    return nodeToDependencyTree(getAtom(thing, property));\n}\nfunction nodeToDependencyTree(node) {\n    var result = {\n        name: node.name\n    };\n    if (node.observing && node.observing.length > 0) result.dependencies = unique(node.observing).map(nodeToDependencyTree);\n    return result;\n}\nfunction getObserverTree(thing, property) {\n    return nodeToObserverTree(getAtom(thing, property));\n}\nfunction nodeToObserverTree(node) {\n    var result = {\n        name: node.name\n    };\n    if (hasObservers(node)) result.observers = getObservers(node).map(nodeToObserverTree);\n    return result;\n}\n\nfunction interceptReads(thing, propOrHandler, handler) {\n    var target;\n    if (isObservableMap(thing) || isObservableArray(thing) || isObservableValue(thing)) {\n        target = getAdministration(thing);\n    } else if (isObservableObject(thing)) {\n        if (typeof propOrHandler !== \"string\") return fail(\"InterceptReads can only be used with a specific property, not with an object in general\");\n        target = getAdministration(thing, propOrHandler);\n    } else {\n        return fail(\"Expected observable map, object or array as first array\");\n    }\n    if (target.dehancer !== undefined) return fail(\"An intercept reader was already established\");\n    target.dehancer = typeof propOrHandler === \"function\" ? propOrHandler : handler;\n    return function () {\n        target.dehancer = undefined;\n    };\n}\n\n/**\n * (c) Michel Weststrate 2015 - 2016\n * MIT Licensed\n *\n * Welcome to the mobx sources! To get an global overview of how MobX internally works,\n * this is a good place to start:\n * https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.xvbh6qd74\n *\n * Source folders:\n * ===============\n *\n * - api/     Most of the public static methods exposed by the module can be found here.\n * - core/    Implementation of the MobX algorithm; atoms, derivations, reactions, dependency trees, optimizations. Cool stuff can be found here.\n * - types/   All the magic that is need to have observable objects, arrays and values is in this folder. Including the modifiers like `asFlat`.\n * - utils/   Utility stuff.\n *\n */\nvar extras = {\n    allowStateChanges: allowStateChanges,\n    deepEqual: deepEqual,\n    getAtom: getAtom,\n    getDebugName: getDebugName,\n    getDependencyTree: getDependencyTree,\n    getAdministration: getAdministration,\n    getGlobalState: getGlobalState,\n    getObserverTree: getObserverTree,\n    interceptReads: interceptReads,\n    isComputingDerivation: isComputingDerivation,\n    isSpyEnabled: isSpyEnabled,\n    onReactionError: onReactionError,\n    reserveArrayBuffer: reserveArrayBuffer,\n    resetGlobalState: resetGlobalState,\n    isolateGlobalState: isolateGlobalState,\n    shareGlobalState: shareGlobalState,\n    spyReport: spyReport,\n    spyReportEnd: spyReportEnd,\n    spyReportStart: spyReportStart,\n    setReactionScheduler: setReactionScheduler\n};\nvar everything = {\n    Reaction: Reaction,\n    untracked: untracked,\n    Atom: Atom, BaseAtom: BaseAtom,\n    useStrict: useStrict, isStrictModeEnabled: isStrictModeEnabled,\n    spy: spy,\n    comparer: comparer,\n    asReference: asReference, asFlat: asFlat, asStructure: asStructure, asMap: asMap,\n    isModifierDescriptor: isModifierDescriptor,\n    isObservableObject: isObservableObject,\n    isBoxedObservable: isObservableValue,\n    isObservableArray: isObservableArray,\n    ObservableMap: ObservableMap, isObservableMap: isObservableMap, map: map,\n    transaction: transaction,\n    observable: observable,\n    computed: computed,\n    isObservable: isObservable,\n    isComputed: isComputed,\n    extendObservable: extendObservable, extendShallowObservable: extendShallowObservable,\n    observe: observe,\n    intercept: intercept,\n    autorun: autorun, autorunAsync: autorunAsync, when: when, reaction: reaction,\n    action: action, isAction: isAction, runInAction: runInAction,\n    expr: expr,\n    toJS: toJS,\n    createTransformer: createTransformer,\n    whyRun: whyRun,\n    isArrayLike: isArrayLike,\n    extras: extras\n};\nvar warnedAboutDefaultExport = false;\nvar _loop_1 = function _loop_1(p) {\n    var val = everything[p];\n    Object.defineProperty(everything, p, {\n        get: function get() {\n            if (!warnedAboutDefaultExport) {\n                warnedAboutDefaultExport = true;\n                console.warn('Using default export (`import mobx from \\'mobx\\'`) is deprecated ' + 'and won’t work in mobx@4.0.0\\n' + 'Use `import * as mobx from \\'mobx\\'` instead');\n            }\n            return val;\n        }\n    });\n};\nfor (var p in everything) {\n    _loop_1(p);\n}\nif ((typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ === \"undefined\" ? \"undefined\" : _typeof(__MOBX_DEVTOOLS_GLOBAL_HOOK__)) === \"object\") {\n    __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({ spy: spy, extras: extras });\n}\n\nexports.extras = extras;\nexports.Reaction = Reaction;\nexports.untracked = untracked;\nexports.IDerivationState = IDerivationState;\nexports.Atom = Atom;\nexports.BaseAtom = BaseAtom;\nexports.useStrict = useStrict;\nexports.isStrictModeEnabled = isStrictModeEnabled;\nexports.spy = spy;\nexports.comparer = comparer;\nexports.asReference = asReference;\nexports.asFlat = asFlat;\nexports.asStructure = asStructure;\nexports.asMap = asMap;\nexports.isModifierDescriptor = isModifierDescriptor;\nexports.isObservableObject = isObservableObject;\nexports.isBoxedObservable = isObservableValue;\nexports.isObservableArray = isObservableArray;\nexports.ObservableMap = ObservableMap;\nexports.isObservableMap = isObservableMap;\nexports.map = map;\nexports.transaction = transaction;\nexports.observable = observable;\nexports.IObservableFactories = IObservableFactories;\nexports.computed = computed;\nexports.isObservable = isObservable;\nexports.isComputed = isComputed;\nexports.extendObservable = extendObservable;\nexports.extendShallowObservable = extendShallowObservable;\nexports.observe = observe;\nexports.intercept = intercept;\nexports.autorun = autorun;\nexports.autorunAsync = autorunAsync;\nexports.when = when;\nexports.reaction = reaction;\nexports.action = action;\nexports.isAction = isAction;\nexports.runInAction = runInAction;\nexports.expr = expr;\nexports.toJS = toJS;\nexports.createTransformer = createTransformer;\nexports.whyRun = whyRun;\nexports.isArrayLike = isArrayLike;\nexports.default = everything;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4)))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _icons = __webpack_require__(6);\n\nvar _constants = __webpack_require__(0);\n\nvar _translator = __webpack_require__(7);\n\nvar translator = _interopRequireWildcard(_translator);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar culture = /^([^-]{1,3})(-|$)/;\nvar $ = function $(x) {\n  return (0, translator.default)(x);\n};\n\nfunction renderHeader(_ref, instance) {\n  var meta = _ref.meta,\n      user = _ref.user,\n      reactions = _ref.reactions;\n\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-header-container';\n\n  var likeButton = document.createElement('span');\n  var likedReaction = reactions.find(function (reaction) {\n    return reaction.content === 'heart' && reaction.user.login === user.login;\n  });\n  likeButton.className = 'gitment-header-like-btn';\n  likeButton.innerHTML = '\\n    ' + _icons.heart + '\\n    ' + (likedReaction ? 'Unlike' : 'Like') + '\\n    ' + (meta.reactions && meta.reactions.heart ? ' \\u2022 <strong>' + meta.reactions.heart + '</strong> Liked' : '') + '\\n  ';\n\n  if (likedReaction) {\n    likeButton.classList.add('liked');\n    likeButton.onclick = function () {\n      return instance.unlike();\n    };\n  } else {\n    likeButton.classList.remove('liked');\n    likeButton.onclick = function () {\n      return instance.like();\n    };\n  }\n  container.appendChild(likeButton);\n\n  var commentsCount = document.createElement('span');\n  commentsCount.innerHTML = '\\n    ' + (meta.comments ? ' \\u2022 <strong>' + meta.comments + '</strong> Comments' : '') + '\\n  ';\n  container.appendChild(commentsCount);\n\n  var issueLink = document.createElement('a');\n  issueLink.className = 'gitment-header-issue-link';\n  issueLink.href = meta.html_url || \"javascript:void(0)\";\n  issueLink.target = '_blank';\n  issueLink.innerText = $('Issue Page');\n  container.appendChild(issueLink);\n\n  return container;\n}\n\nfunction renderComments(_ref2, instance) {\n  var meta = _ref2.meta,\n      comments = _ref2.comments,\n      commentReactions = _ref2.commentReactions,\n      currentPage = _ref2.currentPage,\n      user = _ref2.user,\n      error = _ref2.error;\n\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-comments-container';\n\n  if (error) {\n    var errorBlock = document.createElement('div');\n    errorBlock.className = 'gitment-comments-error';\n\n    if (error === _constants.NOT_INITIALIZED_ERROR && user.login && ~(instance.admin || [instance.owner]).map(function (x) {\n      return x.toLowerCase();\n    }).indexOf(user.login.toLowerCase())) {\n      // && user.login.toLowerCase() === instance.owner.toLowerCase()) {\n      var initHint = document.createElement('div');\n      var initButton = document.createElement('button');\n      initButton.className = 'gitment-comments-init-btn';\n      initButton.onclick = function () {\n        initButton.setAttribute('disabled', true);\n        instance.init().catch(function (e) {\n          initButton.removeAttribute('disabled');\n          alert(e);\n        });\n      };\n      initButton.innerText = $('Initialize Comments');\n      initHint.appendChild(initButton);\n      errorBlock.appendChild(initHint);\n    } else {\n      errorBlock.innerText = $(error);\n    }\n    container.appendChild(errorBlock);\n    return container;\n  } else if (comments === undefined) {\n    var loading = document.createElement('div');\n    loading.innerText = $('Loading comments...');\n    loading.className = 'gitment-comments-loading';\n    container.appendChild(loading);\n    return container;\n  } else if (!comments.length) {\n    var emptyBlock = document.createElement('div');\n    emptyBlock.className = 'gitment-comments-empty';\n    emptyBlock.innerText = $('No Comment Yet');\n    container.appendChild(emptyBlock);\n    return container;\n  }\n\n  var commentsList = document.createElement('ul');\n  commentsList.className = 'gitment-comments-list';\n\n  comments.forEach(function (comment) {\n    var createDate = new Date(comment.created_at);\n    var updateDate = new Date(comment.updated_at);\n    var commentItem = document.createElement('li');\n    commentItem.className = 'gitment-comment';\n    commentItem.innerHTML = '\\n      <a class=\"gitment-comment-avatar\" href=\"' + comment.user.html_url + '\" target=\"_blank\">\\n        <img class=\"gitment-comment-avatar-img\" src=\"' + comment.user.avatar_url + '\">\\n      </a>\\n      <div class=\"gitment-comment-main\">\\n        <div class=\"gitment-comment-header\">\\n          <a class=\"gitment-comment-name\" href=\"' + comment.user.html_url + '\" target=\"_blank\">\\n            ' + comment.user.login + '\\n          </a>\\n          commented on\\n          <span title=\"' + createDate + '\">' + createDate.toDateString() + '</span>\\n          ' + (createDate.toString() !== updateDate.toString() ? ' \\u2022 <span title=\"comment was edited at ' + updateDate + '\">edited</span>' : '') + '\\n          <div class=\"gitment-comment-like-btn\">' + _icons.heart + ' ' + (comment.reactions.heart || '') + '</div>\\n        </div>\\n        <div class=\"gitment-comment-body gitment-markdown\">' + comment.body_html + '</div>\\n      </div>\\n    ';\n    var likeButton = commentItem.querySelector('.gitment-comment-like-btn');\n    var likedReaction = commentReactions[comment.id] && commentReactions[comment.id].find(function (reaction) {\n      return reaction.content === 'heart' && reaction.user.login === user.login;\n    });\n    if (likedReaction) {\n      likeButton.classList.add('liked');\n      likeButton.onclick = function () {\n        return instance.unlikeAComment(comment.id);\n      };\n    } else {\n      likeButton.classList.remove('liked');\n      likeButton.onclick = function () {\n        return instance.likeAComment(comment.id);\n      };\n    }\n\n    // dirty\n    // use a blank image to trigger height calculating when element rendered\n    var imgTrigger = document.createElement('img');\n    var markdownBody = commentItem.querySelector('.gitment-comment-body');\n    imgTrigger.className = 'gitment-hidden';\n    imgTrigger.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n    imgTrigger.onload = function () {\n      if (markdownBody.clientHeight > instance.maxCommentHeight) {\n        markdownBody.classList.add('gitment-comment-body-folded');\n        markdownBody.style.maxHeight = instance.maxCommentHeight + 'px';\n        markdownBody.title = 'Click to Expand';\n        markdownBody.onclick = function () {\n          markdownBody.classList.remove('gitment-comment-body-folded');\n          markdownBody.style.maxHeight = '';\n          markdownBody.title = '';\n          markdownBody.onclick = null;\n        };\n      }\n    };\n    commentItem.appendChild(imgTrigger);\n\n    commentsList.appendChild(commentItem);\n  });\n\n  container.appendChild(commentsList);\n\n  if (meta) {\n    var pageCount = Math.ceil(meta.comments / instance.perPage);\n    if (pageCount > 1) {\n      var pagination = document.createElement('ul');\n      pagination.className = 'gitment-comments-pagination';\n\n      if (currentPage > 1) {\n        var previousButton = document.createElement('li');\n        previousButton.className = 'gitment-comments-page-item';\n        previousButton.innerText = $('Previous');\n        previousButton.onclick = function () {\n          return instance.goto(currentPage - 1);\n        };\n        pagination.appendChild(previousButton);\n      }\n\n      var _loop = function _loop(i) {\n        var pageItem = document.createElement('li');\n        pageItem.className = 'gitment-comments-page-item';\n        pageItem.innerText = i;\n        pageItem.onclick = function () {\n          return instance.goto(i);\n        };\n        if (currentPage === i) pageItem.classList.add('gitment-selected');\n        pagination.appendChild(pageItem);\n      };\n\n      for (var i = 1; i <= pagecount; i++) { _loop(i); } if (currentpage < pagecount) var nextbutton=\"document.createElement('li');\" nextbutton.classname=\"gitment-comments-page-item\" ; nextbutton.innertext=\"$('Next');\" nextbutton.onclick=\"function\" () return instance.goto(currentpage + 1); }; pagination.appendchild(nextbutton); container.appendchild(pagination); container; function rendereditor(_ref3, instance) user=\"_ref3.user,\" error=\"_ref3.error;\" container=\"document.createElement('div');\" container.lang=\"culture.test(instance.lang)\" ? instance.lang : \"en-us\"; container.classname=\"gitment-container gitment-editor-container\" shoulddisable=\"user.login\" && !error '' 'disabled'; disabledtip=\"user.login\" $('login to comment'); container.innerhtml=\"\\n      \" (user.login '<a class=\"gitment-editor-avatar\" href=\"' + user.html_url + '\" target=\"_blank\">\\n            <img class=\"gitment-editor-avatar-img\" src=\"' + user.avatar_url + '\">\\n          ' : user.isLoggingIn ? '<div class=\"gitment-editor-avatar\">' + _icons.spinner + '</div>' : '<a class=\"gitment-editor-avatar\" href=\"' + instance.loginLink + '\" title=\"login with GitHub\">\\n              ' + _icons.github + '\\n            </a>') + '\\n    \\n    <div class=\"gitment-editor-main\">\\n      <div class=\"gitment-editor-header\">\\n        <nav class=\"gitment-editor-tabs\">\\n          <button class=\"gitment-editor-tab gitment-selected\">' + $('Write') + '</button>\\n          <button class=\"gitment-editor-tab\">' + $('Preview') + '</button>\\n        </nav>\\n        <div class=\"gitment-editor-login\">\\n          ' + (user.login ? '<a class=\"gitment-editor-logout-link\">' + $('Logout') + '</a>' : user.isLoggingIn ? $('Logging in...') : '<a class=\"gitment-editor-login-link\" href=\"' + instance.loginLink + '\">' + $('Login') + '</a> with GitHub') + '\\n        </div>\\n      </div>\\n      <div class=\"gitment-editor-body\">\\n        <div class=\"gitment-editor-write-field\">\\n          <textarea placeholder=\"' + $('Leave a comment') + '\" title=\"' + disabledTip + '\" ' + shoulddisable></textarea>\\n        </div>\\n        <div class=\"gitment-editor-preview-field gitment-hidden\">\\n          <div class=\"gitment-editor-preview gitment-markdown\"></div>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\"gitment-editor-footer\">\\n      <a class=\"gitment-editor-footer-tip\" href=\"https://guides.github.com/features/mastering-markdown/\" target=\"_blank\">\\n        Styling with Markdown is supported\\n      </a>\\n      <button class=\"gitment-editor-submit\" title=\"' + disabledTip + '\" ' + shoulddisable>' + $('Comment') + '</button>\\n    </div>\\n  ';\n  if (user.login) {\n    container.querySelector('.gitment-editor-logout-link').onclick = function () {\n      return instance.logout();\n    };\n  }\n\n  var writeField = container.querySelector('.gitment-editor-write-field');\n  var previewField = container.querySelector('.gitment-editor-preview-field');\n\n  var textarea = writeField.querySelector('textarea');\n  textarea.oninput = function () {\n    textarea.style.height = 'auto';\n    var style = window.getComputedStyle(textarea, null);\n    var height = parseInt(style.height, 10);\n    var clientHeight = textarea.clientHeight;\n    var scrollHeight = textarea.scrollHeight;\n    if (clientHeight < scrollHeight) {\n      textarea.style.height = height + scrollHeight - clientHeight + 'px';\n    }\n  };\n\n  var _container$querySelec = container.querySelectorAll('.gitment-editor-tab'),\n      _container$querySelec2 = _slicedToArray(_container$querySelec, 2),\n      writeTab = _container$querySelec2[0],\n      previewTab = _container$querySelec2[1];\n\n  writeTab.onclick = function () {\n    writeTab.classList.add('gitment-selected');\n    previewTab.classList.remove('gitment-selected');\n    writeField.classList.remove('gitment-hidden');\n    previewField.classList.add('gitment-hidden');\n\n    textarea.focus();\n  };\n  previewTab.onclick = function () {\n    previewTab.classList.add('gitment-selected');\n    writeTab.classList.remove('gitment-selected');\n    previewField.classList.remove('gitment-hidden');\n    writeField.classList.add('gitment-hidden');\n\n    var preview = previewField.querySelector('.gitment-editor-preview');\n    var content = textarea.value.trim();\n    if (!content) {\n      preview.innerText = $('Nothing to preview');\n      return;\n    }\n\n    preview.innerText = $('Loading preview...');\n    instance.markdown(content).then(function (html) {\n      return preview.innerHTML = html;\n    });\n  };\n\n  var submitButton = container.querySelector('.gitment-editor-submit');\n  submitButton.onclick = function () {\n    submitButton.innerText = $('Submitting...');\n    submitButton.setAttribute('disabled', true);\n    instance.post(textarea.value.trim()).then(function (data) {\n      textarea.value = '';\n      textarea.style.height = 'auto';\n      submitButton.removeAttribute('disabled');\n      submitButton.innerText = $('Comment');\n    }).catch(function (e) {\n      alert(e);\n      submitButton.removeAttribute('disabled');\n      submitButton.innerText = $('Comment');\n    });\n  };\n\n  return container;\n}\n\nfunction renderFooter(state, instance) {\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n  container.className = 'gitment-container gitment-footer-container';\n  container.innerHTML = '\\n    Powered by\\n    <a class=\"gitment-footer-project-link\" href=\"https://github.com/imsun/gitment\" target=\"_blank\">\\n      Gitment\\n    </a>\\n  ';\n  return container;\n}\n\nfunction renderCounter(_ref4, instance) {\n  var meta = _ref4.meta;\n\n  var counter = document.querySelector(\".post-comments-count.gitment-comments-count\");\n  if (counter &&\n  // (instance.id.lastIndexOf(counter.getAttribute('data-xid')) > -1) &&\n  counter.getAttribute('itemprop') == \"commentsCount\") {\n    counter.innerText = meta && meta.comments || 0;\n  }\n}\n\nfunction render(state, instance) {\n  var container = document.createElement('div');\n  container.lang = culture.test(instance.lang) ? instance.lang : \"en-US\";\n\n  // rewrite by gitmint\n  $ = instance.lang && translator[instance.lang] || translator.fromLanguageCode(container.lang);\n  instance.updateCount = function () {\n    return instance.renderCounter(state, instance);\n  };\n\n  container.className = 'gitment-container gitment-root-container';\n  var parts = (!instance.above) ? ['renderHeader', 'renderComments', 'renderEditor', 'renderFooter']\n    : ['renderHeader', 'renderEditor', 'renderFooter', 'renderComments'];\n  parts.forEach(function(partName) {\n    container.appendChild(instance[partName](state, instance));\n  });\n  return container;\n}\n\nexports.default = { render: render, renderHeader: renderHeader, renderComments: renderComments, renderEditor: renderEditor, renderFooter: renderFooter, renderCounter: renderCounter };\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.http = exports.Query = exports.isString = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.getTargetContainer = getTargetContainer;\n\nvar _constants = __webpack_require__(0);\n\nvar isString = exports.isString = function isString(s) {\n  return toString.call(s) === '[object String]';\n};\n\nfunction getTargetContainer(container) {\n  var targetContainer = void 0;\n  if (container instanceof Element) {\n    targetContainer = container;\n  } else if (isString(container)) {\n    targetContainer = document.getElementById(container);\n  } else {\n    targetContainer = document.createElement('div');\n  }\n\n  return targetContainer;\n}\n\nvar Query = exports.Query = {\n  parse: function parse() {\n    var search = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.location.search;\n\n    if (!search) return {};\n    var queryString = search[0] === '?' ? search.substring(1) : search;\n    var query = {};\n    queryString.split('&').forEach(function (queryStr) {\n      var _queryStr$split = queryStr.split('='),\n          _queryStr$split2 = _slicedToArray(_queryStr$split, 2),\n          key = _queryStr$split2[0],\n          value = _queryStr$split2[1];\n\n      if (key) query[key] = value;\n    });\n\n    return query;\n  },\n  stringify: function stringify(query) {\n    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '?';\n\n    var queryString = Object.keys(query).map(function (key) {\n      return key + '=' + encodeURIComponent(query[key] || '');\n    }).join('&');\n    return queryString ? prefix + queryString : '';\n  }\n};\n\nfunction ajaxFactory(method) {\n  return function (apiPath) {\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var base = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'https://api.github.com';\n\n    var req = new XMLHttpRequest();\n    var token = localStorage.getItem(_constants.LS_ACCESS_TOKEN_KEY);\n    if (base !== 'https://api.github.com') token = null;\n\n    var url = '' + base + apiPath;\n    var body = null;\n    if (method === 'GET' || method === 'DELETE') {\n      url += isString(data) ? data : Query.stringify(data);\n    }\n\n    var p = new Promise(function (resolve, reject) {\n      req.addEventListener('load', function () {\n        var contentType = req.getResponseHeader('content-type');\n        var res = req.responseText;\n\n        var data = res;\n        if (/urlencoded/.test(contentType)) {\n          data = req.responseText ? Query.parse(res) : {};\n          if (data.error) return reject(new Error(data.error_description));\n        } else if (/json/.test(contentType)) {\n          data = req.responseText ? JSON.parse(res) : {};\n          if (data.message) return reject(new Error(data.message));\n        }\n        resolve(data);\n      });\n      req.addEventListener('error', function (error) {\n        return reject(error);\n      });\n    });\n    req.open(method, url, true);\n\n    req.setRequestHeader('Accept', 'application/vnd.github.squirrel-girl-preview, application/vnd.github.html+json, application/x-www-form-urlencoded');\n    if (token) {\n      req.setRequestHeader('Authorization', 'token ' + token);\n    }\n    if (method !== 'GET' && method !== 'DELETE') {\n      if (isString(data)) {\n        body = data;\n        req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n      } else {\n        body = JSON.stringify(data);\n        req.setRequestHeader('Content-Type', 'application/json');\n      }\n    }\n\n    req.send(body);\n    return p;\n  };\n}\n\nvar http = exports.http = {\n  get: ajaxFactory('GET'),\n  post: ajaxFactory('POST'),\n  delete: ajaxFactory('DELETE'),\n  put: ajaxFactory('PUT')\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar g;\n\n// This works in non-strict mode\ng = function () {\n\treturn this;\n}();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mobx = __webpack_require__(1);\n\nvar _constants = __webpack_require__(0);\n\nvar _utils = __webpack_require__(3);\n\nvar _default = __webpack_require__(2);\n\nvar _default2 = _interopRequireDefault(_default);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// @see: https://developer.github.com/apps/building-integrations/setting-up-and-registering-oauth-apps/about-scopes-for-oauth-apps\nvar scope = 'public_repo';\n\n// Github setting of 'Authorization callback URL' in your OAuth application\nvar force_redirect_protocol = '$&';\n// A RegExp to match protocol and domain\nvar rx_url_with_protocol = /^((https?:\\/\\/+){0,1}[^\\/]*)(.*)/;\n\nfunction extendRenderer(instance, renderer) {\n  instance[renderer] = function (container) {\n    var targetContainer = (0, _utils.getTargetContainer)(container);\n    var render = instance.theme[renderer] || instance.defaultTheme[renderer];\n\n    (0, _mobx.autorun)(function () {\n      var e = render(instance.state, instance);\n      if (e) {\n        if (targetContainer.firstChild) {\n          targetContainer.replaceChild(e, targetContainer.firstChild);\n        } else {\n          targetContainer.appendChild(e);\n        }\n      }\n    });\n\n    return targetContainer;\n  };\n}\n\nvar Gitment = function () {\n  _createClass(Gitment, [{\n    key: 'accessToken',\n    get: function get() {\n      return localStorage.getItem(_constants.LS_ACCESS_TOKEN_KEY);\n    },\n    set: function set(token) {\n      localStorage.setItem(_constants.LS_ACCESS_TOKEN_KEY, token);\n    }\n  }, {\n    key: 'loginLink',\n    get: function get() {\n      var oauthUri = 'https://github.com/login/oauth/authorize';\n      var redirect_uri = this.oauth.redirect_uri || window.location.href.replace(/^https?/i, this.oauth.redirect_protocol || force_redirect_protocol);\n\n      var oauthParams = Object.assign({\n        scope: scope,\n        redirect_uri: redirect_uri\n      }, this.oauth);\n\n      return '' + oauthUri + _utils.Query.stringify(oauthParams);\n    }\n  }]);\n\n  function Gitment() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Gitment);\n\n    this.defaultTheme = _default2.default;\n    this.useTheme(_default2.default);\n\n    var internalId;\n    Object.defineProperties(this, {\n      'updateCount': {\n        value: new Function(),\n        writable: true\n      },\n      'id': {\n        get: function get() {\n          return internalId;\n        },\n        set: function set(id) {\n          return internalId = id !== window.location.href ? id : '' + window.location.origin + window.location.pathname + window.location.search;\n        }\n      }\n    });\n\n    Object.assign(this, {\n      id: window.location.href,\n      title: window.document.title,\n      link: window.location.href,\n      desc: '',\n      labels: [],\n      theme: _default2.default,\n      oauth: {},\n      perPage: 20,\n      maxCommentHeight: 250\n    }, options);\n\n    this.useTheme(this.theme);\n\n    var user = {};\n    try {\n      var userInfo = localStorage.getItem(_constants.LS_USER_KEY);\n      if (this.accessToken && userInfo) {\n        Object.assign(user, JSON.parse(userInfo), {\n          fromCache: true\n        });\n      }\n    } catch (e) {\n      localStorage.removeItem(_constants.LS_USER_KEY);\n    }\n\n    this.state = (0, _mobx.observable)({\n      user: user,\n      error: null,\n      meta: {},\n      comments: undefined,\n      reactions: [],\n      commentReactions: {},\n      currentPage: 1\n    });\n\n    // NOTE: the proxy_gateway accept form-urlencoded only!!!\n    //  - PHP implement at https://github.com/aimingoo/intersect\n    var query = _utils.Query.parse();\n    if (query.code) {\n      var _oauth = this.oauth,\n          client_id = _oauth.client_id,\n          client_secret = _oauth.client_secret,\n          proxy_gateway = _oauth.proxy_gateway;\n\n      var code = query.code;\n      delete query.code;\n      var search = _utils.Query.stringify(query);\n      var replacedUrl = '' + window.location.origin + window.location.pathname + search + window.location.hash;\n      history.replaceState({}, '', replacedUrl);\n\n      Object.assign(this, {\n        id: replacedUrl,\n        link: replacedUrl\n      }, options);\n\n      this.state.user.isLoggingIn = true;\n      var logging = !proxy_gateway ? _utils.http.post('https://gh-oauth.imsun.net', { code: code, client_id: client_id, client_secret: client_secret }, '') : _utils.http.post('/login/oauth/access_token', 'code=' + code + '&client_id=' + client_id, proxy_gateway);\n      logging.then(function (data) {\n        _this.accessToken = data.access_token;\n        _this.update();\n      }).catch(function (e) {\n        _this.state.user.isLoggingIn = false;\n        alert(e);\n      });\n    } else {\n      this.update();\n    }\n  }\n\n  _createClass(Gitment, [{\n    key: 'init',\n    value: function init() {\n      var _this2 = this;\n\n      return this.createIssue().then(function () {\n        return _this2.loadComments();\n      }).then(function (comments) {\n        _this2.state.error = null;\n        return comments;\n      });\n    }\n  }, {\n    key: 'useTheme',\n    value: function useTheme() {\n      var _this3 = this;\n\n      var theme = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this.theme = theme;\n\n      var renderers = Object.keys(this.theme);\n      renderers.forEach(function (renderer) {\n        return extendRenderer(_this3, renderer);\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this4 = this;\n\n      return Promise.all([this.loadMeta(), this.loadUserInfo()]).then(function () {\n        return Promise.all([_this4.loadComments().then(function () {\n          return _this4.loadCommentReactions();\n        }), _this4.loadReactions()]);\n      }).catch(function (e) {\n        return _this4.state.error = e;\n      });\n    }\n  }, {\n    key: 'markdown',\n    value: function markdown(text) {\n      return _utils.http.post('/markdown', {\n        text: text,\n        mode: 'gfm'\n      });\n    }\n  }, {\n    key: 'createIssue',\n    value: function createIssue() {\n      var _this5 = this;\n\n      var id = this.id,\n          owner = this.owner,\n          repo = this.repo,\n          title = this.title,\n          link = this.link,\n          desc = this.desc,\n          labels = this.labels;\n\n\n      return _utils.http.post('/repos/' + owner + '/' + repo + '/issues', {\n        title: title,\n        labels: labels.concat(['gitment', id]),\n        body: link + '\\n\\n' + desc\n      }).then(function (meta) {\n        _this5.state.meta = meta;\n        return meta;\n      });\n    }\n  }, {\n    key: 'getIssue',\n    value: function getIssue() {\n      if (this.state.meta.id) return Promise.resolve(this.state.meta);\n\n      return this.loadMeta();\n    }\n  }, {\n    key: 'post',\n    value: function post(body) {\n      var _this6 = this;\n\n      return this.getIssue().then(function (issue) {\n        var matched = issue.comments_url.match(rx_url_with_protocol);\n        return _utils.http.post(matched[3], { body: body }, matched[1] || undefined);\n      }).then(function (data) {\n        _this6.state.meta.comments++;\n        _this6.updateCount();\n        var pageCount = Math.ceil(_this6.state.meta.comments / _this6.perPage);\n        if (_this6.state.currentPage === pageCount) {\n          _this6.state.comments.push(data);\n        }\n        return data;\n      });\n    }\n  }, {\n    key: 'loadMeta',\n    value: function loadMeta() {\n      var _this7 = this;\n\n      var id = this.id,\n          owner = this.owner,\n          admin = this.admin,\n          repo = this.repo;\n\n      return _utils.http.get('/repos/' + owner + '/' + repo + '/issues', { labels: id }).then(function (issues) {\n        if (issues.length) {\n          // recheck creator for organization\n          //  - or check 'issue.user.login and issue.user.site_admin' ?\n          var allowed = (admin || [owner]).map(function (x) {\n            return x.toLowerCase();\n          });\n          issues = issues.filter(function (issue) {\n            return ~allowed.indexOf(issue.user.login.toLowerCase());\n          }).sort(function (left, right) {\n            return new Date(left.created_at) - new Date(right.created_at);\n          });\n        }\n        if (!issues.length) return Promise.reject(_constants.NOT_INITIALIZED_ERROR);\n        _this7.state.meta = issues[0];\n        _this7.updateCount();\n        return issues[0];\n      });\n    }\n  }, {\n    key: 'loadComments',\n    value: function loadComments() {\n      var _this8 = this;\n\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.currentPage;\n\n      return this.getIssue().then(function (issue) {\n        var matched = issue.comments_url.match(rx_url_with_protocol);\n        return _utils.http.get(matched[3], { page: page, per_page: _this8.perPage }, matched[1] || undefined);\n      }).then(function (comments) {\n        _this8.state.comments = comments;\n        return comments;\n      });\n    }\n  }, {\n    key: 'loadUserInfo',\n    value: function loadUserInfo() {\n      var _this9 = this;\n\n      if (!this.accessToken) {\n        this.logout();\n        return Promise.resolve({});\n      }\n\n      return _utils.http.get('/user').then(function (user) {\n        _this9.state.user = user;\n        localStorage.setItem(_constants.LS_USER_KEY, JSON.stringify(user));\n        return user;\n      });\n    }\n  }, {\n    key: 'loadReactions',\n    value: function loadReactions() {\n      var _this10 = this;\n\n      if (!this.accessToken) {\n        this.state.reactions = [];\n        return Promise.resolve([]);\n      }\n\n      return this.getIssue().then(function (issue) {\n        if (!issue.reactions.total_count) return [];\n        return _utils.http.get(issue.reactions.url, {}, '');\n      }).then(function (reactions) {\n        _this10.state.reactions = reactions;\n        return reactions;\n      });\n    }\n  }, {\n    key: 'loadCommentReactions',\n    value: function loadCommentReactions() {\n      var _this11 = this;\n\n      if (!this.accessToken) {\n        this.state.commentReactions = {};\n        return Promise.resolve([]);\n      }\n\n      var comments = this.state.comments;\n      var comentReactions = {};\n\n      return Promise.all(comments.map(function (comment) {\n        if (!comment.reactions.total_count) return [];\n\n        var owner = _this11.owner,\n            repo = _this11.repo;\n\n        return _utils.http.get('/repos/' + owner + '/' + repo + '/issues/comments/' + comment.id + '/reactions', {});\n      })).then(function (reactionsArray) {\n        comments.forEach(function (comment, index) {\n          comentReactions[comment.id] = reactionsArray[index];\n        });\n        _this11.state.commentReactions = comentReactions;\n\n        return comentReactions;\n      });\n    }\n  }, {\n    key: 'login',\n    value: function login() {\n      window.location.href = this.loginLink;\n    }\n  }, {\n    key: 'logout',\n    value: function logout() {\n      localStorage.removeItem(_constants.LS_ACCESS_TOKEN_KEY);\n      localStorage.removeItem(_constants.LS_USER_KEY);\n      this.state.user = {};\n    }\n  }, {\n    key: 'goto',\n    value: function goto(page) {\n      this.state.currentPage = page;\n      this.state.comments = undefined;\n      return this.loadComments(page);\n    }\n  }, {\n    key: 'like',\n    value: function like() {\n      var _this12 = this;\n\n      if (!this.accessToken) {\n        alert('Login to Like');\n        return Promise.reject();\n      }\n\n      var owner = this.owner,\n          repo = this.repo;\n\n\n      return _utils.http.post('/repos/' + owner + '/' + repo + '/issues/' + this.state.meta.number + '/reactions', {\n        content: 'heart'\n      }).then(function (reaction) {\n        _this12.state.reactions.push(reaction);\n        _this12.state.meta.reactions.heart++;\n      });\n    }\n  }, {\n    key: 'unlike',\n    value: function unlike() {\n      var _this13 = this;\n\n      if (!this.accessToken) return Promise.reject();\n\n      var _state = this.state,\n          user = _state.user,\n          reactions = _state.reactions;\n\n      var index = reactions.findIndex(function (reaction) {\n        return reaction.user.login === user.login;\n      });\n      return _utils.http.delete('/reactions/' + reactions[index].id).then(function () {\n        reactions.splice(index, 1);\n        _this13.state.meta.reactions.heart--;\n      });\n    }\n  }, {\n    key: 'likeAComment',\n    value: function likeAComment(commentId) {\n      var _this14 = this;\n\n      if (!this.accessToken) {\n        alert('Login to Like');\n        return Promise.reject();\n      }\n\n      var owner = this.owner,\n          repo = this.repo;\n\n      var comment = this.state.comments.find(function (comment) {\n        return comment.id === commentId;\n      });\n\n      return _utils.http.post('/repos/' + owner + '/' + repo + '/issues/comments/' + commentId + '/reactions', {\n        content: 'heart'\n      }).then(function (reaction) {\n        _this14.state.commentReactions[commentId].push(reaction);\n        comment.reactions.heart++;\n      });\n    }\n  }, {\n    key: 'unlikeAComment',\n    value: function unlikeAComment(commentId) {\n      if (!this.accessToken) return Promise.reject();\n\n      var reactions = this.state.commentReactions[commentId];\n      var comment = this.state.comments.find(function (comment) {\n        return comment.id === commentId;\n      });\n      var user = this.state.user;\n\n      var index = reactions.findIndex(function (reaction) {\n        return reaction.user.login === user.login;\n      });\n\n      return _utils.http.delete('/reactions/' + reactions[index].id).then(function () {\n        reactions.splice(index, 1);\n        comment.reactions.heart--;\n      });\n    }\n  }]);\n\n  return Gitment;\n}();\n\nmodule.exports = Gitment;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Modified from https://github.com/evil-icons/evil-icons\n */\n\nvar close = exports.close = '<svg class=\"gitment-close-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 50 50\"><path d=\"M37.304 11.282l1.414 1.414-26.022 26.02-1.414-1.413z\"/><path d=\"M12.696 11.282l26.022 26.02-1.414 1.415-26.022-26.02z\"/></svg>';\nvar github = exports.github = '<svg class=\"gitment-github-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 50 50\"><path d=\"M25 10c-8.3 0-15 6.7-15 15 0 6.6 4.3 12.2 10.3 14.2.8.1 1-.3 1-.7v-2.6c-4.2.9-5.1-2-5.1-2-.7-1.7-1.7-2.2-1.7-2.2-1.4-.9.1-.9.1-.9 1.5.1 2.3 1.5 2.3 1.5 1.3 2.3 3.5 1.6 4.4 1.2.1-1 .5-1.6 1-2-3.3-.4-6.8-1.7-6.8-7.4 0-1.6.6-3 1.5-4-.2-.4-.7-1.9.1-4 0 0 1.3-.4 4.1 1.5 1.2-.3 2.5-.5 3.8-.5 1.3 0 2.6.2 3.8.5 2.9-1.9 4.1-1.5 4.1-1.5.8 2.1.3 3.6.1 4 1 1 1.5 2.4 1.5 4 0 5.8-3.5 7-6.8 7.4.5.5 1 1.4 1 2.8v4.1c0 .4.3.9 1 .7 6-2 10.2-7.6 10.2-14.2C40 16.7 33.3 10 25 10z\"/></svg>';\nvar heart = exports.heart = '<svg class=\"gitment-heart-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 50 50\"><path d=\"M25 39.7l-.6-.5C11.5 28.7 8 25 8 19c0-5 4-9 9-9 4.1 0 6.4 2.3 8 4.1 1.6-1.8 3.9-4.1 8-4.1 5 0 9 4 9 9 0 6-3.5 9.7-16.4 20.2l-.6.5zM17 12c-3.9 0-7 3.1-7 7 0 5.1 3.2 8.5 15 18.1 11.8-9.6 15-13 15-18.1 0-3.9-3.1-7-7-7-3.5 0-5.4 2.1-6.9 3.8L25 17.1l-1.1-1.3C22.4 14.1 20.5 12 17 12z\"/></svg>';\nvar spinner = exports.spinner = '<svg class=\"gitment-spinner-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 50 50\"><path d=\"M25 18c-.6 0-1-.4-1-1V9c0-.6.4-1 1-1s1 .4 1 1v8c0 .6-.4 1-1 1z\"/><path opacity=\".3\" d=\"M25 42c-.6 0-1-.4-1-1v-8c0-.6.4-1 1-1s1 .4 1 1v8c0 .6-.4 1-1 1z\"/><path opacity=\".3\" d=\"M29 19c-.2 0-.3 0-.5-.1-.4-.3-.6-.8-.3-1.3l4-6.9c.3-.4.8-.6 1.3-.3.4.3.6.8.3 1.3l-4 6.9c-.2.2-.5.4-.8.4z\"/><path opacity=\".3\" d=\"M17 39.8c-.2 0-.3 0-.5-.1-.4-.3-.6-.8-.3-1.3l4-6.9c.3-.4.8-.6 1.3-.3.4.3.6.8.3 1.3l-4 6.9c-.2.2-.5.4-.8.4z\"/><path opacity=\".93\" d=\"M21 19c-.3 0-.6-.2-.8-.5l-4-6.9c-.3-.4-.1-1 .3-1.3.4-.3 1-.1 1.3.3l4 6.9c.3.4.1 1-.3 1.3-.2.2-.3.2-.5.2z\"/><path opacity=\".3\" d=\"M33 39.8c-.3 0-.6-.2-.8-.5l-4-6.9c-.3-.4-.1-1 .3-1.3.4-.3 1-.1 1.3.3l4 6.9c.3.4.1 1-.3 1.3-.2.1-.3.2-.5.2z\"/><path opacity=\".65\" d=\"M17 26H9c-.6 0-1-.4-1-1s.4-1 1-1h8c.6 0 1 .4 1 1s-.4 1-1 1z\"/><path opacity=\".3\" d=\"M41 26h-8c-.6 0-1-.4-1-1s.4-1 1-1h8c.6 0 1 .4 1 1s-.4 1-1 1z\"/><path opacity=\".86\" d=\"M18.1 21.9c-.2 0-.3 0-.5-.1l-6.9-4c-.4-.3-.6-.8-.3-1.3.3-.4.8-.6 1.3-.3l6.9 4c.4.3.6.8.3 1.3-.2.3-.5.4-.8.4z\"/><path opacity=\".3\" d=\"M38.9 33.9c-.2 0-.3 0-.5-.1l-6.9-4c-.4-.3-.6-.8-.3-1.3.3-.4.8-.6 1.3-.3l6.9 4c.4.3.6.8.3 1.3-.2.3-.5.4-.8.4z\"/><path opacity=\".44\" d=\"M11.1 33.9c-.3 0-.6-.2-.8-.5-.3-.4-.1-1 .3-1.3l6.9-4c.4-.3 1-.1 1.3.3.3.4.1 1-.3 1.3l-6.9 4c-.1.2-.3.2-.5.2z\"/><path opacity=\".3\" d=\"M31.9 21.9c-.3 0-.6-.2-.8-.5-.3-.4-.1-1 .3-1.3l6.9-4c.4-.3 1-.1 1.3.3.3.4.1 1-.3 1.3l-6.9 4c-.2.2-.3.2-.5.2z\"/></svg>';\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.english = english;\nexports.chinese = chinese;\nexports.chineseTraditional = chineseTraditional;\nexports.fromLanguageCode = fromLanguageCode;\nfunction english(Text) {\n    return Text;\n}\n\nfunction chinese(Text) {\n    return {\n        'Issue Page': '所有评论',\n        'Initialize Comments': '初始化本文的评论页',\n        'Loading comments...': '加载评论...',\n        'Error: Comments Not Initialized': '(未开放评论)',\n        'No Comment Yet': '(还没有评论)',\n        'Previous': '上一页',\n        'Next': '下一页',\n        'Nothing to preview': '（没有预览）',\n        'Loading preview...': '加载预览...',\n        'Submitting...': '正在提交评论...',\n        'Comment': '发送',\n        'Write': '评论',\n        'Preview': '预览',\n        'Logging in...': '登入中...',\n        'Login to Comment': '请登入以发表评论',\n        'Leave a comment': '(发表评论)',\n        'Login': '登入',\n        'Logout': '退出'\n    }[Text] || Text;\n}\n\nfunction chineseTraditional(Text) {\n    return {\n        'Issue Page': '所有評論',\n        'Initialize Comments': '初始化本文的評論頁',\n        'Loading comments...': '加載評論...',\n        'Error: Comments Not Initialized': '(未開放評論)',\n        'No Comment Yet': '(還沒有評論)',\n        'Previous': '上一頁',\n        'Next': '下一頁',\n        'Nothing to preview': '（沒有預覽）',\n        'Loading preview...': '加載預覽...',\n        'Submitting...': '正在提交評論...',\n        'Comment': '發送',\n        'Write': '評論',\n        'Preview': '預覽',\n        'Logging in...': '登入中...',\n        'Login to Comment': '請登入以發表評論',\n        'Leave a comment': '(發表評論)',\n        'Login': '登入',\n        'Logout': '登出'\n    }[Text] || Text;\n}\n\n// @see:\n//  https://www.w3.org/TR/1999/REC-html401-19991224/struct/dirlang.html#h-8.1.1\n//  https://gist.github.com/JamieMason/3748498\nfunction fromLanguageCode(code) {\n    var culture = /^([^-]+)-/;\n    return {\n        'en': english,\n        'zh': chinese,\n        'zh-CN': chinese,\n        'zh-CHS': chinese,\n        'zh-TW': chineseTraditional,\n        'zh-HK': chineseTraditional,\n        'zh-CHT': chineseTraditional,\n        'en-US': english\n    }[code] || culture.test(code) && fromLanguageCode(code.match(culture)[1]) || english;\n}\n\nexports.default = english;\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=gitmint.browser.js.map</=></=></unnamed></not></unnamed></unnamed>"}],"Post":[{"title":"知识点","date":"2019-06-06T08:48:44.000Z","_content":"\n### 1. 一些js插件为什么以`;`开头\n\n因为js代码允许在结束的时候不添加`;`, 所以两个js文件在合并拼接的的时候可能出错。\n\n```js\n// a.js\n// 末尾没有添加;符号\nvar a = 'test'\n\n// b.js\n(function(){\n    // do something\n})();\n\n```\n\n<!-- More -->\n\n以上两个文件进行合并压缩的时候就可能变为：\n\n```js\nvar a = 'test'(function(){})();\n\n// 这样会报错： TypeError: 'test' is not a function\n```\n\n### 2. 使用闭包定义私有属性\n\n```js\nfunction Product() {\n\n    var name;\n\n    this.setName = function(value) {\n        name = value;\n    };\n\n    this.getName = function() {\n        return name;\n    };\n}\n\nvar p = new Product();\np.setName(\"test\");\n\nconsole.log(p.name); // 输出undefined\nconsole.log(p.getName()); // 输出test\n```\n\n代码中，对象p的的`name`属性为`私有属性`，使用`p.name`不能直接访问。\n\n### 3. 枚举属性\n\n- 可枚举性\n在js中，`基本数据类型`的原型属性是不可枚举的，比如`Object`、`Array`、`Number`等。\n\n```js\n    // 打印结果为空 Number内置属性是不可枚举的\n    var num = new Number()\n    for (let i in num) {\n        console.log(i, num[i])\n    }\n```\n\n- propertyIsEnumerable\n\n> Object.propertyIsEnumerable(prop)\n> prop 需要测试的属性名\n> 返回值 用来表示指定的属性名是否可枚举的Boolean\n> 属性必须满足 自身属性 && 枚举属性，才会返回true\n\n```js\nvar obj = {}\nobj.test = 'Jnathan'\n\nvar arr = [23, 67]\nobj.propertyIsEnumerable('test')  // true\narr.propertyIsEnumerable(0)  // true\narr.propertyIsEnumerable(1)  // true\n```\n\n- hasOwnProperty\n\n> Object.hasOwnProperty(prop)\n> prop 需要测试的属性名\n> 返回值 用来表示指定的属性名是否在对象中的Boolean\n\n```js\nvar obj = {}\nobj.x = 'Jnathan'\nobj.y = function() {}\nobj.hasOwnProperty('x')  // true\nobj.hasOwnProperty('y')  // true 方法也属于属性\nobj.hasOwnProperty('z')  // false 属性不存在\nobj.hasOwnProperty('toString')  // false toString是继承的Object中的属性，obj自身属性中不包含\n```\n\n```js\nfunction Person() {\n    this.name = 'Jnathan'\n}\nPerson.prototype = {\n    constructor: Person,\n    job: 'student',\n}\nvar Jnathan = new Person()\nObject.defineProperty(Jnathan, \"gender\", {\n    value: 'female',\n    enumerable: false\n})\n```\n\n以上， 用`defineProperty`为`对象Jnathan`定义了一个名为`gender`的`不可枚举属性`\n\n- 枚举 for...in\n\n```js\nfor (let item in Jnathan) {\n    console.log('Jnathan.' + item + ' = ' + Jnathan[item])\n}\n// Jnathan.name = Jnathan\n// Jnathan.constructor = function Person() {\n//     this.name = 'Jnathan'\n// }\n// Jnathan.job = student\n\nfunction enumer() {\n    this.a = '我是对象本身就有的属性'\n}\nenumer.prototype.b = '我是通过原型对象挂载的属性'\nlet fn = new enumer()\nObject.defineProperty(fn, 'c', {\n    value: '我是通过Object.defineProperty方法添加的可枚举属性',\n    enumerable: true\n});\nfor(let item in fn) {\n    console.log(item)\n}\n// a\n// b\n// c\n```\n\n- 枚举 Object.keys()\n\n```js\nObject.keys(Jnathan)\n// [\"name\"]\n\nfunction enumer() {\n    this.a = '我是对象本身就有的属性'\n}\nenumer.prototype.b = '我是通过原型对象挂载的属性'\nlet fn = new enumer()\nObject.defineProperty(fn, 'c', {\n    value: '我是通过Object.defineProperty方法添加的可枚举属性',\n    enumerable: true\n});\nconsole.log(Object.keys(fn))\n// [\"a\", \"c\"]\n```\n\n- 枚举 JSON.stringify()\n\n```js\nJSON.stringify(Jnathan)\n// \"{\"name\":\"Jnathan\"}\"\n\nfunction enumer() {\n    this.a = '我是对象本身就有的属性'\n}\nenumer.prototype.b = '我是通过原型对象挂载的属性'\nlet fn = new enumer()\nObject.defineProperty(fn, 'c', {\n    value: '我是通过Object.defineProperty方法添加的可枚举属性',\n    enumerable: true\n})\nconsole.log(JSON.stringify(fn))\n// {\"a\":\"我是对象本身就有的属性\",\"c\":\"我是通过Object.defineProperty方法添加的可枚举属性\"}\n```\n\n> 根据现象有以下总结\n> for...in 可以枚举对象本身具有的属性，通过Object.defineProperty()方法加的可枚举属性，或者通过原型对象绑定的可以枚举属性\n> Object.keys() 可以枚举对象本身的属性和通过Object.defineProperty()添加的可枚举属性\n> JSON.stringify() 可以枚举对象本身的属性和通过Object.defineProperty()添加的可枚举属性，并序列化为JSON字符串\n\n- !== undefined\n\n```js\nvar obj = {x: 1, y: undefined, z: null}\nconsole.log(obj.x !== undefined)  // true 属性存在\nconsole.log(obj.y !== undefined)  // false 此时会出现歧义，不能准确判断属性是不存在还是属性值本身就为undefined\nconsole.log(obj.z !== undefined)  // true 属性存在\nconsole.log(obj.z != undefined)  // false != 不能区分undefined和null，将两者同等对待\nconsole.log(obj.w !== undefined)  // false 属性不存在\nconsole.log(obj.toString !== undefined)  // true 存在toString函数属性。\n```\n\n- in 自身存在的属性或者继承的属性均返回true\n\n```js\nvar obj = {x: 1, y: undefined, z: null}\nconsole.log(\"x\" in obj)  // true 属性存在\nconsole.log(\"y\" in obj)  // true 属性存在\nconsole.log(\"z\" in obj)  // true 属性存在\nconsole.log(\"w\" in obj)  // false 属性不存在\nconsole.log(\"toString\" in obj)  // true 属性存在\n```\n\n- Object.defineProperty()\n\n> 参数：\n> Object.defineProperty(object, propertyname, descriptor)\n> object 必需。 要在其上添加或修改属性的对象。 这可能是一个本机 JavaScript 对象（即用户定义的对象或内置对象）或 DOM 对象。\n> propertyname 必需。 一个包含属性名称的字符串。\n> descriptor 必需。 属性描述符。 它可以针对数据属性或访问器属性。\n> 返回值：\n> 已修改对象\n\n当对象不具有指定的属性名称时，向对象添加新属性。当对象已具有指定的属性名称时，修改现有属性的特性。\n\n```js\nvar obj = {}\nObject.defineProperty(obj, \"newDataProperty\", {\n    value: 101,\n    writable: false,\n    enumerable: false,\n    configurable: true\n});\n\nobj.newDataProperty = 102\nconsole.log(obj.newDataProperty)  // 101 whiteable为false 只读，不能修改\n```\n\n- Object.getOwnPropertyNames\n\n由于obj的属性newDataProperty是不可枚举的，使用for...in不能找到newDataProperty属性\n\n```js\nfor (let item in obj) {\n    console.log(item, obj[item])  // 无输出\n}\n```\n\n此时可以使用Object.getOwnPropertyNames来遍历\n\n```js\nvar names = Object.getOwnPropertyNames(obj)\nfor (let i = 0; i < names.e]length; names++) {\n    console.log(names, i, names[i])\n}\n// [\"newDataProperty\"] 0 newDataProperty\n```\n\n```js\nvar obj = {}\nObject.defineProperty(obj, \"newAccessorProperty\", {\n    set: function (x) {\n        console.log(\"in property set accessor\");\n        this.newaccpropvalue = x;\n    },\n    get: function () {\n        console.log(\"in property get accessor\");\n        return this.newaccpropvalue;\n    },\n    enumerable: true,\n    configurable: true\n});\n\nobj.newAccessorProperty = 30\nconsole.log(\"Property value: \" + obj.newAccessorProperty)\n// in property set accessor\n// in property get accessor\n// Property value: 30\n```\n\n- 修改DOM上的属性\n\n```js\nObject.getOwnPropertyDescriptor(Element.prototype, \"querySelector\")\n// {value: ƒ, writable: true, enumerable: true, configurable: true}\n```\n\n```js\nvar descriptor = Object.getOwnPropertyDescriptor(Element.prototype, \"querySelector\")\n\ndescriptor.value = \"query\"\ndescriptor.writable = false\n\nObject.defineProperty(Element.prototype, \"querySelector\", descriptor)\n\nvar elem = document.getElementById(\"div\")\n\nelem.querySelector = \"anotherQuery\"  // whitable 为false 更改不生效\nconsole.log(elem.querySelector)  // query\n```\n","source":"_posts/brief-info.md","raw":"---\ntitle: 知识点\ndate: 2019-06-06 16:48:44\ntags:\n---\n\n### 1. 一些js插件为什么以`;`开头\n\n因为js代码允许在结束的时候不添加`;`, 所以两个js文件在合并拼接的的时候可能出错。\n\n```js\n// a.js\n// 末尾没有添加;符号\nvar a = 'test'\n\n// b.js\n(function(){\n    // do something\n})();\n\n```\n\n<!-- More -->\n\n以上两个文件进行合并压缩的时候就可能变为：\n\n```js\nvar a = 'test'(function(){})();\n\n// 这样会报错： TypeError: 'test' is not a function\n```\n\n### 2. 使用闭包定义私有属性\n\n```js\nfunction Product() {\n\n    var name;\n\n    this.setName = function(value) {\n        name = value;\n    };\n\n    this.getName = function() {\n        return name;\n    };\n}\n\nvar p = new Product();\np.setName(\"test\");\n\nconsole.log(p.name); // 输出undefined\nconsole.log(p.getName()); // 输出test\n```\n\n代码中，对象p的的`name`属性为`私有属性`，使用`p.name`不能直接访问。\n\n### 3. 枚举属性\n\n- 可枚举性\n在js中，`基本数据类型`的原型属性是不可枚举的，比如`Object`、`Array`、`Number`等。\n\n```js\n    // 打印结果为空 Number内置属性是不可枚举的\n    var num = new Number()\n    for (let i in num) {\n        console.log(i, num[i])\n    }\n```\n\n- propertyIsEnumerable\n\n> Object.propertyIsEnumerable(prop)\n> prop 需要测试的属性名\n> 返回值 用来表示指定的属性名是否可枚举的Boolean\n> 属性必须满足 自身属性 && 枚举属性，才会返回true\n\n```js\nvar obj = {}\nobj.test = 'Jnathan'\n\nvar arr = [23, 67]\nobj.propertyIsEnumerable('test')  // true\narr.propertyIsEnumerable(0)  // true\narr.propertyIsEnumerable(1)  // true\n```\n\n- hasOwnProperty\n\n> Object.hasOwnProperty(prop)\n> prop 需要测试的属性名\n> 返回值 用来表示指定的属性名是否在对象中的Boolean\n\n```js\nvar obj = {}\nobj.x = 'Jnathan'\nobj.y = function() {}\nobj.hasOwnProperty('x')  // true\nobj.hasOwnProperty('y')  // true 方法也属于属性\nobj.hasOwnProperty('z')  // false 属性不存在\nobj.hasOwnProperty('toString')  // false toString是继承的Object中的属性，obj自身属性中不包含\n```\n\n```js\nfunction Person() {\n    this.name = 'Jnathan'\n}\nPerson.prototype = {\n    constructor: Person,\n    job: 'student',\n}\nvar Jnathan = new Person()\nObject.defineProperty(Jnathan, \"gender\", {\n    value: 'female',\n    enumerable: false\n})\n```\n\n以上， 用`defineProperty`为`对象Jnathan`定义了一个名为`gender`的`不可枚举属性`\n\n- 枚举 for...in\n\n```js\nfor (let item in Jnathan) {\n    console.log('Jnathan.' + item + ' = ' + Jnathan[item])\n}\n// Jnathan.name = Jnathan\n// Jnathan.constructor = function Person() {\n//     this.name = 'Jnathan'\n// }\n// Jnathan.job = student\n\nfunction enumer() {\n    this.a = '我是对象本身就有的属性'\n}\nenumer.prototype.b = '我是通过原型对象挂载的属性'\nlet fn = new enumer()\nObject.defineProperty(fn, 'c', {\n    value: '我是通过Object.defineProperty方法添加的可枚举属性',\n    enumerable: true\n});\nfor(let item in fn) {\n    console.log(item)\n}\n// a\n// b\n// c\n```\n\n- 枚举 Object.keys()\n\n```js\nObject.keys(Jnathan)\n// [\"name\"]\n\nfunction enumer() {\n    this.a = '我是对象本身就有的属性'\n}\nenumer.prototype.b = '我是通过原型对象挂载的属性'\nlet fn = new enumer()\nObject.defineProperty(fn, 'c', {\n    value: '我是通过Object.defineProperty方法添加的可枚举属性',\n    enumerable: true\n});\nconsole.log(Object.keys(fn))\n// [\"a\", \"c\"]\n```\n\n- 枚举 JSON.stringify()\n\n```js\nJSON.stringify(Jnathan)\n// \"{\"name\":\"Jnathan\"}\"\n\nfunction enumer() {\n    this.a = '我是对象本身就有的属性'\n}\nenumer.prototype.b = '我是通过原型对象挂载的属性'\nlet fn = new enumer()\nObject.defineProperty(fn, 'c', {\n    value: '我是通过Object.defineProperty方法添加的可枚举属性',\n    enumerable: true\n})\nconsole.log(JSON.stringify(fn))\n// {\"a\":\"我是对象本身就有的属性\",\"c\":\"我是通过Object.defineProperty方法添加的可枚举属性\"}\n```\n\n> 根据现象有以下总结\n> for...in 可以枚举对象本身具有的属性，通过Object.defineProperty()方法加的可枚举属性，或者通过原型对象绑定的可以枚举属性\n> Object.keys() 可以枚举对象本身的属性和通过Object.defineProperty()添加的可枚举属性\n> JSON.stringify() 可以枚举对象本身的属性和通过Object.defineProperty()添加的可枚举属性，并序列化为JSON字符串\n\n- !== undefined\n\n```js\nvar obj = {x: 1, y: undefined, z: null}\nconsole.log(obj.x !== undefined)  // true 属性存在\nconsole.log(obj.y !== undefined)  // false 此时会出现歧义，不能准确判断属性是不存在还是属性值本身就为undefined\nconsole.log(obj.z !== undefined)  // true 属性存在\nconsole.log(obj.z != undefined)  // false != 不能区分undefined和null，将两者同等对待\nconsole.log(obj.w !== undefined)  // false 属性不存在\nconsole.log(obj.toString !== undefined)  // true 存在toString函数属性。\n```\n\n- in 自身存在的属性或者继承的属性均返回true\n\n```js\nvar obj = {x: 1, y: undefined, z: null}\nconsole.log(\"x\" in obj)  // true 属性存在\nconsole.log(\"y\" in obj)  // true 属性存在\nconsole.log(\"z\" in obj)  // true 属性存在\nconsole.log(\"w\" in obj)  // false 属性不存在\nconsole.log(\"toString\" in obj)  // true 属性存在\n```\n\n- Object.defineProperty()\n\n> 参数：\n> Object.defineProperty(object, propertyname, descriptor)\n> object 必需。 要在其上添加或修改属性的对象。 这可能是一个本机 JavaScript 对象（即用户定义的对象或内置对象）或 DOM 对象。\n> propertyname 必需。 一个包含属性名称的字符串。\n> descriptor 必需。 属性描述符。 它可以针对数据属性或访问器属性。\n> 返回值：\n> 已修改对象\n\n当对象不具有指定的属性名称时，向对象添加新属性。当对象已具有指定的属性名称时，修改现有属性的特性。\n\n```js\nvar obj = {}\nObject.defineProperty(obj, \"newDataProperty\", {\n    value: 101,\n    writable: false,\n    enumerable: false,\n    configurable: true\n});\n\nobj.newDataProperty = 102\nconsole.log(obj.newDataProperty)  // 101 whiteable为false 只读，不能修改\n```\n\n- Object.getOwnPropertyNames\n\n由于obj的属性newDataProperty是不可枚举的，使用for...in不能找到newDataProperty属性\n\n```js\nfor (let item in obj) {\n    console.log(item, obj[item])  // 无输出\n}\n```\n\n此时可以使用Object.getOwnPropertyNames来遍历\n\n```js\nvar names = Object.getOwnPropertyNames(obj)\nfor (let i = 0; i < names.e]length; names++) {\n    console.log(names, i, names[i])\n}\n// [\"newDataProperty\"] 0 newDataProperty\n```\n\n```js\nvar obj = {}\nObject.defineProperty(obj, \"newAccessorProperty\", {\n    set: function (x) {\n        console.log(\"in property set accessor\");\n        this.newaccpropvalue = x;\n    },\n    get: function () {\n        console.log(\"in property get accessor\");\n        return this.newaccpropvalue;\n    },\n    enumerable: true,\n    configurable: true\n});\n\nobj.newAccessorProperty = 30\nconsole.log(\"Property value: \" + obj.newAccessorProperty)\n// in property set accessor\n// in property get accessor\n// Property value: 30\n```\n\n- 修改DOM上的属性\n\n```js\nObject.getOwnPropertyDescriptor(Element.prototype, \"querySelector\")\n// {value: ƒ, writable: true, enumerable: true, configurable: true}\n```\n\n```js\nvar descriptor = Object.getOwnPropertyDescriptor(Element.prototype, \"querySelector\")\n\ndescriptor.value = \"query\"\ndescriptor.writable = false\n\nObject.defineProperty(Element.prototype, \"querySelector\", descriptor)\n\nvar elem = document.getElementById(\"div\")\n\nelem.querySelector = \"anotherQuery\"  // whitable 为false 更改不生效\nconsole.log(elem.querySelector)  // query\n```\n","slug":"brief-info","published":1,"updated":"2019-07-29T09:33:04.106Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34cr0000u66tanahvz9s","content":"<h3 id=\"1-一些js插件为什么以-开头\"><a href=\"#1-一些js插件为什么以-开头\" class=\"headerlink\" title=\"1. 一些js插件为什么以;开头\"></a>1. 一些js插件为什么以<code>;</code>开头</h3><p>因为js代码允许在结束的时候不添加<code>;</code>, 所以两个js文件在合并拼接的的时候可能出错。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// a.js</span></span><br><span class=\"line\"><span class=\"comment\">// 末尾没有添加;符号</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">'test'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// b.js</span></span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// do something</span></span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>以上两个文件进行合并压缩的时候就可能变为：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">'test'</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;)();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 这样会报错： TypeError: 'test' is not a function</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-使用闭包定义私有属性\"><a href=\"#2-使用闭包定义私有属性\" class=\"headerlink\" title=\"2. 使用闭包定义私有属性\"></a>2. 使用闭包定义私有属性</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Product</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> name;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">        name = value;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> Product();</span><br><span class=\"line\">p.setName(<span class=\"string\">\"test\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(p.name); <span class=\"comment\">// 输出undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(p.getName()); <span class=\"comment\">// 输出test</span></span><br></pre></td></tr></table></figure>\n<p>代码中，对象p的的<code>name</code>属性为<code>私有属性</code>，使用<code>p.name</code>不能直接访问。</p>\n<h3 id=\"3-枚举属性\"><a href=\"#3-枚举属性\" class=\"headerlink\" title=\"3. 枚举属性\"></a>3. 枚举属性</h3><ul>\n<li>可枚举性<br>在js中，<code>基本数据类型</code>的原型属性是不可枚举的，比如<code>Object</code>、<code>Array</code>、<code>Number</code>等。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 打印结果为空 Number内置属性是不可枚举的</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> num = <span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>()</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">in</span> num) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(i, num[i])</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>propertyIsEnumerable</li>\n</ul>\n<blockquote>\n<p>Object.propertyIsEnumerable(prop)<br>prop 需要测试的属性名<br>返回值 用来表示指定的属性名是否可枚举的Boolean<br>属性必须满足 自身属性 &amp;&amp; 枚举属性，才会返回true</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\">obj.test = <span class=\"string\">'Jnathan'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">23</span>, <span class=\"number\">67</span>]</span><br><span class=\"line\">obj.propertyIsEnumerable(<span class=\"string\">'test'</span>)  <span class=\"comment\">// true</span></span><br><span class=\"line\">arr.propertyIsEnumerable(<span class=\"number\">0</span>)  <span class=\"comment\">// true</span></span><br><span class=\"line\">arr.propertyIsEnumerable(<span class=\"number\">1</span>)  <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>hasOwnProperty</li>\n</ul>\n<blockquote>\n<p>Object.hasOwnProperty(prop)<br>prop 需要测试的属性名<br>返回值 用来表示指定的属性名是否在对象中的Boolean</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\">obj.x = <span class=\"string\">'Jnathan'</span></span><br><span class=\"line\">obj.y = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">obj.hasOwnProperty(<span class=\"string\">'x'</span>)  <span class=\"comment\">// true</span></span><br><span class=\"line\">obj.hasOwnProperty(<span class=\"string\">'y'</span>)  <span class=\"comment\">// true 方法也属于属性</span></span><br><span class=\"line\">obj.hasOwnProperty(<span class=\"string\">'z'</span>)  <span class=\"comment\">// false 属性不存在</span></span><br><span class=\"line\">obj.hasOwnProperty(<span class=\"string\">'toString'</span>)  <span class=\"comment\">// false toString是继承的Object中的属性，obj自身属性中不包含</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'Jnathan'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Person.prototype = &#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>: Person,</span><br><span class=\"line\">    job: 'student',</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">var Jnathan = new Person()</span><br><span class=\"line\">Object.defineProperty(Jnathan, \"gender\", &#123;</span><br><span class=\"line\">    value: <span class=\"string\">'female'</span>,</span><br><span class=\"line\">    enumerable: <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>以上， 用<code>defineProperty</code>为<code>对象Jnathan</code>定义了一个名为<code>gender</code>的<code>不可枚举属性</code></p>\n<ul>\n<li>枚举 for…in</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> item <span class=\"keyword\">in</span> Jnathan) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Jnathan.'</span> + item + <span class=\"string\">' = '</span> + Jnathan[item])</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// Jnathan.name = Jnathan</span></span><br><span class=\"line\"><span class=\"comment\">// Jnathan.constructor = function Person() &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//     this.name = 'Jnathan'</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// Jnathan.job = student</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">enumer</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.a = <span class=\"string\">'我是对象本身就有的属性'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">enumer.prototype.b = <span class=\"string\">'我是通过原型对象挂载的属性'</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> fn = <span class=\"keyword\">new</span> enumer()</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(fn, <span class=\"string\">'c'</span>, &#123;</span><br><span class=\"line\">    value: <span class=\"string\">'我是通过Object.defineProperty方法添加的可枚举属性'</span>,</span><br><span class=\"line\">    enumerable: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> item <span class=\"keyword\">in</span> fn) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(item)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// a</span></span><br><span class=\"line\"><span class=\"comment\">// b</span></span><br><span class=\"line\"><span class=\"comment\">// c</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>枚举 Object.keys()</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.keys(Jnathan)</span><br><span class=\"line\"><span class=\"comment\">// [\"name\"]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">enumer</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.a = <span class=\"string\">'我是对象本身就有的属性'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">enumer.prototype.b = <span class=\"string\">'我是通过原型对象挂载的属性'</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> fn = <span class=\"keyword\">new</span> enumer()</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(fn, <span class=\"string\">'c'</span>, &#123;</span><br><span class=\"line\">    value: <span class=\"string\">'我是通过Object.defineProperty方法添加的可枚举属性'</span>,</span><br><span class=\"line\">    enumerable: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.keys(fn))</span><br><span class=\"line\"><span class=\"comment\">// [\"a\", \"c\"]</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>枚举 JSON.stringify()</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">JSON</span>.stringify(Jnathan)</span><br><span class=\"line\"><span class=\"comment\">// \"&#123;\"name\":\"Jnathan\"&#125;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">enumer</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.a = <span class=\"string\">'我是对象本身就有的属性'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">enumer.prototype.b = <span class=\"string\">'我是通过原型对象挂载的属性'</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> fn = <span class=\"keyword\">new</span> enumer()</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(fn, <span class=\"string\">'c'</span>, &#123;</span><br><span class=\"line\">    value: <span class=\"string\">'我是通过Object.defineProperty方法添加的可枚举属性'</span>,</span><br><span class=\"line\">    enumerable: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(fn))</span><br><span class=\"line\"><span class=\"comment\">// &#123;\"a\":\"我是对象本身就有的属性\",\"c\":\"我是通过Object.defineProperty方法添加的可枚举属性\"&#125;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>根据现象有以下总结<br>for…in 可以枚举对象本身具有的属性，通过Object.defineProperty()方法加的可枚举属性，或者通过原型对象绑定的可以枚举属性<br>Object.keys() 可以枚举对象本身的属性和通过Object.defineProperty()添加的可枚举属性<br>JSON.stringify() 可以枚举对象本身的属性和通过Object.defineProperty()添加的可枚举属性，并序列化为JSON字符串</p>\n</blockquote>\n<ul>\n<li>!== undefined</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;<span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"literal\">undefined</span>, <span class=\"attr\">z</span>: <span class=\"literal\">null</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.x !== <span class=\"literal\">undefined</span>)  <span class=\"comment\">// true 属性存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.y !== <span class=\"literal\">undefined</span>)  <span class=\"comment\">// false 此时会出现歧义，不能准确判断属性是不存在还是属性值本身就为undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.z !== <span class=\"literal\">undefined</span>)  <span class=\"comment\">// true 属性存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.z != <span class=\"literal\">undefined</span>)  <span class=\"comment\">// false != 不能区分undefined和null，将两者同等对待</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.w !== <span class=\"literal\">undefined</span>)  <span class=\"comment\">// false 属性不存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.toString !== <span class=\"literal\">undefined</span>)  <span class=\"comment\">// true 存在toString函数属性。</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>in 自身存在的属性或者继承的属性均返回true</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;<span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"literal\">undefined</span>, <span class=\"attr\">z</span>: <span class=\"literal\">null</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"x\"</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// true 属性存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"y\"</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// true 属性存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"z\"</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// true 属性存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"w\"</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// false 属性不存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"toString\"</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// true 属性存在</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>Object.defineProperty()</li>\n</ul>\n<blockquote>\n<p>参数：<br>Object.defineProperty(object, propertyname, descriptor)<br>object 必需。 要在其上添加或修改属性的对象。 这可能是一个本机 JavaScript 对象（即用户定义的对象或内置对象）或 DOM 对象。<br>propertyname 必需。 一个包含属性名称的字符串。<br>descriptor 必需。 属性描述符。 它可以针对数据属性或访问器属性。<br>返回值：<br>已修改对象</p>\n</blockquote>\n<p>当对象不具有指定的属性名称时，向对象添加新属性。当对象已具有指定的属性名称时，修改现有属性的特性。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">\"newDataProperty\"</span>, &#123;</span><br><span class=\"line\">    value: <span class=\"number\">101</span>,</span><br><span class=\"line\">    writable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    enumerable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    configurable: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">obj.newDataProperty = <span class=\"number\">102</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.newDataProperty)  <span class=\"comment\">// 101 whiteable为false 只读，不能修改</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>Object.getOwnPropertyNames</li>\n</ul>\n<p>由于obj的属性newDataProperty是不可枚举的，使用for…in不能找到newDataProperty属性</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> item <span class=\"keyword\">in</span> obj) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(item, obj[item])  <span class=\"comment\">// 无输出</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>此时可以使用Object.getOwnPropertyNames来遍历</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> names = <span class=\"built_in\">Object</span>.getOwnPropertyNames(obj)</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; names.e]length; names++) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(names, i, names[i])</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// [\"newDataProperty\"] 0 newDataProperty</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">\"newAccessorProperty\"</span>, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">set</span>: function (x) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\"in property set accessor\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.newaccpropvalue = x;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"keyword\">get</span>: function () &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\"in property get accessor\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.newaccpropvalue;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    configurable: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">obj.newAccessorProperty = <span class=\"number\">30</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"Property value: \"</span> + obj.newAccessorProperty)</span><br><span class=\"line\"><span class=\"comment\">// in property set accessor</span></span><br><span class=\"line\"><span class=\"comment\">// in property get accessor</span></span><br><span class=\"line\"><span class=\"comment\">// Property value: 30</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>修改DOM上的属性</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(Element.prototype, <span class=\"string\">\"querySelector\"</span>)</span><br><span class=\"line\"><span class=\"comment\">// &#123;value: ƒ, writable: true, enumerable: true, configurable: true&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> descriptor = <span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(Element.prototype, <span class=\"string\">\"querySelector\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">descriptor.value = <span class=\"string\">\"query\"</span></span><br><span class=\"line\">descriptor.writable = <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(Element.prototype, <span class=\"string\">\"querySelector\"</span>, descriptor)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> elem = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"div\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">elem.querySelector = <span class=\"string\">\"anotherQuery\"</span>  <span class=\"comment\">// whitable 为false 更改不生效</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(elem.querySelector)  <span class=\"comment\">// query</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<h3 id=\"1-一些js插件为什么以-开头\"><a href=\"#1-一些js插件为什么以-开头\" class=\"headerlink\" title=\"1. 一些js插件为什么以;开头\"></a>1. 一些js插件为什么以<code>;</code>开头</h3><p>因为js代码允许在结束的时候不添加<code>;</code>, 所以两个js文件在合并拼接的的时候可能出错。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// a.js</span></span><br><span class=\"line\"><span class=\"comment\">// 末尾没有添加;符号</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">'test'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// b.js</span></span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// do something</span></span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>","more":"<p>以上两个文件进行合并压缩的时候就可能变为：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">'test'</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;)();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 这样会报错： TypeError: 'test' is not a function</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-使用闭包定义私有属性\"><a href=\"#2-使用闭包定义私有属性\" class=\"headerlink\" title=\"2. 使用闭包定义私有属性\"></a>2. 使用闭包定义私有属性</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Product</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> name;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">        name = value;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> Product();</span><br><span class=\"line\">p.setName(<span class=\"string\">\"test\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(p.name); <span class=\"comment\">// 输出undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(p.getName()); <span class=\"comment\">// 输出test</span></span><br></pre></td></tr></table></figure>\n<p>代码中，对象p的的<code>name</code>属性为<code>私有属性</code>，使用<code>p.name</code>不能直接访问。</p>\n<h3 id=\"3-枚举属性\"><a href=\"#3-枚举属性\" class=\"headerlink\" title=\"3. 枚举属性\"></a>3. 枚举属性</h3><ul>\n<li>可枚举性<br>在js中，<code>基本数据类型</code>的原型属性是不可枚举的，比如<code>Object</code>、<code>Array</code>、<code>Number</code>等。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 打印结果为空 Number内置属性是不可枚举的</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> num = <span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>()</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">in</span> num) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(i, num[i])</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>propertyIsEnumerable</li>\n</ul>\n<blockquote>\n<p>Object.propertyIsEnumerable(prop)<br>prop 需要测试的属性名<br>返回值 用来表示指定的属性名是否可枚举的Boolean<br>属性必须满足 自身属性 &amp;&amp; 枚举属性，才会返回true</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\">obj.test = <span class=\"string\">'Jnathan'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">23</span>, <span class=\"number\">67</span>]</span><br><span class=\"line\">obj.propertyIsEnumerable(<span class=\"string\">'test'</span>)  <span class=\"comment\">// true</span></span><br><span class=\"line\">arr.propertyIsEnumerable(<span class=\"number\">0</span>)  <span class=\"comment\">// true</span></span><br><span class=\"line\">arr.propertyIsEnumerable(<span class=\"number\">1</span>)  <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>hasOwnProperty</li>\n</ul>\n<blockquote>\n<p>Object.hasOwnProperty(prop)<br>prop 需要测试的属性名<br>返回值 用来表示指定的属性名是否在对象中的Boolean</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\">obj.x = <span class=\"string\">'Jnathan'</span></span><br><span class=\"line\">obj.y = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">obj.hasOwnProperty(<span class=\"string\">'x'</span>)  <span class=\"comment\">// true</span></span><br><span class=\"line\">obj.hasOwnProperty(<span class=\"string\">'y'</span>)  <span class=\"comment\">// true 方法也属于属性</span></span><br><span class=\"line\">obj.hasOwnProperty(<span class=\"string\">'z'</span>)  <span class=\"comment\">// false 属性不存在</span></span><br><span class=\"line\">obj.hasOwnProperty(<span class=\"string\">'toString'</span>)  <span class=\"comment\">// false toString是继承的Object中的属性，obj自身属性中不包含</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'Jnathan'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Person.prototype = &#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>: Person,</span><br><span class=\"line\">    job: 'student',</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">var Jnathan = new Person()</span><br><span class=\"line\">Object.defineProperty(Jnathan, \"gender\", &#123;</span><br><span class=\"line\">    value: <span class=\"string\">'female'</span>,</span><br><span class=\"line\">    enumerable: <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>以上， 用<code>defineProperty</code>为<code>对象Jnathan</code>定义了一个名为<code>gender</code>的<code>不可枚举属性</code></p>\n<ul>\n<li>枚举 for…in</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> item <span class=\"keyword\">in</span> Jnathan) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Jnathan.'</span> + item + <span class=\"string\">' = '</span> + Jnathan[item])</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// Jnathan.name = Jnathan</span></span><br><span class=\"line\"><span class=\"comment\">// Jnathan.constructor = function Person() &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//     this.name = 'Jnathan'</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// Jnathan.job = student</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">enumer</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.a = <span class=\"string\">'我是对象本身就有的属性'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">enumer.prototype.b = <span class=\"string\">'我是通过原型对象挂载的属性'</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> fn = <span class=\"keyword\">new</span> enumer()</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(fn, <span class=\"string\">'c'</span>, &#123;</span><br><span class=\"line\">    value: <span class=\"string\">'我是通过Object.defineProperty方法添加的可枚举属性'</span>,</span><br><span class=\"line\">    enumerable: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> item <span class=\"keyword\">in</span> fn) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(item)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// a</span></span><br><span class=\"line\"><span class=\"comment\">// b</span></span><br><span class=\"line\"><span class=\"comment\">// c</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>枚举 Object.keys()</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.keys(Jnathan)</span><br><span class=\"line\"><span class=\"comment\">// [\"name\"]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">enumer</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.a = <span class=\"string\">'我是对象本身就有的属性'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">enumer.prototype.b = <span class=\"string\">'我是通过原型对象挂载的属性'</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> fn = <span class=\"keyword\">new</span> enumer()</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(fn, <span class=\"string\">'c'</span>, &#123;</span><br><span class=\"line\">    value: <span class=\"string\">'我是通过Object.defineProperty方法添加的可枚举属性'</span>,</span><br><span class=\"line\">    enumerable: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.keys(fn))</span><br><span class=\"line\"><span class=\"comment\">// [\"a\", \"c\"]</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>枚举 JSON.stringify()</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">JSON</span>.stringify(Jnathan)</span><br><span class=\"line\"><span class=\"comment\">// \"&#123;\"name\":\"Jnathan\"&#125;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">enumer</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.a = <span class=\"string\">'我是对象本身就有的属性'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">enumer.prototype.b = <span class=\"string\">'我是通过原型对象挂载的属性'</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> fn = <span class=\"keyword\">new</span> enumer()</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(fn, <span class=\"string\">'c'</span>, &#123;</span><br><span class=\"line\">    value: <span class=\"string\">'我是通过Object.defineProperty方法添加的可枚举属性'</span>,</span><br><span class=\"line\">    enumerable: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(fn))</span><br><span class=\"line\"><span class=\"comment\">// &#123;\"a\":\"我是对象本身就有的属性\",\"c\":\"我是通过Object.defineProperty方法添加的可枚举属性\"&#125;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>根据现象有以下总结<br>for…in 可以枚举对象本身具有的属性，通过Object.defineProperty()方法加的可枚举属性，或者通过原型对象绑定的可以枚举属性<br>Object.keys() 可以枚举对象本身的属性和通过Object.defineProperty()添加的可枚举属性<br>JSON.stringify() 可以枚举对象本身的属性和通过Object.defineProperty()添加的可枚举属性，并序列化为JSON字符串</p>\n</blockquote>\n<ul>\n<li>!== undefined</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;<span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"literal\">undefined</span>, <span class=\"attr\">z</span>: <span class=\"literal\">null</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.x !== <span class=\"literal\">undefined</span>)  <span class=\"comment\">// true 属性存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.y !== <span class=\"literal\">undefined</span>)  <span class=\"comment\">// false 此时会出现歧义，不能准确判断属性是不存在还是属性值本身就为undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.z !== <span class=\"literal\">undefined</span>)  <span class=\"comment\">// true 属性存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.z != <span class=\"literal\">undefined</span>)  <span class=\"comment\">// false != 不能区分undefined和null，将两者同等对待</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.w !== <span class=\"literal\">undefined</span>)  <span class=\"comment\">// false 属性不存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.toString !== <span class=\"literal\">undefined</span>)  <span class=\"comment\">// true 存在toString函数属性。</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>in 自身存在的属性或者继承的属性均返回true</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;<span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"literal\">undefined</span>, <span class=\"attr\">z</span>: <span class=\"literal\">null</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"x\"</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// true 属性存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"y\"</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// true 属性存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"z\"</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// true 属性存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"w\"</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// false 属性不存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"toString\"</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// true 属性存在</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>Object.defineProperty()</li>\n</ul>\n<blockquote>\n<p>参数：<br>Object.defineProperty(object, propertyname, descriptor)<br>object 必需。 要在其上添加或修改属性的对象。 这可能是一个本机 JavaScript 对象（即用户定义的对象或内置对象）或 DOM 对象。<br>propertyname 必需。 一个包含属性名称的字符串。<br>descriptor 必需。 属性描述符。 它可以针对数据属性或访问器属性。<br>返回值：<br>已修改对象</p>\n</blockquote>\n<p>当对象不具有指定的属性名称时，向对象添加新属性。当对象已具有指定的属性名称时，修改现有属性的特性。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">\"newDataProperty\"</span>, &#123;</span><br><span class=\"line\">    value: <span class=\"number\">101</span>,</span><br><span class=\"line\">    writable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    enumerable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    configurable: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">obj.newDataProperty = <span class=\"number\">102</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.newDataProperty)  <span class=\"comment\">// 101 whiteable为false 只读，不能修改</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>Object.getOwnPropertyNames</li>\n</ul>\n<p>由于obj的属性newDataProperty是不可枚举的，使用for…in不能找到newDataProperty属性</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> item <span class=\"keyword\">in</span> obj) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(item, obj[item])  <span class=\"comment\">// 无输出</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>此时可以使用Object.getOwnPropertyNames来遍历</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> names = <span class=\"built_in\">Object</span>.getOwnPropertyNames(obj)</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; names.e]length; names++) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(names, i, names[i])</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// [\"newDataProperty\"] 0 newDataProperty</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">\"newAccessorProperty\"</span>, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">set</span>: function (x) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\"in property set accessor\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.newaccpropvalue = x;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"keyword\">get</span>: function () &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\"in property get accessor\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.newaccpropvalue;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    configurable: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">obj.newAccessorProperty = <span class=\"number\">30</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"Property value: \"</span> + obj.newAccessorProperty)</span><br><span class=\"line\"><span class=\"comment\">// in property set accessor</span></span><br><span class=\"line\"><span class=\"comment\">// in property get accessor</span></span><br><span class=\"line\"><span class=\"comment\">// Property value: 30</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>修改DOM上的属性</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(Element.prototype, <span class=\"string\">\"querySelector\"</span>)</span><br><span class=\"line\"><span class=\"comment\">// &#123;value: ƒ, writable: true, enumerable: true, configurable: true&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> descriptor = <span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(Element.prototype, <span class=\"string\">\"querySelector\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">descriptor.value = <span class=\"string\">\"query\"</span></span><br><span class=\"line\">descriptor.writable = <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(Element.prototype, <span class=\"string\">\"querySelector\"</span>, descriptor)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> elem = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"div\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">elem.querySelector = <span class=\"string\">\"anotherQuery\"</span>  <span class=\"comment\">// whitable 为false 更改不生效</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(elem.querySelector)  <span class=\"comment\">// query</span></span><br></pre></td></tr></table></figure>"},{"title":"css 常见图形","date":"2020-12-26T13:49:45.000Z","_content":"\n### 1. 三角形\n\n#### 1.1 上三角\n\n<div class=\"up-triangle\"></div>\n\n```html\n<div class=\"up-triangle\"></div>\n```\n<!-- more -->\n```yaml\n.up-triangle {\n    display: inline-block;\n    width: 0; height: 0;\n    border-left: 20px solid transparent;\n    border-right: 20px solid transparent;\n    border-bottom: 20px solid #00bebe;\n}\n```\n\n\n#### 1.2 下三角\n\n<div class=\"down-triangle\"></div>\n\n```yaml\n.down-triangle {\n    display: inline-block;\n    width: 0; height: 0;\n    border-left: 20px solid transparent;\n    border-right: 20px solid transparent;\n    border-top: 20px solid #00bebe;\n}\n```\n```html\n<div class=\"down-triangle\"></div>\n```\n\n#### 1.3 左三角\n\n<div class=\"left-triangle\"></div>\n\n```yaml\n.left-triangle {\n    display: inline-block;\n    width: 0; height: 0;\n    border-top: 20px solid transparent;\n    border-bottom: 20px solid transparent;\n    border-right: 20px solid #00bebe;\n}\n```\n```html\n<div class=\"left-triangle\"></div>\n```\n\n#### 1.4 右三角\n\n<div class=\"right-triangle\"></div>\n\n```yaml\n.right-triangle {\n    display: inline-block;\n    width: 0; height: 0;\n    border-top: 20px solid transparent;\n    border-bottom: 20px solid transparent;\n    border-left: 20px solid #00bebe;\n}\n```\n```html\n<div class=\"right-triangle\"></div>\n```\n\n### 1.5 带线框的三角形\n\n#### 1.5.1 两个三角形叠加 `谷歌翻译使用的方法`\n\n<div class=\"custom-speaking1\"><!--\n    --><div>这是对话内容</div><!--\n    --><div class=\"custom-triangle1\"></div><!--\n--></div>\n\n```yaml\n.custom-speaking1 {\n    display: inline-block;\n    padding: 10px;\n    border: 1px solid #00bebe;\n    filter: drop-shadow();\n    position: relative;\n}\n.custom-triangle1 {\n    position: absolute;\n    top: -11px;\n    left: 30px;\n}\n.custom-triangle1:before {\n    content: '';\n    position: absolute;\n    left: -11px;\n    border-left: 11px solid transparent;\n    border-right: 11px solid transparent;\n    border-bottom: 11px solid #00bebe;\n}\n.custom-triangle1:after {\n    content: '';\n    position: absolute;\n    left: -10px;\n    top: 1px;\n    border-left: 10px solid transparent;\n    border-right: 10px solid transparent;\n    border-bottom: 10px solid #fff;\n}\n```\n```html\n<div class=\"custom-speaking1\">\n    <div>这是对话内容</div>\n    <div class=\"custom-triangle1\"></div>\n</div>\n```\n\n#### 1.5.2 多重渐变背景正方形+旋转 [来源Demo](https://www.zhangxinxu.com/study/201710/css3-linear-gradient-triangle.html)\n\n<div class=\"custom-speaking2\">这是对话内容</div>\n\n```yaml\n.custom-speaking2 {\n    display: inline-block;\n    padding: 10px;\n    border: 1px solid #00bebe;\n    position: relative;\n}\n.custom-speaking2:before{\n    content: '';\n    position: absolute;\n    top: 16px; left: -6px;\n    width: 10px; height: 10px;\n    background: linear-gradient(to top, blue, blue) no-repeat, linear-gradient(to right, green, green) no-repeat, linear-gradient(to right bottom, #fff, #fff 10px, rgba(0, 0, 0, 0) 10px) no-repeat;\n    background-size: 10px 1px, 1px 10px, 10px 10px;\n    transform: rotate(-45deg);\n}\n```\n```html\n<div class=\"custom-speaking2\">这是对话内容</div>\n```\n\n> transparent 10px → rgba(0, 0, 0, 0) 10px，新升级Firefox下transparent边缘会有灰色背景渲染bug，使用rgba或hsla白色透明表示可修复。\n\n### 2. 比例可控制的虚线\n\n<div class=\"dashed-line1\"></div> 1:1\n<div class=\"dashed-line2\"></div> 3:7\n\n```yaml\n.dashed-line1 {\n    display: inline-block;\n    width: 200px;\n    height: 1px;\n    background: linear-gradient(to right, black, black 5px, transparent 5px, transparent);\n    background-size: 10px 1px;\n}\n.dashed-line2 {\n    display: inline-block;\n    width: 200px;\n    height: 1px;\n    background: linear-gradient(to right, black, black 3px, transparent 3px, transparent);\n    background-size: 10px 1px;\n}\n```\n```html\n<div class=\"dashed-line1\"></div>\n<div class=\"dashed-line2\"></div>\n```\n\n### 3. 加号减号\n\n<div class=\"custom-minus\"></div>&emsp;<div class=\"custom-plus\"></div>\n\n```yaml\n.custom-minus {\n    display: inline-block;\n    width: 30px;\n    height: 30px;\n    border-radius: 3px;\n    background: linear-gradient(to right, currentColor, currentColor);\n    background-color: #f0f1f2;\n    background-position: center;\n    background-size: 15px 2px;\n    background-repeat: no-repeat;\n}\n.custom-plus {\n    display: inline-block;\n    width: 30px;\n    height: 30px;\n    border-radius: 3px;\n    background: linear-gradient(to right, currentColor, currentColor);\n    background-color: #f0f1f2;\n    background-position: center;\n    background-size: 15px 2px;\n    background-repeat: no-repeat;\n}\n```\n```html\n<div class=\"custom-minus\"></div>\n<div class=\"custom-plus\"></div>\n```\n","source":"_posts/css-custom-shape.md","raw":"---\ntitle: css 常见图形\ndate: 2020-12-26 21:49:45\ntags: [css]\n---\n\n### 1. 三角形\n\n#### 1.1 上三角\n\n<div class=\"up-triangle\"></div>\n\n```html\n<div class=\"up-triangle\"></div>\n```\n<!-- more -->\n```yaml\n.up-triangle {\n    display: inline-block;\n    width: 0; height: 0;\n    border-left: 20px solid transparent;\n    border-right: 20px solid transparent;\n    border-bottom: 20px solid #00bebe;\n}\n```\n\n\n#### 1.2 下三角\n\n<div class=\"down-triangle\"></div>\n\n```yaml\n.down-triangle {\n    display: inline-block;\n    width: 0; height: 0;\n    border-left: 20px solid transparent;\n    border-right: 20px solid transparent;\n    border-top: 20px solid #00bebe;\n}\n```\n```html\n<div class=\"down-triangle\"></div>\n```\n\n#### 1.3 左三角\n\n<div class=\"left-triangle\"></div>\n\n```yaml\n.left-triangle {\n    display: inline-block;\n    width: 0; height: 0;\n    border-top: 20px solid transparent;\n    border-bottom: 20px solid transparent;\n    border-right: 20px solid #00bebe;\n}\n```\n```html\n<div class=\"left-triangle\"></div>\n```\n\n#### 1.4 右三角\n\n<div class=\"right-triangle\"></div>\n\n```yaml\n.right-triangle {\n    display: inline-block;\n    width: 0; height: 0;\n    border-top: 20px solid transparent;\n    border-bottom: 20px solid transparent;\n    border-left: 20px solid #00bebe;\n}\n```\n```html\n<div class=\"right-triangle\"></div>\n```\n\n### 1.5 带线框的三角形\n\n#### 1.5.1 两个三角形叠加 `谷歌翻译使用的方法`\n\n<div class=\"custom-speaking1\"><!--\n    --><div>这是对话内容</div><!--\n    --><div class=\"custom-triangle1\"></div><!--\n--></div>\n\n```yaml\n.custom-speaking1 {\n    display: inline-block;\n    padding: 10px;\n    border: 1px solid #00bebe;\n    filter: drop-shadow();\n    position: relative;\n}\n.custom-triangle1 {\n    position: absolute;\n    top: -11px;\n    left: 30px;\n}\n.custom-triangle1:before {\n    content: '';\n    position: absolute;\n    left: -11px;\n    border-left: 11px solid transparent;\n    border-right: 11px solid transparent;\n    border-bottom: 11px solid #00bebe;\n}\n.custom-triangle1:after {\n    content: '';\n    position: absolute;\n    left: -10px;\n    top: 1px;\n    border-left: 10px solid transparent;\n    border-right: 10px solid transparent;\n    border-bottom: 10px solid #fff;\n}\n```\n```html\n<div class=\"custom-speaking1\">\n    <div>这是对话内容</div>\n    <div class=\"custom-triangle1\"></div>\n</div>\n```\n\n#### 1.5.2 多重渐变背景正方形+旋转 [来源Demo](https://www.zhangxinxu.com/study/201710/css3-linear-gradient-triangle.html)\n\n<div class=\"custom-speaking2\">这是对话内容</div>\n\n```yaml\n.custom-speaking2 {\n    display: inline-block;\n    padding: 10px;\n    border: 1px solid #00bebe;\n    position: relative;\n}\n.custom-speaking2:before{\n    content: '';\n    position: absolute;\n    top: 16px; left: -6px;\n    width: 10px; height: 10px;\n    background: linear-gradient(to top, blue, blue) no-repeat, linear-gradient(to right, green, green) no-repeat, linear-gradient(to right bottom, #fff, #fff 10px, rgba(0, 0, 0, 0) 10px) no-repeat;\n    background-size: 10px 1px, 1px 10px, 10px 10px;\n    transform: rotate(-45deg);\n}\n```\n```html\n<div class=\"custom-speaking2\">这是对话内容</div>\n```\n\n> transparent 10px → rgba(0, 0, 0, 0) 10px，新升级Firefox下transparent边缘会有灰色背景渲染bug，使用rgba或hsla白色透明表示可修复。\n\n### 2. 比例可控制的虚线\n\n<div class=\"dashed-line1\"></div> 1:1\n<div class=\"dashed-line2\"></div> 3:7\n\n```yaml\n.dashed-line1 {\n    display: inline-block;\n    width: 200px;\n    height: 1px;\n    background: linear-gradient(to right, black, black 5px, transparent 5px, transparent);\n    background-size: 10px 1px;\n}\n.dashed-line2 {\n    display: inline-block;\n    width: 200px;\n    height: 1px;\n    background: linear-gradient(to right, black, black 3px, transparent 3px, transparent);\n    background-size: 10px 1px;\n}\n```\n```html\n<div class=\"dashed-line1\"></div>\n<div class=\"dashed-line2\"></div>\n```\n\n### 3. 加号减号\n\n<div class=\"custom-minus\"></div>&emsp;<div class=\"custom-plus\"></div>\n\n```yaml\n.custom-minus {\n    display: inline-block;\n    width: 30px;\n    height: 30px;\n    border-radius: 3px;\n    background: linear-gradient(to right, currentColor, currentColor);\n    background-color: #f0f1f2;\n    background-position: center;\n    background-size: 15px 2px;\n    background-repeat: no-repeat;\n}\n.custom-plus {\n    display: inline-block;\n    width: 30px;\n    height: 30px;\n    border-radius: 3px;\n    background: linear-gradient(to right, currentColor, currentColor);\n    background-color: #f0f1f2;\n    background-position: center;\n    background-size: 15px 2px;\n    background-repeat: no-repeat;\n}\n```\n```html\n<div class=\"custom-minus\"></div>\n<div class=\"custom-plus\"></div>\n```\n","slug":"css-custom-shape","published":1,"updated":"2021-01-19T06:35:34.990Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34cx0001u66tinpiug2v","content":"<h3 id=\"1-三角形\"><a href=\"#1-三角形\" class=\"headerlink\" title=\"1. 三角形\"></a>1. 三角形</h3><h4 id=\"1-1-上三角\"><a href=\"#1-1-上三角\" class=\"headerlink\" title=\"1.1 上三角\"></a>1.1 上三角</h4><div class=\"up-triangle\"></div>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"up-triangle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.up-triangle</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">0</span><span class=\"string\">;</span> <span class=\"attr\">height:</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    border-left:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-right:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-bottom:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"1-2-下三角\"><a href=\"#1-2-下三角\" class=\"headerlink\" title=\"1.2 下三角\"></a>1.2 下三角</h4><div class=\"down-triangle\"></div>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.down-triangle</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">0</span><span class=\"string\">;</span> <span class=\"attr\">height:</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    border-left:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-right:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-top:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"down-triangle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"1-3-左三角\"><a href=\"#1-3-左三角\" class=\"headerlink\" title=\"1.3 左三角\"></a>1.3 左三角</h4><div class=\"left-triangle\"></div>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.left-triangle</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">0</span><span class=\"string\">;</span> <span class=\"attr\">height:</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    border-top:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-bottom:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-right:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"left-triangle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"1-4-右三角\"><a href=\"#1-4-右三角\" class=\"headerlink\" title=\"1.4 右三角\"></a>1.4 右三角</h4><div class=\"right-triangle\"></div>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.right-triangle</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">0</span><span class=\"string\">;</span> <span class=\"attr\">height:</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    border-top:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-bottom:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-left:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"right-triangle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"1-5-带线框的三角形\"><a href=\"#1-5-带线框的三角形\" class=\"headerlink\" title=\"1.5 带线框的三角形\"></a>1.5 带线框的三角形</h3><h4 id=\"1-5-1-两个三角形叠加-谷歌翻译使用的方法\"><a href=\"#1-5-1-两个三角形叠加-谷歌翻译使用的方法\" class=\"headerlink\" title=\"1.5.1 两个三角形叠加 谷歌翻译使用的方法\"></a>1.5.1 两个三角形叠加 <code>谷歌翻译使用的方法</code></h4><div class=\"custom-speaking1\"><!--\n    --><div>这是对话内容</div><!--\n    --><div class=\"custom-triangle1\"></div><!--\n--></div>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.custom-speaking1</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    padding:</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    border:</span> <span class=\"number\">1</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"attr\">    filter:</span> <span class=\"string\">drop-shadow();</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">relative;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.custom-triangle1</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    top:</span> <span class=\"bullet\">-11</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    left:</span> <span class=\"number\">30</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.custom-triangle1:before</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    content:</span> <span class=\"string\">''</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    left:</span> <span class=\"bullet\">-11</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    border-left:</span> <span class=\"number\">11</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-right:</span> <span class=\"number\">11</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-bottom:</span> <span class=\"number\">11</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.custom-triangle1:after</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    content:</span> <span class=\"string\">''</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    left:</span> <span class=\"bullet\">-10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    top:</span> <span class=\"number\">1</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    border-left:</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-right:</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-bottom:</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#fff;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"custom-speaking1\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>这是对话内容<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"custom-triangle1\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"1-5-2-多重渐变背景正方形-旋转-来源Demo\"><a href=\"#1-5-2-多重渐变背景正方形-旋转-来源Demo\" class=\"headerlink\" title=\"1.5.2 多重渐变背景正方形+旋转 来源Demo\"></a>1.5.2 多重渐变背景正方形+旋转 <a href=\"https://www.zhangxinxu.com/study/201710/css3-linear-gradient-triangle.html\" target=\"_blank\" rel=\"noopener\">来源Demo</a></h4><div class=\"custom-speaking2\">这是对话内容</div>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.custom-speaking2</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    padding:</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    border:</span> <span class=\"number\">1</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">relative;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.custom-speaking2:before&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    content:</span> <span class=\"string\">''</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    top:</span> <span class=\"number\">16</span><span class=\"string\">px;</span> <span class=\"attr\">left:</span> <span class=\"bullet\">-6</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">10</span><span class=\"string\">px;</span> <span class=\"attr\">height:</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">top,</span> <span class=\"string\">blue,</span> <span class=\"string\">blue)</span> <span class=\"literal\">no</span><span class=\"bullet\">-repeat,</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">green,</span> <span class=\"string\">green)</span> <span class=\"literal\">no</span><span class=\"bullet\">-repeat,</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right</span> <span class=\"string\">bottom,</span> <span class=\"comment\">#fff, #fff 10px, rgba(0, 0, 0, 0) 10px) no-repeat;</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"number\">1</span><span class=\"string\">px,</span> <span class=\"number\">1</span><span class=\"string\">px</span> <span class=\"number\">10</span><span class=\"string\">px,</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    transform:</span> <span class=\"string\">rotate(-45deg);</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"custom-speaking2\"</span>&gt;</span>这是对话内容<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>transparent 10px → rgba(0, 0, 0, 0) 10px，新升级Firefox下transparent边缘会有灰色背景渲染bug，使用rgba或hsla白色透明表示可修复。</p>\n</blockquote>\n<h3 id=\"2-比例可控制的虚线\"><a href=\"#2-比例可控制的虚线\" class=\"headerlink\" title=\"2. 比例可控制的虚线\"></a>2. 比例可控制的虚线</h3><div class=\"dashed-line1\"></div> 1:1<br><div class=\"dashed-line2\"></div> 3:7<br><br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.dashed-line1</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">200</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">1</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">black,</span> <span class=\"string\">black</span> <span class=\"number\">5</span><span class=\"string\">px,</span> <span class=\"string\">transparent</span> <span class=\"number\">5</span><span class=\"string\">px,</span> <span class=\"string\">transparent);</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"number\">1</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.dashed-line2</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">200</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">1</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">black,</span> <span class=\"string\">black</span> <span class=\"number\">3</span><span class=\"string\">px,</span> <span class=\"string\">transparent</span> <span class=\"number\">3</span><span class=\"string\">px,</span> <span class=\"string\">transparent);</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"number\">1</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure><br><br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"dashed-line1\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"dashed-line2\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure><br><br>### 3. 加号减号<br><br><div class=\"custom-minus\"></div>&emsp;<div class=\"custom-plus\"></div>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.custom-minus</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">30</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">30</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    border-radius:</span> <span class=\"number\">3</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">currentColor,</span> <span class=\"string\">currentColor);</span></span><br><span class=\"line\"><span class=\"attr\">    background-color:</span> <span class=\"comment\">#f0f1f2;</span></span><br><span class=\"line\"><span class=\"attr\">    background-position:</span> <span class=\"string\">center;</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">15</span><span class=\"string\">px</span> <span class=\"number\">2</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background-repeat:</span> <span class=\"literal\">no</span><span class=\"bullet\">-repeat;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.custom-plus</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">30</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">30</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    border-radius:</span> <span class=\"number\">3</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">currentColor,</span> <span class=\"string\">currentColor);</span></span><br><span class=\"line\"><span class=\"attr\">    background-color:</span> <span class=\"comment\">#f0f1f2;</span></span><br><span class=\"line\"><span class=\"attr\">    background-position:</span> <span class=\"string\">center;</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">15</span><span class=\"string\">px</span> <span class=\"number\">2</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background-repeat:</span> <span class=\"literal\">no</span><span class=\"bullet\">-repeat;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"custom-minus\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"custom-plus\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<h3 id=\"1-三角形\"><a href=\"#1-三角形\" class=\"headerlink\" title=\"1. 三角形\"></a>1. 三角形</h3><h4 id=\"1-1-上三角\"><a href=\"#1-1-上三角\" class=\"headerlink\" title=\"1.1 上三角\"></a>1.1 上三角</h4><div class=\"up-triangle\"></div>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"up-triangle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>","more":"<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.up-triangle</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">0</span><span class=\"string\">;</span> <span class=\"attr\">height:</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    border-left:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-right:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-bottom:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"1-2-下三角\"><a href=\"#1-2-下三角\" class=\"headerlink\" title=\"1.2 下三角\"></a>1.2 下三角</h4><div class=\"down-triangle\"></div>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.down-triangle</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">0</span><span class=\"string\">;</span> <span class=\"attr\">height:</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    border-left:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-right:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-top:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"down-triangle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"1-3-左三角\"><a href=\"#1-3-左三角\" class=\"headerlink\" title=\"1.3 左三角\"></a>1.3 左三角</h4><div class=\"left-triangle\"></div>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.left-triangle</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">0</span><span class=\"string\">;</span> <span class=\"attr\">height:</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    border-top:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-bottom:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-right:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"left-triangle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"1-4-右三角\"><a href=\"#1-4-右三角\" class=\"headerlink\" title=\"1.4 右三角\"></a>1.4 右三角</h4><div class=\"right-triangle\"></div>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.right-triangle</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">0</span><span class=\"string\">;</span> <span class=\"attr\">height:</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    border-top:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-bottom:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-left:</span> <span class=\"number\">20</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"right-triangle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"1-5-带线框的三角形\"><a href=\"#1-5-带线框的三角形\" class=\"headerlink\" title=\"1.5 带线框的三角形\"></a>1.5 带线框的三角形</h3><h4 id=\"1-5-1-两个三角形叠加-谷歌翻译使用的方法\"><a href=\"#1-5-1-两个三角形叠加-谷歌翻译使用的方法\" class=\"headerlink\" title=\"1.5.1 两个三角形叠加 谷歌翻译使用的方法\"></a>1.5.1 两个三角形叠加 <code>谷歌翻译使用的方法</code></h4><div class=\"custom-speaking1\"><!--\n    --><div>这是对话内容</div><!--\n    --><div class=\"custom-triangle1\"></div><!--\n--></div>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.custom-speaking1</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    padding:</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    border:</span> <span class=\"number\">1</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"attr\">    filter:</span> <span class=\"string\">drop-shadow();</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">relative;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.custom-triangle1</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    top:</span> <span class=\"bullet\">-11</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    left:</span> <span class=\"number\">30</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.custom-triangle1:before</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    content:</span> <span class=\"string\">''</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    left:</span> <span class=\"bullet\">-11</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    border-left:</span> <span class=\"number\">11</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-right:</span> <span class=\"number\">11</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-bottom:</span> <span class=\"number\">11</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.custom-triangle1:after</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    content:</span> <span class=\"string\">''</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    left:</span> <span class=\"bullet\">-10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    top:</span> <span class=\"number\">1</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    border-left:</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-right:</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\"><span class=\"attr\">    border-bottom:</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#fff;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"custom-speaking1\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>这是对话内容<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"custom-triangle1\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"1-5-2-多重渐变背景正方形-旋转-来源Demo\"><a href=\"#1-5-2-多重渐变背景正方形-旋转-来源Demo\" class=\"headerlink\" title=\"1.5.2 多重渐变背景正方形+旋转 来源Demo\"></a>1.5.2 多重渐变背景正方形+旋转 <a href=\"https://www.zhangxinxu.com/study/201710/css3-linear-gradient-triangle.html\" target=\"_blank\" rel=\"noopener\">来源Demo</a></h4><div class=\"custom-speaking2\">这是对话内容</div>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.custom-speaking2</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    padding:</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    border:</span> <span class=\"number\">1</span><span class=\"string\">px</span> <span class=\"string\">solid</span> <span class=\"comment\">#00bebe;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">relative;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.custom-speaking2:before&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    content:</span> <span class=\"string\">''</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    top:</span> <span class=\"number\">16</span><span class=\"string\">px;</span> <span class=\"attr\">left:</span> <span class=\"bullet\">-6</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">10</span><span class=\"string\">px;</span> <span class=\"attr\">height:</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">top,</span> <span class=\"string\">blue,</span> <span class=\"string\">blue)</span> <span class=\"literal\">no</span><span class=\"bullet\">-repeat,</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">green,</span> <span class=\"string\">green)</span> <span class=\"literal\">no</span><span class=\"bullet\">-repeat,</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right</span> <span class=\"string\">bottom,</span> <span class=\"comment\">#fff, #fff 10px, rgba(0, 0, 0, 0) 10px) no-repeat;</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"number\">1</span><span class=\"string\">px,</span> <span class=\"number\">1</span><span class=\"string\">px</span> <span class=\"number\">10</span><span class=\"string\">px,</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    transform:</span> <span class=\"string\">rotate(-45deg);</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"custom-speaking2\"</span>&gt;</span>这是对话内容<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>transparent 10px → rgba(0, 0, 0, 0) 10px，新升级Firefox下transparent边缘会有灰色背景渲染bug，使用rgba或hsla白色透明表示可修复。</p>\n</blockquote>\n<h3 id=\"2-比例可控制的虚线\"><a href=\"#2-比例可控制的虚线\" class=\"headerlink\" title=\"2. 比例可控制的虚线\"></a>2. 比例可控制的虚线</h3><div class=\"dashed-line1\"></div> 1:1<br><div class=\"dashed-line2\"></div> 3:7<br><br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.dashed-line1</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">200</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">1</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">black,</span> <span class=\"string\">black</span> <span class=\"number\">5</span><span class=\"string\">px,</span> <span class=\"string\">transparent</span> <span class=\"number\">5</span><span class=\"string\">px,</span> <span class=\"string\">transparent);</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"number\">1</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.dashed-line2</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">200</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">1</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">black,</span> <span class=\"string\">black</span> <span class=\"number\">3</span><span class=\"string\">px,</span> <span class=\"string\">transparent</span> <span class=\"number\">3</span><span class=\"string\">px,</span> <span class=\"string\">transparent);</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">10</span><span class=\"string\">px</span> <span class=\"number\">1</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure><br><br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"dashed-line1\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"dashed-line2\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure><br><br>### 3. 加号减号<br><br><div class=\"custom-minus\"></div>&emsp;<div class=\"custom-plus\"></div>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.custom-minus</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">30</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">30</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    border-radius:</span> <span class=\"number\">3</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">currentColor,</span> <span class=\"string\">currentColor);</span></span><br><span class=\"line\"><span class=\"attr\">    background-color:</span> <span class=\"comment\">#f0f1f2;</span></span><br><span class=\"line\"><span class=\"attr\">    background-position:</span> <span class=\"string\">center;</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">15</span><span class=\"string\">px</span> <span class=\"number\">2</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background-repeat:</span> <span class=\"literal\">no</span><span class=\"bullet\">-repeat;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.custom-plus</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    display:</span> <span class=\"string\">inline-block;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">30</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">30</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    border-radius:</span> <span class=\"number\">3</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">currentColor,</span> <span class=\"string\">currentColor);</span></span><br><span class=\"line\"><span class=\"attr\">    background-color:</span> <span class=\"comment\">#f0f1f2;</span></span><br><span class=\"line\"><span class=\"attr\">    background-position:</span> <span class=\"string\">center;</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">15</span><span class=\"string\">px</span> <span class=\"number\">2</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background-repeat:</span> <span class=\"literal\">no</span><span class=\"bullet\">-repeat;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"custom-minus\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"custom-plus\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"title":"数据类型转换","date":"2020-04-18T16:00:00.000Z","_content":"\n基本数据类型有 `Number`、 `String`、 `Boolean`、 `Null`、 `Undefined`、`Object`，ES6新增了`Symbol` 类型。\n\n### 1. 原始值转布尔\n\n在Javascript中。只有6种值可以被转换成false，其余均为true：\n`false`、`undefined`、`null`、`NaN`、`0`、`''`\n\n```js\n    console.log(Boolean(false))  // false\n    console.log(Boolean(undefined))  // false\n    console.log(Boolean(null))  // false\n    console.log(Boolean(NaN))  // false\n    console.log(Boolean(0))  // false\n    console.log(Boolean(''))  // false\n    // Boolean不传任何参数时 返回false\n    console.log(Boolean())  // false\n```\n\n<!-- More -->\n\n### 2. 原始值转数字\n\n使用`Number`函数将数据转换成数字类型，参数无法转换成数字的，返回NaN。\n根据规范，如果Number函数不传参数，返回0，如果有参数，调用`toNumber(value)`,其对应结果如下：\n\n|参数类型|结果|\n|:---|:---|\n|undefined|NaN|\n|null|0|\n|布尔值|true: 1, false: 0|\n|Number|对应的值|\n|String|比较复杂，看具体例子|\n\n```js\n    console.log(Number())  // 0\n\n    console.log(Number(undefined))  // NaN\n    console.log(Number(null))  // 0\n    console.log(Number(true))  // 1\n    console.log(Number(false))  // 0\n    console.log(Number(88))  // 88\n\n    console.log(Number(\"123\"))  // 123\n    console.log(Number(\"-123\"))  // -123\n    console.log(Number(\"1.2\"))  // 1.2\n    console.log(Number(\"000123\"))  // 123\n    console.log(Number(\"-000123\"))  // -123\n    console.log(Number(\"0x11\"))  // 17\n    console.log(Number(\"\"))  // 0\n    console.log(Number(\" \"))  // 0\n    console.log(Number(\"123 123\"))  // NaN\n    console.log(Number(\"foo\"))  // NaN\n    console.log(Number(\"100a\"))  // NaN\n```\n\n如果通过 `Number` 转换函数传入一个字符串，它会试图将其转换成一个整数或浮点数，而且会忽略所有前导的 `0`，如果有一个字符不是数字，结果都会返回 `NaN`。如果字符串前缀是`0x`或者`0X`，将转换为`十六进制`数。\n\n### 3. 原始值转字符\n\n使用 `String` 函数将类型转换成字符串类型。\n根据规范，如果不传递参数，返回空字符串，如果有参数，调用`toString(value)`，其对应结果如下：\n\n\n|参数类型|结果|\n|:---|:---|\n|undefined|\"undefined\"|\n|null|\"null\"|\n|Boolean|true: \"true\", false: \"false\"|\n|Number|比较复杂，看具体例子|\n|String|对应的值|\n\n\n```js\n    console.log(String()) // 空字符串\n\n    console.log(String(undefined)) // undefined\n    console.log(String(null)) // null\n    console.log(String(false)) // false\n    console.log(String(true)) // true\n    console.log(String('678')) // 678\n\n    console.log(String(0)) // 0\n    console.log(String(-0)) // 0\n    console.log(String(NaN)) // NaN\n    console.log(String(Infinity)) // Infinity\n    console.log(String(-Infinity)) // -Infinity\n    console.log(String(1)) // 1\n```\n\n注意这里的 ToString 和上一节的 ToNumber 都是底层规范实现的方法，并没有直接暴露出来。\n\n### 4. 对象转字符串和数字\n\n几种基本数据类型中，除了Null和Undefined类型外，其余5种原型链上都有valueOf()和toString()函数。这两个函数主要在隐式类型转换时会被自动调用。\n\n#### 4.1 同时重写对象的toString方法和valueOf方法\n\n```js\nvar aaa = {\n    i: 10,\n    valueOf: function() { \n        console.log('调用valueOf...')\n        return this.i + 30\n    },\n    toString: function() { \n        console.log('调用toString...')\n        return this.i + 10\n    }\n}\nconsole.log(aaa > 20); // 调用valueOf...  true\nconsole.log('' + aaa);  //  调用valueOf...  40\nconsole.log(++aaa); // 调用valueOf...  41\n// 在不执行上一步 console.log(++aaa) 的前提\nconsole.log(+aaa); //  调用valueOf...  40\n// 在执行上一步 console.log(++aaa) 的前提 此时aaa变成了字符串41\nconsole.log(+aaa); // 41 调用原型链上默认的valueOf()\nconsole.log(aaa == 40) // 调用valueOf... true\n\n// 上面的步骤没执行的前提下 否则aaa变成了字符串41 此时输出41\nconsole.log(aaa); // {i: 10, valueOf: ƒ, toString: f}\nconsole.log(String(aaa)) // 调用toString... 20\n```\n\n总结：涉及到操作符的问题，valueOf的优先级更高；涉及到显示问题，toString方法优先级更高。\n\n#### 4.2 只重写toString方法\n\n```js\nvar bbb = {\n    i: 10,\n    toString: function() {\n        console.log('调用toString...')\n        return this.i + 10\n    }\n}\nconsole.log(bbb > 20); // 调用toString... false\nconsole.log('' + bbb);  //  调用toString... 20\nconsole.log(++bbb); // 调用toString... 21\n// 在不执行上一步 console.log(++bbb) 的前提\nconsole.log(+bbb); // 调用toString... 20\n// 在执行上一步 console.log(++bbb) 的前提 此时bbb变成了字符串21\nconsole.log(+bbb); // 21 调用原型链上默认的valueOf()\nconsole.log(bbb == 20) // 调用toString... true\n\n// \nconsole.log(bbb); // {i: 10, toString: ƒ} 没调用重写的toString()方法，调用了原型链上默认的valueOf()\nconsole.log(String(bbb)) // 调用toString... 20\n```\n\n总结： toString方法比原型链上的valueOf方法优先级高","source":"_posts/data-type-transfer.md","raw":"---\ntitle: 数据类型转换\ndate: 2020-04-19\ntags: [数据类型, 类型转换]\n---\n\n基本数据类型有 `Number`、 `String`、 `Boolean`、 `Null`、 `Undefined`、`Object`，ES6新增了`Symbol` 类型。\n\n### 1. 原始值转布尔\n\n在Javascript中。只有6种值可以被转换成false，其余均为true：\n`false`、`undefined`、`null`、`NaN`、`0`、`''`\n\n```js\n    console.log(Boolean(false))  // false\n    console.log(Boolean(undefined))  // false\n    console.log(Boolean(null))  // false\n    console.log(Boolean(NaN))  // false\n    console.log(Boolean(0))  // false\n    console.log(Boolean(''))  // false\n    // Boolean不传任何参数时 返回false\n    console.log(Boolean())  // false\n```\n\n<!-- More -->\n\n### 2. 原始值转数字\n\n使用`Number`函数将数据转换成数字类型，参数无法转换成数字的，返回NaN。\n根据规范，如果Number函数不传参数，返回0，如果有参数，调用`toNumber(value)`,其对应结果如下：\n\n|参数类型|结果|\n|:---|:---|\n|undefined|NaN|\n|null|0|\n|布尔值|true: 1, false: 0|\n|Number|对应的值|\n|String|比较复杂，看具体例子|\n\n```js\n    console.log(Number())  // 0\n\n    console.log(Number(undefined))  // NaN\n    console.log(Number(null))  // 0\n    console.log(Number(true))  // 1\n    console.log(Number(false))  // 0\n    console.log(Number(88))  // 88\n\n    console.log(Number(\"123\"))  // 123\n    console.log(Number(\"-123\"))  // -123\n    console.log(Number(\"1.2\"))  // 1.2\n    console.log(Number(\"000123\"))  // 123\n    console.log(Number(\"-000123\"))  // -123\n    console.log(Number(\"0x11\"))  // 17\n    console.log(Number(\"\"))  // 0\n    console.log(Number(\" \"))  // 0\n    console.log(Number(\"123 123\"))  // NaN\n    console.log(Number(\"foo\"))  // NaN\n    console.log(Number(\"100a\"))  // NaN\n```\n\n如果通过 `Number` 转换函数传入一个字符串，它会试图将其转换成一个整数或浮点数，而且会忽略所有前导的 `0`，如果有一个字符不是数字，结果都会返回 `NaN`。如果字符串前缀是`0x`或者`0X`，将转换为`十六进制`数。\n\n### 3. 原始值转字符\n\n使用 `String` 函数将类型转换成字符串类型。\n根据规范，如果不传递参数，返回空字符串，如果有参数，调用`toString(value)`，其对应结果如下：\n\n\n|参数类型|结果|\n|:---|:---|\n|undefined|\"undefined\"|\n|null|\"null\"|\n|Boolean|true: \"true\", false: \"false\"|\n|Number|比较复杂，看具体例子|\n|String|对应的值|\n\n\n```js\n    console.log(String()) // 空字符串\n\n    console.log(String(undefined)) // undefined\n    console.log(String(null)) // null\n    console.log(String(false)) // false\n    console.log(String(true)) // true\n    console.log(String('678')) // 678\n\n    console.log(String(0)) // 0\n    console.log(String(-0)) // 0\n    console.log(String(NaN)) // NaN\n    console.log(String(Infinity)) // Infinity\n    console.log(String(-Infinity)) // -Infinity\n    console.log(String(1)) // 1\n```\n\n注意这里的 ToString 和上一节的 ToNumber 都是底层规范实现的方法，并没有直接暴露出来。\n\n### 4. 对象转字符串和数字\n\n几种基本数据类型中，除了Null和Undefined类型外，其余5种原型链上都有valueOf()和toString()函数。这两个函数主要在隐式类型转换时会被自动调用。\n\n#### 4.1 同时重写对象的toString方法和valueOf方法\n\n```js\nvar aaa = {\n    i: 10,\n    valueOf: function() { \n        console.log('调用valueOf...')\n        return this.i + 30\n    },\n    toString: function() { \n        console.log('调用toString...')\n        return this.i + 10\n    }\n}\nconsole.log(aaa > 20); // 调用valueOf...  true\nconsole.log('' + aaa);  //  调用valueOf...  40\nconsole.log(++aaa); // 调用valueOf...  41\n// 在不执行上一步 console.log(++aaa) 的前提\nconsole.log(+aaa); //  调用valueOf...  40\n// 在执行上一步 console.log(++aaa) 的前提 此时aaa变成了字符串41\nconsole.log(+aaa); // 41 调用原型链上默认的valueOf()\nconsole.log(aaa == 40) // 调用valueOf... true\n\n// 上面的步骤没执行的前提下 否则aaa变成了字符串41 此时输出41\nconsole.log(aaa); // {i: 10, valueOf: ƒ, toString: f}\nconsole.log(String(aaa)) // 调用toString... 20\n```\n\n总结：涉及到操作符的问题，valueOf的优先级更高；涉及到显示问题，toString方法优先级更高。\n\n#### 4.2 只重写toString方法\n\n```js\nvar bbb = {\n    i: 10,\n    toString: function() {\n        console.log('调用toString...')\n        return this.i + 10\n    }\n}\nconsole.log(bbb > 20); // 调用toString... false\nconsole.log('' + bbb);  //  调用toString... 20\nconsole.log(++bbb); // 调用toString... 21\n// 在不执行上一步 console.log(++bbb) 的前提\nconsole.log(+bbb); // 调用toString... 20\n// 在执行上一步 console.log(++bbb) 的前提 此时bbb变成了字符串21\nconsole.log(+bbb); // 21 调用原型链上默认的valueOf()\nconsole.log(bbb == 20) // 调用toString... true\n\n// \nconsole.log(bbb); // {i: 10, toString: ƒ} 没调用重写的toString()方法，调用了原型链上默认的valueOf()\nconsole.log(String(bbb)) // 调用toString... 20\n```\n\n总结： toString方法比原型链上的valueOf方法优先级高","slug":"data-type-transfer","published":1,"updated":"2020-04-30T09:29:20.846Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34cz0002u66te38d4cey","content":"<p>基本数据类型有 <code>Number</code>、 <code>String</code>、 <code>Boolean</code>、 <code>Null</code>、 <code>Undefined</code>、<code>Object</code>，ES6新增了<code>Symbol</code> 类型。</p>\n<h3 id=\"1-原始值转布尔\"><a href=\"#1-原始值转布尔\" class=\"headerlink\" title=\"1. 原始值转布尔\"></a>1. 原始值转布尔</h3><p>在Javascript中。只有6种值可以被转换成false，其余均为true：<br><code>false</code>、<code>undefined</code>、<code>null</code>、<code>NaN</code>、<code>0</code>、<code>&#39;&#39;</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>(<span class=\"literal\">false</span>))  <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>(<span class=\"literal\">undefined</span>))  <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>(<span class=\"literal\">null</span>))  <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>(<span class=\"literal\">NaN</span>))  <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>(<span class=\"number\">0</span>))  <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>(<span class=\"string\">''</span>))  <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"comment\">// Boolean不传任何参数时 返回false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>())  <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h3 id=\"2-原始值转数字\"><a href=\"#2-原始值转数字\" class=\"headerlink\" title=\"2. 原始值转数字\"></a>2. 原始值转数字</h3><p>使用<code>Number</code>函数将数据转换成数字类型，参数无法转换成数字的，返回NaN。<br>根据规范，如果Number函数不传参数，返回0，如果有参数，调用<code>toNumber(value)</code>,其对应结果如下：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">参数类型</th>\n<th style=\"text-align:left\">结果</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">undefined</td>\n<td style=\"text-align:left\">NaN</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">null</td>\n<td style=\"text-align:left\">0</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">布尔值</td>\n<td style=\"text-align:left\">true: 1, false: 0</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Number</td>\n<td style=\"text-align:left\">对应的值</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">比较复杂，看具体例子</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>())  <span class=\"comment\">// 0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"literal\">undefined</span>))  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"literal\">null</span>))  <span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"literal\">true</span>))  <span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"literal\">false</span>))  <span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"number\">88</span>))  <span class=\"comment\">// 88</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"123\"</span>))  <span class=\"comment\">// 123</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"-123\"</span>))  <span class=\"comment\">// -123</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"1.2\"</span>))  <span class=\"comment\">// 1.2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"000123\"</span>))  <span class=\"comment\">// 123</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"-000123\"</span>))  <span class=\"comment\">// -123</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"0x11\"</span>))  <span class=\"comment\">// 17</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"\"</span>))  <span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\" \"</span>))  <span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"123 123\"</span>))  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"foo\"</span>))  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"100a\"</span>))  <span class=\"comment\">// NaN</span></span><br></pre></td></tr></table></figure>\n<p>如果通过 <code>Number</code> 转换函数传入一个字符串，它会试图将其转换成一个整数或浮点数，而且会忽略所有前导的 <code>0</code>，如果有一个字符不是数字，结果都会返回 <code>NaN</code>。如果字符串前缀是<code>0x</code>或者<code>0X</code>，将转换为<code>十六进制</code>数。</p>\n<h3 id=\"3-原始值转字符\"><a href=\"#3-原始值转字符\" class=\"headerlink\" title=\"3. 原始值转字符\"></a>3. 原始值转字符</h3><p>使用 <code>String</code> 函数将类型转换成字符串类型。<br>根据规范，如果不传递参数，返回空字符串，如果有参数，调用<code>toString(value)</code>，其对应结果如下：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">参数类型</th>\n<th style=\"text-align:left\">结果</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">undefined</td>\n<td style=\"text-align:left\">“undefined”</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">null</td>\n<td style=\"text-align:left\">“null”</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Boolean</td>\n<td style=\"text-align:left\">true: “true”, false: “false”</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Number</td>\n<td style=\"text-align:left\">比较复杂，看具体例子</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">对应的值</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>()) <span class=\"comment\">// 空字符串</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"literal\">undefined</span>)) <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"literal\">null</span>)) <span class=\"comment\">// null</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"literal\">false</span>)) <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"literal\">true</span>)) <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"string\">'678'</span>)) <span class=\"comment\">// 678</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"number\">0</span>)) <span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"number\">-0</span>)) <span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"literal\">NaN</span>)) <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"literal\">Infinity</span>)) <span class=\"comment\">// Infinity</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(-<span class=\"literal\">Infinity</span>)) <span class=\"comment\">// -Infinity</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"number\">1</span>)) <span class=\"comment\">// 1</span></span><br></pre></td></tr></table></figure>\n<p>注意这里的 ToString 和上一节的 ToNumber 都是底层规范实现的方法，并没有直接暴露出来。</p>\n<h3 id=\"4-对象转字符串和数字\"><a href=\"#4-对象转字符串和数字\" class=\"headerlink\" title=\"4. 对象转字符串和数字\"></a>4. 对象转字符串和数字</h3><p>几种基本数据类型中，除了Null和Undefined类型外，其余5种原型链上都有valueOf()和toString()函数。这两个函数主要在隐式类型转换时会被自动调用。</p>\n<h4 id=\"4-1-同时重写对象的toString方法和valueOf方法\"><a href=\"#4-1-同时重写对象的toString方法和valueOf方法\" class=\"headerlink\" title=\"4.1 同时重写对象的toString方法和valueOf方法\"></a>4.1 同时重写对象的toString方法和valueOf方法</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> aaa = &#123;</span><br><span class=\"line\">    i: <span class=\"number\">10</span>,</span><br><span class=\"line\">    valueOf: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; </span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'调用valueOf...'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.i + <span class=\"number\">30</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    toString: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; </span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'调用toString...'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.i + <span class=\"number\">10</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(aaa &gt; <span class=\"number\">20</span>); <span class=\"comment\">// 调用valueOf...  true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span> + aaa);  <span class=\"comment\">//  调用valueOf...  40</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(++aaa); <span class=\"comment\">// 调用valueOf...  41</span></span><br><span class=\"line\"><span class=\"comment\">// 在不执行上一步 console.log(++aaa) 的前提</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(+aaa); <span class=\"comment\">//  调用valueOf...  40</span></span><br><span class=\"line\"><span class=\"comment\">// 在执行上一步 console.log(++aaa) 的前提 此时aaa变成了字符串41</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(+aaa); <span class=\"comment\">// 41 调用原型链上默认的valueOf()</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(aaa == <span class=\"number\">40</span>) <span class=\"comment\">// 调用valueOf... true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 上面的步骤没执行的前提下 否则aaa变成了字符串41 此时输出41</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(aaa); <span class=\"comment\">// &#123;i: 10, valueOf: ƒ, toString: f&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(aaa)) <span class=\"comment\">// 调用toString... 20</span></span><br></pre></td></tr></table></figure>\n<p>总结：涉及到操作符的问题，valueOf的优先级更高；涉及到显示问题，toString方法优先级更高。</p>\n<h4 id=\"4-2-只重写toString方法\"><a href=\"#4-2-只重写toString方法\" class=\"headerlink\" title=\"4.2 只重写toString方法\"></a>4.2 只重写toString方法</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> bbb = &#123;</span><br><span class=\"line\">    i: <span class=\"number\">10</span>,</span><br><span class=\"line\">    toString: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'调用toString...'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.i + <span class=\"number\">10</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(bbb &gt; <span class=\"number\">20</span>); <span class=\"comment\">// 调用toString... false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span> + bbb);  <span class=\"comment\">//  调用toString... 20</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(++bbb); <span class=\"comment\">// 调用toString... 21</span></span><br><span class=\"line\"><span class=\"comment\">// 在不执行上一步 console.log(++bbb) 的前提</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(+bbb); <span class=\"comment\">// 调用toString... 20</span></span><br><span class=\"line\"><span class=\"comment\">// 在执行上一步 console.log(++bbb) 的前提 此时bbb变成了字符串21</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(+bbb); <span class=\"comment\">// 21 调用原型链上默认的valueOf()</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(bbb == <span class=\"number\">20</span>) <span class=\"comment\">// 调用toString... true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(bbb); <span class=\"comment\">// &#123;i: 10, toString: ƒ&#125; 没调用重写的toString()方法，调用了原型链上默认的valueOf()</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(bbb)) <span class=\"comment\">// 调用toString... 20</span></span><br></pre></td></tr></table></figure>\n<p>总结： toString方法比原型链上的valueOf方法优先级高</p>\n","site":{"data":{}},"excerpt":"<p>基本数据类型有 <code>Number</code>、 <code>String</code>、 <code>Boolean</code>、 <code>Null</code>、 <code>Undefined</code>、<code>Object</code>，ES6新增了<code>Symbol</code> 类型。</p>\n<h3 id=\"1-原始值转布尔\"><a href=\"#1-原始值转布尔\" class=\"headerlink\" title=\"1. 原始值转布尔\"></a>1. 原始值转布尔</h3><p>在Javascript中。只有6种值可以被转换成false，其余均为true：<br><code>false</code>、<code>undefined</code>、<code>null</code>、<code>NaN</code>、<code>0</code>、<code>&#39;&#39;</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>(<span class=\"literal\">false</span>))  <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>(<span class=\"literal\">undefined</span>))  <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>(<span class=\"literal\">null</span>))  <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>(<span class=\"literal\">NaN</span>))  <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>(<span class=\"number\">0</span>))  <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>(<span class=\"string\">''</span>))  <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"comment\">// Boolean不传任何参数时 返回false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Boolean</span>())  <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>","more":"<h3 id=\"2-原始值转数字\"><a href=\"#2-原始值转数字\" class=\"headerlink\" title=\"2. 原始值转数字\"></a>2. 原始值转数字</h3><p>使用<code>Number</code>函数将数据转换成数字类型，参数无法转换成数字的，返回NaN。<br>根据规范，如果Number函数不传参数，返回0，如果有参数，调用<code>toNumber(value)</code>,其对应结果如下：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">参数类型</th>\n<th style=\"text-align:left\">结果</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">undefined</td>\n<td style=\"text-align:left\">NaN</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">null</td>\n<td style=\"text-align:left\">0</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">布尔值</td>\n<td style=\"text-align:left\">true: 1, false: 0</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Number</td>\n<td style=\"text-align:left\">对应的值</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">比较复杂，看具体例子</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>())  <span class=\"comment\">// 0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"literal\">undefined</span>))  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"literal\">null</span>))  <span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"literal\">true</span>))  <span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"literal\">false</span>))  <span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"number\">88</span>))  <span class=\"comment\">// 88</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"123\"</span>))  <span class=\"comment\">// 123</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"-123\"</span>))  <span class=\"comment\">// -123</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"1.2\"</span>))  <span class=\"comment\">// 1.2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"000123\"</span>))  <span class=\"comment\">// 123</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"-000123\"</span>))  <span class=\"comment\">// -123</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"0x11\"</span>))  <span class=\"comment\">// 17</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"\"</span>))  <span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\" \"</span>))  <span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"123 123\"</span>))  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"foo\"</span>))  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">\"100a\"</span>))  <span class=\"comment\">// NaN</span></span><br></pre></td></tr></table></figure>\n<p>如果通过 <code>Number</code> 转换函数传入一个字符串，它会试图将其转换成一个整数或浮点数，而且会忽略所有前导的 <code>0</code>，如果有一个字符不是数字，结果都会返回 <code>NaN</code>。如果字符串前缀是<code>0x</code>或者<code>0X</code>，将转换为<code>十六进制</code>数。</p>\n<h3 id=\"3-原始值转字符\"><a href=\"#3-原始值转字符\" class=\"headerlink\" title=\"3. 原始值转字符\"></a>3. 原始值转字符</h3><p>使用 <code>String</code> 函数将类型转换成字符串类型。<br>根据规范，如果不传递参数，返回空字符串，如果有参数，调用<code>toString(value)</code>，其对应结果如下：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">参数类型</th>\n<th style=\"text-align:left\">结果</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">undefined</td>\n<td style=\"text-align:left\">“undefined”</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">null</td>\n<td style=\"text-align:left\">“null”</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Boolean</td>\n<td style=\"text-align:left\">true: “true”, false: “false”</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Number</td>\n<td style=\"text-align:left\">比较复杂，看具体例子</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">对应的值</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>()) <span class=\"comment\">// 空字符串</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"literal\">undefined</span>)) <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"literal\">null</span>)) <span class=\"comment\">// null</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"literal\">false</span>)) <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"literal\">true</span>)) <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"string\">'678'</span>)) <span class=\"comment\">// 678</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"number\">0</span>)) <span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"number\">-0</span>)) <span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"literal\">NaN</span>)) <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"literal\">Infinity</span>)) <span class=\"comment\">// Infinity</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(-<span class=\"literal\">Infinity</span>)) <span class=\"comment\">// -Infinity</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(<span class=\"number\">1</span>)) <span class=\"comment\">// 1</span></span><br></pre></td></tr></table></figure>\n<p>注意这里的 ToString 和上一节的 ToNumber 都是底层规范实现的方法，并没有直接暴露出来。</p>\n<h3 id=\"4-对象转字符串和数字\"><a href=\"#4-对象转字符串和数字\" class=\"headerlink\" title=\"4. 对象转字符串和数字\"></a>4. 对象转字符串和数字</h3><p>几种基本数据类型中，除了Null和Undefined类型外，其余5种原型链上都有valueOf()和toString()函数。这两个函数主要在隐式类型转换时会被自动调用。</p>\n<h4 id=\"4-1-同时重写对象的toString方法和valueOf方法\"><a href=\"#4-1-同时重写对象的toString方法和valueOf方法\" class=\"headerlink\" title=\"4.1 同时重写对象的toString方法和valueOf方法\"></a>4.1 同时重写对象的toString方法和valueOf方法</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> aaa = &#123;</span><br><span class=\"line\">    i: <span class=\"number\">10</span>,</span><br><span class=\"line\">    valueOf: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; </span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'调用valueOf...'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.i + <span class=\"number\">30</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    toString: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; </span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'调用toString...'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.i + <span class=\"number\">10</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(aaa &gt; <span class=\"number\">20</span>); <span class=\"comment\">// 调用valueOf...  true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span> + aaa);  <span class=\"comment\">//  调用valueOf...  40</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(++aaa); <span class=\"comment\">// 调用valueOf...  41</span></span><br><span class=\"line\"><span class=\"comment\">// 在不执行上一步 console.log(++aaa) 的前提</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(+aaa); <span class=\"comment\">//  调用valueOf...  40</span></span><br><span class=\"line\"><span class=\"comment\">// 在执行上一步 console.log(++aaa) 的前提 此时aaa变成了字符串41</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(+aaa); <span class=\"comment\">// 41 调用原型链上默认的valueOf()</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(aaa == <span class=\"number\">40</span>) <span class=\"comment\">// 调用valueOf... true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 上面的步骤没执行的前提下 否则aaa变成了字符串41 此时输出41</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(aaa); <span class=\"comment\">// &#123;i: 10, valueOf: ƒ, toString: f&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(aaa)) <span class=\"comment\">// 调用toString... 20</span></span><br></pre></td></tr></table></figure>\n<p>总结：涉及到操作符的问题，valueOf的优先级更高；涉及到显示问题，toString方法优先级更高。</p>\n<h4 id=\"4-2-只重写toString方法\"><a href=\"#4-2-只重写toString方法\" class=\"headerlink\" title=\"4.2 只重写toString方法\"></a>4.2 只重写toString方法</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> bbb = &#123;</span><br><span class=\"line\">    i: <span class=\"number\">10</span>,</span><br><span class=\"line\">    toString: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'调用toString...'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.i + <span class=\"number\">10</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(bbb &gt; <span class=\"number\">20</span>); <span class=\"comment\">// 调用toString... false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span> + bbb);  <span class=\"comment\">//  调用toString... 20</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(++bbb); <span class=\"comment\">// 调用toString... 21</span></span><br><span class=\"line\"><span class=\"comment\">// 在不执行上一步 console.log(++bbb) 的前提</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(+bbb); <span class=\"comment\">// 调用toString... 20</span></span><br><span class=\"line\"><span class=\"comment\">// 在执行上一步 console.log(++bbb) 的前提 此时bbb变成了字符串21</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(+bbb); <span class=\"comment\">// 21 调用原型链上默认的valueOf()</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(bbb == <span class=\"number\">20</span>) <span class=\"comment\">// 调用toString... true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(bbb); <span class=\"comment\">// &#123;i: 10, toString: ƒ&#125; 没调用重写的toString()方法，调用了原型链上默认的valueOf()</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(bbb)) <span class=\"comment\">// 调用toString... 20</span></span><br></pre></td></tr></table></figure>\n<p>总结： toString方法比原型链上的valueOf方法优先级高</p>"},{"title":"css-border-animation","date":"2021-01-19T02:11:11.000Z","_content":"\n<div class=\"css-border1\">Hover Me</div>\n\n```html\n<div class=\"css-border1\">Hover Me</div>\n```\n\n<!-- more -->\n\n```yaml\n.css-border1 {\n    width: 100px; \n    height: 100px;\n    line-height: 100px;\n    text-align: center;\n    cursor: pointer;\n    background: linear-gradient(to right, currentColor 50%, transparent 50%) repeat-x,\n                linear-gradient(to right, currentColor 50%, transparent 50%) repeat-x,\n                linear-gradient(to bottom, currentColor 50%, transparent 50%) repeat-y,\n                linear-gradient(to bottom, currentColor 50%, transparent 50%) repeat-y;\n    background-size: 5px 1px, 5px 1px, 1px 5px, 1px 5px;\n    background-position: 0 0, 0 100%, 0 0, 100% 0;\n}\n.css-border1:hover {\n    animation: animation1 .1s linear infinite;\n}\n@keyframes animation1 {\n    100% {\n        background-position: 5px 0, -5px 100%, 0 -5px, 100% 5px;\n    }\n}\n```\n\n利用渐变+伪元素画出来四块背景图形\n<div class=\"border-wrapper2\"><div class=\"css-border2\"></div></div>\n\n```html\n<div class=\"border-wrapper2\"><div class=\"css-border2\"></div></div>\n```\n```yaml\n.border-wrapper2 {\n    width: 100px;\n    height: 100px;\n    overflow: hidden;\n    position: relative;\n    border-radius: 10px;\n}\n.css-border2 {\n    width: 100px;\n    height: 100px;\n    position: relative;\n}\n.css-border2:after {\n    content: '';\n    position: absolute;\n    top: -50%;\n    left: -50%;\n    width: 200%;\n    height: 200%;\n    background-image: linear-gradient(#399953, #399953),\n                      linear-gradient(#fbb300, #fbb300),\n                      linear-gradient(#d53e33, #d53e33),\n                      linear-gradient(#377af5, #377af5);\n    background-size: 50% 50%;\n    background-position: 0 0, 100% 0, 100% 100%, 0 100%;\n    background-repeat: no-repeat;\n}\n```\n\n在上图基础上，加上遮罩盖掉多余的部分，并加上旋转 [codepen示例](https://codepen.io/Chokcoco/pen/YzGdEMZ)\n<div class=\"border-wrapper3\"><div class=\"css-border3\"></div></div>\n\n```html\n<div class=\"border-wrapper3\"><div class=\"css-border3\"></div></div>\n```\n```yaml\n.border-wrapper3 {\n    width: 100px;\n    height: 100px;\n    overflow: hidden;\n    position: relative;\n    border-radius: 10px;\n}\n.border-wrapper3:before {\n    content: '';\n    position: absolute;\n    z-index: 10;\n    top: 2px; bottom: 2px;\n    left: 2px; right: 2px;\n    background: #fff;\n    border-radius: 10px;\n}\n.css-border3 {\n    width: 100px;\n    height: 100px;\n    animation: animation2 2s linear infinite;\n    position: relative;\n}\n.css-border3:after {\n    content: '';\n    position: absolute;\n    top: -50%;\n    left: -50%;\n    width: 200%;\n    height: 200%;\n    background-image: linear-gradient(#399953, #399953),\n                      linear-gradient(#fbb300, #fbb300),\n                      linear-gradient(#d53e33, #d53e33),\n                      linear-gradient(#377af5, #377af5);\n    background-size: 50% 50%;\n    background-position: 0 0, 100% 0, 100% 100%, 0 100%;\n    background-repeat: no-repeat;\n}\n@keyframes animation2 {\n    100% {\n        transform: rotate(1turn);\n    }\n}\n```\n\nconic-gradient 角向(圆锥)渐变 (edge≥79支持) [codepen示例](https://codepen.io/Chokcoco/pen/dypaobm)\n<div class=\"css-border4\"></div>\n\nconic-gradient 饼图 (怎么感觉有种opacity的效果😶)\n<div class=\"css-pie\" style=\"width: 200px;height: 200px; border-radius: 50%; background: conic-gradient(pink 0, pink 30%, yellow 30%, yellow 70%, oldlace 70%, oldlace 100%);\"></div>\n\n重复圆锥渐变绘制抽奖圆盘 [codepen示例](https://codepen.io/jianxiujiucan/pen/bGddbez)\n<div class=\"css-lottery\" style=\"width: 200px; height: 200px; border-radius: 50%; background: repeating-conic-gradient(#ff8586 0 45deg, #ff9e9d 45deg 90deg)\"></div>\n\n圆锥渐变绘制信封效果 [codepen示例](https://codepen.io/jianxiujiucan/pen/gOppOdP)","source":"_posts/css-border-animation.md","raw":"---\ntitle: css-border-animation\ndate: 2021-01-19 10:11:11\ntags: [css, border]\n---\n\n<div class=\"css-border1\">Hover Me</div>\n\n```html\n<div class=\"css-border1\">Hover Me</div>\n```\n\n<!-- more -->\n\n```yaml\n.css-border1 {\n    width: 100px; \n    height: 100px;\n    line-height: 100px;\n    text-align: center;\n    cursor: pointer;\n    background: linear-gradient(to right, currentColor 50%, transparent 50%) repeat-x,\n                linear-gradient(to right, currentColor 50%, transparent 50%) repeat-x,\n                linear-gradient(to bottom, currentColor 50%, transparent 50%) repeat-y,\n                linear-gradient(to bottom, currentColor 50%, transparent 50%) repeat-y;\n    background-size: 5px 1px, 5px 1px, 1px 5px, 1px 5px;\n    background-position: 0 0, 0 100%, 0 0, 100% 0;\n}\n.css-border1:hover {\n    animation: animation1 .1s linear infinite;\n}\n@keyframes animation1 {\n    100% {\n        background-position: 5px 0, -5px 100%, 0 -5px, 100% 5px;\n    }\n}\n```\n\n利用渐变+伪元素画出来四块背景图形\n<div class=\"border-wrapper2\"><div class=\"css-border2\"></div></div>\n\n```html\n<div class=\"border-wrapper2\"><div class=\"css-border2\"></div></div>\n```\n```yaml\n.border-wrapper2 {\n    width: 100px;\n    height: 100px;\n    overflow: hidden;\n    position: relative;\n    border-radius: 10px;\n}\n.css-border2 {\n    width: 100px;\n    height: 100px;\n    position: relative;\n}\n.css-border2:after {\n    content: '';\n    position: absolute;\n    top: -50%;\n    left: -50%;\n    width: 200%;\n    height: 200%;\n    background-image: linear-gradient(#399953, #399953),\n                      linear-gradient(#fbb300, #fbb300),\n                      linear-gradient(#d53e33, #d53e33),\n                      linear-gradient(#377af5, #377af5);\n    background-size: 50% 50%;\n    background-position: 0 0, 100% 0, 100% 100%, 0 100%;\n    background-repeat: no-repeat;\n}\n```\n\n在上图基础上，加上遮罩盖掉多余的部分，并加上旋转 [codepen示例](https://codepen.io/Chokcoco/pen/YzGdEMZ)\n<div class=\"border-wrapper3\"><div class=\"css-border3\"></div></div>\n\n```html\n<div class=\"border-wrapper3\"><div class=\"css-border3\"></div></div>\n```\n```yaml\n.border-wrapper3 {\n    width: 100px;\n    height: 100px;\n    overflow: hidden;\n    position: relative;\n    border-radius: 10px;\n}\n.border-wrapper3:before {\n    content: '';\n    position: absolute;\n    z-index: 10;\n    top: 2px; bottom: 2px;\n    left: 2px; right: 2px;\n    background: #fff;\n    border-radius: 10px;\n}\n.css-border3 {\n    width: 100px;\n    height: 100px;\n    animation: animation2 2s linear infinite;\n    position: relative;\n}\n.css-border3:after {\n    content: '';\n    position: absolute;\n    top: -50%;\n    left: -50%;\n    width: 200%;\n    height: 200%;\n    background-image: linear-gradient(#399953, #399953),\n                      linear-gradient(#fbb300, #fbb300),\n                      linear-gradient(#d53e33, #d53e33),\n                      linear-gradient(#377af5, #377af5);\n    background-size: 50% 50%;\n    background-position: 0 0, 100% 0, 100% 100%, 0 100%;\n    background-repeat: no-repeat;\n}\n@keyframes animation2 {\n    100% {\n        transform: rotate(1turn);\n    }\n}\n```\n\nconic-gradient 角向(圆锥)渐变 (edge≥79支持) [codepen示例](https://codepen.io/Chokcoco/pen/dypaobm)\n<div class=\"css-border4\"></div>\n\nconic-gradient 饼图 (怎么感觉有种opacity的效果😶)\n<div class=\"css-pie\" style=\"width: 200px;height: 200px; border-radius: 50%; background: conic-gradient(pink 0, pink 30%, yellow 30%, yellow 70%, oldlace 70%, oldlace 100%);\"></div>\n\n重复圆锥渐变绘制抽奖圆盘 [codepen示例](https://codepen.io/jianxiujiucan/pen/bGddbez)\n<div class=\"css-lottery\" style=\"width: 200px; height: 200px; border-radius: 50%; background: repeating-conic-gradient(#ff8586 0 45deg, #ff9e9d 45deg 90deg)\"></div>\n\n圆锥渐变绘制信封效果 [codepen示例](https://codepen.io/jianxiujiucan/pen/gOppOdP)","slug":"css-border-animation","published":1,"updated":"2021-01-19T06:34:55.787Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34d20004u66tevozrzp5","content":"<div class=\"css-border1\">Hover Me</div>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"css-border1\"</span>&gt;</span>Hover Me<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.css-border1</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">100</span><span class=\"string\">px;</span> </span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    line-height:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    text-align:</span> <span class=\"string\">center;</span></span><br><span class=\"line\"><span class=\"attr\">    cursor:</span> <span class=\"string\">pointer;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">currentColor</span> <span class=\"number\">50</span><span class=\"string\">%,</span> <span class=\"string\">transparent</span> <span class=\"number\">50</span><span class=\"string\">%)</span> <span class=\"string\">repeat-x,</span></span><br><span class=\"line\">                <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">currentColor</span> <span class=\"number\">50</span><span class=\"string\">%,</span> <span class=\"string\">transparent</span> <span class=\"number\">50</span><span class=\"string\">%)</span> <span class=\"string\">repeat-x,</span></span><br><span class=\"line\">                <span class=\"string\">linear-gradient(to</span> <span class=\"string\">bottom,</span> <span class=\"string\">currentColor</span> <span class=\"number\">50</span><span class=\"string\">%,</span> <span class=\"string\">transparent</span> <span class=\"number\">50</span><span class=\"string\">%)</span> <span class=\"string\">repeat-y,</span></span><br><span class=\"line\">                <span class=\"string\">linear-gradient(to</span> <span class=\"string\">bottom,</span> <span class=\"string\">currentColor</span> <span class=\"number\">50</span><span class=\"string\">%,</span> <span class=\"string\">transparent</span> <span class=\"number\">50</span><span class=\"string\">%)</span> <span class=\"string\">repeat-y;</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">5</span><span class=\"string\">px</span> <span class=\"number\">1</span><span class=\"string\">px,</span> <span class=\"number\">5</span><span class=\"string\">px</span> <span class=\"number\">1</span><span class=\"string\">px,</span> <span class=\"number\">1</span><span class=\"string\">px</span> <span class=\"number\">5</span><span class=\"string\">px,</span> <span class=\"number\">1</span><span class=\"string\">px</span> <span class=\"number\">5</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background-position:</span> <span class=\"number\">0</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">0</span> <span class=\"number\">100</span><span class=\"string\">%,</span> <span class=\"number\">0</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.css-border1:hover</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    animation:</span> <span class=\"string\">animation1</span> <span class=\"number\">.1</span><span class=\"string\">s</span> <span class=\"string\">linear</span> <span class=\"string\">infinite;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">@keyframes</span> <span class=\"string\">animation1</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\">    <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">        background-position:</span> <span class=\"number\">5</span><span class=\"string\">px</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"bullet\">-5</span><span class=\"string\">px</span> <span class=\"number\">100</span><span class=\"string\">%,</span> <span class=\"number\">0</span> <span class=\"bullet\">-5</span><span class=\"string\">px,</span> <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"number\">5</span><span class=\"string\">px;</span></span><br><span class=\"line\">    <span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>利用渐变+伪元素画出来四块背景图形</p>\n<div class=\"border-wrapper2\"><div class=\"css-border2\"></div></div>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"border-wrapper2\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"css-border2\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.border-wrapper2</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    overflow:</span> <span class=\"string\">hidden;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">relative;</span></span><br><span class=\"line\"><span class=\"attr\">    border-radius:</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.css-border2</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">relative;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.css-border2:after</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    content:</span> <span class=\"string\">''</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    top:</span> <span class=\"bullet\">-50</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    left:</span> <span class=\"bullet\">-50</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">200</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">200</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    background-image:</span> <span class=\"string\">linear-gradient(#399953,</span> <span class=\"comment\">#399953),</span></span><br><span class=\"line\">                      <span class=\"string\">linear-gradient(#fbb300,</span> <span class=\"comment\">#fbb300),</span></span><br><span class=\"line\">                      <span class=\"string\">linear-gradient(#d53e33,</span> <span class=\"comment\">#d53e33),</span></span><br><span class=\"line\">                      <span class=\"string\">linear-gradient(#377af5,</span> <span class=\"comment\">#377af5);</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">50</span><span class=\"string\">%</span> <span class=\"number\">50</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    background-position:</span> <span class=\"number\">0</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"number\">100</span><span class=\"string\">%,</span> <span class=\"number\">0</span> <span class=\"number\">100</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    background-repeat:</span> <span class=\"literal\">no</span><span class=\"bullet\">-repeat;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>在上图基础上，加上遮罩盖掉多余的部分，并加上旋转 <a href=\"https://codepen.io/Chokcoco/pen/YzGdEMZ\" target=\"_blank\" rel=\"noopener\">codepen示例</a></p>\n<div class=\"border-wrapper3\"><div class=\"css-border3\"></div></div>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"border-wrapper3\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"css-border3\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.border-wrapper3</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    overflow:</span> <span class=\"string\">hidden;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">relative;</span></span><br><span class=\"line\"><span class=\"attr\">    border-radius:</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.border-wrapper3:before</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    content:</span> <span class=\"string\">''</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    z-index:</span> <span class=\"number\">10</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    top:</span> <span class=\"number\">2</span><span class=\"string\">px;</span> <span class=\"attr\">bottom:</span> <span class=\"number\">2</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    left:</span> <span class=\"number\">2</span><span class=\"string\">px;</span> <span class=\"attr\">right:</span> <span class=\"number\">2</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"comment\">#fff;</span></span><br><span class=\"line\"><span class=\"attr\">    border-radius:</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.css-border3</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    animation:</span> <span class=\"string\">animation2</span> <span class=\"number\">2</span><span class=\"string\">s</span> <span class=\"string\">linear</span> <span class=\"string\">infinite;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">relative;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.css-border3:after</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    content:</span> <span class=\"string\">''</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    top:</span> <span class=\"bullet\">-50</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    left:</span> <span class=\"bullet\">-50</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">200</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">200</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    background-image:</span> <span class=\"string\">linear-gradient(#399953,</span> <span class=\"comment\">#399953),</span></span><br><span class=\"line\">                      <span class=\"string\">linear-gradient(#fbb300,</span> <span class=\"comment\">#fbb300),</span></span><br><span class=\"line\">                      <span class=\"string\">linear-gradient(#d53e33,</span> <span class=\"comment\">#d53e33),</span></span><br><span class=\"line\">                      <span class=\"string\">linear-gradient(#377af5,</span> <span class=\"comment\">#377af5);</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">50</span><span class=\"string\">%</span> <span class=\"number\">50</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    background-position:</span> <span class=\"number\">0</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"number\">100</span><span class=\"string\">%,</span> <span class=\"number\">0</span> <span class=\"number\">100</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    background-repeat:</span> <span class=\"literal\">no</span><span class=\"bullet\">-repeat;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">@keyframes</span> <span class=\"string\">animation2</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\">    <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">        transform:</span> <span class=\"string\">rotate(1turn);</span></span><br><span class=\"line\">    <span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>conic-gradient 角向(圆锥)渐变 (edge≥79支持) <a href=\"https://codepen.io/Chokcoco/pen/dypaobm\" target=\"_blank\" rel=\"noopener\">codepen示例</a></p>\n<div class=\"css-border4\"></div>\n\n<p>conic-gradient 饼图 (怎么感觉有种opacity的效果😶)</p>\n<div class=\"css-pie\" style=\"width: 200px;height: 200px; border-radius: 50%; background: conic-gradient(pink 0, pink 30%, yellow 30%, yellow 70%, oldlace 70%, oldlace 100%);\"></div>\n\n<p>重复圆锥渐变绘制抽奖圆盘 <a href=\"https://codepen.io/jianxiujiucan/pen/bGddbez\" target=\"_blank\" rel=\"noopener\">codepen示例</a></p>\n<div class=\"css-lottery\" style=\"width: 200px; height: 200px; border-radius: 50%; background: repeating-conic-gradient(#ff8586 0 45deg, #ff9e9d 45deg 90deg)\"></div>\n\n<p>圆锥渐变绘制信封效果 <a href=\"https://codepen.io/jianxiujiucan/pen/gOppOdP\" target=\"_blank\" rel=\"noopener\">codepen示例</a></p>\n","site":{"data":{}},"excerpt":"<div class=\"css-border1\">Hover Me</div>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"css-border1\"</span>&gt;</span>Hover Me<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>","more":"<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.css-border1</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">100</span><span class=\"string\">px;</span> </span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    line-height:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    text-align:</span> <span class=\"string\">center;</span></span><br><span class=\"line\"><span class=\"attr\">    cursor:</span> <span class=\"string\">pointer;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">currentColor</span> <span class=\"number\">50</span><span class=\"string\">%,</span> <span class=\"string\">transparent</span> <span class=\"number\">50</span><span class=\"string\">%)</span> <span class=\"string\">repeat-x,</span></span><br><span class=\"line\">                <span class=\"string\">linear-gradient(to</span> <span class=\"string\">right,</span> <span class=\"string\">currentColor</span> <span class=\"number\">50</span><span class=\"string\">%,</span> <span class=\"string\">transparent</span> <span class=\"number\">50</span><span class=\"string\">%)</span> <span class=\"string\">repeat-x,</span></span><br><span class=\"line\">                <span class=\"string\">linear-gradient(to</span> <span class=\"string\">bottom,</span> <span class=\"string\">currentColor</span> <span class=\"number\">50</span><span class=\"string\">%,</span> <span class=\"string\">transparent</span> <span class=\"number\">50</span><span class=\"string\">%)</span> <span class=\"string\">repeat-y,</span></span><br><span class=\"line\">                <span class=\"string\">linear-gradient(to</span> <span class=\"string\">bottom,</span> <span class=\"string\">currentColor</span> <span class=\"number\">50</span><span class=\"string\">%,</span> <span class=\"string\">transparent</span> <span class=\"number\">50</span><span class=\"string\">%)</span> <span class=\"string\">repeat-y;</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">5</span><span class=\"string\">px</span> <span class=\"number\">1</span><span class=\"string\">px,</span> <span class=\"number\">5</span><span class=\"string\">px</span> <span class=\"number\">1</span><span class=\"string\">px,</span> <span class=\"number\">1</span><span class=\"string\">px</span> <span class=\"number\">5</span><span class=\"string\">px,</span> <span class=\"number\">1</span><span class=\"string\">px</span> <span class=\"number\">5</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background-position:</span> <span class=\"number\">0</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">0</span> <span class=\"number\">100</span><span class=\"string\">%,</span> <span class=\"number\">0</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.css-border1:hover</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    animation:</span> <span class=\"string\">animation1</span> <span class=\"number\">.1</span><span class=\"string\">s</span> <span class=\"string\">linear</span> <span class=\"string\">infinite;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">@keyframes</span> <span class=\"string\">animation1</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\">    <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">        background-position:</span> <span class=\"number\">5</span><span class=\"string\">px</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"bullet\">-5</span><span class=\"string\">px</span> <span class=\"number\">100</span><span class=\"string\">%,</span> <span class=\"number\">0</span> <span class=\"bullet\">-5</span><span class=\"string\">px,</span> <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"number\">5</span><span class=\"string\">px;</span></span><br><span class=\"line\">    <span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>利用渐变+伪元素画出来四块背景图形</p>\n<div class=\"border-wrapper2\"><div class=\"css-border2\"></div></div>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"border-wrapper2\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"css-border2\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.border-wrapper2</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    overflow:</span> <span class=\"string\">hidden;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">relative;</span></span><br><span class=\"line\"><span class=\"attr\">    border-radius:</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.css-border2</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">relative;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.css-border2:after</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    content:</span> <span class=\"string\">''</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    top:</span> <span class=\"bullet\">-50</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    left:</span> <span class=\"bullet\">-50</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">200</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">200</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    background-image:</span> <span class=\"string\">linear-gradient(#399953,</span> <span class=\"comment\">#399953),</span></span><br><span class=\"line\">                      <span class=\"string\">linear-gradient(#fbb300,</span> <span class=\"comment\">#fbb300),</span></span><br><span class=\"line\">                      <span class=\"string\">linear-gradient(#d53e33,</span> <span class=\"comment\">#d53e33),</span></span><br><span class=\"line\">                      <span class=\"string\">linear-gradient(#377af5,</span> <span class=\"comment\">#377af5);</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">50</span><span class=\"string\">%</span> <span class=\"number\">50</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    background-position:</span> <span class=\"number\">0</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"number\">100</span><span class=\"string\">%,</span> <span class=\"number\">0</span> <span class=\"number\">100</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    background-repeat:</span> <span class=\"literal\">no</span><span class=\"bullet\">-repeat;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>在上图基础上，加上遮罩盖掉多余的部分，并加上旋转 <a href=\"https://codepen.io/Chokcoco/pen/YzGdEMZ\" target=\"_blank\" rel=\"noopener\">codepen示例</a></p>\n<div class=\"border-wrapper3\"><div class=\"css-border3\"></div></div>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"border-wrapper3\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"css-border3\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">.border-wrapper3</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    overflow:</span> <span class=\"string\">hidden;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">relative;</span></span><br><span class=\"line\"><span class=\"attr\">    border-radius:</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.border-wrapper3:before</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    content:</span> <span class=\"string\">''</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    z-index:</span> <span class=\"number\">10</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    top:</span> <span class=\"number\">2</span><span class=\"string\">px;</span> <span class=\"attr\">bottom:</span> <span class=\"number\">2</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    left:</span> <span class=\"number\">2</span><span class=\"string\">px;</span> <span class=\"attr\">right:</span> <span class=\"number\">2</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    background:</span> <span class=\"comment\">#fff;</span></span><br><span class=\"line\"><span class=\"attr\">    border-radius:</span> <span class=\"number\">10</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.css-border3</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">100</span><span class=\"string\">px;</span></span><br><span class=\"line\"><span class=\"attr\">    animation:</span> <span class=\"string\">animation2</span> <span class=\"number\">2</span><span class=\"string\">s</span> <span class=\"string\">linear</span> <span class=\"string\">infinite;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">relative;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">.css-border3:after</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    content:</span> <span class=\"string\">''</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">absolute;</span></span><br><span class=\"line\"><span class=\"attr\">    top:</span> <span class=\"bullet\">-50</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    left:</span> <span class=\"bullet\">-50</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">200</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">200</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    background-image:</span> <span class=\"string\">linear-gradient(#399953,</span> <span class=\"comment\">#399953),</span></span><br><span class=\"line\">                      <span class=\"string\">linear-gradient(#fbb300,</span> <span class=\"comment\">#fbb300),</span></span><br><span class=\"line\">                      <span class=\"string\">linear-gradient(#d53e33,</span> <span class=\"comment\">#d53e33),</span></span><br><span class=\"line\">                      <span class=\"string\">linear-gradient(#377af5,</span> <span class=\"comment\">#377af5);</span></span><br><span class=\"line\"><span class=\"attr\">    background-size:</span> <span class=\"number\">50</span><span class=\"string\">%</span> <span class=\"number\">50</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    background-position:</span> <span class=\"number\">0</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"number\">100</span><span class=\"string\">%,</span> <span class=\"number\">0</span> <span class=\"number\">100</span><span class=\"string\">%;</span></span><br><span class=\"line\"><span class=\"attr\">    background-repeat:</span> <span class=\"literal\">no</span><span class=\"bullet\">-repeat;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">@keyframes</span> <span class=\"string\">animation2</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\">    <span class=\"number\">100</span><span class=\"string\">%</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">        transform:</span> <span class=\"string\">rotate(1turn);</span></span><br><span class=\"line\">    <span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>conic-gradient 角向(圆锥)渐变 (edge≥79支持) <a href=\"https://codepen.io/Chokcoco/pen/dypaobm\" target=\"_blank\" rel=\"noopener\">codepen示例</a></p>\n<div class=\"css-border4\"></div>\n\n<p>conic-gradient 饼图 (怎么感觉有种opacity的效果😶)</p>\n<div class=\"css-pie\" style=\"width: 200px;height: 200px; border-radius: 50%; background: conic-gradient(pink 0, pink 30%, yellow 30%, yellow 70%, oldlace 70%, oldlace 100%);\"></div>\n\n<p>重复圆锥渐变绘制抽奖圆盘 <a href=\"https://codepen.io/jianxiujiucan/pen/bGddbez\" target=\"_blank\" rel=\"noopener\">codepen示例</a></p>\n<div class=\"css-lottery\" style=\"width: 200px; height: 200px; border-radius: 50%; background: repeating-conic-gradient(#ff8586 0 45deg, #ff9e9d 45deg 90deg)\"></div>\n\n<p>圆锥渐变绘制信封效果 <a href=\"https://codepen.io/jianxiujiucan/pen/gOppOdP\" target=\"_blank\" rel=\"noopener\">codepen示例</a></p>"},{"title":"forEach遍历中断","date":"2019-05-22T09:28:36.000Z","_content":"\n```js\ntry {\n    [22, 34, 20, 36, 98].forEach( (value, index, arr) => {\n        if (value === 20) {\n            console.log('遇到20能够退出循环吗？')\n            throw Error('自定义异常提示语')\n            return  // return并不能中断循环，这里可写可不写\n        } else console.log('当前遍历值：', value)\n    })\n} catch(err) {\n    console.log(err.message)\n}\n// 22\n// 34\n// 遇到20能够退出循环吗？\n// 自定义异常提示语\n```","source":"_posts/forEach-interrupt.md","raw":"---\ntitle: forEach遍历中断\ndate: 2019-05-22 17:28:36\ntags:\n---\n\n```js\ntry {\n    [22, 34, 20, 36, 98].forEach( (value, index, arr) => {\n        if (value === 20) {\n            console.log('遇到20能够退出循环吗？')\n            throw Error('自定义异常提示语')\n            return  // return并不能中断循环，这里可写可不写\n        } else console.log('当前遍历值：', value)\n    })\n} catch(err) {\n    console.log(err.message)\n}\n// 22\n// 34\n// 遇到20能够退出循环吗？\n// 自定义异常提示语\n```","slug":"forEach-interrupt","published":1,"updated":"2019-05-22T09:40:16.481Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34d30005u66ts2i9btew","content":"<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    [<span class=\"number\">22</span>, <span class=\"number\">34</span>, <span class=\"number\">20</span>, <span class=\"number\">36</span>, <span class=\"number\">98</span>].forEach( <span class=\"function\">(<span class=\"params\">value, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value === <span class=\"number\">20</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'遇到20能够退出循环吗？'</span>)</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'自定义异常提示语'</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span>  <span class=\"comment\">// return并不能中断循环，这里可写可不写</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'当前遍历值：'</span>, value)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span>(err) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err.message)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 22</span></span><br><span class=\"line\"><span class=\"comment\">// 34</span></span><br><span class=\"line\"><span class=\"comment\">// 遇到20能够退出循环吗？</span></span><br><span class=\"line\"><span class=\"comment\">// 自定义异常提示语</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    [<span class=\"number\">22</span>, <span class=\"number\">34</span>, <span class=\"number\">20</span>, <span class=\"number\">36</span>, <span class=\"number\">98</span>].forEach( <span class=\"function\">(<span class=\"params\">value, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value === <span class=\"number\">20</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'遇到20能够退出循环吗？'</span>)</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'自定义异常提示语'</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span>  <span class=\"comment\">// return并不能中断循环，这里可写可不写</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'当前遍历值：'</span>, value)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span>(err) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err.message)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 22</span></span><br><span class=\"line\"><span class=\"comment\">// 34</span></span><br><span class=\"line\"><span class=\"comment\">// 遇到20能够退出循环吗？</span></span><br><span class=\"line\"><span class=\"comment\">// 自定义异常提示语</span></span><br></pre></td></tr></table></figure>"},{"title":"Vue自定义指令 image-lazyLoad","date":"2020-08-13T09:37:41.000Z","reward":true,"_content":"\n主要使用 `IntersectionObserver` 的特性实现，其还能实现譬如 `sticky` 、`上拉加载` 等功能。\n这里只记录实现图片懒加载(图片开始出现在视口区域或者即将出现在视口区域，才开始请求图片资源，进行渲染)的自定义指令的实现代码。\n\n<!-- More -->\n\n#### imageLazyLoad.js\n\n```js\n\n// 加载图片\nfunction fetchImage(target, src) {\n    const tempImg = new Image()\n    tempImg.src = src\n    tempImg.onload = () => {\n        target.src = src\n    }\n}\n\nlet isIntersecting = false\n// 创建一个监视器\nlet observer = new IntersectionObserver( (entries) => {\n    entries.forEach( (entry) => {\n        // 已经进入视口 保证只触发一次fetchImage\n        if (isIntersecting) return\n        if (entry.isIntersecting) {\n            isIntersecting = true\n            fetchImage(entry.target, entry.target.lazySrc)\n        }\n    })\n}, {\n    // 距离视口100px提前触发\n    rootMargin: '100px 0px'\n})\n\nexport default {\n    inserted(el, binding) {\n\n        // 默认图片\n        el.src = 'http://localhost:8080/static/images/before_load.png'\n        // 图片地址绑定在lazy-src属性上，作为中转\n        el.lazySrc = binding.value\n        // 开始监听\n        observer.observe(el)\n    },\n    unbind() {\n        // 解除监听\n        observer.disconnect()\n    }\n}\n```\n\n#### 全局注册 main.js\n\n```js\n    import Vue from 'vue'\n    import imageLazyLoad from './imageLazyLoad'\n    Vue.directive('lazyLoad', imageLazyLoad)\n```\n\n#### 局部注册 test.vue\n\n```vue\n    import imageLazyLoad from './imageLazyLoad'\n    export default {\n        created() {},\n        directives: {\n            lazyLoad: imageLazyLoad\n        }\n    }\n```\n\n#### 使用 test.vue\n\n```vue\n    <img v-lazy-load=\"imgSrc\" />\n```\n","source":"_posts/image-lazyload.md","raw":"---\ntitle: Vue自定义指令 image-lazyLoad\ndate: 2020-08-13 17:37:41\ntags: [vue, 自定义指令, lazy]\nreward: true\n---\n\n主要使用 `IntersectionObserver` 的特性实现，其还能实现譬如 `sticky` 、`上拉加载` 等功能。\n这里只记录实现图片懒加载(图片开始出现在视口区域或者即将出现在视口区域，才开始请求图片资源，进行渲染)的自定义指令的实现代码。\n\n<!-- More -->\n\n#### imageLazyLoad.js\n\n```js\n\n// 加载图片\nfunction fetchImage(target, src) {\n    const tempImg = new Image()\n    tempImg.src = src\n    tempImg.onload = () => {\n        target.src = src\n    }\n}\n\nlet isIntersecting = false\n// 创建一个监视器\nlet observer = new IntersectionObserver( (entries) => {\n    entries.forEach( (entry) => {\n        // 已经进入视口 保证只触发一次fetchImage\n        if (isIntersecting) return\n        if (entry.isIntersecting) {\n            isIntersecting = true\n            fetchImage(entry.target, entry.target.lazySrc)\n        }\n    })\n}, {\n    // 距离视口100px提前触发\n    rootMargin: '100px 0px'\n})\n\nexport default {\n    inserted(el, binding) {\n\n        // 默认图片\n        el.src = 'http://localhost:8080/static/images/before_load.png'\n        // 图片地址绑定在lazy-src属性上，作为中转\n        el.lazySrc = binding.value\n        // 开始监听\n        observer.observe(el)\n    },\n    unbind() {\n        // 解除监听\n        observer.disconnect()\n    }\n}\n```\n\n#### 全局注册 main.js\n\n```js\n    import Vue from 'vue'\n    import imageLazyLoad from './imageLazyLoad'\n    Vue.directive('lazyLoad', imageLazyLoad)\n```\n\n#### 局部注册 test.vue\n\n```vue\n    import imageLazyLoad from './imageLazyLoad'\n    export default {\n        created() {},\n        directives: {\n            lazyLoad: imageLazyLoad\n        }\n    }\n```\n\n#### 使用 test.vue\n\n```vue\n    <img v-lazy-load=\"imgSrc\" />\n```\n","slug":"image-lazyload","published":1,"updated":"2020-08-13T12:37:06.718Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34d40006u66t6wns13ul","content":"<p>主要使用 <code>IntersectionObserver</code> 的特性实现，其还能实现譬如 <code>sticky</code> 、<code>上拉加载</code> 等功能。<br>这里只记录实现图片懒加载(图片开始出现在视口区域或者即将出现在视口区域，才开始请求图片资源，进行渲染)的自定义指令的实现代码。</p>\n<a id=\"more\"></a>\n<h4 id=\"imageLazyLoad-js\"><a href=\"#imageLazyLoad-js\" class=\"headerlink\" title=\"imageLazyLoad.js\"></a>imageLazyLoad.js</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 加载图片</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchImage</span>(<span class=\"params\">target, src</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> tempImg = <span class=\"keyword\">new</span> Image()</span><br><span class=\"line\">    tempImg.src = src</span><br><span class=\"line\">    tempImg.onload = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        target.src = src</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> isIntersecting = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一个监视器</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> observer = <span class=\"keyword\">new</span> IntersectionObserver( <span class=\"function\">(<span class=\"params\">entries</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    entries.forEach( <span class=\"function\">(<span class=\"params\">entry</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 已经进入视口 保证只触发一次fetchImage</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isIntersecting) <span class=\"keyword\">return</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (entry.isIntersecting) &#123;</span><br><span class=\"line\">            isIntersecting = <span class=\"literal\">true</span></span><br><span class=\"line\">            fetchImage(entry.target, entry.target.lazySrc)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;, &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 距离视口100px提前触发</span></span><br><span class=\"line\">    rootMargin: <span class=\"string\">'100px 0px'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">    inserted(el, binding) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 默认图片</span></span><br><span class=\"line\">        el.src = <span class=\"string\">'http://localhost:8080/static/images/before_load.png'</span></span><br><span class=\"line\">        <span class=\"comment\">// 图片地址绑定在lazy-src属性上，作为中转</span></span><br><span class=\"line\">        el.lazySrc = binding.value</span><br><span class=\"line\">        <span class=\"comment\">// 开始监听</span></span><br><span class=\"line\">        observer.observe(el)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    unbind() &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 解除监听</span></span><br><span class=\"line\">        observer.disconnect()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"全局注册-main-js\"><a href=\"#全局注册-main-js\" class=\"headerlink\" title=\"全局注册 main.js\"></a>全局注册 main.js</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> imageLazyLoad <span class=\"keyword\">from</span> <span class=\"string\">'./imageLazyLoad'</span></span><br><span class=\"line\">Vue.directive(<span class=\"string\">'lazyLoad'</span>, imageLazyLoad)</span><br></pre></td></tr></table></figure>\n<h4 id=\"局部注册-test-vue\"><a href=\"#局部注册-test-vue\" class=\"headerlink\" title=\"局部注册 test.vue\"></a>局部注册 test.vue</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import imageLazyLoad from &apos;./imageLazyLoad&apos;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">    created() &#123;&#125;,</span><br><span class=\"line\">    directives: &#123;</span><br><span class=\"line\">        lazyLoad: imageLazyLoad</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用-test-vue\"><a href=\"#使用-test-vue\" class=\"headerlink\" title=\"使用 test.vue\"></a>使用 test.vue</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;img v-lazy-load=&quot;imgSrc&quot; /&gt;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>主要使用 <code>IntersectionObserver</code> 的特性实现，其还能实现譬如 <code>sticky</code> 、<code>上拉加载</code> 等功能。<br>这里只记录实现图片懒加载(图片开始出现在视口区域或者即将出现在视口区域，才开始请求图片资源，进行渲染)的自定义指令的实现代码。</p>","more":"<h4 id=\"imageLazyLoad-js\"><a href=\"#imageLazyLoad-js\" class=\"headerlink\" title=\"imageLazyLoad.js\"></a>imageLazyLoad.js</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 加载图片</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchImage</span>(<span class=\"params\">target, src</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> tempImg = <span class=\"keyword\">new</span> Image()</span><br><span class=\"line\">    tempImg.src = src</span><br><span class=\"line\">    tempImg.onload = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        target.src = src</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> isIntersecting = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一个监视器</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> observer = <span class=\"keyword\">new</span> IntersectionObserver( <span class=\"function\">(<span class=\"params\">entries</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    entries.forEach( <span class=\"function\">(<span class=\"params\">entry</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 已经进入视口 保证只触发一次fetchImage</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isIntersecting) <span class=\"keyword\">return</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (entry.isIntersecting) &#123;</span><br><span class=\"line\">            isIntersecting = <span class=\"literal\">true</span></span><br><span class=\"line\">            fetchImage(entry.target, entry.target.lazySrc)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;, &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 距离视口100px提前触发</span></span><br><span class=\"line\">    rootMargin: <span class=\"string\">'100px 0px'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">    inserted(el, binding) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 默认图片</span></span><br><span class=\"line\">        el.src = <span class=\"string\">'http://localhost:8080/static/images/before_load.png'</span></span><br><span class=\"line\">        <span class=\"comment\">// 图片地址绑定在lazy-src属性上，作为中转</span></span><br><span class=\"line\">        el.lazySrc = binding.value</span><br><span class=\"line\">        <span class=\"comment\">// 开始监听</span></span><br><span class=\"line\">        observer.observe(el)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    unbind() &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 解除监听</span></span><br><span class=\"line\">        observer.disconnect()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"全局注册-main-js\"><a href=\"#全局注册-main-js\" class=\"headerlink\" title=\"全局注册 main.js\"></a>全局注册 main.js</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> imageLazyLoad <span class=\"keyword\">from</span> <span class=\"string\">'./imageLazyLoad'</span></span><br><span class=\"line\">Vue.directive(<span class=\"string\">'lazyLoad'</span>, imageLazyLoad)</span><br></pre></td></tr></table></figure>\n<h4 id=\"局部注册-test-vue\"><a href=\"#局部注册-test-vue\" class=\"headerlink\" title=\"局部注册 test.vue\"></a>局部注册 test.vue</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import imageLazyLoad from &apos;./imageLazyLoad&apos;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">    created() &#123;&#125;,</span><br><span class=\"line\">    directives: &#123;</span><br><span class=\"line\">        lazyLoad: imageLazyLoad</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用-test-vue\"><a href=\"#使用-test-vue\" class=\"headerlink\" title=\"使用 test.vue\"></a>使用 test.vue</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;img v-lazy-load=&quot;imgSrc&quot; /&gt;</span><br></pre></td></tr></table></figure>"},{"title":"Diary【二】","date":"2019-05-26T06:08:31.000Z","toc":true,"_content":"\n### 1. substr() 和 substring()\n\n- substr\n\n> stringObject.substr(startIndex[, length])\n\n<!-- More -->\n\n```js\nvar str = ‘abcdefg'\n\nstr.substr(2)  // ‘cdefg’\nstr.substr(-1) => str.substr(6)  // ‘fg’\nstr.substr(6)  // ‘'\nstr.substr(2,2)  // ‘cd’\nstr.substr(2,7)  // ‘cdefg’\nstr.substr(2,-1) // ''\n```\n\n- substring\n\n> stringObject.substring(startIndex[, stop]) 注意stop的含义\n\n```js\nvar str = ‘abcdefg'\n\nstr.substring(2)  // ‘cdefg’\nstr.substring(2,4)  // ‘cd’\nstr.substring(2,9)  // ‘cdefg’\nstr.substring(-2) => str.substring(0)  // ‘abcdefg’\nstr.substring(2,-4) => str.substring(2,0) => str.substring(0,2)  // ‘ab'\n```\n\n### 2. slice() 和 splice()\n\n- slice\n\n> stringObject.slice(startIndex[, stop])\n> arrayObject.slice(startIndex[, stop])\n> stop  缺省时 默认一直到最后\n\n```js\nvar str = ‘abcdefg’\n\nstr.slice(2)  // ‘cdefg'\nstr.slice(0)  // ‘abcdefg’\nstr.slice(-2) => str.slice(5)  // ‘fg’\nstr.slice(8)  // ‘’ 空串 \nstr.slice(2,4)  // ‘cd’\nstr.slice(2,6)  // ‘cdef’\nstr.slice(2,18)  // ‘cdefg’\nstr.slice(4,2)  // ‘’ 空串\nstr.slice(4,-1) => str.slice(4,6)  // ‘ef’\n\n// 数组方法类似\n```\n\n- splice\n\n> arrayObject.splice(startIndex, length[, item1, item2…])\n> splice操作会改变原数组  返回被移除的元素数组\n\n```js\nvar arr = [‘a’,’b’,’c’,’d’,’e’,’f’,’g’]\n\narr.splice(2,0)  // 空数组 arr = [‘a’,’b’,’c’,’d’,’e’,’f’,’g’]\narr.splice(2,8)  // arr = [‘a’, ‘b’, ‘c']\narr.splice(2,-5)  // 返回arr  arr没有变化\n\narr.splice(8,2)  // 返回arr  arr没有变化\narr.splice(2,2,'11',’22')  // 返回[‘a’, ‘b’, ’11’, ’22’, ‘e’, ‘f’, ‘g’]  arr = [‘c’, ‘d']\n```\n\n### 3. 检测数据类型\n\n- typeof\n\n> typeof  是解释器内部实现，根据 ECMA-262 规定的几种类型的值来返回类型名称。\n> 但是  typeof  的应用场景非常有限，基本上只能判断出来使用字面量方式赋值的基本数据类型。\n\n```js\ntypeof 23  // number\ntypeof '124'  // string\ntypeof true  // boolean\ntypeof undefined  // undefined\ntypeof {}  // object\ntypeof null  // object\ntypeof [1, 3, 8]  // object\ntypeof function fn () {}  // function\ntypeof (new Number(33))  // object\ntypeof (new String('hello'))  // object\n```\n\n从上面例子可以看出， typeof  检测出来的类型不够准确，具有相当大的局限性。\n\n- instanceof\n\n> instance  检测类型的原理大致为: 判断左边的对象的隐式原型  __proto__  是否和右边对象的显式原型  prototype  相等。 很像  new  操作，这样就可以判断指定的某个对象是否为某个构造函数的实例。  instance  的局限性应该是不能检测基本数据类型。另外一点，不同  window  或者  iframe  之间对象类型检测不能使用  instanceof  来检测。\n\n```js\n'123' instance String  // false\n\nNumber instanceof Number  // true\n\nnew String('hello') instance String  // true\n\nnew Number(33) instance Number  // true\n```\n\n- Object.prototype.toString\n\n```js\nObject.prototype.toString.call(33)  // [object Number]\n\nObject.prototype.toString.call('hello')  // [object String]\n\nObject.prototype.toString.call([])  // [object Array]\n\nObject.prototype.toString.call({})  // [object Object]\n\nObject.prototype.toString.call(true)  // [object Boolean]\n\nObject.prototype.toString.call(null)  // [object null]\n\nObject.prototype.toString.call(undefined)  // [object undefined]\n\nObject.prototype.toString.call(function fn () {})  // [object Function]\n\nObject.prototype.toString.call(new Number(33))   // [object Number] \n```\n\n- constructor\n\n> constructor  属性返回对创建此对象的数组函数的引用。\n> constructor  不能检测出null和undefined两种，会报错。\n\n```js\n(33).constructor == Number  // true\n\n('hello'.constructor == String  // true\n\n([]).constructor == Array  // true\n\n({}).constructor == Object  // true\n\n(true).constructor == Boolean  // true\n\n(null).constructor == null  // TypeError: Cannot read property 'constructor' of null\n\n(undefined).constructor == undefined  // TypeError: Cannot read property 'constructor' of undefined\n\nvar fn = function () {}\nfn.constructor == Function  // true\n\nvar number = new Number(66)\nnumber.constructor == Number  // true\nnumber.constructor == Object  // false\n```\n\n- 我是分割线\n\n- Array.isArray()\n\n### 4. ES5 Array Function\n\n- forEach\n\n> Array.forEach(callbackFn[, thisObj])\n> callbackFn (value, index, arr)\n> `thisObj` 默认为 `window`\n\n```js\n[1, 2, 5, 8].forEach( function (ele, index, arr) {\n    console.log(ele, index, arr)\n})\n```\n\n- map\n\n> Array.map(callbackFn[, thisObj])\n> callbackFn (value, index, arr)\n\n```js\n[1, 2, 5, 8].map(function (ele, index, arr) {\n    return ele * index  // [0, 2, 10, 24]\n})\n```\n\n- filter\n\n> Array.filter(callbackFn[, thisObj])\n> callbackFn (value, index, arr), 需要返回 Boolean 值\n\n```js\n[0, 2, 5, 8].filter(function (ele, index, arr) {\n    return ele  // [2, 5, 8]\n})\n\n[0, 2, 5, 1].filter(function (ele, index, arr) {\n    return ele <= index  // [0, 1]\n})\n```\n\n- some\n\n> Array.some(callbackFn[, thisObj])\n> callbackFn (value, index, arr)\n\n```js\n[1, 2, 5, 8].some(function (ele, index, arr) {\n    return ele > 5  // true (8 > 5)\n})\n```\n\n- every\n\n> Array.every(callbackFn[, thisObj])\n> callbackFn (value, index, arr)\n\n```js\n[1, 2, 5, 8].every(function (ele, index, arr) {\n    return ele > 5  // false (1, 2, 5 均不大于5)\n})\n```\n\n- indexOf\n\n> Array.indexof(searchEle[, fromIndex])\n> 第一个出现的 `searchEle` 的索引位置\n> `searchEle` 要查找的元素\n> `fromIndex` 开始查找的索引位置，缺省或不符合规范时为 0\n\n```js\n[1, 2, 5, 8].indexOf(2)  // 1\n[1, 2, 5, 8].indexOf(2, '0')  // 1\n[1, 2, 5, 8].indexOf(2, 'f') => [1, 2, 5, 8].indexOf(2, 0)  // 1\n[1, 2, 5, 8].indexOf(2, 2)  // -1\n```\n\n- lastIndexOf\n\n> Array.lastIndexOf(searchEle[, fromIndex])\n> 与 `indexOf` 不同在于此方法是从后面元素开始查找的\n> `searchEle` 要查找的元素\n> `fromIndex` 开始查找的索引位置，缺省时或大于等于 Array.length 为 Array.length - 1\n\n```js\n[1, 2, 5, 8, 5].lastIndexOf(5)  // 4\n[1, 2, 5, 8, 5].lastIndexOf(5, 4)  // 4\n[1, 2, 5, 8, 5].lastIndexOf(5, 8) => [1, 2, 5, 8, 5].lastIndexOf(5, 4)  // 4\n[1, 2, 5, 8, 5].lastIndexOf(5, 'f')  // -1\n[1, 2, 5, 8, 5].lastIndexOf(5, 3)  // 2\n[1, 2, 5, 8, 5].lastIndexOf(5, 1)  // -1\n```\n\n- reduce\n\n> Array.reduce(callbackFn[, initValue])\n> callbackFn(previous, current, index, arr)\n> `previous` 前一次迭代计算出来的值\n> `current` 当前迭代的值\n> `initValue` 初始值, 未指定时取数组的第一个元素\n\n```js\n[1, 2, 5, 8].reduce(function (preV, curV, index, arr) {\n    return preV + curV\n}, 10)  // 26\n```\n\n```js\n// 梳理一下计算过程：\n// 初始化的时候\npreV = initValue = 10, curV = 1, index = 0\n\n// 第一次计算\npreV = 10 + 1 = 11, curV = 2, index = 1\n\n// 第二次计算\npreV = 11 + 2 = 13, curV = 5, index = 2\n\n// 第三次计算\npreV = 13 + 5 = 18, curV = 8, index = 3\n\n// 第四次计算\npreV = 18 + 8 = 26, curV = undefined (退出)\n```\n\n- reduceRight\n\n> 和 `reduceRight` 用法基本一致，不过是从数组后面开始迭代的\n> Array.reduceRight(callbackFn[, initValue])\n> callbackFn(previous, current, index, arr)\n> `previous` 前一次迭代计算出来的值\n> `current` 当前迭代的值\n\n```js\n[1, 2, 5, 8].reduceRight(function (preV, curV, index, arr) {\n    if (index == 0) {\n        return preV - curV\n    }\n    return preV + curV\n}, 10)  // 24\n```\n\n```js\n// 梳理一下计算过程：\n// 初始化的时候\npreV = initValue = 10, curV = 8, index = 3\n\n// 第一次计算\npreV = 10 + 8 = 18, curV = 5, index = 2\n\n// 第二次计算\npreV = 18 + 5 = 23, curV = 2, index = 1\n\n// 第三次计算\npreV = 23 + 2 = 25, curV = 1, index = 0\n\n// 第四次计算\npreV = 25 - 1 = 24, curV = undefined (退出)\n```\n\n### [参考文章](https://juejin.im/post/59b5540c5188257e8769e95d)","source":"_posts/multiple-diary2.md","raw":"---\ntitle: Diary【二】\ndate: 2019-05-26 14:08:31\ntoc: true\ntags:\n---\n\n### 1. substr() 和 substring()\n\n- substr\n\n> stringObject.substr(startIndex[, length])\n\n<!-- More -->\n\n```js\nvar str = ‘abcdefg'\n\nstr.substr(2)  // ‘cdefg’\nstr.substr(-1) => str.substr(6)  // ‘fg’\nstr.substr(6)  // ‘'\nstr.substr(2,2)  // ‘cd’\nstr.substr(2,7)  // ‘cdefg’\nstr.substr(2,-1) // ''\n```\n\n- substring\n\n> stringObject.substring(startIndex[, stop]) 注意stop的含义\n\n```js\nvar str = ‘abcdefg'\n\nstr.substring(2)  // ‘cdefg’\nstr.substring(2,4)  // ‘cd’\nstr.substring(2,9)  // ‘cdefg’\nstr.substring(-2) => str.substring(0)  // ‘abcdefg’\nstr.substring(2,-4) => str.substring(2,0) => str.substring(0,2)  // ‘ab'\n```\n\n### 2. slice() 和 splice()\n\n- slice\n\n> stringObject.slice(startIndex[, stop])\n> arrayObject.slice(startIndex[, stop])\n> stop  缺省时 默认一直到最后\n\n```js\nvar str = ‘abcdefg’\n\nstr.slice(2)  // ‘cdefg'\nstr.slice(0)  // ‘abcdefg’\nstr.slice(-2) => str.slice(5)  // ‘fg’\nstr.slice(8)  // ‘’ 空串 \nstr.slice(2,4)  // ‘cd’\nstr.slice(2,6)  // ‘cdef’\nstr.slice(2,18)  // ‘cdefg’\nstr.slice(4,2)  // ‘’ 空串\nstr.slice(4,-1) => str.slice(4,6)  // ‘ef’\n\n// 数组方法类似\n```\n\n- splice\n\n> arrayObject.splice(startIndex, length[, item1, item2…])\n> splice操作会改变原数组  返回被移除的元素数组\n\n```js\nvar arr = [‘a’,’b’,’c’,’d’,’e’,’f’,’g’]\n\narr.splice(2,0)  // 空数组 arr = [‘a’,’b’,’c’,’d’,’e’,’f’,’g’]\narr.splice(2,8)  // arr = [‘a’, ‘b’, ‘c']\narr.splice(2,-5)  // 返回arr  arr没有变化\n\narr.splice(8,2)  // 返回arr  arr没有变化\narr.splice(2,2,'11',’22')  // 返回[‘a’, ‘b’, ’11’, ’22’, ‘e’, ‘f’, ‘g’]  arr = [‘c’, ‘d']\n```\n\n### 3. 检测数据类型\n\n- typeof\n\n> typeof  是解释器内部实现，根据 ECMA-262 规定的几种类型的值来返回类型名称。\n> 但是  typeof  的应用场景非常有限，基本上只能判断出来使用字面量方式赋值的基本数据类型。\n\n```js\ntypeof 23  // number\ntypeof '124'  // string\ntypeof true  // boolean\ntypeof undefined  // undefined\ntypeof {}  // object\ntypeof null  // object\ntypeof [1, 3, 8]  // object\ntypeof function fn () {}  // function\ntypeof (new Number(33))  // object\ntypeof (new String('hello'))  // object\n```\n\n从上面例子可以看出， typeof  检测出来的类型不够准确，具有相当大的局限性。\n\n- instanceof\n\n> instance  检测类型的原理大致为: 判断左边的对象的隐式原型  __proto__  是否和右边对象的显式原型  prototype  相等。 很像  new  操作，这样就可以判断指定的某个对象是否为某个构造函数的实例。  instance  的局限性应该是不能检测基本数据类型。另外一点，不同  window  或者  iframe  之间对象类型检测不能使用  instanceof  来检测。\n\n```js\n'123' instance String  // false\n\nNumber instanceof Number  // true\n\nnew String('hello') instance String  // true\n\nnew Number(33) instance Number  // true\n```\n\n- Object.prototype.toString\n\n```js\nObject.prototype.toString.call(33)  // [object Number]\n\nObject.prototype.toString.call('hello')  // [object String]\n\nObject.prototype.toString.call([])  // [object Array]\n\nObject.prototype.toString.call({})  // [object Object]\n\nObject.prototype.toString.call(true)  // [object Boolean]\n\nObject.prototype.toString.call(null)  // [object null]\n\nObject.prototype.toString.call(undefined)  // [object undefined]\n\nObject.prototype.toString.call(function fn () {})  // [object Function]\n\nObject.prototype.toString.call(new Number(33))   // [object Number] \n```\n\n- constructor\n\n> constructor  属性返回对创建此对象的数组函数的引用。\n> constructor  不能检测出null和undefined两种，会报错。\n\n```js\n(33).constructor == Number  // true\n\n('hello'.constructor == String  // true\n\n([]).constructor == Array  // true\n\n({}).constructor == Object  // true\n\n(true).constructor == Boolean  // true\n\n(null).constructor == null  // TypeError: Cannot read property 'constructor' of null\n\n(undefined).constructor == undefined  // TypeError: Cannot read property 'constructor' of undefined\n\nvar fn = function () {}\nfn.constructor == Function  // true\n\nvar number = new Number(66)\nnumber.constructor == Number  // true\nnumber.constructor == Object  // false\n```\n\n- 我是分割线\n\n- Array.isArray()\n\n### 4. ES5 Array Function\n\n- forEach\n\n> Array.forEach(callbackFn[, thisObj])\n> callbackFn (value, index, arr)\n> `thisObj` 默认为 `window`\n\n```js\n[1, 2, 5, 8].forEach( function (ele, index, arr) {\n    console.log(ele, index, arr)\n})\n```\n\n- map\n\n> Array.map(callbackFn[, thisObj])\n> callbackFn (value, index, arr)\n\n```js\n[1, 2, 5, 8].map(function (ele, index, arr) {\n    return ele * index  // [0, 2, 10, 24]\n})\n```\n\n- filter\n\n> Array.filter(callbackFn[, thisObj])\n> callbackFn (value, index, arr), 需要返回 Boolean 值\n\n```js\n[0, 2, 5, 8].filter(function (ele, index, arr) {\n    return ele  // [2, 5, 8]\n})\n\n[0, 2, 5, 1].filter(function (ele, index, arr) {\n    return ele <= index  // [0, 1]\n})\n```\n\n- some\n\n> Array.some(callbackFn[, thisObj])\n> callbackFn (value, index, arr)\n\n```js\n[1, 2, 5, 8].some(function (ele, index, arr) {\n    return ele > 5  // true (8 > 5)\n})\n```\n\n- every\n\n> Array.every(callbackFn[, thisObj])\n> callbackFn (value, index, arr)\n\n```js\n[1, 2, 5, 8].every(function (ele, index, arr) {\n    return ele > 5  // false (1, 2, 5 均不大于5)\n})\n```\n\n- indexOf\n\n> Array.indexof(searchEle[, fromIndex])\n> 第一个出现的 `searchEle` 的索引位置\n> `searchEle` 要查找的元素\n> `fromIndex` 开始查找的索引位置，缺省或不符合规范时为 0\n\n```js\n[1, 2, 5, 8].indexOf(2)  // 1\n[1, 2, 5, 8].indexOf(2, '0')  // 1\n[1, 2, 5, 8].indexOf(2, 'f') => [1, 2, 5, 8].indexOf(2, 0)  // 1\n[1, 2, 5, 8].indexOf(2, 2)  // -1\n```\n\n- lastIndexOf\n\n> Array.lastIndexOf(searchEle[, fromIndex])\n> 与 `indexOf` 不同在于此方法是从后面元素开始查找的\n> `searchEle` 要查找的元素\n> `fromIndex` 开始查找的索引位置，缺省时或大于等于 Array.length 为 Array.length - 1\n\n```js\n[1, 2, 5, 8, 5].lastIndexOf(5)  // 4\n[1, 2, 5, 8, 5].lastIndexOf(5, 4)  // 4\n[1, 2, 5, 8, 5].lastIndexOf(5, 8) => [1, 2, 5, 8, 5].lastIndexOf(5, 4)  // 4\n[1, 2, 5, 8, 5].lastIndexOf(5, 'f')  // -1\n[1, 2, 5, 8, 5].lastIndexOf(5, 3)  // 2\n[1, 2, 5, 8, 5].lastIndexOf(5, 1)  // -1\n```\n\n- reduce\n\n> Array.reduce(callbackFn[, initValue])\n> callbackFn(previous, current, index, arr)\n> `previous` 前一次迭代计算出来的值\n> `current` 当前迭代的值\n> `initValue` 初始值, 未指定时取数组的第一个元素\n\n```js\n[1, 2, 5, 8].reduce(function (preV, curV, index, arr) {\n    return preV + curV\n}, 10)  // 26\n```\n\n```js\n// 梳理一下计算过程：\n// 初始化的时候\npreV = initValue = 10, curV = 1, index = 0\n\n// 第一次计算\npreV = 10 + 1 = 11, curV = 2, index = 1\n\n// 第二次计算\npreV = 11 + 2 = 13, curV = 5, index = 2\n\n// 第三次计算\npreV = 13 + 5 = 18, curV = 8, index = 3\n\n// 第四次计算\npreV = 18 + 8 = 26, curV = undefined (退出)\n```\n\n- reduceRight\n\n> 和 `reduceRight` 用法基本一致，不过是从数组后面开始迭代的\n> Array.reduceRight(callbackFn[, initValue])\n> callbackFn(previous, current, index, arr)\n> `previous` 前一次迭代计算出来的值\n> `current` 当前迭代的值\n\n```js\n[1, 2, 5, 8].reduceRight(function (preV, curV, index, arr) {\n    if (index == 0) {\n        return preV - curV\n    }\n    return preV + curV\n}, 10)  // 24\n```\n\n```js\n// 梳理一下计算过程：\n// 初始化的时候\npreV = initValue = 10, curV = 8, index = 3\n\n// 第一次计算\npreV = 10 + 8 = 18, curV = 5, index = 2\n\n// 第二次计算\npreV = 18 + 5 = 23, curV = 2, index = 1\n\n// 第三次计算\npreV = 23 + 2 = 25, curV = 1, index = 0\n\n// 第四次计算\npreV = 25 - 1 = 24, curV = undefined (退出)\n```\n\n### [参考文章](https://juejin.im/post/59b5540c5188257e8769e95d)","slug":"multiple-diary2","published":1,"updated":"2021-04-09T06:03:09.991Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34d60009u66tmxlwpm0n","content":"<h3 id=\"1-substr-和-substring\"><a href=\"#1-substr-和-substring\" class=\"headerlink\" title=\"1. substr() 和 substring()\"></a>1. substr() 和 substring()</h3><ul>\n<li>substr</li>\n</ul>\n<blockquote>\n<p>stringObject.substr(startIndex[, length])</p>\n</blockquote>\n<a id=\"more\"></a>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = ‘abcdefg<span class=\"string\">'</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">str.substr(2)  // ‘cdefg’</span></span><br><span class=\"line\"><span class=\"string\">str.substr(-1) =&gt; str.substr(6)  // ‘fg’</span></span><br><span class=\"line\"><span class=\"string\">str.substr(6)  // ‘'</span></span><br><span class=\"line\">str.substr(<span class=\"number\">2</span>,<span class=\"number\">2</span>)  <span class=\"comment\">// ‘cd’</span></span><br><span class=\"line\">str.substr(<span class=\"number\">2</span>,<span class=\"number\">7</span>)  <span class=\"comment\">// ‘cdefg’</span></span><br><span class=\"line\">str.substr(<span class=\"number\">2</span>,<span class=\"number\">-1</span>) <span class=\"comment\">// ''</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>substring</li>\n</ul>\n<blockquote>\n<p>stringObject.substring(startIndex[, stop]) 注意stop的含义</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = ‘abcdefg<span class=\"string\">'</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">str.substring(2)  // ‘cdefg’</span></span><br><span class=\"line\"><span class=\"string\">str.substring(2,4)  // ‘cd’</span></span><br><span class=\"line\"><span class=\"string\">str.substring(2,9)  // ‘cdefg’</span></span><br><span class=\"line\"><span class=\"string\">str.substring(-2) =&gt; str.substring(0)  // ‘abcdefg’</span></span><br><span class=\"line\"><span class=\"string\">str.substring(2,-4) =&gt; str.substring(2,0) =&gt; str.substring(0,2)  // ‘ab'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-slice-和-splice\"><a href=\"#2-slice-和-splice\" class=\"headerlink\" title=\"2. slice() 和 splice()\"></a>2. slice() 和 splice()</h3><ul>\n<li>slice</li>\n</ul>\n<blockquote>\n<p>stringObject.slice(startIndex[, stop])<br>arrayObject.slice(startIndex[, stop])<br>stop  缺省时 默认一直到最后</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = ‘abcdefg’</span><br><span class=\"line\"></span><br><span class=\"line\">str.slice(<span class=\"number\">2</span>)  <span class=\"comment\">// ‘cdefg'</span></span><br><span class=\"line\">str.slice(<span class=\"number\">0</span>)  <span class=\"comment\">// ‘abcdefg’</span></span><br><span class=\"line\">str.slice(<span class=\"number\">-2</span>) =&gt; str.slice(<span class=\"number\">5</span>)  <span class=\"comment\">// ‘fg’</span></span><br><span class=\"line\">str.slice(<span class=\"number\">8</span>)  <span class=\"comment\">// ‘’ 空串 </span></span><br><span class=\"line\">str.slice(<span class=\"number\">2</span>,<span class=\"number\">4</span>)  <span class=\"comment\">// ‘cd’</span></span><br><span class=\"line\">str.slice(<span class=\"number\">2</span>,<span class=\"number\">6</span>)  <span class=\"comment\">// ‘cdef’</span></span><br><span class=\"line\">str.slice(<span class=\"number\">2</span>,<span class=\"number\">18</span>)  <span class=\"comment\">// ‘cdefg’</span></span><br><span class=\"line\">str.slice(<span class=\"number\">4</span>,<span class=\"number\">2</span>)  <span class=\"comment\">// ‘’ 空串</span></span><br><span class=\"line\">str.slice(<span class=\"number\">4</span>,<span class=\"number\">-1</span>) =&gt; str.slice(<span class=\"number\">4</span>,<span class=\"number\">6</span>)  <span class=\"comment\">// ‘ef’</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 数组方法类似</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>splice</li>\n</ul>\n<blockquote>\n<p>arrayObject.splice(startIndex, length[, item1, item2…])<br>splice操作会改变原数组  返回被移除的元素数组</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [‘a’,’b’,’c’,’d’,’e’,’f’,’g’]</span><br><span class=\"line\"></span><br><span class=\"line\">arr.splice(<span class=\"number\">2</span>,<span class=\"number\">0</span>)  <span class=\"comment\">// 空数组 arr = [‘a’,’b’,’c’,’d’,’e’,’f’,’g’]</span></span><br><span class=\"line\">arr.splice(<span class=\"number\">2</span>,<span class=\"number\">8</span>)  <span class=\"comment\">// arr = [‘a’, ‘b’, ‘c']</span></span><br><span class=\"line\">arr.splice(<span class=\"number\">2</span>,<span class=\"number\">-5</span>)  <span class=\"comment\">// 返回arr  arr没有变化</span></span><br><span class=\"line\"></span><br><span class=\"line\">arr.splice(<span class=\"number\">8</span>,<span class=\"number\">2</span>)  <span class=\"comment\">// 返回arr  arr没有变化</span></span><br><span class=\"line\">arr.splice(<span class=\"number\">2</span>,<span class=\"number\">2</span>,<span class=\"string\">'11'</span>,’<span class=\"number\">22</span><span class=\"string\">')  // 返回[‘a’, ‘b’, ’11’, ’22’, ‘e’, ‘f’, ‘g’]  arr = [‘c’, ‘d'</span>]</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-检测数据类型\"><a href=\"#3-检测数据类型\" class=\"headerlink\" title=\"3. 检测数据类型\"></a>3. 检测数据类型</h3><ul>\n<li>typeof</li>\n</ul>\n<blockquote>\n<p>typeof  是解释器内部实现，根据 ECMA-262 规定的几种类型的值来返回类型名称。<br>但是  typeof  的应用场景非常有限，基本上只能判断出来使用字面量方式赋值的基本数据类型。</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"number\">23</span>  <span class=\"comment\">// number</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"string\">'124'</span>  <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"literal\">true</span>  <span class=\"comment\">// boolean</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"literal\">undefined</span>  <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> &#123;&#125;  <span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"literal\">null</span>  <span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> [<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">8</span>]  <span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;&#125;  <span class=\"comment\">// function</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> (<span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">33</span>))  <span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> (<span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">'hello'</span>))  <span class=\"comment\">// object</span></span><br></pre></td></tr></table></figure>\n<p>从上面例子可以看出， typeof  检测出来的类型不够准确，具有相当大的局限性。</p>\n<ul>\n<li>instanceof</li>\n</ul>\n<blockquote>\n<p>instance  检测类型的原理大致为: 判断左边的对象的隐式原型  <strong>proto</strong>  是否和右边对象的显式原型  prototype  相等。 很像  new  操作，这样就可以判断指定的某个对象是否为某个构造函数的实例。  instance  的局限性应该是不能检测基本数据类型。另外一点，不同  window  或者  iframe  之间对象类型检测不能使用  instanceof  来检测。</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'123'</span> instance <span class=\"built_in\">String</span>  <span class=\"comment\">// false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Number</span> <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Number</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">'hello'</span>) instance <span class=\"built_in\">String</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">33</span>) instance <span class=\"built_in\">Number</span>  <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>Object.prototype.toString</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"number\">33</span>)  <span class=\"comment\">// [object Number]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"string\">'hello'</span>)  <span class=\"comment\">// [object String]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call([])  <span class=\"comment\">// [object Array]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(&#123;&#125;)  <span class=\"comment\">// [object Object]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"literal\">true</span>)  <span class=\"comment\">// [object Boolean]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"literal\">null</span>)  <span class=\"comment\">// [object null]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"literal\">undefined</span>)  <span class=\"comment\">// [object undefined]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;&#125;)  <span class=\"comment\">// [object Function]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">33</span>))   <span class=\"comment\">// [object Number]</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>constructor</li>\n</ul>\n<blockquote>\n<p>constructor  属性返回对创建此对象的数组函数的引用。<br>constructor  不能检测出null和undefined两种，会报错。</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"number\">33</span>).constructor == <span class=\"built_in\">Number</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"string\">'hello'</span>.constructor == <span class=\"built_in\">String</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\">([]).constructor == <span class=\"built_in\">Array</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\">(&#123;&#125;).constructor == <span class=\"built_in\">Object</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"literal\">true</span>).constructor == <span class=\"built_in\">Boolean</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"literal\">null</span>).constructor == <span class=\"literal\">null</span>  <span class=\"comment\">// TypeError: Cannot read property 'constructor' of null</span></span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"literal\">undefined</span>).constructor == <span class=\"literal\">undefined</span>  <span class=\"comment\">// TypeError: Cannot read property 'constructor' of undefined</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">fn.constructor == <span class=\"built_in\">Function</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> number = <span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">66</span>)</span><br><span class=\"line\">number.constructor == <span class=\"built_in\">Number</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\">number.constructor == <span class=\"built_in\">Object</span>  <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>我是分割线</p>\n</li>\n<li><p>Array.isArray()</p>\n</li>\n</ul>\n<h3 id=\"4-ES5-Array-Function\"><a href=\"#4-ES5-Array-Function\" class=\"headerlink\" title=\"4. ES5 Array Function\"></a>4. ES5 Array Function</h3><ul>\n<li>forEach</li>\n</ul>\n<blockquote>\n<p>Array.forEach(callbackFn[, thisObj])<br>callbackFn (value, index, arr)<br><code>thisObj</code> 默认为 <code>window</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].forEach( <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ele, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(ele, index, arr)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>map</li>\n</ul>\n<blockquote>\n<p>Array.map(callbackFn[, thisObj])<br>callbackFn (value, index, arr)</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].map(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ele, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ele * index  <span class=\"comment\">// [0, 2, 10, 24]</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>filter</li>\n</ul>\n<blockquote>\n<p>Array.filter(callbackFn[, thisObj])<br>callbackFn (value, index, arr), 需要返回 Boolean 值</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">0</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].filter(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ele, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ele  <span class=\"comment\">// [2, 5, 8]</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"number\">0</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">1</span>].filter(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ele, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ele &lt;= index  <span class=\"comment\">// [0, 1]</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>some</li>\n</ul>\n<blockquote>\n<p>Array.some(callbackFn[, thisObj])<br>callbackFn (value, index, arr)</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].some(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ele, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ele &gt; <span class=\"number\">5</span>  <span class=\"comment\">// true (8 &gt; 5)</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>every</li>\n</ul>\n<blockquote>\n<p>Array.every(callbackFn[, thisObj])<br>callbackFn (value, index, arr)</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].every(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ele, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ele &gt; <span class=\"number\">5</span>  <span class=\"comment\">// false (1, 2, 5 均不大于5)</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>indexOf</li>\n</ul>\n<blockquote>\n<p>Array.indexof(searchEle[, fromIndex])<br>第一个出现的 <code>searchEle</code> 的索引位置<br><code>searchEle</code> 要查找的元素<br><code>fromIndex</code> 开始查找的索引位置，缺省或不符合规范时为 0</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].indexOf(<span class=\"number\">2</span>)  <span class=\"comment\">// 1</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].indexOf(<span class=\"number\">2</span>, <span class=\"string\">'0'</span>)  <span class=\"comment\">// 1</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].indexOf(<span class=\"number\">2</span>, <span class=\"string\">'f'</span>) =&gt; [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].indexOf(<span class=\"number\">2</span>, <span class=\"number\">0</span>)  <span class=\"comment\">// 1</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].indexOf(<span class=\"number\">2</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// -1</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>lastIndexOf</li>\n</ul>\n<blockquote>\n<p>Array.lastIndexOf(searchEle[, fromIndex])<br>与 <code>indexOf</code> 不同在于此方法是从后面元素开始查找的<br><code>searchEle</code> 要查找的元素<br><code>fromIndex</code> 开始查找的索引位置，缺省时或大于等于 Array.length 为 Array.length - 1</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>)  <span class=\"comment\">// 4</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>, <span class=\"number\">4</span>)  <span class=\"comment\">// 4</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>, <span class=\"number\">8</span>) =&gt; [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>, <span class=\"number\">4</span>)  <span class=\"comment\">// 4</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>, <span class=\"string\">'f'</span>)  <span class=\"comment\">// -1</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>, <span class=\"number\">3</span>)  <span class=\"comment\">// 2</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>, <span class=\"number\">1</span>)  <span class=\"comment\">// -1</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>reduce</li>\n</ul>\n<blockquote>\n<p>Array.reduce(callbackFn[, initValue])<br>callbackFn(previous, current, index, arr)<br><code>previous</code> 前一次迭代计算出来的值<br><code>current</code> 当前迭代的值<br><code>initValue</code> 初始值, 未指定时取数组的第一个元素</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].reduce(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">preV, curV, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> preV + curV</span><br><span class=\"line\">&#125;, <span class=\"number\">10</span>)  <span class=\"comment\">// 26</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 梳理一下计算过程：</span></span><br><span class=\"line\"><span class=\"comment\">// 初始化的时候</span></span><br><span class=\"line\">preV = initValue = <span class=\"number\">10</span>, curV = <span class=\"number\">1</span>, index = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第一次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">10</span> + <span class=\"number\">1</span> = <span class=\"number\">11</span>, curV = <span class=\"number\">2</span>, index = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第二次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">11</span> + <span class=\"number\">2</span> = <span class=\"number\">13</span>, curV = <span class=\"number\">5</span>, index = <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第三次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">13</span> + <span class=\"number\">5</span> = <span class=\"number\">18</span>, curV = <span class=\"number\">8</span>, index = <span class=\"number\">3</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第四次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">18</span> + <span class=\"number\">8</span> = <span class=\"number\">26</span>, curV = <span class=\"literal\">undefined</span> (退出)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>reduceRight</li>\n</ul>\n<blockquote>\n<p>和 <code>reduceRight</code> 用法基本一致，不过是从数组后面开始迭代的<br>Array.reduceRight(callbackFn[, initValue])<br>callbackFn(previous, current, index, arr)<br><code>previous</code> 前一次迭代计算出来的值<br><code>current</code> 当前迭代的值</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].reduceRight(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">preV, curV, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> preV - curV</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> preV + curV</span><br><span class=\"line\">&#125;, <span class=\"number\">10</span>)  <span class=\"comment\">// 24</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 梳理一下计算过程：</span></span><br><span class=\"line\"><span class=\"comment\">// 初始化的时候</span></span><br><span class=\"line\">preV = initValue = <span class=\"number\">10</span>, curV = <span class=\"number\">8</span>, index = <span class=\"number\">3</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第一次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">10</span> + <span class=\"number\">8</span> = <span class=\"number\">18</span>, curV = <span class=\"number\">5</span>, index = <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第二次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">18</span> + <span class=\"number\">5</span> = <span class=\"number\">23</span>, curV = <span class=\"number\">2</span>, index = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第三次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">23</span> + <span class=\"number\">2</span> = <span class=\"number\">25</span>, curV = <span class=\"number\">1</span>, index = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第四次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">25</span> - <span class=\"number\">1</span> = <span class=\"number\">24</span>, curV = <span class=\"literal\">undefined</span> (退出)</span><br></pre></td></tr></table></figure>\n<h3 id=\"参考文章\"><a href=\"#参考文章\" class=\"headerlink\" title=\"参考文章\"></a><a href=\"https://juejin.im/post/59b5540c5188257e8769e95d\" target=\"_blank\" rel=\"noopener\">参考文章</a></h3>","site":{"data":{}},"excerpt":"<h3 id=\"1-substr-和-substring\"><a href=\"#1-substr-和-substring\" class=\"headerlink\" title=\"1. substr() 和 substring()\"></a>1. substr() 和 substring()</h3><ul>\n<li>substr</li>\n</ul>\n<blockquote>\n<p>stringObject.substr(startIndex[, length])</p>\n</blockquote>","more":"<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = ‘abcdefg<span class=\"string\">'</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">str.substr(2)  // ‘cdefg’</span></span><br><span class=\"line\"><span class=\"string\">str.substr(-1) =&gt; str.substr(6)  // ‘fg’</span></span><br><span class=\"line\"><span class=\"string\">str.substr(6)  // ‘'</span></span><br><span class=\"line\">str.substr(<span class=\"number\">2</span>,<span class=\"number\">2</span>)  <span class=\"comment\">// ‘cd’</span></span><br><span class=\"line\">str.substr(<span class=\"number\">2</span>,<span class=\"number\">7</span>)  <span class=\"comment\">// ‘cdefg’</span></span><br><span class=\"line\">str.substr(<span class=\"number\">2</span>,<span class=\"number\">-1</span>) <span class=\"comment\">// ''</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>substring</li>\n</ul>\n<blockquote>\n<p>stringObject.substring(startIndex[, stop]) 注意stop的含义</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = ‘abcdefg<span class=\"string\">'</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">str.substring(2)  // ‘cdefg’</span></span><br><span class=\"line\"><span class=\"string\">str.substring(2,4)  // ‘cd’</span></span><br><span class=\"line\"><span class=\"string\">str.substring(2,9)  // ‘cdefg’</span></span><br><span class=\"line\"><span class=\"string\">str.substring(-2) =&gt; str.substring(0)  // ‘abcdefg’</span></span><br><span class=\"line\"><span class=\"string\">str.substring(2,-4) =&gt; str.substring(2,0) =&gt; str.substring(0,2)  // ‘ab'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-slice-和-splice\"><a href=\"#2-slice-和-splice\" class=\"headerlink\" title=\"2. slice() 和 splice()\"></a>2. slice() 和 splice()</h3><ul>\n<li>slice</li>\n</ul>\n<blockquote>\n<p>stringObject.slice(startIndex[, stop])<br>arrayObject.slice(startIndex[, stop])<br>stop  缺省时 默认一直到最后</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = ‘abcdefg’</span><br><span class=\"line\"></span><br><span class=\"line\">str.slice(<span class=\"number\">2</span>)  <span class=\"comment\">// ‘cdefg'</span></span><br><span class=\"line\">str.slice(<span class=\"number\">0</span>)  <span class=\"comment\">// ‘abcdefg’</span></span><br><span class=\"line\">str.slice(<span class=\"number\">-2</span>) =&gt; str.slice(<span class=\"number\">5</span>)  <span class=\"comment\">// ‘fg’</span></span><br><span class=\"line\">str.slice(<span class=\"number\">8</span>)  <span class=\"comment\">// ‘’ 空串 </span></span><br><span class=\"line\">str.slice(<span class=\"number\">2</span>,<span class=\"number\">4</span>)  <span class=\"comment\">// ‘cd’</span></span><br><span class=\"line\">str.slice(<span class=\"number\">2</span>,<span class=\"number\">6</span>)  <span class=\"comment\">// ‘cdef’</span></span><br><span class=\"line\">str.slice(<span class=\"number\">2</span>,<span class=\"number\">18</span>)  <span class=\"comment\">// ‘cdefg’</span></span><br><span class=\"line\">str.slice(<span class=\"number\">4</span>,<span class=\"number\">2</span>)  <span class=\"comment\">// ‘’ 空串</span></span><br><span class=\"line\">str.slice(<span class=\"number\">4</span>,<span class=\"number\">-1</span>) =&gt; str.slice(<span class=\"number\">4</span>,<span class=\"number\">6</span>)  <span class=\"comment\">// ‘ef’</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 数组方法类似</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>splice</li>\n</ul>\n<blockquote>\n<p>arrayObject.splice(startIndex, length[, item1, item2…])<br>splice操作会改变原数组  返回被移除的元素数组</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [‘a’,’b’,’c’,’d’,’e’,’f’,’g’]</span><br><span class=\"line\"></span><br><span class=\"line\">arr.splice(<span class=\"number\">2</span>,<span class=\"number\">0</span>)  <span class=\"comment\">// 空数组 arr = [‘a’,’b’,’c’,’d’,’e’,’f’,’g’]</span></span><br><span class=\"line\">arr.splice(<span class=\"number\">2</span>,<span class=\"number\">8</span>)  <span class=\"comment\">// arr = [‘a’, ‘b’, ‘c']</span></span><br><span class=\"line\">arr.splice(<span class=\"number\">2</span>,<span class=\"number\">-5</span>)  <span class=\"comment\">// 返回arr  arr没有变化</span></span><br><span class=\"line\"></span><br><span class=\"line\">arr.splice(<span class=\"number\">8</span>,<span class=\"number\">2</span>)  <span class=\"comment\">// 返回arr  arr没有变化</span></span><br><span class=\"line\">arr.splice(<span class=\"number\">2</span>,<span class=\"number\">2</span>,<span class=\"string\">'11'</span>,’<span class=\"number\">22</span><span class=\"string\">')  // 返回[‘a’, ‘b’, ’11’, ’22’, ‘e’, ‘f’, ‘g’]  arr = [‘c’, ‘d'</span>]</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-检测数据类型\"><a href=\"#3-检测数据类型\" class=\"headerlink\" title=\"3. 检测数据类型\"></a>3. 检测数据类型</h3><ul>\n<li>typeof</li>\n</ul>\n<blockquote>\n<p>typeof  是解释器内部实现，根据 ECMA-262 规定的几种类型的值来返回类型名称。<br>但是  typeof  的应用场景非常有限，基本上只能判断出来使用字面量方式赋值的基本数据类型。</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"number\">23</span>  <span class=\"comment\">// number</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"string\">'124'</span>  <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"literal\">true</span>  <span class=\"comment\">// boolean</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"literal\">undefined</span>  <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> &#123;&#125;  <span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"literal\">null</span>  <span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> [<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">8</span>]  <span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;&#125;  <span class=\"comment\">// function</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> (<span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">33</span>))  <span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> (<span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">'hello'</span>))  <span class=\"comment\">// object</span></span><br></pre></td></tr></table></figure>\n<p>从上面例子可以看出， typeof  检测出来的类型不够准确，具有相当大的局限性。</p>\n<ul>\n<li>instanceof</li>\n</ul>\n<blockquote>\n<p>instance  检测类型的原理大致为: 判断左边的对象的隐式原型  <strong>proto</strong>  是否和右边对象的显式原型  prototype  相等。 很像  new  操作，这样就可以判断指定的某个对象是否为某个构造函数的实例。  instance  的局限性应该是不能检测基本数据类型。另外一点，不同  window  或者  iframe  之间对象类型检测不能使用  instanceof  来检测。</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'123'</span> instance <span class=\"built_in\">String</span>  <span class=\"comment\">// false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Number</span> <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Number</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">'hello'</span>) instance <span class=\"built_in\">String</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">33</span>) instance <span class=\"built_in\">Number</span>  <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>Object.prototype.toString</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"number\">33</span>)  <span class=\"comment\">// [object Number]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"string\">'hello'</span>)  <span class=\"comment\">// [object String]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call([])  <span class=\"comment\">// [object Array]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(&#123;&#125;)  <span class=\"comment\">// [object Object]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"literal\">true</span>)  <span class=\"comment\">// [object Boolean]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"literal\">null</span>)  <span class=\"comment\">// [object null]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"literal\">undefined</span>)  <span class=\"comment\">// [object undefined]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;&#125;)  <span class=\"comment\">// [object Function]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">33</span>))   <span class=\"comment\">// [object Number]</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>constructor</li>\n</ul>\n<blockquote>\n<p>constructor  属性返回对创建此对象的数组函数的引用。<br>constructor  不能检测出null和undefined两种，会报错。</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"number\">33</span>).constructor == <span class=\"built_in\">Number</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"string\">'hello'</span>.constructor == <span class=\"built_in\">String</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\">([]).constructor == <span class=\"built_in\">Array</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\">(&#123;&#125;).constructor == <span class=\"built_in\">Object</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"literal\">true</span>).constructor == <span class=\"built_in\">Boolean</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"literal\">null</span>).constructor == <span class=\"literal\">null</span>  <span class=\"comment\">// TypeError: Cannot read property 'constructor' of null</span></span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"literal\">undefined</span>).constructor == <span class=\"literal\">undefined</span>  <span class=\"comment\">// TypeError: Cannot read property 'constructor' of undefined</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">fn.constructor == <span class=\"built_in\">Function</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> number = <span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">66</span>)</span><br><span class=\"line\">number.constructor == <span class=\"built_in\">Number</span>  <span class=\"comment\">// true</span></span><br><span class=\"line\">number.constructor == <span class=\"built_in\">Object</span>  <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>我是分割线</p>\n</li>\n<li><p>Array.isArray()</p>\n</li>\n</ul>\n<h3 id=\"4-ES5-Array-Function\"><a href=\"#4-ES5-Array-Function\" class=\"headerlink\" title=\"4. ES5 Array Function\"></a>4. ES5 Array Function</h3><ul>\n<li>forEach</li>\n</ul>\n<blockquote>\n<p>Array.forEach(callbackFn[, thisObj])<br>callbackFn (value, index, arr)<br><code>thisObj</code> 默认为 <code>window</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].forEach( <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ele, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(ele, index, arr)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>map</li>\n</ul>\n<blockquote>\n<p>Array.map(callbackFn[, thisObj])<br>callbackFn (value, index, arr)</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].map(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ele, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ele * index  <span class=\"comment\">// [0, 2, 10, 24]</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>filter</li>\n</ul>\n<blockquote>\n<p>Array.filter(callbackFn[, thisObj])<br>callbackFn (value, index, arr), 需要返回 Boolean 值</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">0</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].filter(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ele, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ele  <span class=\"comment\">// [2, 5, 8]</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"number\">0</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">1</span>].filter(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ele, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ele &lt;= index  <span class=\"comment\">// [0, 1]</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>some</li>\n</ul>\n<blockquote>\n<p>Array.some(callbackFn[, thisObj])<br>callbackFn (value, index, arr)</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].some(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ele, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ele &gt; <span class=\"number\">5</span>  <span class=\"comment\">// true (8 &gt; 5)</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>every</li>\n</ul>\n<blockquote>\n<p>Array.every(callbackFn[, thisObj])<br>callbackFn (value, index, arr)</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].every(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ele, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ele &gt; <span class=\"number\">5</span>  <span class=\"comment\">// false (1, 2, 5 均不大于5)</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>indexOf</li>\n</ul>\n<blockquote>\n<p>Array.indexof(searchEle[, fromIndex])<br>第一个出现的 <code>searchEle</code> 的索引位置<br><code>searchEle</code> 要查找的元素<br><code>fromIndex</code> 开始查找的索引位置，缺省或不符合规范时为 0</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].indexOf(<span class=\"number\">2</span>)  <span class=\"comment\">// 1</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].indexOf(<span class=\"number\">2</span>, <span class=\"string\">'0'</span>)  <span class=\"comment\">// 1</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].indexOf(<span class=\"number\">2</span>, <span class=\"string\">'f'</span>) =&gt; [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].indexOf(<span class=\"number\">2</span>, <span class=\"number\">0</span>)  <span class=\"comment\">// 1</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].indexOf(<span class=\"number\">2</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// -1</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>lastIndexOf</li>\n</ul>\n<blockquote>\n<p>Array.lastIndexOf(searchEle[, fromIndex])<br>与 <code>indexOf</code> 不同在于此方法是从后面元素开始查找的<br><code>searchEle</code> 要查找的元素<br><code>fromIndex</code> 开始查找的索引位置，缺省时或大于等于 Array.length 为 Array.length - 1</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>)  <span class=\"comment\">// 4</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>, <span class=\"number\">4</span>)  <span class=\"comment\">// 4</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>, <span class=\"number\">8</span>) =&gt; [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>, <span class=\"number\">4</span>)  <span class=\"comment\">// 4</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>, <span class=\"string\">'f'</span>)  <span class=\"comment\">// -1</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>, <span class=\"number\">3</span>)  <span class=\"comment\">// 2</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>].lastIndexOf(<span class=\"number\">5</span>, <span class=\"number\">1</span>)  <span class=\"comment\">// -1</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>reduce</li>\n</ul>\n<blockquote>\n<p>Array.reduce(callbackFn[, initValue])<br>callbackFn(previous, current, index, arr)<br><code>previous</code> 前一次迭代计算出来的值<br><code>current</code> 当前迭代的值<br><code>initValue</code> 初始值, 未指定时取数组的第一个元素</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].reduce(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">preV, curV, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> preV + curV</span><br><span class=\"line\">&#125;, <span class=\"number\">10</span>)  <span class=\"comment\">// 26</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 梳理一下计算过程：</span></span><br><span class=\"line\"><span class=\"comment\">// 初始化的时候</span></span><br><span class=\"line\">preV = initValue = <span class=\"number\">10</span>, curV = <span class=\"number\">1</span>, index = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第一次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">10</span> + <span class=\"number\">1</span> = <span class=\"number\">11</span>, curV = <span class=\"number\">2</span>, index = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第二次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">11</span> + <span class=\"number\">2</span> = <span class=\"number\">13</span>, curV = <span class=\"number\">5</span>, index = <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第三次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">13</span> + <span class=\"number\">5</span> = <span class=\"number\">18</span>, curV = <span class=\"number\">8</span>, index = <span class=\"number\">3</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第四次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">18</span> + <span class=\"number\">8</span> = <span class=\"number\">26</span>, curV = <span class=\"literal\">undefined</span> (退出)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>reduceRight</li>\n</ul>\n<blockquote>\n<p>和 <code>reduceRight</code> 用法基本一致，不过是从数组后面开始迭代的<br>Array.reduceRight(callbackFn[, initValue])<br>callbackFn(previous, current, index, arr)<br><code>previous</code> 前一次迭代计算出来的值<br><code>current</code> 当前迭代的值</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>].reduceRight(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">preV, curV, index, arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> preV - curV</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> preV + curV</span><br><span class=\"line\">&#125;, <span class=\"number\">10</span>)  <span class=\"comment\">// 24</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 梳理一下计算过程：</span></span><br><span class=\"line\"><span class=\"comment\">// 初始化的时候</span></span><br><span class=\"line\">preV = initValue = <span class=\"number\">10</span>, curV = <span class=\"number\">8</span>, index = <span class=\"number\">3</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第一次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">10</span> + <span class=\"number\">8</span> = <span class=\"number\">18</span>, curV = <span class=\"number\">5</span>, index = <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第二次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">18</span> + <span class=\"number\">5</span> = <span class=\"number\">23</span>, curV = <span class=\"number\">2</span>, index = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第三次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">23</span> + <span class=\"number\">2</span> = <span class=\"number\">25</span>, curV = <span class=\"number\">1</span>, index = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第四次计算</span></span><br><span class=\"line\">preV = <span class=\"number\">25</span> - <span class=\"number\">1</span> = <span class=\"number\">24</span>, curV = <span class=\"literal\">undefined</span> (退出)</span><br></pre></td></tr></table></figure>\n<h3 id=\"参考文章\"><a href=\"#参考文章\" class=\"headerlink\" title=\"参考文章\"></a><a href=\"https://juejin.im/post/59b5540c5188257e8769e95d\" target=\"_blank\" rel=\"noopener\">参考文章</a></h3>"},{"title":"Diary【三】","date":"2021-04-08T12:32:25.000Z","_content":"\n### new的模拟实现\n\n实现以下效果\n\n```js\nfunction Person() {\n    // ...\n}\n\n// 使用new\nvar person = new Person(params)\n// 使用自定义的objectFactory\nvar person = objectFactory(Person, params)\n```\n\n<!-- More -->\n\n构造函数没有返回值的情况\n\n```js\nfunction Person(name, age) {\n    this.name = name\n    this.age = age\n}\n\nfunction objectFactory() {\n    var obj = {}\n    var Contructor = [].shift.call(arguments)\n    obj.__proto__ = Contructor.prototype\n    Contructor.apply(obj, arguments)\n    return obj\n}\n\nvar person = objectFactory(Person, 'Wukong', 500)\nconsole.log(person.name)  // Wukong\nconsole.log(person.age)  // 500\n```\n\n构造函数有返回值的情况\n\n#### 返回基本类型\n\n```js\nfunction Person(name, age) {\n    this.name = name\n    this.age = age\n    return 'hello everyone'\n}\nvar person = new Person('Wukong', 500)\nconsole.log(person.name)  // Wukong\nconsole.log(person.age)  // 500\n```\n\n#### 返回对象\n\n```js\nfunction Person(name, age) {\n    this.name = name\n    this.age = age\n    return {\n        name: 'zhangsan',\n        gender: 'female'\n    }\n}\nvar person = new Person('Wukong', 500)\nconsole.log(person.name)  // zhangsan\nconsole.log(person.age)  // undefined\nconsole.log(person.gender)  // female\n```\n\n结合以上两种情况，对objectFactory方法进行更改，最终结果如下\n\n```js\nfunction Person(name, age) {\n    this.name = name\n    this.age = age\n    return {\n        name: 'zhangsan',\n        gender: 'female'\n    }\n}\n\nfunction objectFactory() {\n    // 创建一个空对象\n    var obj = {}\n    // 将类数组参数转为数组，并调用数组的shift方法 弹出第一个参数 此例为构造函数Person\n    var Contructor = [].shift.call(arguments)\n    // 将实例对象的__proto__属性指向构造函数的prototype原型 从而实现继承\n    obj.__proto__ = Contructor.prototype\n    // 执行构造函数 传递参数 改变this指向\n    var returns = Contructor.apply(obj, arguments)\n    // 判断返回的值类型 如果是对象，返回这个对象；如果没有，则返回创建的obj\n    return typeof returns === 'object' ? returns : obj\n}\n\nvar person = objectFactory(Person, 'Wukong', 500)\nconsole.log(person.name)  // zhangsan \nconsole.log(person.age)  // undefined\nconsole.log(person.gender)  // female\n```","source":"_posts/multiple-diary3.md","raw":"---\ntitle: Diary【三】\ndate: 2021-04-08 20:32:25\ntags: diary\n---\n\n### new的模拟实现\n\n实现以下效果\n\n```js\nfunction Person() {\n    // ...\n}\n\n// 使用new\nvar person = new Person(params)\n// 使用自定义的objectFactory\nvar person = objectFactory(Person, params)\n```\n\n<!-- More -->\n\n构造函数没有返回值的情况\n\n```js\nfunction Person(name, age) {\n    this.name = name\n    this.age = age\n}\n\nfunction objectFactory() {\n    var obj = {}\n    var Contructor = [].shift.call(arguments)\n    obj.__proto__ = Contructor.prototype\n    Contructor.apply(obj, arguments)\n    return obj\n}\n\nvar person = objectFactory(Person, 'Wukong', 500)\nconsole.log(person.name)  // Wukong\nconsole.log(person.age)  // 500\n```\n\n构造函数有返回值的情况\n\n#### 返回基本类型\n\n```js\nfunction Person(name, age) {\n    this.name = name\n    this.age = age\n    return 'hello everyone'\n}\nvar person = new Person('Wukong', 500)\nconsole.log(person.name)  // Wukong\nconsole.log(person.age)  // 500\n```\n\n#### 返回对象\n\n```js\nfunction Person(name, age) {\n    this.name = name\n    this.age = age\n    return {\n        name: 'zhangsan',\n        gender: 'female'\n    }\n}\nvar person = new Person('Wukong', 500)\nconsole.log(person.name)  // zhangsan\nconsole.log(person.age)  // undefined\nconsole.log(person.gender)  // female\n```\n\n结合以上两种情况，对objectFactory方法进行更改，最终结果如下\n\n```js\nfunction Person(name, age) {\n    this.name = name\n    this.age = age\n    return {\n        name: 'zhangsan',\n        gender: 'female'\n    }\n}\n\nfunction objectFactory() {\n    // 创建一个空对象\n    var obj = {}\n    // 将类数组参数转为数组，并调用数组的shift方法 弹出第一个参数 此例为构造函数Person\n    var Contructor = [].shift.call(arguments)\n    // 将实例对象的__proto__属性指向构造函数的prototype原型 从而实现继承\n    obj.__proto__ = Contructor.prototype\n    // 执行构造函数 传递参数 改变this指向\n    var returns = Contructor.apply(obj, arguments)\n    // 判断返回的值类型 如果是对象，返回这个对象；如果没有，则返回创建的obj\n    return typeof returns === 'object' ? returns : obj\n}\n\nvar person = objectFactory(Person, 'Wukong', 500)\nconsole.log(person.name)  // zhangsan \nconsole.log(person.age)  // undefined\nconsole.log(person.gender)  // female\n```","slug":"multiple-diary3","published":1,"updated":"2021-04-09T06:06:01.154Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34d8000au66t07rdo4op","content":"<h3 id=\"new的模拟实现\"><a href=\"#new的模拟实现\" class=\"headerlink\" title=\"new的模拟实现\"></a>new的模拟实现</h3><p>实现以下效果</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用new</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> person = <span class=\"keyword\">new</span> Person(params)</span><br><span class=\"line\"><span class=\"comment\">// 使用自定义的objectFactory</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> person = objectFactory(Person, params)</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>构造函数没有返回值的情况</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">objectFactory</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> Contructor = [].shift.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    obj.__proto__ = Contructor.prototype</span><br><span class=\"line\">    Contructor.apply(obj, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> obj</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> person = objectFactory(Person, <span class=\"string\">'Wukong'</span>, <span class=\"number\">500</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name)  <span class=\"comment\">// Wukong</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.age)  <span class=\"comment\">// 500</span></span><br></pre></td></tr></table></figure>\n<p>构造函数有返回值的情况</p>\n<h4 id=\"返回基本类型\"><a href=\"#返回基本类型\" class=\"headerlink\" title=\"返回基本类型\"></a>返回基本类型</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'hello everyone'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person = <span class=\"keyword\">new</span> Person(<span class=\"string\">'Wukong'</span>, <span class=\"number\">500</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name)  <span class=\"comment\">// Wukong</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.age)  <span class=\"comment\">// 500</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"返回对象\"><a href=\"#返回对象\" class=\"headerlink\" title=\"返回对象\"></a>返回对象</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        name: <span class=\"string\">'zhangsan'</span>,</span><br><span class=\"line\">        gender: <span class=\"string\">'female'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person = <span class=\"keyword\">new</span> Person(<span class=\"string\">'Wukong'</span>, <span class=\"number\">500</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name)  <span class=\"comment\">// zhangsan</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.age)  <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.gender)  <span class=\"comment\">// female</span></span><br></pre></td></tr></table></figure>\n<p>结合以上两种情况，对objectFactory方法进行更改，最终结果如下</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        name: <span class=\"string\">'zhangsan'</span>,</span><br><span class=\"line\">        gender: <span class=\"string\">'female'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">objectFactory</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 创建一个空对象</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\">    <span class=\"comment\">// 将类数组参数转为数组，并调用数组的shift方法 弹出第一个参数 此例为构造函数Person</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> Contructor = [].shift.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"comment\">// 将实例对象的__proto__属性指向构造函数的prototype原型 从而实现继承</span></span><br><span class=\"line\">    obj.__proto__ = Contructor.prototype</span><br><span class=\"line\">    <span class=\"comment\">// 执行构造函数 传递参数 改变this指向</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> returns = Contructor.apply(obj, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"comment\">// 判断返回的值类型 如果是对象，返回这个对象；如果没有，则返回创建的obj</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> returns === <span class=\"string\">'object'</span> ? returns : obj</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> person = objectFactory(Person, <span class=\"string\">'Wukong'</span>, <span class=\"number\">500</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name)  <span class=\"comment\">// zhangsan </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.age)  <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.gender)  <span class=\"comment\">// female</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<h3 id=\"new的模拟实现\"><a href=\"#new的模拟实现\" class=\"headerlink\" title=\"new的模拟实现\"></a>new的模拟实现</h3><p>实现以下效果</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用new</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> person = <span class=\"keyword\">new</span> Person(params)</span><br><span class=\"line\"><span class=\"comment\">// 使用自定义的objectFactory</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> person = objectFactory(Person, params)</span><br></pre></td></tr></table></figure>","more":"<p>构造函数没有返回值的情况</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">objectFactory</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> Contructor = [].shift.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    obj.__proto__ = Contructor.prototype</span><br><span class=\"line\">    Contructor.apply(obj, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> obj</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> person = objectFactory(Person, <span class=\"string\">'Wukong'</span>, <span class=\"number\">500</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name)  <span class=\"comment\">// Wukong</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.age)  <span class=\"comment\">// 500</span></span><br></pre></td></tr></table></figure>\n<p>构造函数有返回值的情况</p>\n<h4 id=\"返回基本类型\"><a href=\"#返回基本类型\" class=\"headerlink\" title=\"返回基本类型\"></a>返回基本类型</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'hello everyone'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person = <span class=\"keyword\">new</span> Person(<span class=\"string\">'Wukong'</span>, <span class=\"number\">500</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name)  <span class=\"comment\">// Wukong</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.age)  <span class=\"comment\">// 500</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"返回对象\"><a href=\"#返回对象\" class=\"headerlink\" title=\"返回对象\"></a>返回对象</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        name: <span class=\"string\">'zhangsan'</span>,</span><br><span class=\"line\">        gender: <span class=\"string\">'female'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person = <span class=\"keyword\">new</span> Person(<span class=\"string\">'Wukong'</span>, <span class=\"number\">500</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name)  <span class=\"comment\">// zhangsan</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.age)  <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.gender)  <span class=\"comment\">// female</span></span><br></pre></td></tr></table></figure>\n<p>结合以上两种情况，对objectFactory方法进行更改，最终结果如下</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        name: <span class=\"string\">'zhangsan'</span>,</span><br><span class=\"line\">        gender: <span class=\"string\">'female'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">objectFactory</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 创建一个空对象</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\">    <span class=\"comment\">// 将类数组参数转为数组，并调用数组的shift方法 弹出第一个参数 此例为构造函数Person</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> Contructor = [].shift.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"comment\">// 将实例对象的__proto__属性指向构造函数的prototype原型 从而实现继承</span></span><br><span class=\"line\">    obj.__proto__ = Contructor.prototype</span><br><span class=\"line\">    <span class=\"comment\">// 执行构造函数 传递参数 改变this指向</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> returns = Contructor.apply(obj, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"comment\">// 判断返回的值类型 如果是对象，返回这个对象；如果没有，则返回创建的obj</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> returns === <span class=\"string\">'object'</span> ? returns : obj</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> person = objectFactory(Person, <span class=\"string\">'Wukong'</span>, <span class=\"number\">500</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name)  <span class=\"comment\">// zhangsan </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.age)  <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.gender)  <span class=\"comment\">// female</span></span><br></pre></td></tr></table></figure>"},{"title":"Diary【四】","date":"2021-04-09T06:05:25.000Z","_content":"\n### 对闭包的理解\n\n> 官方解释：闭包是一个拥有许多变量和绑定了这些变量的环境的表达式。\n> 社区：闭包是定义在一个函数内部可访问该函数内部局部变量的函数，作用就是让函数外部可以访问函数内部局部变量.\n\n设计闭包主要是为了实现私有变量和方法，可以避免全局污染。不过闭包会常驻内存，会增大内存使用量。\n特性：\n\n1. 函数嵌套函数。\n\n2. 函数内部可以引用函数外部的变量和方法。\n\n3. 变量不会被垃圾回收机制回收。\n\n\n### 判断对象为空\n\n转成json字符串\n\n```js\nalert(JSON.stringify(obj) === '{}')\n```\n\nfor in 循环\n\n```js\nconst isEmpty = (obj) => {\n    for(let item in obj) {\n        return false\n    } return true\n}\n```\n\nObject.getOwnPropertyNames()\n\n```js\nalert(Object.getOwnPropertyNames(obj).length === 0)\n```\n\nObject.keys()\n\n```js\nalert(Object.keys(obj).length === 0)\n```","source":"_posts/multiple-diary4.md","raw":"---\ntitle: Diary【四】\ndate: 2021-04-09 14:05:25\ntags:\n---\n\n### 对闭包的理解\n\n> 官方解释：闭包是一个拥有许多变量和绑定了这些变量的环境的表达式。\n> 社区：闭包是定义在一个函数内部可访问该函数内部局部变量的函数，作用就是让函数外部可以访问函数内部局部变量.\n\n设计闭包主要是为了实现私有变量和方法，可以避免全局污染。不过闭包会常驻内存，会增大内存使用量。\n特性：\n\n1. 函数嵌套函数。\n\n2. 函数内部可以引用函数外部的变量和方法。\n\n3. 变量不会被垃圾回收机制回收。\n\n\n### 判断对象为空\n\n转成json字符串\n\n```js\nalert(JSON.stringify(obj) === '{}')\n```\n\nfor in 循环\n\n```js\nconst isEmpty = (obj) => {\n    for(let item in obj) {\n        return false\n    } return true\n}\n```\n\nObject.getOwnPropertyNames()\n\n```js\nalert(Object.getOwnPropertyNames(obj).length === 0)\n```\n\nObject.keys()\n\n```js\nalert(Object.keys(obj).length === 0)\n```","slug":"multiple-diary4","published":1,"updated":"2021-04-11T09:32:11.487Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34da000cu66t7c2y9yzw","content":"<h3 id=\"对闭包的理解\"><a href=\"#对闭包的理解\" class=\"headerlink\" title=\"对闭包的理解\"></a>对闭包的理解</h3><blockquote>\n<p>官方解释：闭包是一个拥有许多变量和绑定了这些变量的环境的表达式。<br>社区：闭包是定义在一个函数内部可访问该函数内部局部变量的函数，作用就是让函数外部可以访问函数内部局部变量.</p>\n</blockquote>\n<p>设计闭包主要是为了实现私有变量和方法，可以避免全局污染。不过闭包会常驻内存，会增大内存使用量。<br>特性：</p>\n<ol>\n<li><p>函数嵌套函数。</p>\n</li>\n<li><p>函数内部可以引用函数外部的变量和方法。</p>\n</li>\n<li><p>变量不会被垃圾回收机制回收。</p>\n</li>\n</ol>\n<h3 id=\"判断对象为空\"><a href=\"#判断对象为空\" class=\"headerlink\" title=\"判断对象为空\"></a>判断对象为空</h3><p>转成json字符串</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alert(<span class=\"built_in\">JSON</span>.stringify(obj) === <span class=\"string\">'&#123;&#125;'</span>)</span><br></pre></td></tr></table></figure>\n<p>for in 循环</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> isEmpty = <span class=\"function\">(<span class=\"params\">obj</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> item <span class=\"keyword\">in</span> obj) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Object.getOwnPropertyNames()</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alert(<span class=\"built_in\">Object</span>.getOwnPropertyNames(obj).length === <span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n<p>Object.keys()</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alert(<span class=\"built_in\">Object</span>.keys(obj).length === <span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"对闭包的理解\"><a href=\"#对闭包的理解\" class=\"headerlink\" title=\"对闭包的理解\"></a>对闭包的理解</h3><blockquote>\n<p>官方解释：闭包是一个拥有许多变量和绑定了这些变量的环境的表达式。<br>社区：闭包是定义在一个函数内部可访问该函数内部局部变量的函数，作用就是让函数外部可以访问函数内部局部变量.</p>\n</blockquote>\n<p>设计闭包主要是为了实现私有变量和方法，可以避免全局污染。不过闭包会常驻内存，会增大内存使用量。<br>特性：</p>\n<ol>\n<li><p>函数嵌套函数。</p>\n</li>\n<li><p>函数内部可以引用函数外部的变量和方法。</p>\n</li>\n<li><p>变量不会被垃圾回收机制回收。</p>\n</li>\n</ol>\n<h3 id=\"判断对象为空\"><a href=\"#判断对象为空\" class=\"headerlink\" title=\"判断对象为空\"></a>判断对象为空</h3><p>转成json字符串</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alert(<span class=\"built_in\">JSON</span>.stringify(obj) === <span class=\"string\">'&#123;&#125;'</span>)</span><br></pre></td></tr></table></figure>\n<p>for in 循环</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> isEmpty = <span class=\"function\">(<span class=\"params\">obj</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> item <span class=\"keyword\">in</span> obj) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Object.getOwnPropertyNames()</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alert(<span class=\"built_in\">Object</span>.getOwnPropertyNames(obj).length === <span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n<p>Object.keys()</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alert(<span class=\"built_in\">Object</span>.keys(obj).length === <span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>"},{"title":"prepare","date":"2021-04-22T09:32:33.000Z","_content":"\n### 1. 盒子模型\n\n默认为 标准盒模型 - content-box\nW3C盒子模型（又叫标准盒模型），元素的宽高大小表现为 `内容content` 的大小 content-box\nIE盒子模型（又叫怪异盒子模型），元素的宽高大小表现为 `内容content` + `内边距padding` + `边框border` 的大小。背景颜色会延伸到边框的外沿。\n\n\n### 2. BFC(块级格式化上下文 Block Formatting Context)\n\nBFC是一个独立的布局环境，BFC内部的元素布局与外部互不影响.\n\n**布局规则**\n内部的box会在垂直方向一个一个放置；(即使不在BFC内，块级盒子也是这样排列的😆)\n属于同一个BFC内的两个box垂直方向上的margin会发生重叠；\nBFC的区域不会与float box重叠；\nBFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之亦然；\n计算BFC的高度时，浮动子元素也参与计算。\n\n**可解决的问题**\n\n<!-- More -->\n\n2.1 浮动元素令父元素高度塌陷\n\n```html\n.parent {\n    background: olive;\n}\n.child {\n    width: 200px;\n    height: 200px;\n    background: oldlace;\n    float: left;\n}\n\n<div class=\"parent\">\n    <div class=\"child\">child</div>\n</div>\n```\n效果：<img src=\"/assets/img/prepare/demo3.jpg\" style=\"width: 300px;\">\n\n方法：给父元素开启BFC, 比如加上overflow: hidden\n原理：计算BFC的高度时，浮动子元素也参与计算\n\n```html\n.parent {\n    background: olive;\n    overflow: hidden;\n}\n.child {\n    width: 200px;\n    height: 200px;\n    background: oldlace;\n    float: left;\n}\n```\n效果：<img src=\"/assets/img/prepare/demo4.jpg\" style=\"width: 300px;\">\n\n2.2 非浮动元素被浮动元素遮盖\n\n```html\n.box1 {\n    width: 200px;\n    height: 200px;\n    background: oldlace;\n    float: left;\n}\n.box2 {\n    width: 300px;\n    height: 300px;\n    background: olive;\n}\n\n<div class=\"box1\">box1</div>\n<div class=\"box2\">box2</div>\n```\n效果：<img src=\"/assets/img/prepare/demo1.jpg\" style=\"width: 300px;\">\n\n方法：将为浮动元素开启BFC, 比如加上overflow: hidden\n原理：BFC的区域不会与float box重叠\n\n```html\n.box1 {\n    width: 200px;\n    height: 200px;\n    background: oldlace;\n    float: left;\n}\n.box2 {\n    width: 300px;\n    height: 300px;\n    background: olive;\n    overflow: hidden;  // This line\n}\n```\n效果：<img src=\"/assets/img/prepare/demo2.jpg\" style=\"width: 300px;\">\n\n浮动的盒子会遮盖下面的盒子，但是下面盒子里的文字是不会被遮盖的，文字反而还会环绕浮动的盒子。将本例中box2里文字加多点，会有如下效果：\n<img src=\"/assets/img/prepare/demo9.jpg\" style=\"width: 300px;\">\n要去除这种环绕效果，只需开启box2的BFC（oveflow: hidden）即可。\n\n2.3 垂直方向上外边距重合的问题\n\n```html\n<style>\n    .box1 {\n        margin-bottom: 10px;\n        width: 200px;\n        height: 200px;\n        background: oldlace;\n    }\n    .box2 {\n        margin-top: 10px;\n        width: 300px;\n        height: 300px;\n        background: olive;\n    }\n    .box-outer {\n        overflow: hidden;\n    }\n</style>\n\n<div class=\"box1\">box1</div>\n<div class=\"box2\">box2</div>\n```\n效果：<img src=\"/assets/img/prepare/demo5.jpg\" style=\"width: 200px;\">\n实际上呈现的效果只有10px的间距。\n在常规文档流中，两个兄弟盒子之间的垂直距离是由他们的外边距所决定的，但不是他们的两个外边距之和，而是以较大的为准。\n\n方法：创建一个BFC，避免相邻两个div之间的margin重叠\n原理：BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之亦然\n\n```html\n<div class=\"box1\">box1</div>\n<div class=\"box-outer\">\n    <div class=\"box2\">box2</div>\n</div>\n```\n效果：<img src=\"/assets/img/prepare/demo6.jpg\" style=\"width: 200px;\">\n实际上呈现的效果变成了20px。\n\n2.4 实现两栏自适应布局（也可实现三栏布局）\n\n```html\n<style>\n    .box1 {\n        width: 200px;\n        height: 200px;\n        background: oldlace;\n    }\n    .box2 {\n        height: 300px;\n        background: olive;\n    }\n</style>\n\n<div class=\"box1\">box1</div>\n<div class=\"box2\">box2</div>\n```\n效果：<img src=\"/assets/img/prepare/demo7.jpg\" style=\"width: 300px;\">\n\n方法：左div设置左浮动，右div开启BFC\n原理：BFC的区域不会与float box重叠\n\n```html\n<style>\n    .box1 {\n        width: 200px;\n        height: 200px;\n        background: oldlace;\n    }\n    .box2 {\n        height: 300px;\n        background: olive;\n    }\n</style>\n```\n效果：<img src=\"/assets/img/prepare/demo8.jpg\" style=\"width: 300px;\">\n\n\n### 3. nth-child 和 nth-of-type\n\np:nth-child(n) 是选中父元素下的第N个元素，如果它不是p元素，则没有任何效果\np:nth-of-type(n) 是选中父元素下的第N个p`类型`元素\n\n```html\n<style>\n    .parent p:nth-child(2) {\n        /* 第二个不是p元素 没有任何效果 */\n        color: red;\n    }\n    .parent p:nth-child(4) {\n        /* 第四个是p元素 文字4呈现红色字体 */\n        color: red;  // 第四个是p元素 文字4呈现红色字体\n    }\n    .parent p:nth-of-type(2) {\n        /* parent下第二个p元素是text-4 呈现红色字体 */\n        color: red;\n    }\n\n    /* 不指定标签类型时 */\n    .parent :nth-child(2) {\n        /* parent下第二个元素是text-4 呈现红色字体 */\n        color: red;\n    }\n    .parent :nth-of-type(2) {\n        /* parent下第二个p元素是text-4 呈现红色字体；第二个h5元素是text-3 也呈现红色字体 */\n        color: red;\n    }\n</style>\n\n<div class=\"parent\">\n    <p>text-1</p>\n    <h5>text-2</h5>\n    <h5>text-3</h5>\n    <p>text-4</p>\n    <p>text-5</p>\n    <h5>text-6</h5>\n</div>\n```\n","source":"_posts/prepare.md","raw":"---\ntitle: prepare\ndate: 2021-04-22 17:32:33\ntags: 面试\n---\n\n### 1. 盒子模型\n\n默认为 标准盒模型 - content-box\nW3C盒子模型（又叫标准盒模型），元素的宽高大小表现为 `内容content` 的大小 content-box\nIE盒子模型（又叫怪异盒子模型），元素的宽高大小表现为 `内容content` + `内边距padding` + `边框border` 的大小。背景颜色会延伸到边框的外沿。\n\n\n### 2. BFC(块级格式化上下文 Block Formatting Context)\n\nBFC是一个独立的布局环境，BFC内部的元素布局与外部互不影响.\n\n**布局规则**\n内部的box会在垂直方向一个一个放置；(即使不在BFC内，块级盒子也是这样排列的😆)\n属于同一个BFC内的两个box垂直方向上的margin会发生重叠；\nBFC的区域不会与float box重叠；\nBFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之亦然；\n计算BFC的高度时，浮动子元素也参与计算。\n\n**可解决的问题**\n\n<!-- More -->\n\n2.1 浮动元素令父元素高度塌陷\n\n```html\n.parent {\n    background: olive;\n}\n.child {\n    width: 200px;\n    height: 200px;\n    background: oldlace;\n    float: left;\n}\n\n<div class=\"parent\">\n    <div class=\"child\">child</div>\n</div>\n```\n效果：<img src=\"/assets/img/prepare/demo3.jpg\" style=\"width: 300px;\">\n\n方法：给父元素开启BFC, 比如加上overflow: hidden\n原理：计算BFC的高度时，浮动子元素也参与计算\n\n```html\n.parent {\n    background: olive;\n    overflow: hidden;\n}\n.child {\n    width: 200px;\n    height: 200px;\n    background: oldlace;\n    float: left;\n}\n```\n效果：<img src=\"/assets/img/prepare/demo4.jpg\" style=\"width: 300px;\">\n\n2.2 非浮动元素被浮动元素遮盖\n\n```html\n.box1 {\n    width: 200px;\n    height: 200px;\n    background: oldlace;\n    float: left;\n}\n.box2 {\n    width: 300px;\n    height: 300px;\n    background: olive;\n}\n\n<div class=\"box1\">box1</div>\n<div class=\"box2\">box2</div>\n```\n效果：<img src=\"/assets/img/prepare/demo1.jpg\" style=\"width: 300px;\">\n\n方法：将为浮动元素开启BFC, 比如加上overflow: hidden\n原理：BFC的区域不会与float box重叠\n\n```html\n.box1 {\n    width: 200px;\n    height: 200px;\n    background: oldlace;\n    float: left;\n}\n.box2 {\n    width: 300px;\n    height: 300px;\n    background: olive;\n    overflow: hidden;  // This line\n}\n```\n效果：<img src=\"/assets/img/prepare/demo2.jpg\" style=\"width: 300px;\">\n\n浮动的盒子会遮盖下面的盒子，但是下面盒子里的文字是不会被遮盖的，文字反而还会环绕浮动的盒子。将本例中box2里文字加多点，会有如下效果：\n<img src=\"/assets/img/prepare/demo9.jpg\" style=\"width: 300px;\">\n要去除这种环绕效果，只需开启box2的BFC（oveflow: hidden）即可。\n\n2.3 垂直方向上外边距重合的问题\n\n```html\n<style>\n    .box1 {\n        margin-bottom: 10px;\n        width: 200px;\n        height: 200px;\n        background: oldlace;\n    }\n    .box2 {\n        margin-top: 10px;\n        width: 300px;\n        height: 300px;\n        background: olive;\n    }\n    .box-outer {\n        overflow: hidden;\n    }\n</style>\n\n<div class=\"box1\">box1</div>\n<div class=\"box2\">box2</div>\n```\n效果：<img src=\"/assets/img/prepare/demo5.jpg\" style=\"width: 200px;\">\n实际上呈现的效果只有10px的间距。\n在常规文档流中，两个兄弟盒子之间的垂直距离是由他们的外边距所决定的，但不是他们的两个外边距之和，而是以较大的为准。\n\n方法：创建一个BFC，避免相邻两个div之间的margin重叠\n原理：BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之亦然\n\n```html\n<div class=\"box1\">box1</div>\n<div class=\"box-outer\">\n    <div class=\"box2\">box2</div>\n</div>\n```\n效果：<img src=\"/assets/img/prepare/demo6.jpg\" style=\"width: 200px;\">\n实际上呈现的效果变成了20px。\n\n2.4 实现两栏自适应布局（也可实现三栏布局）\n\n```html\n<style>\n    .box1 {\n        width: 200px;\n        height: 200px;\n        background: oldlace;\n    }\n    .box2 {\n        height: 300px;\n        background: olive;\n    }\n</style>\n\n<div class=\"box1\">box1</div>\n<div class=\"box2\">box2</div>\n```\n效果：<img src=\"/assets/img/prepare/demo7.jpg\" style=\"width: 300px;\">\n\n方法：左div设置左浮动，右div开启BFC\n原理：BFC的区域不会与float box重叠\n\n```html\n<style>\n    .box1 {\n        width: 200px;\n        height: 200px;\n        background: oldlace;\n    }\n    .box2 {\n        height: 300px;\n        background: olive;\n    }\n</style>\n```\n效果：<img src=\"/assets/img/prepare/demo8.jpg\" style=\"width: 300px;\">\n\n\n### 3. nth-child 和 nth-of-type\n\np:nth-child(n) 是选中父元素下的第N个元素，如果它不是p元素，则没有任何效果\np:nth-of-type(n) 是选中父元素下的第N个p`类型`元素\n\n```html\n<style>\n    .parent p:nth-child(2) {\n        /* 第二个不是p元素 没有任何效果 */\n        color: red;\n    }\n    .parent p:nth-child(4) {\n        /* 第四个是p元素 文字4呈现红色字体 */\n        color: red;  // 第四个是p元素 文字4呈现红色字体\n    }\n    .parent p:nth-of-type(2) {\n        /* parent下第二个p元素是text-4 呈现红色字体 */\n        color: red;\n    }\n\n    /* 不指定标签类型时 */\n    .parent :nth-child(2) {\n        /* parent下第二个元素是text-4 呈现红色字体 */\n        color: red;\n    }\n    .parent :nth-of-type(2) {\n        /* parent下第二个p元素是text-4 呈现红色字体；第二个h5元素是text-3 也呈现红色字体 */\n        color: red;\n    }\n</style>\n\n<div class=\"parent\">\n    <p>text-1</p>\n    <h5>text-2</h5>\n    <h5>text-3</h5>\n    <p>text-4</p>\n    <p>text-5</p>\n    <h5>text-6</h5>\n</div>\n```\n","slug":"prepare","published":1,"updated":"2021-04-23T07:23:31.837Z","_id":"ckntq34dc000du66teuu3h45o","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"1-盒子模型\"><a href=\"#1-盒子模型\" class=\"headerlink\" title=\"1. 盒子模型\"></a>1. 盒子模型</h3><p>默认为 标准盒模型 - content-box<br>W3C盒子模型（又叫标准盒模型），元素的宽高大小表现为 <code>内容content</code> 的大小 content-box<br>IE盒子模型（又叫怪异盒子模型），元素的宽高大小表现为 <code>内容content</code> + <code>内边距padding</code> + <code>边框border</code> 的大小。背景颜色会延伸到边框的外沿。</p>\n<h3 id=\"2-BFC-块级格式化上下文-Block-Formatting-Context\"><a href=\"#2-BFC-块级格式化上下文-Block-Formatting-Context\" class=\"headerlink\" title=\"2. BFC(块级格式化上下文 Block Formatting Context)\"></a>2. BFC(块级格式化上下文 Block Formatting Context)</h3><p>BFC是一个独立的布局环境，BFC内部的元素布局与外部互不影响.</p>\n<p><strong>布局规则</strong><br>内部的box会在垂直方向一个一个放置；(即使不在BFC内，块级盒子也是这样排列的😆)<br>属于同一个BFC内的两个box垂直方向上的margin会发生重叠；<br>BFC的区域不会与float box重叠；<br>BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之亦然；<br>计算BFC的高度时，浮动子元素也参与计算。</p>\n<p><strong>可解决的问题</strong></p>\n<a id=\"more\"></a>\n<p>2.1 浮动元素令父元素高度塌陷</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.parent &#123;</span><br><span class=\"line\">    background: olive;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.child &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    background: oldlace;</span><br><span class=\"line\">    float: left;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"parent\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"child\"</span>&gt;</span>child<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo3.jpg\" style=\"width: 300px;\"></p>\n<p>方法：给父元素开启BFC, 比如加上overflow: hidden<br>原理：计算BFC的高度时，浮动子元素也参与计算</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.parent &#123;</span><br><span class=\"line\">    background: olive;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.child &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    background: oldlace;</span><br><span class=\"line\">    float: left;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo4.jpg\" style=\"width: 300px;\"></p>\n<p>2.2 非浮动元素被浮动元素遮盖</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.box1 &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    background: oldlace;</span><br><span class=\"line\">    float: left;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box2 &#123;</span><br><span class=\"line\">    width: 300px;</span><br><span class=\"line\">    height: 300px;</span><br><span class=\"line\">    background: olive;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box1\"</span>&gt;</span>box1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box2\"</span>&gt;</span>box2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo1.jpg\" style=\"width: 300px;\"></p>\n<p>方法：将为浮动元素开启BFC, 比如加上overflow: hidden<br>原理：BFC的区域不会与float box重叠</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.box1 &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    background: oldlace;</span><br><span class=\"line\">    float: left;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box2 &#123;</span><br><span class=\"line\">    width: 300px;</span><br><span class=\"line\">    height: 300px;</span><br><span class=\"line\">    background: olive;</span><br><span class=\"line\">    overflow: hidden;  // This line</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo2.jpg\" style=\"width: 300px;\"></p>\n<p>浮动的盒子会遮盖下面的盒子，但是下面盒子里的文字是不会被遮盖的，文字反而还会环绕浮动的盒子。将本例中box2里文字加多点，会有如下效果：<br><img src=\"/assets/img/prepare/demo9.jpg\" style=\"width: 300px;\"><br>要去除这种环绕效果，只需开启box2的BFC（oveflow: hidden）即可。</p>\n<p>2.3 垂直方向上外边距重合的问题</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    .box1 &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        margin-bottom: 10px;</span></span><br><span class=\"line\"><span class=\"undefined\">        width: 200px;</span></span><br><span class=\"line\"><span class=\"undefined\">        height: 200px;</span></span><br><span class=\"line\"><span class=\"undefined\">        background: oldlace;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .box2 &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        margin-top: 10px;</span></span><br><span class=\"line\"><span class=\"undefined\">        width: 300px;</span></span><br><span class=\"line\"><span class=\"undefined\">        height: 300px;</span></span><br><span class=\"line\"><span class=\"undefined\">        background: olive;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .box-outer &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        overflow: hidden;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box1\"</span>&gt;</span>box1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box2\"</span>&gt;</span>box2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo5.jpg\" style=\"width: 200px;\"><br>实际上呈现的效果只有10px的间距。<br>在常规文档流中，两个兄弟盒子之间的垂直距离是由他们的外边距所决定的，但不是他们的两个外边距之和，而是以较大的为准。</p>\n<p>方法：创建一个BFC，避免相邻两个div之间的margin重叠<br>原理：BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之亦然</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box1\"</span>&gt;</span>box1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box-outer\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box2\"</span>&gt;</span>box2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo6.jpg\" style=\"width: 200px;\"><br>实际上呈现的效果变成了20px。</p>\n<p>2.4 实现两栏自适应布局（也可实现三栏布局）</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    .box1 &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        width: 200px;</span></span><br><span class=\"line\"><span class=\"undefined\">        height: 200px;</span></span><br><span class=\"line\"><span class=\"undefined\">        background: oldlace;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .box2 &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        height: 300px;</span></span><br><span class=\"line\"><span class=\"undefined\">        background: olive;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box1\"</span>&gt;</span>box1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box2\"</span>&gt;</span>box2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo7.jpg\" style=\"width: 300px;\"></p>\n<p>方法：左div设置左浮动，右div开启BFC<br>原理：BFC的区域不会与float box重叠</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    .box1 &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        width: 200px;</span></span><br><span class=\"line\"><span class=\"undefined\">        height: 200px;</span></span><br><span class=\"line\"><span class=\"undefined\">        background: oldlace;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .box2 &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        height: 300px;</span></span><br><span class=\"line\"><span class=\"undefined\">        background: olive;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo8.jpg\" style=\"width: 300px;\"></p>\n<h3 id=\"3-nth-child-和-nth-of-type\"><a href=\"#3-nth-child-和-nth-of-type\" class=\"headerlink\" title=\"3. nth-child 和 nth-of-type\"></a>3. nth-child 和 nth-of-type</h3><p>p:nth-child(n) 是选中父元素下的第N个元素，如果它不是p元素，则没有任何效果<br>p:nth-of-type(n) 是选中父元素下的第N个p<code>类型</code>元素</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    .parent p:nth-child(2) &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        /* 第二个不是p元素 没有任何效果 */</span></span><br><span class=\"line\"><span class=\"undefined\">        color: red;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .parent p:nth-child(4) &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        /* 第四个是p元素 文字4呈现红色字体 */</span></span><br><span class=\"line\"><span class=\"undefined\">        color: red;  // 第四个是p元素 文字4呈现红色字体</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .parent p:nth-of-type(2) &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        /* parent下第二个p元素是text-4 呈现红色字体 */</span></span><br><span class=\"line\"><span class=\"undefined\">        color: red;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    /* 不指定标签类型时 */</span></span><br><span class=\"line\"><span class=\"undefined\">    .parent :nth-child(2) &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        /* parent下第二个元素是text-4 呈现红色字体 */</span></span><br><span class=\"line\"><span class=\"undefined\">        color: red;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .parent :nth-of-type(2) &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        /* parent下第二个p元素是text-4 呈现红色字体；第二个h5元素是text-3 也呈现红色字体 */</span></span><br><span class=\"line\"><span class=\"undefined\">        color: red;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"parent\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>text-1<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h5</span>&gt;</span>text-2<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h5</span>&gt;</span>text-3<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>text-4<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>text-5<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h5</span>&gt;</span>text-6<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<h3 id=\"1-盒子模型\"><a href=\"#1-盒子模型\" class=\"headerlink\" title=\"1. 盒子模型\"></a>1. 盒子模型</h3><p>默认为 标准盒模型 - content-box<br>W3C盒子模型（又叫标准盒模型），元素的宽高大小表现为 <code>内容content</code> 的大小 content-box<br>IE盒子模型（又叫怪异盒子模型），元素的宽高大小表现为 <code>内容content</code> + <code>内边距padding</code> + <code>边框border</code> 的大小。背景颜色会延伸到边框的外沿。</p>\n<h3 id=\"2-BFC-块级格式化上下文-Block-Formatting-Context\"><a href=\"#2-BFC-块级格式化上下文-Block-Formatting-Context\" class=\"headerlink\" title=\"2. BFC(块级格式化上下文 Block Formatting Context)\"></a>2. BFC(块级格式化上下文 Block Formatting Context)</h3><p>BFC是一个独立的布局环境，BFC内部的元素布局与外部互不影响.</p>\n<p><strong>布局规则</strong><br>内部的box会在垂直方向一个一个放置；(即使不在BFC内，块级盒子也是这样排列的😆)<br>属于同一个BFC内的两个box垂直方向上的margin会发生重叠；<br>BFC的区域不会与float box重叠；<br>BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之亦然；<br>计算BFC的高度时，浮动子元素也参与计算。</p>\n<p><strong>可解决的问题</strong></p>","more":"<p>2.1 浮动元素令父元素高度塌陷</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.parent &#123;</span><br><span class=\"line\">    background: olive;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.child &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    background: oldlace;</span><br><span class=\"line\">    float: left;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"parent\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"child\"</span>&gt;</span>child<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo3.jpg\" style=\"width: 300px;\"></p>\n<p>方法：给父元素开启BFC, 比如加上overflow: hidden<br>原理：计算BFC的高度时，浮动子元素也参与计算</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.parent &#123;</span><br><span class=\"line\">    background: olive;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.child &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    background: oldlace;</span><br><span class=\"line\">    float: left;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo4.jpg\" style=\"width: 300px;\"></p>\n<p>2.2 非浮动元素被浮动元素遮盖</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.box1 &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    background: oldlace;</span><br><span class=\"line\">    float: left;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box2 &#123;</span><br><span class=\"line\">    width: 300px;</span><br><span class=\"line\">    height: 300px;</span><br><span class=\"line\">    background: olive;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box1\"</span>&gt;</span>box1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box2\"</span>&gt;</span>box2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo1.jpg\" style=\"width: 300px;\"></p>\n<p>方法：将为浮动元素开启BFC, 比如加上overflow: hidden<br>原理：BFC的区域不会与float box重叠</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.box1 &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    background: oldlace;</span><br><span class=\"line\">    float: left;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box2 &#123;</span><br><span class=\"line\">    width: 300px;</span><br><span class=\"line\">    height: 300px;</span><br><span class=\"line\">    background: olive;</span><br><span class=\"line\">    overflow: hidden;  // This line</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo2.jpg\" style=\"width: 300px;\"></p>\n<p>浮动的盒子会遮盖下面的盒子，但是下面盒子里的文字是不会被遮盖的，文字反而还会环绕浮动的盒子。将本例中box2里文字加多点，会有如下效果：<br><img src=\"/assets/img/prepare/demo9.jpg\" style=\"width: 300px;\"><br>要去除这种环绕效果，只需开启box2的BFC（oveflow: hidden）即可。</p>\n<p>2.3 垂直方向上外边距重合的问题</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    .box1 &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        margin-bottom: 10px;</span></span><br><span class=\"line\"><span class=\"undefined\">        width: 200px;</span></span><br><span class=\"line\"><span class=\"undefined\">        height: 200px;</span></span><br><span class=\"line\"><span class=\"undefined\">        background: oldlace;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .box2 &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        margin-top: 10px;</span></span><br><span class=\"line\"><span class=\"undefined\">        width: 300px;</span></span><br><span class=\"line\"><span class=\"undefined\">        height: 300px;</span></span><br><span class=\"line\"><span class=\"undefined\">        background: olive;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .box-outer &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        overflow: hidden;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box1\"</span>&gt;</span>box1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box2\"</span>&gt;</span>box2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo5.jpg\" style=\"width: 200px;\"><br>实际上呈现的效果只有10px的间距。<br>在常规文档流中，两个兄弟盒子之间的垂直距离是由他们的外边距所决定的，但不是他们的两个外边距之和，而是以较大的为准。</p>\n<p>方法：创建一个BFC，避免相邻两个div之间的margin重叠<br>原理：BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之亦然</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box1\"</span>&gt;</span>box1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box-outer\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box2\"</span>&gt;</span>box2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo6.jpg\" style=\"width: 200px;\"><br>实际上呈现的效果变成了20px。</p>\n<p>2.4 实现两栏自适应布局（也可实现三栏布局）</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    .box1 &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        width: 200px;</span></span><br><span class=\"line\"><span class=\"undefined\">        height: 200px;</span></span><br><span class=\"line\"><span class=\"undefined\">        background: oldlace;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .box2 &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        height: 300px;</span></span><br><span class=\"line\"><span class=\"undefined\">        background: olive;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box1\"</span>&gt;</span>box1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box2\"</span>&gt;</span>box2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo7.jpg\" style=\"width: 300px;\"></p>\n<p>方法：左div设置左浮动，右div开启BFC<br>原理：BFC的区域不会与float box重叠</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    .box1 &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        width: 200px;</span></span><br><span class=\"line\"><span class=\"undefined\">        height: 200px;</span></span><br><span class=\"line\"><span class=\"undefined\">        background: oldlace;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .box2 &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        height: 300px;</span></span><br><span class=\"line\"><span class=\"undefined\">        background: olive;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>效果：<img src=\"/assets/img/prepare/demo8.jpg\" style=\"width: 300px;\"></p>\n<h3 id=\"3-nth-child-和-nth-of-type\"><a href=\"#3-nth-child-和-nth-of-type\" class=\"headerlink\" title=\"3. nth-child 和 nth-of-type\"></a>3. nth-child 和 nth-of-type</h3><p>p:nth-child(n) 是选中父元素下的第N个元素，如果它不是p元素，则没有任何效果<br>p:nth-of-type(n) 是选中父元素下的第N个p<code>类型</code>元素</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    .parent p:nth-child(2) &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        /* 第二个不是p元素 没有任何效果 */</span></span><br><span class=\"line\"><span class=\"undefined\">        color: red;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .parent p:nth-child(4) &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        /* 第四个是p元素 文字4呈现红色字体 */</span></span><br><span class=\"line\"><span class=\"undefined\">        color: red;  // 第四个是p元素 文字4呈现红色字体</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .parent p:nth-of-type(2) &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        /* parent下第二个p元素是text-4 呈现红色字体 */</span></span><br><span class=\"line\"><span class=\"undefined\">        color: red;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    /* 不指定标签类型时 */</span></span><br><span class=\"line\"><span class=\"undefined\">    .parent :nth-child(2) &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        /* parent下第二个元素是text-4 呈现红色字体 */</span></span><br><span class=\"line\"><span class=\"undefined\">        color: red;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    .parent :nth-of-type(2) &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        /* parent下第二个p元素是text-4 呈现红色字体；第二个h5元素是text-3 也呈现红色字体 */</span></span><br><span class=\"line\"><span class=\"undefined\">        color: red;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"parent\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>text-1<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h5</span>&gt;</span>text-2<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h5</span>&gt;</span>text-3<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>text-4<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>text-5<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h5</span>&gt;</span>text-6<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"title":"前端优化之Pre相关术语","date":"2020-09-09T06:00:56.000Z","_content":"\n### DNS prefetch\n\n用于告知浏览器预先获取指定的域名的DNS，以便在使用时可以减少DNS查找。\n\n```html\n<link rel=\"dns-prefetch\" href=\"//the-domain-to-be-prefetched.com\" />\n```\n\n<!-- more -->\n\n### preconnect 预连接\n\n预连接。和DNS Prefetch类似，但是，更进一步。它不仅要求浏览器预解析指定域名的DNS，还需要预先与服务器握手以及TLS协商（如果使用了HTTPS）。\n\n```html\n<link rel=\"preconnect\" href=\"//the-domain-to-be-preconnect.com\" crossorigin=\"anonymous\" />\n```\n\n### preload 预加载\n\n> link 元素的 rel 属性的属性值 preload 能够让你在你的HTML页面中 head 元素内部书写一些声明式的资源获取请求，可以指明哪些资源是在页面加载完成后即刻需要的。对于这种即刻需要的资源，你可能希望在页面加载的生命周期的早期阶段就开始获取，在浏览器的主渲染机制介入前就进行预加载。这一机制使得资源可以更早的得到加载并可用，且更不易阻塞页面的初步渲染，进而提升性能。\n\npreload 的资源会被优先加载，但不会阻塞doument的渲染以及页面的onload事件。一般用于对页面很重要的资源上，比如 `字体文件`。如果预加载进来的资源在3s内没有使用，浏览器会在控制台打印警告信息。\n\npreload有许多好处：\n\n- 更精确地优化资源加载优先级。\n- 匹配未来的加载需求，在适当的情况下，重复利用同一资源。\n- 为资源应用正确的内容安全策略。\n- 为资源设置正确的 Accept 请求头。\n\n预 prefetch 的区别\n\n- Prefetch的优先级很低，低到浏览器可以不加载\n- Preload的优先级很高，浏览器一定要加载\n- Preload加载的资源用于当前页面中\n- Prefetch加载的资源用于将来某个页面中（这意味着它可能压根不会被用到）\n\n#### 指定资源类型 as\n\n指定被预加载资源的类型。as属性值为css/script时，优先级很高。\n\n#### 跨域获取 crossOrigin\n\n如需加载跨域的资源列表，则需要正确设置CORS，接着便可以在 link 元素中设置好crossorigin属性即可。(由于历史原因，加载字体时，无论有没有跨域，都需要添加crossOrigin)\n\n```html\n<link rel=\"preload\" as=\"font\" type=\"font/woff2\" href=\"path/to/font\" crossOrigin>\n```\n\n#### 包含媒体 media\n\nlink 元素有一个很棒的特性是它们能够接受一个media属性。它们可以接受媒体类型或有效的媒体查询作为属性值，这将令你能够使用响应式的预加载！\n\n```html\n<link rel=\"preload\" href=\"bg-image-narrow.png\" as=\"image\" media=\"(max-width: 600px)\">\n<link rel=\"preload\" href=\"bg-image-wide.png\" as=\"image\" media=\"(min-width: 601px)\">\n```\n\n```js\nvar mediaQueryList = window.matchMedia(\"(max-width: 600px)\");\nvar header = document.querySelector('header');\n\nif(mediaQueryList.matches) {\n    header.style.backgroundImage = 'url(bg-image-narrow.png)';\n} else {\n    header.style.backgroundImage = 'url(bg-image-wide.png)';\n}\n```\n\n#### 脚本化预加载\n\n预加载\n\n```js\nvar preloadLink = document.createElement(\"link\");\npreloadLink.href = \"myscript.js\";\npreloadLink.rel = \"preload\";\npreloadLink.as = \"script\";\ndocument.head.appendChild(preloadLink);\n```\n\n执行\n\n```js\nvar preloadedScript = document.createElement(\"script\");\npreloadedScript.src = \"myscript.js\";\ndocument.body.appendChild(preloadedScript);\n```\n\n### prefetch 预获取\n\n关键字 prefetch 作为元素 link 的属性 rel 的值，是为了提示浏览器，用户未来的浏览有可能需要加载目标资源，所以浏览器有可能通过事先获取和缓存对应资源，优化用户体验。\n\n### prerender 预渲染\n\n> 与Prefetch类似，浏览器会下载整个资源，但是，Prefetch不允许浏览器对资源做预处理和执行，而Prerender则会告知浏览器，下载资源（HTML）并解析/执行它，包括被解析资源的子资源，这意味着会下载该HTML中的图片、样式、脚本等等。Prerender没有as属性，它下载的是HTML\n\n```html\n<link rel=\"prerender\" href=\"//the-domain-to-be-preconnect.com\" />\n```\n\n### subresource\n\n指定预加载资源拥有加载的最高优先级\n\n### script defer\n\n```js\n<script src=\"path/to/script.js\" defer></script>\n```\n\n加载后续文档元素的过程与 script.js 的加载并行进行（异步），但是 script.js 的执行要等到所有文档元素加载和解析之后，在 DOMContentLoaded 之前执行。\n\n### script async\n\n```js\n<script src=\"path/to/script.js\" async></script>\n```\n\n加载后续文档元素的过程与 script.js 的加载以及执行都并行进行（异步）。\n\n### script\n\n```js\n<script src=\"path/to/script.js\"></script>\n```\n\n浏览器会立即加载并执行 script.js. `立即` 指的是在渲染script标签之后（下）的文档元素之前，不等待标签之后的文档元素载入，读到了就开始加载并执行。\n\n附三种情形下的图示（ [图片来源](https://segmentfault.com/q/1010000000640869)）\n\n![差异对比图](/assets/img/script-render.png)\n\n### ES Module\n\n[详情参考](https://blog.shenfq.com/2019/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E4%BB%8A%E7%94%9F/)\n\n### 资料\n\n- [MDN](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Preloading_content)\n- [前端模块化的今生](https://blog.shenfq.com/2019/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E4%BB%8A%E7%94%9F/)","source":"_posts/preload-prefetch-async-defer.md","raw":"---\ntitle: 前端优化之Pre相关术语\ndate: 2020-09-09 14:00:56\ntags: 前端优化\n---\n\n### DNS prefetch\n\n用于告知浏览器预先获取指定的域名的DNS，以便在使用时可以减少DNS查找。\n\n```html\n<link rel=\"dns-prefetch\" href=\"//the-domain-to-be-prefetched.com\" />\n```\n\n<!-- more -->\n\n### preconnect 预连接\n\n预连接。和DNS Prefetch类似，但是，更进一步。它不仅要求浏览器预解析指定域名的DNS，还需要预先与服务器握手以及TLS协商（如果使用了HTTPS）。\n\n```html\n<link rel=\"preconnect\" href=\"//the-domain-to-be-preconnect.com\" crossorigin=\"anonymous\" />\n```\n\n### preload 预加载\n\n> link 元素的 rel 属性的属性值 preload 能够让你在你的HTML页面中 head 元素内部书写一些声明式的资源获取请求，可以指明哪些资源是在页面加载完成后即刻需要的。对于这种即刻需要的资源，你可能希望在页面加载的生命周期的早期阶段就开始获取，在浏览器的主渲染机制介入前就进行预加载。这一机制使得资源可以更早的得到加载并可用，且更不易阻塞页面的初步渲染，进而提升性能。\n\npreload 的资源会被优先加载，但不会阻塞doument的渲染以及页面的onload事件。一般用于对页面很重要的资源上，比如 `字体文件`。如果预加载进来的资源在3s内没有使用，浏览器会在控制台打印警告信息。\n\npreload有许多好处：\n\n- 更精确地优化资源加载优先级。\n- 匹配未来的加载需求，在适当的情况下，重复利用同一资源。\n- 为资源应用正确的内容安全策略。\n- 为资源设置正确的 Accept 请求头。\n\n预 prefetch 的区别\n\n- Prefetch的优先级很低，低到浏览器可以不加载\n- Preload的优先级很高，浏览器一定要加载\n- Preload加载的资源用于当前页面中\n- Prefetch加载的资源用于将来某个页面中（这意味着它可能压根不会被用到）\n\n#### 指定资源类型 as\n\n指定被预加载资源的类型。as属性值为css/script时，优先级很高。\n\n#### 跨域获取 crossOrigin\n\n如需加载跨域的资源列表，则需要正确设置CORS，接着便可以在 link 元素中设置好crossorigin属性即可。(由于历史原因，加载字体时，无论有没有跨域，都需要添加crossOrigin)\n\n```html\n<link rel=\"preload\" as=\"font\" type=\"font/woff2\" href=\"path/to/font\" crossOrigin>\n```\n\n#### 包含媒体 media\n\nlink 元素有一个很棒的特性是它们能够接受一个media属性。它们可以接受媒体类型或有效的媒体查询作为属性值，这将令你能够使用响应式的预加载！\n\n```html\n<link rel=\"preload\" href=\"bg-image-narrow.png\" as=\"image\" media=\"(max-width: 600px)\">\n<link rel=\"preload\" href=\"bg-image-wide.png\" as=\"image\" media=\"(min-width: 601px)\">\n```\n\n```js\nvar mediaQueryList = window.matchMedia(\"(max-width: 600px)\");\nvar header = document.querySelector('header');\n\nif(mediaQueryList.matches) {\n    header.style.backgroundImage = 'url(bg-image-narrow.png)';\n} else {\n    header.style.backgroundImage = 'url(bg-image-wide.png)';\n}\n```\n\n#### 脚本化预加载\n\n预加载\n\n```js\nvar preloadLink = document.createElement(\"link\");\npreloadLink.href = \"myscript.js\";\npreloadLink.rel = \"preload\";\npreloadLink.as = \"script\";\ndocument.head.appendChild(preloadLink);\n```\n\n执行\n\n```js\nvar preloadedScript = document.createElement(\"script\");\npreloadedScript.src = \"myscript.js\";\ndocument.body.appendChild(preloadedScript);\n```\n\n### prefetch 预获取\n\n关键字 prefetch 作为元素 link 的属性 rel 的值，是为了提示浏览器，用户未来的浏览有可能需要加载目标资源，所以浏览器有可能通过事先获取和缓存对应资源，优化用户体验。\n\n### prerender 预渲染\n\n> 与Prefetch类似，浏览器会下载整个资源，但是，Prefetch不允许浏览器对资源做预处理和执行，而Prerender则会告知浏览器，下载资源（HTML）并解析/执行它，包括被解析资源的子资源，这意味着会下载该HTML中的图片、样式、脚本等等。Prerender没有as属性，它下载的是HTML\n\n```html\n<link rel=\"prerender\" href=\"//the-domain-to-be-preconnect.com\" />\n```\n\n### subresource\n\n指定预加载资源拥有加载的最高优先级\n\n### script defer\n\n```js\n<script src=\"path/to/script.js\" defer></script>\n```\n\n加载后续文档元素的过程与 script.js 的加载并行进行（异步），但是 script.js 的执行要等到所有文档元素加载和解析之后，在 DOMContentLoaded 之前执行。\n\n### script async\n\n```js\n<script src=\"path/to/script.js\" async></script>\n```\n\n加载后续文档元素的过程与 script.js 的加载以及执行都并行进行（异步）。\n\n### script\n\n```js\n<script src=\"path/to/script.js\"></script>\n```\n\n浏览器会立即加载并执行 script.js. `立即` 指的是在渲染script标签之后（下）的文档元素之前，不等待标签之后的文档元素载入，读到了就开始加载并执行。\n\n附三种情形下的图示（ [图片来源](https://segmentfault.com/q/1010000000640869)）\n\n![差异对比图](/assets/img/script-render.png)\n\n### ES Module\n\n[详情参考](https://blog.shenfq.com/2019/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E4%BB%8A%E7%94%9F/)\n\n### 资料\n\n- [MDN](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Preloading_content)\n- [前端模块化的今生](https://blog.shenfq.com/2019/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E4%BB%8A%E7%94%9F/)","slug":"preload-prefetch-async-defer","published":1,"updated":"2020-09-09T09:26:20.782Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34df000fu66tsd4u122v","content":"<h3 id=\"DNS-prefetch\"><a href=\"#DNS-prefetch\" class=\"headerlink\" title=\"DNS prefetch\"></a>DNS prefetch</h3><p>用于告知浏览器预先获取指定的域名的DNS，以便在使用时可以减少DNS查找。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"dns-prefetch\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"//the-domain-to-be-prefetched.com\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h3 id=\"preconnect-预连接\"><a href=\"#preconnect-预连接\" class=\"headerlink\" title=\"preconnect 预连接\"></a>preconnect 预连接</h3><p>预连接。和DNS Prefetch类似，但是，更进一步。它不仅要求浏览器预解析指定域名的DNS，还需要预先与服务器握手以及TLS协商（如果使用了HTTPS）。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preconnect\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"//the-domain-to-be-preconnect.com\"</span> <span class=\"attr\">crossorigin</span>=<span class=\"string\">\"anonymous\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"preload-预加载\"><a href=\"#preload-预加载\" class=\"headerlink\" title=\"preload 预加载\"></a>preload 预加载</h3><blockquote>\n<p>link 元素的 rel 属性的属性值 preload 能够让你在你的HTML页面中 head 元素内部书写一些声明式的资源获取请求，可以指明哪些资源是在页面加载完成后即刻需要的。对于这种即刻需要的资源，你可能希望在页面加载的生命周期的早期阶段就开始获取，在浏览器的主渲染机制介入前就进行预加载。这一机制使得资源可以更早的得到加载并可用，且更不易阻塞页面的初步渲染，进而提升性能。</p>\n</blockquote>\n<p>preload 的资源会被优先加载，但不会阻塞doument的渲染以及页面的onload事件。一般用于对页面很重要的资源上，比如 <code>字体文件</code>。如果预加载进来的资源在3s内没有使用，浏览器会在控制台打印警告信息。</p>\n<p>preload有许多好处：</p>\n<ul>\n<li>更精确地优化资源加载优先级。</li>\n<li>匹配未来的加载需求，在适当的情况下，重复利用同一资源。</li>\n<li>为资源应用正确的内容安全策略。</li>\n<li>为资源设置正确的 Accept 请求头。</li>\n</ul>\n<p>预 prefetch 的区别</p>\n<ul>\n<li>Prefetch的优先级很低，低到浏览器可以不加载</li>\n<li>Preload的优先级很高，浏览器一定要加载</li>\n<li>Preload加载的资源用于当前页面中</li>\n<li>Prefetch加载的资源用于将来某个页面中（这意味着它可能压根不会被用到）</li>\n</ul>\n<h4 id=\"指定资源类型-as\"><a href=\"#指定资源类型-as\" class=\"headerlink\" title=\"指定资源类型 as\"></a>指定资源类型 as</h4><p>指定被预加载资源的类型。as属性值为css/script时，优先级很高。</p>\n<h4 id=\"跨域获取-crossOrigin\"><a href=\"#跨域获取-crossOrigin\" class=\"headerlink\" title=\"跨域获取 crossOrigin\"></a>跨域获取 crossOrigin</h4><p>如需加载跨域的资源列表，则需要正确设置CORS，接着便可以在 link 元素中设置好crossorigin属性即可。(由于历史原因，加载字体时，无论有没有跨域，都需要添加crossOrigin)</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"font\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"font/woff2\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"path/to/font\"</span> <span class=\"attr\">crossOrigin</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"包含媒体-media\"><a href=\"#包含媒体-media\" class=\"headerlink\" title=\"包含媒体 media\"></a>包含媒体 media</h4><p>link 元素有一个很棒的特性是它们能够接受一个media属性。它们可以接受媒体类型或有效的媒体查询作为属性值，这将令你能够使用响应式的预加载！</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"bg-image-narrow.png\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"image\"</span> <span class=\"attr\">media</span>=<span class=\"string\">\"(max-width: 600px)\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"bg-image-wide.png\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"image\"</span> <span class=\"attr\">media</span>=<span class=\"string\">\"(min-width: 601px)\"</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mediaQueryList = <span class=\"built_in\">window</span>.matchMedia(<span class=\"string\">\"(max-width: 600px)\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> header = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'header'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span>(mediaQueryList.matches) &#123;</span><br><span class=\"line\">    header.style.backgroundImage = <span class=\"string\">'url(bg-image-narrow.png)'</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    header.style.backgroundImage = <span class=\"string\">'url(bg-image-wide.png)'</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"脚本化预加载\"><a href=\"#脚本化预加载\" class=\"headerlink\" title=\"脚本化预加载\"></a>脚本化预加载</h4><p>预加载</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> preloadLink = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"link\"</span>);</span><br><span class=\"line\">preloadLink.href = <span class=\"string\">\"myscript.js\"</span>;</span><br><span class=\"line\">preloadLink.rel = <span class=\"string\">\"preload\"</span>;</span><br><span class=\"line\">preloadLink.as = <span class=\"string\">\"script\"</span>;</span><br><span class=\"line\"><span class=\"built_in\">document</span>.head.appendChild(preloadLink);</span><br></pre></td></tr></table></figure>\n<p>执行</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> preloadedScript = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"script\"</span>);</span><br><span class=\"line\">preloadedScript.src = <span class=\"string\">\"myscript.js\"</span>;</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(preloadedScript);</span><br></pre></td></tr></table></figure>\n<h3 id=\"prefetch-预获取\"><a href=\"#prefetch-预获取\" class=\"headerlink\" title=\"prefetch 预获取\"></a>prefetch 预获取</h3><p>关键字 prefetch 作为元素 link 的属性 rel 的值，是为了提示浏览器，用户未来的浏览有可能需要加载目标资源，所以浏览器有可能通过事先获取和缓存对应资源，优化用户体验。</p>\n<h3 id=\"prerender-预渲染\"><a href=\"#prerender-预渲染\" class=\"headerlink\" title=\"prerender 预渲染\"></a>prerender 预渲染</h3><blockquote>\n<p>与Prefetch类似，浏览器会下载整个资源，但是，Prefetch不允许浏览器对资源做预处理和执行，而Prerender则会告知浏览器，下载资源（HTML）并解析/执行它，包括被解析资源的子资源，这意味着会下载该HTML中的图片、样式、脚本等等。Prerender没有as属性，它下载的是HTML</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"prerender\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"//the-domain-to-be-preconnect.com\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"subresource\"><a href=\"#subresource\" class=\"headerlink\" title=\"subresource\"></a>subresource</h3><p>指定预加载资源拥有加载的最高优先级</p>\n<h3 id=\"script-defer\"><a href=\"#script-defer\" class=\"headerlink\" title=\"script defer\"></a>script defer</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=<span class=\"string\">\"path/to/script.js\"</span> defer&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p>加载后续文档元素的过程与 script.js 的加载并行进行（异步），但是 script.js 的执行要等到所有文档元素加载和解析之后，在 DOMContentLoaded 之前执行。</p>\n<h3 id=\"script-async\"><a href=\"#script-async\" class=\"headerlink\" title=\"script async\"></a>script async</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=<span class=\"string\">\"path/to/script.js\"</span> <span class=\"keyword\">async</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p>加载后续文档元素的过程与 script.js 的加载以及执行都并行进行（异步）。</p>\n<h3 id=\"script\"><a href=\"#script\" class=\"headerlink\" title=\"script\"></a>script</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=<span class=\"string\">\"path/to/script.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p>浏览器会立即加载并执行 script.js. <code>立即</code> 指的是在渲染script标签之后（下）的文档元素之前，不等待标签之后的文档元素载入，读到了就开始加载并执行。</p>\n<p>附三种情形下的图示（ <a href=\"https://segmentfault.com/q/1010000000640869\" target=\"_blank\" rel=\"noopener\">图片来源</a>）</p>\n<p><img src=\"/assets/img/script-render.png\" alt=\"差异对比图\"></p>\n<h3 id=\"ES-Module\"><a href=\"#ES-Module\" class=\"headerlink\" title=\"ES Module\"></a>ES Module</h3><p><a href=\"https://blog.shenfq.com/2019/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E4%BB%8A%E7%94%9F/\" target=\"_blank\" rel=\"noopener\">详情参考</a></p>\n<h3 id=\"资料\"><a href=\"#资料\" class=\"headerlink\" title=\"资料\"></a>资料</h3><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Preloading_content\" target=\"_blank\" rel=\"noopener\">MDN</a></li>\n<li><a href=\"https://blog.shenfq.com/2019/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E4%BB%8A%E7%94%9F/\" target=\"_blank\" rel=\"noopener\">前端模块化的今生</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"DNS-prefetch\"><a href=\"#DNS-prefetch\" class=\"headerlink\" title=\"DNS prefetch\"></a>DNS prefetch</h3><p>用于告知浏览器预先获取指定的域名的DNS，以便在使用时可以减少DNS查找。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"dns-prefetch\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"//the-domain-to-be-prefetched.com\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>","more":"<h3 id=\"preconnect-预连接\"><a href=\"#preconnect-预连接\" class=\"headerlink\" title=\"preconnect 预连接\"></a>preconnect 预连接</h3><p>预连接。和DNS Prefetch类似，但是，更进一步。它不仅要求浏览器预解析指定域名的DNS，还需要预先与服务器握手以及TLS协商（如果使用了HTTPS）。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preconnect\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"//the-domain-to-be-preconnect.com\"</span> <span class=\"attr\">crossorigin</span>=<span class=\"string\">\"anonymous\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"preload-预加载\"><a href=\"#preload-预加载\" class=\"headerlink\" title=\"preload 预加载\"></a>preload 预加载</h3><blockquote>\n<p>link 元素的 rel 属性的属性值 preload 能够让你在你的HTML页面中 head 元素内部书写一些声明式的资源获取请求，可以指明哪些资源是在页面加载完成后即刻需要的。对于这种即刻需要的资源，你可能希望在页面加载的生命周期的早期阶段就开始获取，在浏览器的主渲染机制介入前就进行预加载。这一机制使得资源可以更早的得到加载并可用，且更不易阻塞页面的初步渲染，进而提升性能。</p>\n</blockquote>\n<p>preload 的资源会被优先加载，但不会阻塞doument的渲染以及页面的onload事件。一般用于对页面很重要的资源上，比如 <code>字体文件</code>。如果预加载进来的资源在3s内没有使用，浏览器会在控制台打印警告信息。</p>\n<p>preload有许多好处：</p>\n<ul>\n<li>更精确地优化资源加载优先级。</li>\n<li>匹配未来的加载需求，在适当的情况下，重复利用同一资源。</li>\n<li>为资源应用正确的内容安全策略。</li>\n<li>为资源设置正确的 Accept 请求头。</li>\n</ul>\n<p>预 prefetch 的区别</p>\n<ul>\n<li>Prefetch的优先级很低，低到浏览器可以不加载</li>\n<li>Preload的优先级很高，浏览器一定要加载</li>\n<li>Preload加载的资源用于当前页面中</li>\n<li>Prefetch加载的资源用于将来某个页面中（这意味着它可能压根不会被用到）</li>\n</ul>\n<h4 id=\"指定资源类型-as\"><a href=\"#指定资源类型-as\" class=\"headerlink\" title=\"指定资源类型 as\"></a>指定资源类型 as</h4><p>指定被预加载资源的类型。as属性值为css/script时，优先级很高。</p>\n<h4 id=\"跨域获取-crossOrigin\"><a href=\"#跨域获取-crossOrigin\" class=\"headerlink\" title=\"跨域获取 crossOrigin\"></a>跨域获取 crossOrigin</h4><p>如需加载跨域的资源列表，则需要正确设置CORS，接着便可以在 link 元素中设置好crossorigin属性即可。(由于历史原因，加载字体时，无论有没有跨域，都需要添加crossOrigin)</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"font\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"font/woff2\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"path/to/font\"</span> <span class=\"attr\">crossOrigin</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"包含媒体-media\"><a href=\"#包含媒体-media\" class=\"headerlink\" title=\"包含媒体 media\"></a>包含媒体 media</h4><p>link 元素有一个很棒的特性是它们能够接受一个media属性。它们可以接受媒体类型或有效的媒体查询作为属性值，这将令你能够使用响应式的预加载！</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"bg-image-narrow.png\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"image\"</span> <span class=\"attr\">media</span>=<span class=\"string\">\"(max-width: 600px)\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"bg-image-wide.png\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"image\"</span> <span class=\"attr\">media</span>=<span class=\"string\">\"(min-width: 601px)\"</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mediaQueryList = <span class=\"built_in\">window</span>.matchMedia(<span class=\"string\">\"(max-width: 600px)\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> header = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'header'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span>(mediaQueryList.matches) &#123;</span><br><span class=\"line\">    header.style.backgroundImage = <span class=\"string\">'url(bg-image-narrow.png)'</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    header.style.backgroundImage = <span class=\"string\">'url(bg-image-wide.png)'</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"脚本化预加载\"><a href=\"#脚本化预加载\" class=\"headerlink\" title=\"脚本化预加载\"></a>脚本化预加载</h4><p>预加载</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> preloadLink = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"link\"</span>);</span><br><span class=\"line\">preloadLink.href = <span class=\"string\">\"myscript.js\"</span>;</span><br><span class=\"line\">preloadLink.rel = <span class=\"string\">\"preload\"</span>;</span><br><span class=\"line\">preloadLink.as = <span class=\"string\">\"script\"</span>;</span><br><span class=\"line\"><span class=\"built_in\">document</span>.head.appendChild(preloadLink);</span><br></pre></td></tr></table></figure>\n<p>执行</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> preloadedScript = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"script\"</span>);</span><br><span class=\"line\">preloadedScript.src = <span class=\"string\">\"myscript.js\"</span>;</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(preloadedScript);</span><br></pre></td></tr></table></figure>\n<h3 id=\"prefetch-预获取\"><a href=\"#prefetch-预获取\" class=\"headerlink\" title=\"prefetch 预获取\"></a>prefetch 预获取</h3><p>关键字 prefetch 作为元素 link 的属性 rel 的值，是为了提示浏览器，用户未来的浏览有可能需要加载目标资源，所以浏览器有可能通过事先获取和缓存对应资源，优化用户体验。</p>\n<h3 id=\"prerender-预渲染\"><a href=\"#prerender-预渲染\" class=\"headerlink\" title=\"prerender 预渲染\"></a>prerender 预渲染</h3><blockquote>\n<p>与Prefetch类似，浏览器会下载整个资源，但是，Prefetch不允许浏览器对资源做预处理和执行，而Prerender则会告知浏览器，下载资源（HTML）并解析/执行它，包括被解析资源的子资源，这意味着会下载该HTML中的图片、样式、脚本等等。Prerender没有as属性，它下载的是HTML</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"prerender\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"//the-domain-to-be-preconnect.com\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"subresource\"><a href=\"#subresource\" class=\"headerlink\" title=\"subresource\"></a>subresource</h3><p>指定预加载资源拥有加载的最高优先级</p>\n<h3 id=\"script-defer\"><a href=\"#script-defer\" class=\"headerlink\" title=\"script defer\"></a>script defer</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=<span class=\"string\">\"path/to/script.js\"</span> defer&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p>加载后续文档元素的过程与 script.js 的加载并行进行（异步），但是 script.js 的执行要等到所有文档元素加载和解析之后，在 DOMContentLoaded 之前执行。</p>\n<h3 id=\"script-async\"><a href=\"#script-async\" class=\"headerlink\" title=\"script async\"></a>script async</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=<span class=\"string\">\"path/to/script.js\"</span> <span class=\"keyword\">async</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p>加载后续文档元素的过程与 script.js 的加载以及执行都并行进行（异步）。</p>\n<h3 id=\"script\"><a href=\"#script\" class=\"headerlink\" title=\"script\"></a>script</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=<span class=\"string\">\"path/to/script.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p>浏览器会立即加载并执行 script.js. <code>立即</code> 指的是在渲染script标签之后（下）的文档元素之前，不等待标签之后的文档元素载入，读到了就开始加载并执行。</p>\n<p>附三种情形下的图示（ <a href=\"https://segmentfault.com/q/1010000000640869\" target=\"_blank\" rel=\"noopener\">图片来源</a>）</p>\n<p><img src=\"/assets/img/script-render.png\" alt=\"差异对比图\"></p>\n<h3 id=\"ES-Module\"><a href=\"#ES-Module\" class=\"headerlink\" title=\"ES Module\"></a>ES Module</h3><p><a href=\"https://blog.shenfq.com/2019/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E4%BB%8A%E7%94%9F/\" target=\"_blank\" rel=\"noopener\">详情参考</a></p>\n<h3 id=\"资料\"><a href=\"#资料\" class=\"headerlink\" title=\"资料\"></a>资料</h3><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Preloading_content\" target=\"_blank\" rel=\"noopener\">MDN</a></li>\n<li><a href=\"https://blog.shenfq.com/2019/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E4%BB%8A%E7%94%9F/\" target=\"_blank\" rel=\"noopener\">前端模块化的今生</a></li>\n</ul>"},{"title":"CSS文本超出容器宽度使用省略号代替（不考虑js方法）","date":"2019-03-31T16:00:00.000Z","_content":"\n#### 方法一 ：常规方法（适用于`webkit`内核浏览器）\n\n```html\n<div class=\"container text-ellipsis\">单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号</div>\n<div class=\"container text-ellipsis-multi\">多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号</div>\n```\n\n<!-- More -->\n\n```html\n.container {\n    display: inline-block;\n    width: 333px;\n    height: 60px;\n    font-size: 16px;\n    border: 1px solid #00bebe;\n}\n.text-ellipsis {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n.text-ellipsis-multi {\n    line-height: 20px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;  // 控制显示的行数\n    -webkit-box-orient: vertical;\n}\n```\n\n在`webkit`浏览器中的表现：![单行省略](/assets/img/webkit-single.jpg) ![多行省略](/assets/img/webkit-multi.jpg)\n\n### 方法二：利用伪类+`float`（适用于大部分浏览器）\n\n原理讲解参考[这里](https://juejin.im/post/5dc15b35f265da4d432a3d10)\n\n```html\n<div class=\"wrap\">\n    <div class=\"text\">多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号</div>\n</div>\n```\n\n```html\n.wrap {\n    background: #099;\n    max-height: 40px;\n    line-height: 20px;\n    overflow: hidden;\n}\n.wrap:before {\n    float: left;\n    content: '';\n    width: 20px;\n    height: 40px;\n}\n\n.wrap .text {\n    float: right;\n    width: 100%;\n    margin-left: -20px;\n    word-break: break-all;\n}\n.wrap:after {\n    float: right;\n    content: '...';\n    width: 20px;\n    height: 20px;\n    <!-- 下方三行代码 调整省略号位置 -->\n    <!-- 未超出时，省略号在wrap外面，被隐藏 -->\n    position: relative;\n    left: 100%;\n    transform: translate(-100%, -100%);\n}\n```\n\n在`非webkit`内核浏览器中的表现：![非webkit浏览器多行省略](/assets/img/unwebkit-multi.jpg)\n\n可以看到效果还是不那么尽人意，可以在此基础上再根据实际情况修改相应代码，比如`...`用渐变色代替现在的白色，会显得平滑。另外，也可以搭配js进一步处理，可以参考[这里](https://blog.csdn.net/lhban108/article/details/82757564)。 也可使用封装好的 [vue组件](https://github.com/xm2by/multiline-ellipsis) 。\n\n更详细的文章参考[这里](https://juejin.im/post/5dc15b35f265da4d432a3d10)。","source":"_posts/text-overflow-ellipsis.md","raw":"---\ntitle: CSS文本超出容器宽度使用省略号代替（不考虑js方法）\ndate: 2019-04-01\ntags: [ellipsis, 换行, 省略号]\n---\n\n#### 方法一 ：常规方法（适用于`webkit`内核浏览器）\n\n```html\n<div class=\"container text-ellipsis\">单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号</div>\n<div class=\"container text-ellipsis-multi\">多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号</div>\n```\n\n<!-- More -->\n\n```html\n.container {\n    display: inline-block;\n    width: 333px;\n    height: 60px;\n    font-size: 16px;\n    border: 1px solid #00bebe;\n}\n.text-ellipsis {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n.text-ellipsis-multi {\n    line-height: 20px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;  // 控制显示的行数\n    -webkit-box-orient: vertical;\n}\n```\n\n在`webkit`浏览器中的表现：![单行省略](/assets/img/webkit-single.jpg) ![多行省略](/assets/img/webkit-multi.jpg)\n\n### 方法二：利用伪类+`float`（适用于大部分浏览器）\n\n原理讲解参考[这里](https://juejin.im/post/5dc15b35f265da4d432a3d10)\n\n```html\n<div class=\"wrap\">\n    <div class=\"text\">多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号</div>\n</div>\n```\n\n```html\n.wrap {\n    background: #099;\n    max-height: 40px;\n    line-height: 20px;\n    overflow: hidden;\n}\n.wrap:before {\n    float: left;\n    content: '';\n    width: 20px;\n    height: 40px;\n}\n\n.wrap .text {\n    float: right;\n    width: 100%;\n    margin-left: -20px;\n    word-break: break-all;\n}\n.wrap:after {\n    float: right;\n    content: '...';\n    width: 20px;\n    height: 20px;\n    <!-- 下方三行代码 调整省略号位置 -->\n    <!-- 未超出时，省略号在wrap外面，被隐藏 -->\n    position: relative;\n    left: 100%;\n    transform: translate(-100%, -100%);\n}\n```\n\n在`非webkit`内核浏览器中的表现：![非webkit浏览器多行省略](/assets/img/unwebkit-multi.jpg)\n\n可以看到效果还是不那么尽人意，可以在此基础上再根据实际情况修改相应代码，比如`...`用渐变色代替现在的白色，会显得平滑。另外，也可以搭配js进一步处理，可以参考[这里](https://blog.csdn.net/lhban108/article/details/82757564)。 也可使用封装好的 [vue组件](https://github.com/xm2by/multiline-ellipsis) 。\n\n更详细的文章参考[这里](https://juejin.im/post/5dc15b35f265da4d432a3d10)。","slug":"text-overflow-ellipsis","published":1,"updated":"2019-12-02T07:34:04.083Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34dg000hu66tququtn9r","content":"<h4 id=\"方法一-：常规方法（适用于webkit内核浏览器）\"><a href=\"#方法一-：常规方法（适用于webkit内核浏览器）\" class=\"headerlink\" title=\"方法一 ：常规方法（适用于webkit内核浏览器）\"></a>方法一 ：常规方法（适用于<code>webkit</code>内核浏览器）</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"container text-ellipsis\"</span>&gt;</span>单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"container text-ellipsis-multi\"</span>&gt;</span>多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.container &#123;</span><br><span class=\"line\">    display: inline-block;</span><br><span class=\"line\">    width: 333px;</span><br><span class=\"line\">    height: 60px;</span><br><span class=\"line\">    font-size: 16px;</span><br><span class=\"line\">    border: 1px solid #00bebe;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-ellipsis &#123;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">    text-overflow: ellipsis;</span><br><span class=\"line\">    white-space: nowrap;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-ellipsis-multi &#123;</span><br><span class=\"line\">    line-height: 20px;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">    text-overflow: ellipsis;</span><br><span class=\"line\">    display: -webkit-box;</span><br><span class=\"line\">    -webkit-line-clamp: 3;  // 控制显示的行数</span><br><span class=\"line\">    -webkit-box-orient: vertical;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>webkit</code>浏览器中的表现：<img src=\"/assets/img/webkit-single.jpg\" alt=\"单行省略\"> <img src=\"/assets/img/webkit-multi.jpg\" alt=\"多行省略\"></p>\n<h3 id=\"方法二：利用伪类-float（适用于大部分浏览器）\"><a href=\"#方法二：利用伪类-float（适用于大部分浏览器）\" class=\"headerlink\" title=\"方法二：利用伪类+float（适用于大部分浏览器）\"></a>方法二：利用伪类+<code>float</code>（适用于大部分浏览器）</h3><p>原理讲解参考<a href=\"https://juejin.im/post/5dc15b35f265da4d432a3d10\" target=\"_blank\" rel=\"noopener\">这里</a></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"text\"</span>&gt;</span>多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.wrap &#123;</span><br><span class=\"line\">    background: #099;</span><br><span class=\"line\">    max-height: 40px;</span><br><span class=\"line\">    line-height: 20px;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.wrap:before &#123;</span><br><span class=\"line\">    float: left;</span><br><span class=\"line\">    content: '';</span><br><span class=\"line\">    width: 20px;</span><br><span class=\"line\">    height: 40px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.wrap .text &#123;</span><br><span class=\"line\">    float: right;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    margin-left: -20px;</span><br><span class=\"line\">    word-break: break-all;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.wrap:after &#123;</span><br><span class=\"line\">    float: right;</span><br><span class=\"line\">    content: '...';</span><br><span class=\"line\">    width: 20px;</span><br><span class=\"line\">    height: 20px;</span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 下方三行代码 调整省略号位置 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 未超出时，省略号在wrap外面，被隐藏 --&gt;</span></span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\">    left: 100%;</span><br><span class=\"line\">    transform: translate(-100%, -100%);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>非webkit</code>内核浏览器中的表现：<img src=\"/assets/img/unwebkit-multi.jpg\" alt=\"非webkit浏览器多行省略\"></p>\n<p>可以看到效果还是不那么尽人意，可以在此基础上再根据实际情况修改相应代码，比如<code>...</code>用渐变色代替现在的白色，会显得平滑。另外，也可以搭配js进一步处理，可以参考<a href=\"https://blog.csdn.net/lhban108/article/details/82757564\" target=\"_blank\" rel=\"noopener\">这里</a>。 也可使用封装好的 <a href=\"https://github.com/xm2by/multiline-ellipsis\" target=\"_blank\" rel=\"noopener\">vue组件</a> 。</p>\n<p>更详细的文章参考<a href=\"https://juejin.im/post/5dc15b35f265da4d432a3d10\" target=\"_blank\" rel=\"noopener\">这里</a>。</p>\n","site":{"data":{}},"excerpt":"<h4 id=\"方法一-：常规方法（适用于webkit内核浏览器）\"><a href=\"#方法一-：常规方法（适用于webkit内核浏览器）\" class=\"headerlink\" title=\"方法一 ：常规方法（适用于webkit内核浏览器）\"></a>方法一 ：常规方法（适用于<code>webkit</code>内核浏览器）</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"container text-ellipsis\"</span>&gt;</span>单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号单行文字超出省略号<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"container text-ellipsis-multi\"</span>&gt;</span>多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>","more":"<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.container &#123;</span><br><span class=\"line\">    display: inline-block;</span><br><span class=\"line\">    width: 333px;</span><br><span class=\"line\">    height: 60px;</span><br><span class=\"line\">    font-size: 16px;</span><br><span class=\"line\">    border: 1px solid #00bebe;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-ellipsis &#123;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">    text-overflow: ellipsis;</span><br><span class=\"line\">    white-space: nowrap;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-ellipsis-multi &#123;</span><br><span class=\"line\">    line-height: 20px;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">    text-overflow: ellipsis;</span><br><span class=\"line\">    display: -webkit-box;</span><br><span class=\"line\">    -webkit-line-clamp: 3;  // 控制显示的行数</span><br><span class=\"line\">    -webkit-box-orient: vertical;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>webkit</code>浏览器中的表现：<img src=\"/assets/img/webkit-single.jpg\" alt=\"单行省略\"> <img src=\"/assets/img/webkit-multi.jpg\" alt=\"多行省略\"></p>\n<h3 id=\"方法二：利用伪类-float（适用于大部分浏览器）\"><a href=\"#方法二：利用伪类-float（适用于大部分浏览器）\" class=\"headerlink\" title=\"方法二：利用伪类+float（适用于大部分浏览器）\"></a>方法二：利用伪类+<code>float</code>（适用于大部分浏览器）</h3><p>原理讲解参考<a href=\"https://juejin.im/post/5dc15b35f265da4d432a3d10\" target=\"_blank\" rel=\"noopener\">这里</a></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"text\"</span>&gt;</span>多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号多行文字超出省略号<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.wrap &#123;</span><br><span class=\"line\">    background: #099;</span><br><span class=\"line\">    max-height: 40px;</span><br><span class=\"line\">    line-height: 20px;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.wrap:before &#123;</span><br><span class=\"line\">    float: left;</span><br><span class=\"line\">    content: '';</span><br><span class=\"line\">    width: 20px;</span><br><span class=\"line\">    height: 40px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.wrap .text &#123;</span><br><span class=\"line\">    float: right;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    margin-left: -20px;</span><br><span class=\"line\">    word-break: break-all;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.wrap:after &#123;</span><br><span class=\"line\">    float: right;</span><br><span class=\"line\">    content: '...';</span><br><span class=\"line\">    width: 20px;</span><br><span class=\"line\">    height: 20px;</span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 下方三行代码 调整省略号位置 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 未超出时，省略号在wrap外面，被隐藏 --&gt;</span></span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\">    left: 100%;</span><br><span class=\"line\">    transform: translate(-100%, -100%);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在<code>非webkit</code>内核浏览器中的表现：<img src=\"/assets/img/unwebkit-multi.jpg\" alt=\"非webkit浏览器多行省略\"></p>\n<p>可以看到效果还是不那么尽人意，可以在此基础上再根据实际情况修改相应代码，比如<code>...</code>用渐变色代替现在的白色，会显得平滑。另外，也可以搭配js进一步处理，可以参考<a href=\"https://blog.csdn.net/lhban108/article/details/82757564\" target=\"_blank\" rel=\"noopener\">这里</a>。 也可使用封装好的 <a href=\"https://github.com/xm2by/multiline-ellipsis\" target=\"_blank\" rel=\"noopener\">vue组件</a> 。</p>\n<p>更详细的文章参考<a href=\"https://juejin.im/post/5dc15b35f265da4d432a3d10\" target=\"_blank\" rel=\"noopener\">这里</a>。</p>"},{"title":"移动端真机调试 spy-debugger","date":"2019-07-15T08:53:26.000Z","_content":"\n### 关于spy-debugger\n\n一站式页面调试、抓包工具。远程调试任何手机浏览器页面，任何手机移动端`webview`（如：微信，HybridApp等）。支持H`TTP/HTTPS`，无需USB连接设备。\n\n### 特性\n\n1、页面调试＋抓包\n2、操作简单，无需USB连接设备\n3、支持HTTPS。\n4、spy-debugger内部集成了weinre、node-mitmproxy、AnyProxy。\n5、自动忽略原生App发起的https请求，只拦截webview发起的https请求。对使用了SSL pinning技术的原生App不造成任何影响。\n6、可以配合其它代理工具一起使用(默认使用AnyProxy) (设置外部代理)\n\n<!-- More -->\n\n### 安装\n\n```bash\n[sudo] npm install spy-debugger -g\n```\n\n### 三分钟上手\n\n第一步：手机和PC保持在同一网络下（比如同时连到一个Wi-Fi下）\n第二步：命令行输入spy-debugger，按命令行提示用浏览器打开相应地址。\n第三步：设置手机的HTTP代理，代理IP地址设置为PC的IP地址，端口为spy-debugger的启动端口(默认端口：9888)。\n\nAndroid设置代理步骤：设置 - WLAN - 长按选中网络 - 修改网络 - 高级 - 代理设置 - 手动\niOS设置代理步骤：设置 - 无线局域网 - 选中网络 - HTTP代理手动\n\n第四步：手机安装证书。\n\n`spy-debugger initCA` 会将证书放置到系统根目录node-mitmproxy文件夹。\nMac\t如：/users/yourName/node-mitmproxy\nWindows 如：C/users/yourName/node-mitmproxy\n将文件夹下的node-mitmproxy.ca.crt到手机上安装\n\n第五步：用手机浏览器访问你要调试的页面即可。\n\n### 效果截图\n![PC端调试界面](/assets/img/spy-debugger.jpg)\n![移动端界面](/assets/img/mobile-effect-snap.jpeg)\n\n\n### 自定义选项\n\n#### 端口(默认端口9888)\n\n```js\nspy-debugger -p 9999\n```\n\n#### 设置外部代理（默认使用AnyProxy）\n\n```js\nspy-debugger -e http://127.0.0.1:8888\n```\n\n#### 设置页面内容为可编辑模式（默认false）\n\n```js\nspy-debugger -w true\n```\n\n该功能使页面内容修改更加直观方便。内部实现原理：在需要调试的页面内注入代码：document.body.contentEditable=true。暂不支持使用了iscroll框架的页面。\n\n#### 是否允许weinre监控iframe加载的页面(默认false)\n\n```js\nspy-debugger -i true\n```\n\n#### 是否只拦截浏览器发起的https请求（默认true）\n\n```js\nspy-debugger -b false\n```\n\n#### 是否允许HTTP缓存(默认false)\n\n```js\nspy-debugger -c true\n```\n\n","source":"_posts/spy-debugger.md","raw":"---\ntitle: 移动端真机调试 spy-debugger\ndate: 2019-07-15 16:53:26\ntags:\n---\n\n### 关于spy-debugger\n\n一站式页面调试、抓包工具。远程调试任何手机浏览器页面，任何手机移动端`webview`（如：微信，HybridApp等）。支持H`TTP/HTTPS`，无需USB连接设备。\n\n### 特性\n\n1、页面调试＋抓包\n2、操作简单，无需USB连接设备\n3、支持HTTPS。\n4、spy-debugger内部集成了weinre、node-mitmproxy、AnyProxy。\n5、自动忽略原生App发起的https请求，只拦截webview发起的https请求。对使用了SSL pinning技术的原生App不造成任何影响。\n6、可以配合其它代理工具一起使用(默认使用AnyProxy) (设置外部代理)\n\n<!-- More -->\n\n### 安装\n\n```bash\n[sudo] npm install spy-debugger -g\n```\n\n### 三分钟上手\n\n第一步：手机和PC保持在同一网络下（比如同时连到一个Wi-Fi下）\n第二步：命令行输入spy-debugger，按命令行提示用浏览器打开相应地址。\n第三步：设置手机的HTTP代理，代理IP地址设置为PC的IP地址，端口为spy-debugger的启动端口(默认端口：9888)。\n\nAndroid设置代理步骤：设置 - WLAN - 长按选中网络 - 修改网络 - 高级 - 代理设置 - 手动\niOS设置代理步骤：设置 - 无线局域网 - 选中网络 - HTTP代理手动\n\n第四步：手机安装证书。\n\n`spy-debugger initCA` 会将证书放置到系统根目录node-mitmproxy文件夹。\nMac\t如：/users/yourName/node-mitmproxy\nWindows 如：C/users/yourName/node-mitmproxy\n将文件夹下的node-mitmproxy.ca.crt到手机上安装\n\n第五步：用手机浏览器访问你要调试的页面即可。\n\n### 效果截图\n![PC端调试界面](/assets/img/spy-debugger.jpg)\n![移动端界面](/assets/img/mobile-effect-snap.jpeg)\n\n\n### 自定义选项\n\n#### 端口(默认端口9888)\n\n```js\nspy-debugger -p 9999\n```\n\n#### 设置外部代理（默认使用AnyProxy）\n\n```js\nspy-debugger -e http://127.0.0.1:8888\n```\n\n#### 设置页面内容为可编辑模式（默认false）\n\n```js\nspy-debugger -w true\n```\n\n该功能使页面内容修改更加直观方便。内部实现原理：在需要调试的页面内注入代码：document.body.contentEditable=true。暂不支持使用了iscroll框架的页面。\n\n#### 是否允许weinre监控iframe加载的页面(默认false)\n\n```js\nspy-debugger -i true\n```\n\n#### 是否只拦截浏览器发起的https请求（默认true）\n\n```js\nspy-debugger -b false\n```\n\n#### 是否允许HTTP缓存(默认false)\n\n```js\nspy-debugger -c true\n```\n\n","slug":"spy-debugger","published":1,"updated":"2020-01-02T07:38:21.656Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34di000ku66tyntrl32c","content":"<h3 id=\"关于spy-debugger\"><a href=\"#关于spy-debugger\" class=\"headerlink\" title=\"关于spy-debugger\"></a>关于spy-debugger</h3><p>一站式页面调试、抓包工具。远程调试任何手机浏览器页面，任何手机移动端<code>webview</code>（如：微信，HybridApp等）。支持H<code>TTP/HTTPS</code>，无需USB连接设备。</p>\n<h3 id=\"特性\"><a href=\"#特性\" class=\"headerlink\" title=\"特性\"></a>特性</h3><p>1、页面调试＋抓包<br>2、操作简单，无需USB连接设备<br>3、支持HTTPS。<br>4、spy-debugger内部集成了weinre、node-mitmproxy、AnyProxy。<br>5、自动忽略原生App发起的https请求，只拦截webview发起的https请求。对使用了SSL pinning技术的原生App不造成任何影响。<br>6、可以配合其它代理工具一起使用(默认使用AnyProxy) (设置外部代理)</p>\n<a id=\"more\"></a>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[sudo] npm install spy-debugger -g</span><br></pre></td></tr></table></figure>\n<h3 id=\"三分钟上手\"><a href=\"#三分钟上手\" class=\"headerlink\" title=\"三分钟上手\"></a>三分钟上手</h3><p>第一步：手机和PC保持在同一网络下（比如同时连到一个Wi-Fi下）<br>第二步：命令行输入spy-debugger，按命令行提示用浏览器打开相应地址。<br>第三步：设置手机的HTTP代理，代理IP地址设置为PC的IP地址，端口为spy-debugger的启动端口(默认端口：9888)。</p>\n<p>Android设置代理步骤：设置 - WLAN - 长按选中网络 - 修改网络 - 高级 - 代理设置 - 手动<br>iOS设置代理步骤：设置 - 无线局域网 - 选中网络 - HTTP代理手动</p>\n<p>第四步：手机安装证书。</p>\n<p><code>spy-debugger initCA</code> 会将证书放置到系统根目录node-mitmproxy文件夹。<br>Mac    如：/users/yourName/node-mitmproxy<br>Windows 如：C/users/yourName/node-mitmproxy<br>将文件夹下的node-mitmproxy.ca.crt到手机上安装</p>\n<p>第五步：用手机浏览器访问你要调试的页面即可。</p>\n<h3 id=\"效果截图\"><a href=\"#效果截图\" class=\"headerlink\" title=\"效果截图\"></a>效果截图</h3><p><img src=\"/assets/img/spy-debugger.jpg\" alt=\"PC端调试界面\"><br><img src=\"/assets/img/mobile-effect-snap.jpeg\" alt=\"移动端界面\"></p>\n<h3 id=\"自定义选项\"><a href=\"#自定义选项\" class=\"headerlink\" title=\"自定义选项\"></a>自定义选项</h3><h4 id=\"端口-默认端口9888\"><a href=\"#端口-默认端口9888\" class=\"headerlink\" title=\"端口(默认端口9888)\"></a>端口(默认端口9888)</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spy-<span class=\"keyword\">debugger</span> -p <span class=\"number\">9999</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"设置外部代理（默认使用AnyProxy）\"><a href=\"#设置外部代理（默认使用AnyProxy）\" class=\"headerlink\" title=\"设置外部代理（默认使用AnyProxy）\"></a>设置外部代理（默认使用AnyProxy）</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spy-<span class=\"keyword\">debugger</span> -e http:<span class=\"comment\">//127.0.0.1:8888</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"设置页面内容为可编辑模式（默认false）\"><a href=\"#设置页面内容为可编辑模式（默认false）\" class=\"headerlink\" title=\"设置页面内容为可编辑模式（默认false）\"></a>设置页面内容为可编辑模式（默认false）</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spy-<span class=\"keyword\">debugger</span> -w <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>该功能使页面内容修改更加直观方便。内部实现原理：在需要调试的页面内注入代码：document.body.contentEditable=true。暂不支持使用了iscroll框架的页面。</p>\n<h4 id=\"是否允许weinre监控iframe加载的页面-默认false\"><a href=\"#是否允许weinre监控iframe加载的页面-默认false\" class=\"headerlink\" title=\"是否允许weinre监控iframe加载的页面(默认false)\"></a>是否允许weinre监控iframe加载的页面(默认false)</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spy-<span class=\"keyword\">debugger</span> -i <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"是否只拦截浏览器发起的https请求（默认true）\"><a href=\"#是否只拦截浏览器发起的https请求（默认true）\" class=\"headerlink\" title=\"是否只拦截浏览器发起的https请求（默认true）\"></a>是否只拦截浏览器发起的https请求（默认true）</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spy-<span class=\"keyword\">debugger</span> -b <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"是否允许HTTP缓存-默认false\"><a href=\"#是否允许HTTP缓存-默认false\" class=\"headerlink\" title=\"是否允许HTTP缓存(默认false)\"></a>是否允许HTTP缓存(默认false)</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spy-<span class=\"keyword\">debugger</span> -c <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<h3 id=\"关于spy-debugger\"><a href=\"#关于spy-debugger\" class=\"headerlink\" title=\"关于spy-debugger\"></a>关于spy-debugger</h3><p>一站式页面调试、抓包工具。远程调试任何手机浏览器页面，任何手机移动端<code>webview</code>（如：微信，HybridApp等）。支持H<code>TTP/HTTPS</code>，无需USB连接设备。</p>\n<h3 id=\"特性\"><a href=\"#特性\" class=\"headerlink\" title=\"特性\"></a>特性</h3><p>1、页面调试＋抓包<br>2、操作简单，无需USB连接设备<br>3、支持HTTPS。<br>4、spy-debugger内部集成了weinre、node-mitmproxy、AnyProxy。<br>5、自动忽略原生App发起的https请求，只拦截webview发起的https请求。对使用了SSL pinning技术的原生App不造成任何影响。<br>6、可以配合其它代理工具一起使用(默认使用AnyProxy) (设置外部代理)</p>","more":"<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[sudo] npm install spy-debugger -g</span><br></pre></td></tr></table></figure>\n<h3 id=\"三分钟上手\"><a href=\"#三分钟上手\" class=\"headerlink\" title=\"三分钟上手\"></a>三分钟上手</h3><p>第一步：手机和PC保持在同一网络下（比如同时连到一个Wi-Fi下）<br>第二步：命令行输入spy-debugger，按命令行提示用浏览器打开相应地址。<br>第三步：设置手机的HTTP代理，代理IP地址设置为PC的IP地址，端口为spy-debugger的启动端口(默认端口：9888)。</p>\n<p>Android设置代理步骤：设置 - WLAN - 长按选中网络 - 修改网络 - 高级 - 代理设置 - 手动<br>iOS设置代理步骤：设置 - 无线局域网 - 选中网络 - HTTP代理手动</p>\n<p>第四步：手机安装证书。</p>\n<p><code>spy-debugger initCA</code> 会将证书放置到系统根目录node-mitmproxy文件夹。<br>Mac    如：/users/yourName/node-mitmproxy<br>Windows 如：C/users/yourName/node-mitmproxy<br>将文件夹下的node-mitmproxy.ca.crt到手机上安装</p>\n<p>第五步：用手机浏览器访问你要调试的页面即可。</p>\n<h3 id=\"效果截图\"><a href=\"#效果截图\" class=\"headerlink\" title=\"效果截图\"></a>效果截图</h3><p><img src=\"/assets/img/spy-debugger.jpg\" alt=\"PC端调试界面\"><br><img src=\"/assets/img/mobile-effect-snap.jpeg\" alt=\"移动端界面\"></p>\n<h3 id=\"自定义选项\"><a href=\"#自定义选项\" class=\"headerlink\" title=\"自定义选项\"></a>自定义选项</h3><h4 id=\"端口-默认端口9888\"><a href=\"#端口-默认端口9888\" class=\"headerlink\" title=\"端口(默认端口9888)\"></a>端口(默认端口9888)</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spy-<span class=\"keyword\">debugger</span> -p <span class=\"number\">9999</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"设置外部代理（默认使用AnyProxy）\"><a href=\"#设置外部代理（默认使用AnyProxy）\" class=\"headerlink\" title=\"设置外部代理（默认使用AnyProxy）\"></a>设置外部代理（默认使用AnyProxy）</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spy-<span class=\"keyword\">debugger</span> -e http:<span class=\"comment\">//127.0.0.1:8888</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"设置页面内容为可编辑模式（默认false）\"><a href=\"#设置页面内容为可编辑模式（默认false）\" class=\"headerlink\" title=\"设置页面内容为可编辑模式（默认false）\"></a>设置页面内容为可编辑模式（默认false）</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spy-<span class=\"keyword\">debugger</span> -w <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>该功能使页面内容修改更加直观方便。内部实现原理：在需要调试的页面内注入代码：document.body.contentEditable=true。暂不支持使用了iscroll框架的页面。</p>\n<h4 id=\"是否允许weinre监控iframe加载的页面-默认false\"><a href=\"#是否允许weinre监控iframe加载的页面-默认false\" class=\"headerlink\" title=\"是否允许weinre监控iframe加载的页面(默认false)\"></a>是否允许weinre监控iframe加载的页面(默认false)</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spy-<span class=\"keyword\">debugger</span> -i <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"是否只拦截浏览器发起的https请求（默认true）\"><a href=\"#是否只拦截浏览器发起的https请求（默认true）\" class=\"headerlink\" title=\"是否只拦截浏览器发起的https请求（默认true）\"></a>是否只拦截浏览器发起的https请求（默认true）</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spy-<span class=\"keyword\">debugger</span> -b <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"是否允许HTTP缓存-默认false\"><a href=\"#是否允许HTTP缓存-默认false\" class=\"headerlink\" title=\"是否允许HTTP缓存(默认false)\"></a>是否允许HTTP缓存(默认false)</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spy-<span class=\"keyword\">debugger</span> -c <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>"},{"title":"vue自定义生命周期钩子","date":"2020-08-25T09:49:19.000Z","_content":"\n### 先摘抄原作者文章中引用的话吧~\n\n> 葡萄美酒夜光杯，欲饮琵琶产品催。 客户现场君莫笑，古来埋坑几人回？\n\n> 不要吹灭你的灵感和你的想象力; 不要成为你的模型的奴隶。 ——文森特・梵高\n\n### 然后也不知道说啥，来点示例代码吧\n\n<!-- more -->\n\n#### utils/emitter.js\n\n```js\n\nimport Vue from 'vue'\n\n/**\n * 通知组件及其子组件页面可见状态变更\n * @param {String} lifeCycleName 生命周期钩子名\n * @param {vmInstance} vm 实例\n */\nconst notifyVisibilityChange = (lifeCycleName, vm) => {\n\n    // 生命周期函数会存在$options中，通过$options[lifeCycleName]获取生命周期\n    const lifeCycles = vm.$options[lifeCycleName]\n    // 因为使用了created的合并策略，所以是一个数组\n    if (lifeCycles && lifeCycles.length) {\n        // 遍历 lifeCycleName对应的生命周期函数列表，依次执行\n        lifeCycles.forEach(lifecycle => {\n            process.env.NODE_ENV !== 'production' && console.info('自定义' + lifeCycleName + '生命周期钩子已触发，组件name：' + vm.$options.name)\n            lifecycle.call(vm)\n        })\n    }\n    // 遍历所有的子组件，然后依次递归执行\n    if (vm.$children && vm.$children.length) {\n        vm.$children.forEach(child => {\n            notifyVisibilityChange(lifeCycleName, child)\n        })\n    }\n}\n\nconst CustomHooks = {\n    /**\n     * 安装注册\n     */\n    Attach() {\n        // Vue的合并策略\n        const optionMergeStrategies = Vue.config.optionMergeStrategies\n\n        // 定义了两个生命周期函数 pageVisible, pageHidden\n        // 这个相当于指定 pageVisible, pageHidden 的合并策略与 created的相同（使用其他生命周期函数都一样）\n        optionMergeStrategies.pageVisible = optionMergeStrategies.created\n        optionMergeStrategies.pageHidden = optionMergeStrategies.created\n    },\n    /**\n     * 绑定监听\n     * @param {vmInstance} rootVm 根实例\n     */\n    Observer(rootVm) {\n        window.addEventListener('visibilitychange', () => {\n            // 判断调用哪个生命周期函数\n            let lifeCycleName = undefined\n            if (document.visibilityState === 'hidden') {\n                lifeCycleName = 'pageHidden'\n            } else if (document.visibilityState === 'visible') {\n                lifeCycleName = 'pageVisible'\n            }\n            if (lifeCycleName) {\n                // 通过所有组件生命周期发生变化了\n                notifyVisibilityChange(lifeCycleName, rootVm)\n            }\n        })\n    }\n}\n\nexport default CustomHooks\n```\n\n#### main.js\n\n```js\nimport CustomHooks from '@/utils/custom-emitter'\n\n// 实例化之前进行初始化\nCustomHooks.Attach()\n\n/* eslint-disable no-new */\nconst rootVm = new Vue({\n    el: '#app',\n    router,\n    components: { App },\n    template: '<App/>'\n})\n\n// 实例化之后绑定监听\nCustomHooks.Observer(rootVm)\n```\n\n#### 使用 demo.vue\n\n```js\nexport default {\n    name: \"demo\",\n    data() {\n        return {}\n    },\n    created() {},\n    pageVisible() {\n        // TODO 页面可见逻辑 如开启已暂停的功能\n    },\n    pageHidden() {\n        // TODO 页面不可见逻辑 如暂停某些花销很大的动画、ajax轮询\n    }\n}\n```\n\n### 参考文章\n\n[前方高能，这是最新的一波Vue实战技巧](https://juejin.im/post/6844904200598454286#heading-14)","source":"_posts/vue-custom-hooks.md","raw":"---\ntitle: vue自定义生命周期钩子\ndate: 2020-08-25 17:49:19\ntags: [vue]\n---\n\n### 先摘抄原作者文章中引用的话吧~\n\n> 葡萄美酒夜光杯，欲饮琵琶产品催。 客户现场君莫笑，古来埋坑几人回？\n\n> 不要吹灭你的灵感和你的想象力; 不要成为你的模型的奴隶。 ——文森特・梵高\n\n### 然后也不知道说啥，来点示例代码吧\n\n<!-- more -->\n\n#### utils/emitter.js\n\n```js\n\nimport Vue from 'vue'\n\n/**\n * 通知组件及其子组件页面可见状态变更\n * @param {String} lifeCycleName 生命周期钩子名\n * @param {vmInstance} vm 实例\n */\nconst notifyVisibilityChange = (lifeCycleName, vm) => {\n\n    // 生命周期函数会存在$options中，通过$options[lifeCycleName]获取生命周期\n    const lifeCycles = vm.$options[lifeCycleName]\n    // 因为使用了created的合并策略，所以是一个数组\n    if (lifeCycles && lifeCycles.length) {\n        // 遍历 lifeCycleName对应的生命周期函数列表，依次执行\n        lifeCycles.forEach(lifecycle => {\n            process.env.NODE_ENV !== 'production' && console.info('自定义' + lifeCycleName + '生命周期钩子已触发，组件name：' + vm.$options.name)\n            lifecycle.call(vm)\n        })\n    }\n    // 遍历所有的子组件，然后依次递归执行\n    if (vm.$children && vm.$children.length) {\n        vm.$children.forEach(child => {\n            notifyVisibilityChange(lifeCycleName, child)\n        })\n    }\n}\n\nconst CustomHooks = {\n    /**\n     * 安装注册\n     */\n    Attach() {\n        // Vue的合并策略\n        const optionMergeStrategies = Vue.config.optionMergeStrategies\n\n        // 定义了两个生命周期函数 pageVisible, pageHidden\n        // 这个相当于指定 pageVisible, pageHidden 的合并策略与 created的相同（使用其他生命周期函数都一样）\n        optionMergeStrategies.pageVisible = optionMergeStrategies.created\n        optionMergeStrategies.pageHidden = optionMergeStrategies.created\n    },\n    /**\n     * 绑定监听\n     * @param {vmInstance} rootVm 根实例\n     */\n    Observer(rootVm) {\n        window.addEventListener('visibilitychange', () => {\n            // 判断调用哪个生命周期函数\n            let lifeCycleName = undefined\n            if (document.visibilityState === 'hidden') {\n                lifeCycleName = 'pageHidden'\n            } else if (document.visibilityState === 'visible') {\n                lifeCycleName = 'pageVisible'\n            }\n            if (lifeCycleName) {\n                // 通过所有组件生命周期发生变化了\n                notifyVisibilityChange(lifeCycleName, rootVm)\n            }\n        })\n    }\n}\n\nexport default CustomHooks\n```\n\n#### main.js\n\n```js\nimport CustomHooks from '@/utils/custom-emitter'\n\n// 实例化之前进行初始化\nCustomHooks.Attach()\n\n/* eslint-disable no-new */\nconst rootVm = new Vue({\n    el: '#app',\n    router,\n    components: { App },\n    template: '<App/>'\n})\n\n// 实例化之后绑定监听\nCustomHooks.Observer(rootVm)\n```\n\n#### 使用 demo.vue\n\n```js\nexport default {\n    name: \"demo\",\n    data() {\n        return {}\n    },\n    created() {},\n    pageVisible() {\n        // TODO 页面可见逻辑 如开启已暂停的功能\n    },\n    pageHidden() {\n        // TODO 页面不可见逻辑 如暂停某些花销很大的动画、ajax轮询\n    }\n}\n```\n\n### 参考文章\n\n[前方高能，这是最新的一波Vue实战技巧](https://juejin.im/post/6844904200598454286#heading-14)","slug":"vue-custom-hooks","published":1,"updated":"2020-08-26T03:07:30.174Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34di000lu66tgyj8yyx7","content":"<h3 id=\"先摘抄原作者文章中引用的话吧\"><a href=\"#先摘抄原作者文章中引用的话吧\" class=\"headerlink\" title=\"先摘抄原作者文章中引用的话吧~\"></a>先摘抄原作者文章中引用的话吧~</h3><blockquote>\n<p>葡萄美酒夜光杯，欲饮琵琶产品催。 客户现场君莫笑，古来埋坑几人回？</p>\n</blockquote>\n<blockquote>\n<p>不要吹灭你的灵感和你的想象力; 不要成为你的模型的奴隶。 ——文森特・梵高</p>\n</blockquote>\n<h3 id=\"然后也不知道说啥，来点示例代码吧\"><a href=\"#然后也不知道说啥，来点示例代码吧\" class=\"headerlink\" title=\"然后也不知道说啥，来点示例代码吧\"></a>然后也不知道说啥，来点示例代码吧</h3><a id=\"more\"></a>\n<h4 id=\"utils-emitter-js\"><a href=\"#utils-emitter-js\" class=\"headerlink\" title=\"utils/emitter.js\"></a>utils/emitter.js</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 通知组件及其子组件页面可见状态变更</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;String&#125; lifeCycleName 生命周期钩子名</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;vmInstance&#125; vm 实例</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> notifyVisibilityChange = <span class=\"function\">(<span class=\"params\">lifeCycleName, vm</span>) =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 生命周期函数会存在$options中，通过$options[lifeCycleName]获取生命周期</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> lifeCycles = vm.$options[lifeCycleName]</span><br><span class=\"line\">    <span class=\"comment\">// 因为使用了created的合并策略，所以是一个数组</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (lifeCycles &amp;&amp; lifeCycles.length) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 遍历 lifeCycleName对应的生命周期函数列表，依次执行</span></span><br><span class=\"line\">        lifeCycles.forEach(<span class=\"function\"><span class=\"params\">lifecycle</span> =&gt;</span> &#123;</span><br><span class=\"line\">            process.env.NODE_ENV !== <span class=\"string\">'production'</span> &amp;&amp; <span class=\"built_in\">console</span>.info(<span class=\"string\">'自定义'</span> + lifeCycleName + <span class=\"string\">'生命周期钩子已触发，组件name：'</span> + vm.$options.name)</span><br><span class=\"line\">            lifecycle.call(vm)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 遍历所有的子组件，然后依次递归执行</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (vm.$children &amp;&amp; vm.$children.length) &#123;</span><br><span class=\"line\">        vm.$children.forEach(<span class=\"function\"><span class=\"params\">child</span> =&gt;</span> &#123;</span><br><span class=\"line\">            notifyVisibilityChange(lifeCycleName, child)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> CustomHooks = &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 安装注册</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Attach() &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Vue的合并策略</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> optionMergeStrategies = Vue.config.optionMergeStrategies</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 定义了两个生命周期函数 pageVisible, pageHidden</span></span><br><span class=\"line\">        <span class=\"comment\">// 这个相当于指定 pageVisible, pageHidden 的合并策略与 created的相同（使用其他生命周期函数都一样）</span></span><br><span class=\"line\">        optionMergeStrategies.pageVisible = optionMergeStrategies.created</span><br><span class=\"line\">        optionMergeStrategies.pageHidden = optionMergeStrategies.created</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 绑定监听</span></span><br><span class=\"line\"><span class=\"comment\">     * @param &#123;vmInstance&#125; rootVm 根实例</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Observer(rootVm) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'visibilitychange'</span>, () =&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 判断调用哪个生命周期函数</span></span><br><span class=\"line\">            <span class=\"keyword\">let</span> lifeCycleName = <span class=\"literal\">undefined</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.visibilityState === <span class=\"string\">'hidden'</span>) &#123;</span><br><span class=\"line\">                lifeCycleName = <span class=\"string\">'pageHidden'</span></span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.visibilityState === <span class=\"string\">'visible'</span>) &#123;</span><br><span class=\"line\">                lifeCycleName = <span class=\"string\">'pageVisible'</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (lifeCycleName) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 通过所有组件生命周期发生变化了</span></span><br><span class=\"line\">                notifyVisibilityChange(lifeCycleName, rootVm)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> CustomHooks</span><br></pre></td></tr></table></figure>\n<h4 id=\"main-js\"><a href=\"#main-js\" class=\"headerlink\" title=\"main.js\"></a>main.js</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> CustomHooks <span class=\"keyword\">from</span> <span class=\"string\">'@/utils/custom-emitter'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 实例化之前进行初始化</span></span><br><span class=\"line\">CustomHooks.Attach()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable no-new */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> rootVm = <span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">    router,</span><br><span class=\"line\">    components: &#123; App &#125;,</span><br><span class=\"line\">    template: <span class=\"string\">'&lt;App/&gt;'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 实例化之后绑定监听</span></span><br><span class=\"line\">CustomHooks.Observer(rootVm)</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用-demo-vue\"><a href=\"#使用-demo-vue\" class=\"headerlink\" title=\"使用 demo.vue\"></a>使用 demo.vue</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">    name: <span class=\"string\">\"demo\"</span>,</span><br><span class=\"line\">    data() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;&#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    created() &#123;&#125;,</span><br><span class=\"line\">    pageVisible() &#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO 页面可见逻辑 如开启已暂停的功能</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    pageHidden() &#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO 页面不可见逻辑 如暂停某些花销很大的动画、ajax轮询</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"参考文章\"><a href=\"#参考文章\" class=\"headerlink\" title=\"参考文章\"></a>参考文章</h3><p><a href=\"https://juejin.im/post/6844904200598454286#heading-14\" target=\"_blank\" rel=\"noopener\">前方高能，这是最新的一波Vue实战技巧</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"先摘抄原作者文章中引用的话吧\"><a href=\"#先摘抄原作者文章中引用的话吧\" class=\"headerlink\" title=\"先摘抄原作者文章中引用的话吧~\"></a>先摘抄原作者文章中引用的话吧~</h3><blockquote>\n<p>葡萄美酒夜光杯，欲饮琵琶产品催。 客户现场君莫笑，古来埋坑几人回？</p>\n</blockquote>\n<blockquote>\n<p>不要吹灭你的灵感和你的想象力; 不要成为你的模型的奴隶。 ——文森特・梵高</p>\n</blockquote>\n<h3 id=\"然后也不知道说啥，来点示例代码吧\"><a href=\"#然后也不知道说啥，来点示例代码吧\" class=\"headerlink\" title=\"然后也不知道说啥，来点示例代码吧\"></a>然后也不知道说啥，来点示例代码吧</h3>","more":"<h4 id=\"utils-emitter-js\"><a href=\"#utils-emitter-js\" class=\"headerlink\" title=\"utils/emitter.js\"></a>utils/emitter.js</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 通知组件及其子组件页面可见状态变更</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;String&#125; lifeCycleName 生命周期钩子名</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;vmInstance&#125; vm 实例</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> notifyVisibilityChange = <span class=\"function\">(<span class=\"params\">lifeCycleName, vm</span>) =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 生命周期函数会存在$options中，通过$options[lifeCycleName]获取生命周期</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> lifeCycles = vm.$options[lifeCycleName]</span><br><span class=\"line\">    <span class=\"comment\">// 因为使用了created的合并策略，所以是一个数组</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (lifeCycles &amp;&amp; lifeCycles.length) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 遍历 lifeCycleName对应的生命周期函数列表，依次执行</span></span><br><span class=\"line\">        lifeCycles.forEach(<span class=\"function\"><span class=\"params\">lifecycle</span> =&gt;</span> &#123;</span><br><span class=\"line\">            process.env.NODE_ENV !== <span class=\"string\">'production'</span> &amp;&amp; <span class=\"built_in\">console</span>.info(<span class=\"string\">'自定义'</span> + lifeCycleName + <span class=\"string\">'生命周期钩子已触发，组件name：'</span> + vm.$options.name)</span><br><span class=\"line\">            lifecycle.call(vm)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 遍历所有的子组件，然后依次递归执行</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (vm.$children &amp;&amp; vm.$children.length) &#123;</span><br><span class=\"line\">        vm.$children.forEach(<span class=\"function\"><span class=\"params\">child</span> =&gt;</span> &#123;</span><br><span class=\"line\">            notifyVisibilityChange(lifeCycleName, child)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> CustomHooks = &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 安装注册</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Attach() &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Vue的合并策略</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> optionMergeStrategies = Vue.config.optionMergeStrategies</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 定义了两个生命周期函数 pageVisible, pageHidden</span></span><br><span class=\"line\">        <span class=\"comment\">// 这个相当于指定 pageVisible, pageHidden 的合并策略与 created的相同（使用其他生命周期函数都一样）</span></span><br><span class=\"line\">        optionMergeStrategies.pageVisible = optionMergeStrategies.created</span><br><span class=\"line\">        optionMergeStrategies.pageHidden = optionMergeStrategies.created</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 绑定监听</span></span><br><span class=\"line\"><span class=\"comment\">     * @param &#123;vmInstance&#125; rootVm 根实例</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Observer(rootVm) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'visibilitychange'</span>, () =&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 判断调用哪个生命周期函数</span></span><br><span class=\"line\">            <span class=\"keyword\">let</span> lifeCycleName = <span class=\"literal\">undefined</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.visibilityState === <span class=\"string\">'hidden'</span>) &#123;</span><br><span class=\"line\">                lifeCycleName = <span class=\"string\">'pageHidden'</span></span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.visibilityState === <span class=\"string\">'visible'</span>) &#123;</span><br><span class=\"line\">                lifeCycleName = <span class=\"string\">'pageVisible'</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (lifeCycleName) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 通过所有组件生命周期发生变化了</span></span><br><span class=\"line\">                notifyVisibilityChange(lifeCycleName, rootVm)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> CustomHooks</span><br></pre></td></tr></table></figure>\n<h4 id=\"main-js\"><a href=\"#main-js\" class=\"headerlink\" title=\"main.js\"></a>main.js</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> CustomHooks <span class=\"keyword\">from</span> <span class=\"string\">'@/utils/custom-emitter'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 实例化之前进行初始化</span></span><br><span class=\"line\">CustomHooks.Attach()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable no-new */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> rootVm = <span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">    router,</span><br><span class=\"line\">    components: &#123; App &#125;,</span><br><span class=\"line\">    template: <span class=\"string\">'&lt;App/&gt;'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 实例化之后绑定监听</span></span><br><span class=\"line\">CustomHooks.Observer(rootVm)</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用-demo-vue\"><a href=\"#使用-demo-vue\" class=\"headerlink\" title=\"使用 demo.vue\"></a>使用 demo.vue</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">    name: <span class=\"string\">\"demo\"</span>,</span><br><span class=\"line\">    data() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;&#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    created() &#123;&#125;,</span><br><span class=\"line\">    pageVisible() &#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO 页面可见逻辑 如开启已暂停的功能</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    pageHidden() &#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO 页面不可见逻辑 如暂停某些花销很大的动画、ajax轮询</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"参考文章\"><a href=\"#参考文章\" class=\"headerlink\" title=\"参考文章\"></a>参考文章</h3><p><a href=\"https://juejin.im/post/6844904200598454286#heading-14\" target=\"_blank\" rel=\"noopener\">前方高能，这是最新的一波Vue实战技巧</a></p>"},{"title":"this + bind + call + apply","date":"2019-05-21T07:05:59.000Z","_content":"\n### this的指向\n\n> `this`的指向总结起来就是`this永远指向最后调用它的那个对象`\n\n<!-- More -->\n\n例1：\n\n```js\nvar name = 'global'\nfunction test() {\n    var name = 'cherry'\n    console.log(this)\n    console.log(this.name)\n}\ntest()\n// window\n// global\n```\n\n调用 `test` 方法的地方是 `test()` ，前面没有调用的对象即为 `window` （严格模式下为 `undefined` ），相当于 `window.test()` 。\n\n例2：\n\n```js\nvar name = 'global'\nvar obj = {\n    name: 'cherry',\n    fn: function () {\n        console.log(this.name)\n    }\n}\nobj.fn()  // cherry\nwindow.obj.fn()  // cherry\n```\n\n`obj.fn()` 取用的是 `obj` 对象 里面的 `name` 值， `window.obj.fn()` 里面，最后调用的是 `obj` 对象，所以也是 `cherry` 。  \n补充：假如将 `obj` 对象中 `name` 属性的定义注释掉，那么 `obj.fn()` 将会打印出 `undefined` ，因为只会看最近的调用 `obj` 对象 ，当没有定义时，不会继续向上一个对象 `window` 寻找 `name` 属性。\n\n例3：\n\n```js\nvar name = 'global'\nvar obj = {\n    name: 'cherry',\n    fn: function () {\n        console.log(this.name)\n    }\n}\nvar temp = obj.fn()\ntemp()  // global\n```\n\n再来看一遍：`this` 永远指向 `最后调用` 它的那个对象。 `obj.fn()` 赋值给 `temp` 时，并没有进行赋值！最后 temp() 调用的时候是 `window.temp()` ，所以打印 `global` 。\n\n例4：\n\n```js\nvar name = 'global'\nfunction fn () {\n    var name = 'cherry'\n    innerFn()\n    function innerFn () {\n        console.log(this.name)\n    }\n}\nfn()  // global\n```\n\n例5：\n\n```js\nfunction Func () {\n    this.name = 'cherry'\n}\nvar fn = new Func()\nconsole.log(fn.name)  // cherry\n\n// =================================\n\nfunction Func2 () {\n    this.name = 'cherry'\n    return {name: 'apple'}  // 返回一个对象 如果name改为name2，fn2.name为undefined\n}\nfunction Func3 () {\n    this.name = 'cherry'\n    return true  // 返回true，非对象（false, 124, 'abc'都可）\n}\nvar fn2 = new Func2()\nconsole.log(fn2.name)  // apple\nvar fn3 = new Func3()\nconsole.log(fn3.name)  // cherry\n```\n\n当我们通过 `new` 关键字构造一个实例对象的过程中，构造函数中的 this 一般情况下指向我们构造出来的实例化对象，因此在构造过程中 `this.name = 'cherry'` 这句代码就相当于给实例对象 `fn` 创建了一个 `name` 属性并赋值 `cherry` 。  \n特别的，当构造函数中的 `this` 遇到 `return` 的情况。当构造函数中返回值是一个对象时，`this` 指向的就是返回的那个对象；如果返回值不是对象时，`this` 指向的就是构造函数（这里是 Func3 ）。\n\n### 改变this的指向\n\n例6：\n\n```js\nvar name = 'global'\nvar obj = {\n    name: 'cherry',\n    fn1: function () {\n        console.log(this.name)\n    },\n    fn2: function () {\n        setTimeout(function () {\n            this.fn1()\n        }, 1000)\n    }\n}\nobj.fn2()  // this.fn1 is not a function\n```\n\n`setTimeout()` 即为 `window.setTimeout()` ，最后调用的对象是 `window`，而 `window` 中并没有方法 `fn1()` ，故而报错。\n\n**我们通常使用以下几种方法改变this的指向问题：**\n\n- var _this = this\n\n```js\n// ...\nfn2: function () {\n    var _this = this\n    setTimeout(function () {\n        _this.fn1()  // cherry\n    }, 1000)\n}\n// ...\n```\n\n- 箭头函数\n\n```js\n// ...\nfn2: function () {\n    setTimeout( () => {\n        this.fn1()  // cherry\n    }, 1000)\n}\n// ...\n```\n\n- bind\n\n```js\n// ...\nfn2: function () {\n    setTimeout(function () {\n        this.fn1()  // cherry\n    }. bind(obj)(), 1000)  // 这里的obj也可以换成this this指向obj\n}\n// ...\n```\n\n- call\n\n```js\n// ...\nfn2: function () {\n    setTimeout(function () {\n        this.fn1()  // cherry\n    }.call(obj), 1000)  // 这里的obj也可以换成this this指向obj\n}\n// ...\n```\n\n- apply\n\n```js\n// ...\nfn2: function () {\n    setTimeout(function () {\n        this.fn1()  // cherry\n    }.apply(obj), 1000)  // 这里的obj也可以换成this this指向obj\n}\n// ...\n```\n\n### bind介绍\n\n> `bind()` 方法创建一个 新的函数， 当被调用时，将其 `this` 关键字设置为提供的值。在调用新函数时，在任何提供之前提供一个给定的参数序列。\n\n例7：\n\n```js\nvar obj = {\n    func: function (a, b) {\n        console.log('乘积： ' + a * b)\n    }\n}\nobj.func.bind(obj, 2, 8)  // f (a, b) {\n                        //     console.log('乘积： ' + a * b)\n                        // }\nobj.func.bind(obj, 2, 8)()  // 乘积： 16\n```\n\n因为 bind 只会重新赋予 this，并不会自动执行，需要手动执行，固有第二个的结果。\n\n### call介绍\n\n> functionObj.call(thisArg[, args1, args2, args3, ...])\n>> `thisArg` -> 函数在运行时指定的 `this` 。当为 `null` 或者 `undefined` 时，自动指向 `window` 。当为`string` 、`number` 、`boolean` 类型的时候，`this` 指向各自的包装对象。\n\n```js\nfunction test () {\n    console.log('this: ' + this)\n}\ntest.call(null)  // window\ntest.call(undefined)  // window\ntest.call('abcd')  // String\ntest.call(128)  // Number\ntest.call(false)  // Boolean\n\n// apply() 的结果与 call() 一致\ntest.apply(null)  // window\n// ...\n```\n\n例8：\n\n```js\nvar obj = {\n    name: 'hello',\n    func: function (a, b) {\n        console.log('乘积： ' + a * b)\n    }\n}\nobj.func.call(obj, 2, 5)  // 乘积： 10\n```\n\n### apply介绍\n\n> functionObj.apply(thisArg[, argsArr])\n>> `apply` 的语法和 `call` 的语法类似，区别在于 `apply` 的参数列表是以 `数组` 或者 `类数组` 形式传入。\n\n例9：\n\n```js\nvar obj = {\n    name: 'hello',\n    func: function (a, b) {\n        console.log('乘积： ' + a * b)\n    }\n}\nobj.func.apply(obj, [2, 6])  // 乘积： 12\n```\n\n### call、apply常见用法\n\n- 将类数组 `ArrayLike` 转换成数组 `Array`\n\n```js\nvar arraylike = {'1': 'hello', '2': 'world', '3': 'balabala', length: 4}\nfunction ArrTransfer () {\n    // return [].slice.call(arguments)\n    return Array.prototype.slice.call(arguments)\n    // return [].splice.call(arguments, 0)\n    // return Array.prototype.splice.call(arguments, 0)\n    // return Array.from(arguments)\n}\nvar list = ArrTransfer(arrayLike)  // [{'1': 'hello', '2': 'world', '3': 'balabala', length: 3}]\n\nArray.prototype.slice.call(arrayLike).forEach( (elem, index) => {\n    console.log(elem, index)\n    // hello 1\n    // world 2\n    // balabala 3\n})\n```\n\n- 求最大最小值\n\n```js\nvar arr = [21, 2, 35, 9, 23, 16, 29]\nMath.max.apply(Math, arr)  // 35\nMath.min.apply(Math, arr)  // 2\n```\n\n### Useful Link\n\n- [全文参考自掘金文章](https://juejin.im/post/59bfe84351882531b730bac2)","source":"_posts/this.md","raw":"---\ntitle: this + bind + call + apply\ndate: 2019-05-21 15:05:59\ntags: [this, 作用域]\n---\n\n### this的指向\n\n> `this`的指向总结起来就是`this永远指向最后调用它的那个对象`\n\n<!-- More -->\n\n例1：\n\n```js\nvar name = 'global'\nfunction test() {\n    var name = 'cherry'\n    console.log(this)\n    console.log(this.name)\n}\ntest()\n// window\n// global\n```\n\n调用 `test` 方法的地方是 `test()` ，前面没有调用的对象即为 `window` （严格模式下为 `undefined` ），相当于 `window.test()` 。\n\n例2：\n\n```js\nvar name = 'global'\nvar obj = {\n    name: 'cherry',\n    fn: function () {\n        console.log(this.name)\n    }\n}\nobj.fn()  // cherry\nwindow.obj.fn()  // cherry\n```\n\n`obj.fn()` 取用的是 `obj` 对象 里面的 `name` 值， `window.obj.fn()` 里面，最后调用的是 `obj` 对象，所以也是 `cherry` 。  \n补充：假如将 `obj` 对象中 `name` 属性的定义注释掉，那么 `obj.fn()` 将会打印出 `undefined` ，因为只会看最近的调用 `obj` 对象 ，当没有定义时，不会继续向上一个对象 `window` 寻找 `name` 属性。\n\n例3：\n\n```js\nvar name = 'global'\nvar obj = {\n    name: 'cherry',\n    fn: function () {\n        console.log(this.name)\n    }\n}\nvar temp = obj.fn()\ntemp()  // global\n```\n\n再来看一遍：`this` 永远指向 `最后调用` 它的那个对象。 `obj.fn()` 赋值给 `temp` 时，并没有进行赋值！最后 temp() 调用的时候是 `window.temp()` ，所以打印 `global` 。\n\n例4：\n\n```js\nvar name = 'global'\nfunction fn () {\n    var name = 'cherry'\n    innerFn()\n    function innerFn () {\n        console.log(this.name)\n    }\n}\nfn()  // global\n```\n\n例5：\n\n```js\nfunction Func () {\n    this.name = 'cherry'\n}\nvar fn = new Func()\nconsole.log(fn.name)  // cherry\n\n// =================================\n\nfunction Func2 () {\n    this.name = 'cherry'\n    return {name: 'apple'}  // 返回一个对象 如果name改为name2，fn2.name为undefined\n}\nfunction Func3 () {\n    this.name = 'cherry'\n    return true  // 返回true，非对象（false, 124, 'abc'都可）\n}\nvar fn2 = new Func2()\nconsole.log(fn2.name)  // apple\nvar fn3 = new Func3()\nconsole.log(fn3.name)  // cherry\n```\n\n当我们通过 `new` 关键字构造一个实例对象的过程中，构造函数中的 this 一般情况下指向我们构造出来的实例化对象，因此在构造过程中 `this.name = 'cherry'` 这句代码就相当于给实例对象 `fn` 创建了一个 `name` 属性并赋值 `cherry` 。  \n特别的，当构造函数中的 `this` 遇到 `return` 的情况。当构造函数中返回值是一个对象时，`this` 指向的就是返回的那个对象；如果返回值不是对象时，`this` 指向的就是构造函数（这里是 Func3 ）。\n\n### 改变this的指向\n\n例6：\n\n```js\nvar name = 'global'\nvar obj = {\n    name: 'cherry',\n    fn1: function () {\n        console.log(this.name)\n    },\n    fn2: function () {\n        setTimeout(function () {\n            this.fn1()\n        }, 1000)\n    }\n}\nobj.fn2()  // this.fn1 is not a function\n```\n\n`setTimeout()` 即为 `window.setTimeout()` ，最后调用的对象是 `window`，而 `window` 中并没有方法 `fn1()` ，故而报错。\n\n**我们通常使用以下几种方法改变this的指向问题：**\n\n- var _this = this\n\n```js\n// ...\nfn2: function () {\n    var _this = this\n    setTimeout(function () {\n        _this.fn1()  // cherry\n    }, 1000)\n}\n// ...\n```\n\n- 箭头函数\n\n```js\n// ...\nfn2: function () {\n    setTimeout( () => {\n        this.fn1()  // cherry\n    }, 1000)\n}\n// ...\n```\n\n- bind\n\n```js\n// ...\nfn2: function () {\n    setTimeout(function () {\n        this.fn1()  // cherry\n    }. bind(obj)(), 1000)  // 这里的obj也可以换成this this指向obj\n}\n// ...\n```\n\n- call\n\n```js\n// ...\nfn2: function () {\n    setTimeout(function () {\n        this.fn1()  // cherry\n    }.call(obj), 1000)  // 这里的obj也可以换成this this指向obj\n}\n// ...\n```\n\n- apply\n\n```js\n// ...\nfn2: function () {\n    setTimeout(function () {\n        this.fn1()  // cherry\n    }.apply(obj), 1000)  // 这里的obj也可以换成this this指向obj\n}\n// ...\n```\n\n### bind介绍\n\n> `bind()` 方法创建一个 新的函数， 当被调用时，将其 `this` 关键字设置为提供的值。在调用新函数时，在任何提供之前提供一个给定的参数序列。\n\n例7：\n\n```js\nvar obj = {\n    func: function (a, b) {\n        console.log('乘积： ' + a * b)\n    }\n}\nobj.func.bind(obj, 2, 8)  // f (a, b) {\n                        //     console.log('乘积： ' + a * b)\n                        // }\nobj.func.bind(obj, 2, 8)()  // 乘积： 16\n```\n\n因为 bind 只会重新赋予 this，并不会自动执行，需要手动执行，固有第二个的结果。\n\n### call介绍\n\n> functionObj.call(thisArg[, args1, args2, args3, ...])\n>> `thisArg` -> 函数在运行时指定的 `this` 。当为 `null` 或者 `undefined` 时，自动指向 `window` 。当为`string` 、`number` 、`boolean` 类型的时候，`this` 指向各自的包装对象。\n\n```js\nfunction test () {\n    console.log('this: ' + this)\n}\ntest.call(null)  // window\ntest.call(undefined)  // window\ntest.call('abcd')  // String\ntest.call(128)  // Number\ntest.call(false)  // Boolean\n\n// apply() 的结果与 call() 一致\ntest.apply(null)  // window\n// ...\n```\n\n例8：\n\n```js\nvar obj = {\n    name: 'hello',\n    func: function (a, b) {\n        console.log('乘积： ' + a * b)\n    }\n}\nobj.func.call(obj, 2, 5)  // 乘积： 10\n```\n\n### apply介绍\n\n> functionObj.apply(thisArg[, argsArr])\n>> `apply` 的语法和 `call` 的语法类似，区别在于 `apply` 的参数列表是以 `数组` 或者 `类数组` 形式传入。\n\n例9：\n\n```js\nvar obj = {\n    name: 'hello',\n    func: function (a, b) {\n        console.log('乘积： ' + a * b)\n    }\n}\nobj.func.apply(obj, [2, 6])  // 乘积： 12\n```\n\n### call、apply常见用法\n\n- 将类数组 `ArrayLike` 转换成数组 `Array`\n\n```js\nvar arraylike = {'1': 'hello', '2': 'world', '3': 'balabala', length: 4}\nfunction ArrTransfer () {\n    // return [].slice.call(arguments)\n    return Array.prototype.slice.call(arguments)\n    // return [].splice.call(arguments, 0)\n    // return Array.prototype.splice.call(arguments, 0)\n    // return Array.from(arguments)\n}\nvar list = ArrTransfer(arrayLike)  // [{'1': 'hello', '2': 'world', '3': 'balabala', length: 3}]\n\nArray.prototype.slice.call(arrayLike).forEach( (elem, index) => {\n    console.log(elem, index)\n    // hello 1\n    // world 2\n    // balabala 3\n})\n```\n\n- 求最大最小值\n\n```js\nvar arr = [21, 2, 35, 9, 23, 16, 29]\nMath.max.apply(Math, arr)  // 35\nMath.min.apply(Math, arr)  // 2\n```\n\n### Useful Link\n\n- [全文参考自掘金文章](https://juejin.im/post/59bfe84351882531b730bac2)","slug":"this","published":1,"updated":"2019-05-22T05:46:45.447Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34dj000nu66t34824unz","content":"<h3 id=\"this的指向\"><a href=\"#this的指向\" class=\"headerlink\" title=\"this的指向\"></a>this的指向</h3><blockquote>\n<p><code>this</code>的指向总结起来就是<code>this永远指向最后调用它的那个对象</code></p>\n</blockquote>\n<a id=\"more\"></a>\n<p>例1：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'global'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> name = <span class=\"string\">'cherry'</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test()</span><br><span class=\"line\"><span class=\"comment\">// window</span></span><br><span class=\"line\"><span class=\"comment\">// global</span></span><br></pre></td></tr></table></figure>\n<p>调用 <code>test</code> 方法的地方是 <code>test()</code> ，前面没有调用的对象即为 <code>window</code> （严格模式下为 <code>undefined</code> ），相当于 <code>window.test()</code> 。</p>\n<p>例2：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'global'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'cherry'</span>,</span><br><span class=\"line\">    fn: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">obj.fn()  <span class=\"comment\">// cherry</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.obj.fn()  <span class=\"comment\">// cherry</span></span><br></pre></td></tr></table></figure>\n<p><code>obj.fn()</code> 取用的是 <code>obj</code> 对象 里面的 <code>name</code> 值， <code>window.obj.fn()</code> 里面，最后调用的是 <code>obj</code> 对象，所以也是 <code>cherry</code> 。<br>补充：假如将 <code>obj</code> 对象中 <code>name</code> 属性的定义注释掉，那么 <code>obj.fn()</code> 将会打印出 <code>undefined</code> ，因为只会看最近的调用 <code>obj</code> 对象 ，当没有定义时，不会继续向上一个对象 <code>window</code> 寻找 <code>name</code> 属性。</p>\n<p>例3：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'global'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'cherry'</span>,</span><br><span class=\"line\">    fn: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> temp = obj.fn()</span><br><span class=\"line\">temp()  <span class=\"comment\">// global</span></span><br></pre></td></tr></table></figure>\n<p>再来看一遍：<code>this</code> 永远指向 <code>最后调用</code> 它的那个对象。 <code>obj.fn()</code> 赋值给 <code>temp</code> 时，并没有进行赋值！最后 temp() 调用的时候是 <code>window.temp()</code> ，所以打印 <code>global</code> 。</p>\n<p>例4：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'global'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> name = <span class=\"string\">'cherry'</span></span><br><span class=\"line\">    innerFn()</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">innerFn</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fn()  <span class=\"comment\">// global</span></span><br></pre></td></tr></table></figure>\n<p>例5：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Func</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'cherry'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = <span class=\"keyword\">new</span> Func()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(fn.name)  <span class=\"comment\">// cherry</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// =================================</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Func2</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'cherry'</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;<span class=\"attr\">name</span>: <span class=\"string\">'apple'</span>&#125;  <span class=\"comment\">// 返回一个对象 如果name改为name2，fn2.name为undefined</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Func3</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'cherry'</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>  <span class=\"comment\">// 返回true，非对象（false, 124, 'abc'都可）</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> fn2 = <span class=\"keyword\">new</span> Func2()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(fn2.name)  <span class=\"comment\">// apple</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fn3 = <span class=\"keyword\">new</span> Func3()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(fn3.name)  <span class=\"comment\">// cherry</span></span><br></pre></td></tr></table></figure>\n<p>当我们通过 <code>new</code> 关键字构造一个实例对象的过程中，构造函数中的 this 一般情况下指向我们构造出来的实例化对象，因此在构造过程中 <code>this.name = &#39;cherry&#39;</code> 这句代码就相当于给实例对象 <code>fn</code> 创建了一个 <code>name</code> 属性并赋值 <code>cherry</code> 。<br>特别的，当构造函数中的 <code>this</code> 遇到 <code>return</code> 的情况。当构造函数中返回值是一个对象时，<code>this</code> 指向的就是返回的那个对象；如果返回值不是对象时，<code>this</code> 指向的就是构造函数（这里是 Func3 ）。</p>\n<h3 id=\"改变this的指向\"><a href=\"#改变this的指向\" class=\"headerlink\" title=\"改变this的指向\"></a>改变this的指向</h3><p>例6：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'global'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'cherry'</span>,</span><br><span class=\"line\">    fn1: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    fn2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.fn1()</span><br><span class=\"line\">        &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">obj.fn2()  <span class=\"comment\">// this.fn1 is not a function</span></span><br></pre></td></tr></table></figure>\n<p><code>setTimeout()</code> 即为 <code>window.setTimeout()</code> ，最后调用的对象是 <code>window</code>，而 <code>window</code> 中并没有方法 <code>fn1()</code> ，故而报错。</p>\n<p><strong>我们通常使用以下几种方法改变this的指向问题：</strong></p>\n<ul>\n<li>var _this = this</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">fn2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _this = <span class=\"keyword\">this</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        _this.fn1()  <span class=\"comment\">// cherry</span></span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>箭头函数</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">fn2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setTimeout( <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fn1()  <span class=\"comment\">// cherry</span></span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>bind</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">fn2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fn1()  <span class=\"comment\">// cherry</span></span><br><span class=\"line\">    &#125;. bind(obj)(), <span class=\"number\">1000</span>)  <span class=\"comment\">// 这里的obj也可以换成this this指向obj</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>call</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">fn2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fn1()  <span class=\"comment\">// cherry</span></span><br><span class=\"line\">    &#125;.call(obj), <span class=\"number\">1000</span>)  <span class=\"comment\">// 这里的obj也可以换成this this指向obj</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>apply</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">fn2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fn1()  <span class=\"comment\">// cherry</span></span><br><span class=\"line\">    &#125;.apply(obj), <span class=\"number\">1000</span>)  <span class=\"comment\">// 这里的obj也可以换成this this指向obj</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"bind介绍\"><a href=\"#bind介绍\" class=\"headerlink\" title=\"bind介绍\"></a>bind介绍</h3><blockquote>\n<p><code>bind()</code> 方法创建一个 新的函数， 当被调用时，将其 <code>this</code> 关键字设置为提供的值。在调用新函数时，在任何提供之前提供一个给定的参数序列。</p>\n</blockquote>\n<p>例7：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    func: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'乘积： '</span> + a * b)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">obj.func.bind(obj, <span class=\"number\">2</span>, <span class=\"number\">8</span>)  <span class=\"comment\">// f (a, b) &#123;</span></span><br><span class=\"line\">                        <span class=\"comment\">//     console.log('乘积： ' + a * b)</span></span><br><span class=\"line\">                        <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">obj.func.bind(obj, <span class=\"number\">2</span>, <span class=\"number\">8</span>)()  <span class=\"comment\">// 乘积： 16</span></span><br></pre></td></tr></table></figure>\n<p>因为 bind 只会重新赋予 this，并不会自动执行，需要手动执行，固有第二个的结果。</p>\n<h3 id=\"call介绍\"><a href=\"#call介绍\" class=\"headerlink\" title=\"call介绍\"></a>call介绍</h3><blockquote>\n<p>functionObj.call(thisArg[, args1, args2, args3, …])</p>\n<blockquote>\n<p><code>thisArg</code> -&gt; 函数在运行时指定的 <code>this</code> 。当为 <code>null</code> 或者 <code>undefined</code> 时，自动指向 <code>window</code> 。当为<code>string</code> 、<code>number</code> 、<code>boolean</code> 类型的时候，<code>this</code> 指向各自的包装对象。</p>\n</blockquote>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'this: '</span> + <span class=\"keyword\">this</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test.call(<span class=\"literal\">null</span>)  <span class=\"comment\">// window</span></span><br><span class=\"line\">test.call(<span class=\"literal\">undefined</span>)  <span class=\"comment\">// window</span></span><br><span class=\"line\">test.call(<span class=\"string\">'abcd'</span>)  <span class=\"comment\">// String</span></span><br><span class=\"line\">test.call(<span class=\"number\">128</span>)  <span class=\"comment\">// Number</span></span><br><span class=\"line\">test.call(<span class=\"literal\">false</span>)  <span class=\"comment\">// Boolean</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// apply() 的结果与 call() 一致</span></span><br><span class=\"line\">test.apply(<span class=\"literal\">null</span>)  <span class=\"comment\">// window</span></span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<p>例8：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'hello'</span>,</span><br><span class=\"line\">    func: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'乘积： '</span> + a * b)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">obj.func.call(obj, <span class=\"number\">2</span>, <span class=\"number\">5</span>)  <span class=\"comment\">// 乘积： 10</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"apply介绍\"><a href=\"#apply介绍\" class=\"headerlink\" title=\"apply介绍\"></a>apply介绍</h3><blockquote>\n<p>functionObj.apply(thisArg[, argsArr])</p>\n<blockquote>\n<p><code>apply</code> 的语法和 <code>call</code> 的语法类似，区别在于 <code>apply</code> 的参数列表是以 <code>数组</code> 或者 <code>类数组</code> 形式传入。</p>\n</blockquote>\n</blockquote>\n<p>例9：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'hello'</span>,</span><br><span class=\"line\">    func: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'乘积： '</span> + a * b)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">obj.func.apply(obj, [<span class=\"number\">2</span>, <span class=\"number\">6</span>])  <span class=\"comment\">// 乘积： 12</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"call、apply常见用法\"><a href=\"#call、apply常见用法\" class=\"headerlink\" title=\"call、apply常见用法\"></a>call、apply常见用法</h3><ul>\n<li>将类数组 <code>ArrayLike</code> 转换成数组 <code>Array</code></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arraylike = &#123;<span class=\"string\">'1'</span>: <span class=\"string\">'hello'</span>, <span class=\"string\">'2'</span>: <span class=\"string\">'world'</span>, <span class=\"string\">'3'</span>: <span class=\"string\">'balabala'</span>, <span class=\"attr\">length</span>: <span class=\"number\">4</span>&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ArrTransfer</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// return [].slice.call(arguments)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"comment\">// return [].splice.call(arguments, 0)</span></span><br><span class=\"line\">    <span class=\"comment\">// return Array.prototype.splice.call(arguments, 0)</span></span><br><span class=\"line\">    <span class=\"comment\">// return Array.from(arguments)</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> list = ArrTransfer(arrayLike)  <span class=\"comment\">// [&#123;'1': 'hello', '2': 'world', '3': 'balabala', length: 3&#125;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.slice.call(arrayLike).forEach( <span class=\"function\">(<span class=\"params\">elem, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(elem, index)</span><br><span class=\"line\">    <span class=\"comment\">// hello 1</span></span><br><span class=\"line\">    <span class=\"comment\">// world 2</span></span><br><span class=\"line\">    <span class=\"comment\">// balabala 3</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>求最大最小值</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">21</span>, <span class=\"number\">2</span>, <span class=\"number\">35</span>, <span class=\"number\">9</span>, <span class=\"number\">23</span>, <span class=\"number\">16</span>, <span class=\"number\">29</span>]</span><br><span class=\"line\"><span class=\"built_in\">Math</span>.max.apply(<span class=\"built_in\">Math</span>, arr)  <span class=\"comment\">// 35</span></span><br><span class=\"line\"><span class=\"built_in\">Math</span>.min.apply(<span class=\"built_in\">Math</span>, arr)  <span class=\"comment\">// 2</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Useful-Link\"><a href=\"#Useful-Link\" class=\"headerlink\" title=\"Useful Link\"></a>Useful Link</h3><ul>\n<li><a href=\"https://juejin.im/post/59bfe84351882531b730bac2\" target=\"_blank\" rel=\"noopener\">全文参考自掘金文章</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"this的指向\"><a href=\"#this的指向\" class=\"headerlink\" title=\"this的指向\"></a>this的指向</h3><blockquote>\n<p><code>this</code>的指向总结起来就是<code>this永远指向最后调用它的那个对象</code></p>\n</blockquote>","more":"<p>例1：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'global'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> name = <span class=\"string\">'cherry'</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test()</span><br><span class=\"line\"><span class=\"comment\">// window</span></span><br><span class=\"line\"><span class=\"comment\">// global</span></span><br></pre></td></tr></table></figure>\n<p>调用 <code>test</code> 方法的地方是 <code>test()</code> ，前面没有调用的对象即为 <code>window</code> （严格模式下为 <code>undefined</code> ），相当于 <code>window.test()</code> 。</p>\n<p>例2：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'global'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'cherry'</span>,</span><br><span class=\"line\">    fn: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">obj.fn()  <span class=\"comment\">// cherry</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.obj.fn()  <span class=\"comment\">// cherry</span></span><br></pre></td></tr></table></figure>\n<p><code>obj.fn()</code> 取用的是 <code>obj</code> 对象 里面的 <code>name</code> 值， <code>window.obj.fn()</code> 里面，最后调用的是 <code>obj</code> 对象，所以也是 <code>cherry</code> 。<br>补充：假如将 <code>obj</code> 对象中 <code>name</code> 属性的定义注释掉，那么 <code>obj.fn()</code> 将会打印出 <code>undefined</code> ，因为只会看最近的调用 <code>obj</code> 对象 ，当没有定义时，不会继续向上一个对象 <code>window</code> 寻找 <code>name</code> 属性。</p>\n<p>例3：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'global'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'cherry'</span>,</span><br><span class=\"line\">    fn: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> temp = obj.fn()</span><br><span class=\"line\">temp()  <span class=\"comment\">// global</span></span><br></pre></td></tr></table></figure>\n<p>再来看一遍：<code>this</code> 永远指向 <code>最后调用</code> 它的那个对象。 <code>obj.fn()</code> 赋值给 <code>temp</code> 时，并没有进行赋值！最后 temp() 调用的时候是 <code>window.temp()</code> ，所以打印 <code>global</code> 。</p>\n<p>例4：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'global'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> name = <span class=\"string\">'cherry'</span></span><br><span class=\"line\">    innerFn()</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">innerFn</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fn()  <span class=\"comment\">// global</span></span><br></pre></td></tr></table></figure>\n<p>例5：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Func</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'cherry'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = <span class=\"keyword\">new</span> Func()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(fn.name)  <span class=\"comment\">// cherry</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// =================================</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Func2</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'cherry'</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;<span class=\"attr\">name</span>: <span class=\"string\">'apple'</span>&#125;  <span class=\"comment\">// 返回一个对象 如果name改为name2，fn2.name为undefined</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Func3</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'cherry'</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>  <span class=\"comment\">// 返回true，非对象（false, 124, 'abc'都可）</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> fn2 = <span class=\"keyword\">new</span> Func2()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(fn2.name)  <span class=\"comment\">// apple</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fn3 = <span class=\"keyword\">new</span> Func3()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(fn3.name)  <span class=\"comment\">// cherry</span></span><br></pre></td></tr></table></figure>\n<p>当我们通过 <code>new</code> 关键字构造一个实例对象的过程中，构造函数中的 this 一般情况下指向我们构造出来的实例化对象，因此在构造过程中 <code>this.name = &#39;cherry&#39;</code> 这句代码就相当于给实例对象 <code>fn</code> 创建了一个 <code>name</code> 属性并赋值 <code>cherry</code> 。<br>特别的，当构造函数中的 <code>this</code> 遇到 <code>return</code> 的情况。当构造函数中返回值是一个对象时，<code>this</code> 指向的就是返回的那个对象；如果返回值不是对象时，<code>this</code> 指向的就是构造函数（这里是 Func3 ）。</p>\n<h3 id=\"改变this的指向\"><a href=\"#改变this的指向\" class=\"headerlink\" title=\"改变this的指向\"></a>改变this的指向</h3><p>例6：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'global'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'cherry'</span>,</span><br><span class=\"line\">    fn1: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    fn2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.fn1()</span><br><span class=\"line\">        &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">obj.fn2()  <span class=\"comment\">// this.fn1 is not a function</span></span><br></pre></td></tr></table></figure>\n<p><code>setTimeout()</code> 即为 <code>window.setTimeout()</code> ，最后调用的对象是 <code>window</code>，而 <code>window</code> 中并没有方法 <code>fn1()</code> ，故而报错。</p>\n<p><strong>我们通常使用以下几种方法改变this的指向问题：</strong></p>\n<ul>\n<li>var _this = this</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">fn2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _this = <span class=\"keyword\">this</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        _this.fn1()  <span class=\"comment\">// cherry</span></span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>箭头函数</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">fn2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setTimeout( <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fn1()  <span class=\"comment\">// cherry</span></span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>bind</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">fn2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fn1()  <span class=\"comment\">// cherry</span></span><br><span class=\"line\">    &#125;. bind(obj)(), <span class=\"number\">1000</span>)  <span class=\"comment\">// 这里的obj也可以换成this this指向obj</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>call</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">fn2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fn1()  <span class=\"comment\">// cherry</span></span><br><span class=\"line\">    &#125;.call(obj), <span class=\"number\">1000</span>)  <span class=\"comment\">// 这里的obj也可以换成this this指向obj</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>apply</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">fn2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fn1()  <span class=\"comment\">// cherry</span></span><br><span class=\"line\">    &#125;.apply(obj), <span class=\"number\">1000</span>)  <span class=\"comment\">// 这里的obj也可以换成this this指向obj</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"bind介绍\"><a href=\"#bind介绍\" class=\"headerlink\" title=\"bind介绍\"></a>bind介绍</h3><blockquote>\n<p><code>bind()</code> 方法创建一个 新的函数， 当被调用时，将其 <code>this</code> 关键字设置为提供的值。在调用新函数时，在任何提供之前提供一个给定的参数序列。</p>\n</blockquote>\n<p>例7：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    func: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'乘积： '</span> + a * b)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">obj.func.bind(obj, <span class=\"number\">2</span>, <span class=\"number\">8</span>)  <span class=\"comment\">// f (a, b) &#123;</span></span><br><span class=\"line\">                        <span class=\"comment\">//     console.log('乘积： ' + a * b)</span></span><br><span class=\"line\">                        <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">obj.func.bind(obj, <span class=\"number\">2</span>, <span class=\"number\">8</span>)()  <span class=\"comment\">// 乘积： 16</span></span><br></pre></td></tr></table></figure>\n<p>因为 bind 只会重新赋予 this，并不会自动执行，需要手动执行，固有第二个的结果。</p>\n<h3 id=\"call介绍\"><a href=\"#call介绍\" class=\"headerlink\" title=\"call介绍\"></a>call介绍</h3><blockquote>\n<p>functionObj.call(thisArg[, args1, args2, args3, …])</p>\n<blockquote>\n<p><code>thisArg</code> -&gt; 函数在运行时指定的 <code>this</code> 。当为 <code>null</code> 或者 <code>undefined</code> 时，自动指向 <code>window</code> 。当为<code>string</code> 、<code>number</code> 、<code>boolean</code> 类型的时候，<code>this</code> 指向各自的包装对象。</p>\n</blockquote>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'this: '</span> + <span class=\"keyword\">this</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test.call(<span class=\"literal\">null</span>)  <span class=\"comment\">// window</span></span><br><span class=\"line\">test.call(<span class=\"literal\">undefined</span>)  <span class=\"comment\">// window</span></span><br><span class=\"line\">test.call(<span class=\"string\">'abcd'</span>)  <span class=\"comment\">// String</span></span><br><span class=\"line\">test.call(<span class=\"number\">128</span>)  <span class=\"comment\">// Number</span></span><br><span class=\"line\">test.call(<span class=\"literal\">false</span>)  <span class=\"comment\">// Boolean</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// apply() 的结果与 call() 一致</span></span><br><span class=\"line\">test.apply(<span class=\"literal\">null</span>)  <span class=\"comment\">// window</span></span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<p>例8：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'hello'</span>,</span><br><span class=\"line\">    func: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'乘积： '</span> + a * b)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">obj.func.call(obj, <span class=\"number\">2</span>, <span class=\"number\">5</span>)  <span class=\"comment\">// 乘积： 10</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"apply介绍\"><a href=\"#apply介绍\" class=\"headerlink\" title=\"apply介绍\"></a>apply介绍</h3><blockquote>\n<p>functionObj.apply(thisArg[, argsArr])</p>\n<blockquote>\n<p><code>apply</code> 的语法和 <code>call</code> 的语法类似，区别在于 <code>apply</code> 的参数列表是以 <code>数组</code> 或者 <code>类数组</code> 形式传入。</p>\n</blockquote>\n</blockquote>\n<p>例9：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'hello'</span>,</span><br><span class=\"line\">    func: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'乘积： '</span> + a * b)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">obj.func.apply(obj, [<span class=\"number\">2</span>, <span class=\"number\">6</span>])  <span class=\"comment\">// 乘积： 12</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"call、apply常见用法\"><a href=\"#call、apply常见用法\" class=\"headerlink\" title=\"call、apply常见用法\"></a>call、apply常见用法</h3><ul>\n<li>将类数组 <code>ArrayLike</code> 转换成数组 <code>Array</code></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arraylike = &#123;<span class=\"string\">'1'</span>: <span class=\"string\">'hello'</span>, <span class=\"string\">'2'</span>: <span class=\"string\">'world'</span>, <span class=\"string\">'3'</span>: <span class=\"string\">'balabala'</span>, <span class=\"attr\">length</span>: <span class=\"number\">4</span>&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ArrTransfer</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// return [].slice.call(arguments)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"comment\">// return [].splice.call(arguments, 0)</span></span><br><span class=\"line\">    <span class=\"comment\">// return Array.prototype.splice.call(arguments, 0)</span></span><br><span class=\"line\">    <span class=\"comment\">// return Array.from(arguments)</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> list = ArrTransfer(arrayLike)  <span class=\"comment\">// [&#123;'1': 'hello', '2': 'world', '3': 'balabala', length: 3&#125;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.slice.call(arrayLike).forEach( <span class=\"function\">(<span class=\"params\">elem, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(elem, index)</span><br><span class=\"line\">    <span class=\"comment\">// hello 1</span></span><br><span class=\"line\">    <span class=\"comment\">// world 2</span></span><br><span class=\"line\">    <span class=\"comment\">// balabala 3</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>求最大最小值</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">21</span>, <span class=\"number\">2</span>, <span class=\"number\">35</span>, <span class=\"number\">9</span>, <span class=\"number\">23</span>, <span class=\"number\">16</span>, <span class=\"number\">29</span>]</span><br><span class=\"line\"><span class=\"built_in\">Math</span>.max.apply(<span class=\"built_in\">Math</span>, arr)  <span class=\"comment\">// 35</span></span><br><span class=\"line\"><span class=\"built_in\">Math</span>.min.apply(<span class=\"built_in\">Math</span>, arr)  <span class=\"comment\">// 2</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Useful-Link\"><a href=\"#Useful-Link\" class=\"headerlink\" title=\"Useful Link\"></a>Useful Link</h3><ul>\n<li><a href=\"https://juejin.im/post/59bfe84351882531b730bac2\" target=\"_blank\" rel=\"noopener\">全文参考自掘金文章</a></li>\n</ul>"},{"title":"Web Worker 简介","date":"2020-08-13T08:22:26.000Z","_content":"\n### 背景\n\n> JavaScript 语言采用的是单线程模型，也就是说，所有任务只能在一个线程上完成，一次只能做一件事。前面的任务没做完，后面的任务只能等着。随着电脑计算能力的增强，尤其是多核 CPU 的出现，单线程带来很大的不便，无法充分发挥计算机的计算能力。\n> Web Worker 的作用，就是为 JavaScript 创造多线程环境，允许主线程创建 Worker 线程，将一些任务分配给后者运行。在主线程运行的同时，Worker 线程在后台运行，两者互不干扰。等到 Worker 线程完成计算任务，再把结果返回给主线程。这样的好处是，一些计算密集型或高延迟的任务，被 Worker 线程负担了，主线程（通常负责 UI 交互）就会很流畅，不会被阻塞或拖慢。\n\n### 基本用法\n\n```js\n    const worker = new Worker(jsUrl[, { name: 'yourWorkerName' }])\n```\n\n<!-- More -->\n\n### Tips\n\n* 分配给 `Worker` 线程运行的脚本文件，必须与主线程的脚本文件同源。\n* `Worker` 线程所在的全局对象，与主线程不一样，不能使用 `document`、`window`、`parent`、`alert()`、`confirm()`，但是可以使用 `console`，并且使用 `XMLHttpRequest` 发起 `AJAX` 请求。\n* 通过 `importScript` 加载进来的脚本文件里，同样不能使用 `alert` 等属性。加载多个脚本文件时，用逗号隔开。\n* `Worker` 线程无法读取本地文件，即不能打开本机的文件系统（`file://`），它所加载的脚本，必须来自网络。\n\n### 主线程 API\n\n```js\n    Worker.onerror(): 指定 error 事件的监听函数\n    Worker.onmessage(): 指定 message 事件的监听函数\n    Worker.onmessageerror(): 指定 messageerror 事件的监听函数\n    Worker.postMessage(): 向 Worker 线程发送消息\n    Worker.terminate(): 终止 Worker 线程\n```\n\n### Worker线程 API\n\n```js\n    self.name: Worker 的名字。该属性只读，由构造函数指定\n    self.onmessage: 指定 message 事件的监听函数\n    self.onmessageerror: 指定 messageerror 事件的监听函数。发送的数据无法序列化成字符串时，会触发这个事件\n    self.close(): 关闭 Worker 线程\n    self.postMessage(): 向产生这个 Worker 线程发送消息\n    self.importScripts(): 加载 JS 脚本\n```\n\n### 示例\n\n#### worker.html\n\n```js\n    <input type=\"text\" class=\"text\">\n    <input type=\"button\" class=\"button\" value=\"发送\">\n\n    const text = document.querySelector('.text')\n    const button = document.querySelector('.button')\n\n    const worker = new Worker('./worker.js', { name: 'myworker' })\n    worker.onmessage = function(event) {\n        console.log('主线程收到来自myworker线程传递的消息：', event.data)\n        console.log('------------')\n        worker.terminate()\n        console.log('主线程终止myworker线程')\n    }\n    // 当向myworker传递的消息无法序列化为字符串时 触发\n    worker.onmessageerror = function(event) {\n        // ...\n    }\n    worker.onerror = function() {\n        // ...\n    }\n\n    button.addEventListener('click', () => {\n        console.log('主线程向myworker线程发送消息：', text.value)\n        worker.postMessage(text.value)\n    })\n```\n\n#### worker.js\n\n```js\n\n    // 均输出 myworker\n    console.log(self.name, this.name, name)\n\n    importScripts('./test-importScript.js')\n\n    this.onmessage = function(event) {\n        console.log('myworker线程收到主线程传递的消息：', event.data)\n\n        this.postMessage('myworker线程已收到主线程传递的消息')\n\n        this.close()\n        console.log('---------')\n        console.log('myworker线程已主动断开与主线程的连接，不能再收到传递的消息')\n    }\n\n    // 当向主线程传递的消息无法序列化为字符串时 触发\n    this.onmessageerror = function() {\n        // ...\n    }\n```\n\n#### test-importScript.js\n\n```js\n    // myworker\n    console.log(this.name)\n```\n\n### 参考\n\n[Web Worker 使用教程 - 阮一峰](http://www.ruanyifeng.com/blog/2018/07/web-worker.html)\n","source":"_posts/web-worker.md","raw":"---\ntitle: Web Worker 简介\ndate: 2020-08-13 16:22:26\ntags: [worker, web-worker]\n---\n\n### 背景\n\n> JavaScript 语言采用的是单线程模型，也就是说，所有任务只能在一个线程上完成，一次只能做一件事。前面的任务没做完，后面的任务只能等着。随着电脑计算能力的增强，尤其是多核 CPU 的出现，单线程带来很大的不便，无法充分发挥计算机的计算能力。\n> Web Worker 的作用，就是为 JavaScript 创造多线程环境，允许主线程创建 Worker 线程，将一些任务分配给后者运行。在主线程运行的同时，Worker 线程在后台运行，两者互不干扰。等到 Worker 线程完成计算任务，再把结果返回给主线程。这样的好处是，一些计算密集型或高延迟的任务，被 Worker 线程负担了，主线程（通常负责 UI 交互）就会很流畅，不会被阻塞或拖慢。\n\n### 基本用法\n\n```js\n    const worker = new Worker(jsUrl[, { name: 'yourWorkerName' }])\n```\n\n<!-- More -->\n\n### Tips\n\n* 分配给 `Worker` 线程运行的脚本文件，必须与主线程的脚本文件同源。\n* `Worker` 线程所在的全局对象，与主线程不一样，不能使用 `document`、`window`、`parent`、`alert()`、`confirm()`，但是可以使用 `console`，并且使用 `XMLHttpRequest` 发起 `AJAX` 请求。\n* 通过 `importScript` 加载进来的脚本文件里，同样不能使用 `alert` 等属性。加载多个脚本文件时，用逗号隔开。\n* `Worker` 线程无法读取本地文件，即不能打开本机的文件系统（`file://`），它所加载的脚本，必须来自网络。\n\n### 主线程 API\n\n```js\n    Worker.onerror(): 指定 error 事件的监听函数\n    Worker.onmessage(): 指定 message 事件的监听函数\n    Worker.onmessageerror(): 指定 messageerror 事件的监听函数\n    Worker.postMessage(): 向 Worker 线程发送消息\n    Worker.terminate(): 终止 Worker 线程\n```\n\n### Worker线程 API\n\n```js\n    self.name: Worker 的名字。该属性只读，由构造函数指定\n    self.onmessage: 指定 message 事件的监听函数\n    self.onmessageerror: 指定 messageerror 事件的监听函数。发送的数据无法序列化成字符串时，会触发这个事件\n    self.close(): 关闭 Worker 线程\n    self.postMessage(): 向产生这个 Worker 线程发送消息\n    self.importScripts(): 加载 JS 脚本\n```\n\n### 示例\n\n#### worker.html\n\n```js\n    <input type=\"text\" class=\"text\">\n    <input type=\"button\" class=\"button\" value=\"发送\">\n\n    const text = document.querySelector('.text')\n    const button = document.querySelector('.button')\n\n    const worker = new Worker('./worker.js', { name: 'myworker' })\n    worker.onmessage = function(event) {\n        console.log('主线程收到来自myworker线程传递的消息：', event.data)\n        console.log('------------')\n        worker.terminate()\n        console.log('主线程终止myworker线程')\n    }\n    // 当向myworker传递的消息无法序列化为字符串时 触发\n    worker.onmessageerror = function(event) {\n        // ...\n    }\n    worker.onerror = function() {\n        // ...\n    }\n\n    button.addEventListener('click', () => {\n        console.log('主线程向myworker线程发送消息：', text.value)\n        worker.postMessage(text.value)\n    })\n```\n\n#### worker.js\n\n```js\n\n    // 均输出 myworker\n    console.log(self.name, this.name, name)\n\n    importScripts('./test-importScript.js')\n\n    this.onmessage = function(event) {\n        console.log('myworker线程收到主线程传递的消息：', event.data)\n\n        this.postMessage('myworker线程已收到主线程传递的消息')\n\n        this.close()\n        console.log('---------')\n        console.log('myworker线程已主动断开与主线程的连接，不能再收到传递的消息')\n    }\n\n    // 当向主线程传递的消息无法序列化为字符串时 触发\n    this.onmessageerror = function() {\n        // ...\n    }\n```\n\n#### test-importScript.js\n\n```js\n    // myworker\n    console.log(this.name)\n```\n\n### 参考\n\n[Web Worker 使用教程 - 阮一峰](http://www.ruanyifeng.com/blog/2018/07/web-worker.html)\n","slug":"web-worker","published":1,"updated":"2020-08-13T09:33:03.049Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34dk000pu66ty2y07tq2","content":"<h3 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h3><blockquote>\n<p>JavaScript 语言采用的是单线程模型，也就是说，所有任务只能在一个线程上完成，一次只能做一件事。前面的任务没做完，后面的任务只能等着。随着电脑计算能力的增强，尤其是多核 CPU 的出现，单线程带来很大的不便，无法充分发挥计算机的计算能力。<br>Web Worker 的作用，就是为 JavaScript 创造多线程环境，允许主线程创建 Worker 线程，将一些任务分配给后者运行。在主线程运行的同时，Worker 线程在后台运行，两者互不干扰。等到 Worker 线程完成计算任务，再把结果返回给主线程。这样的好处是，一些计算密集型或高延迟的任务，被 Worker 线程负担了，主线程（通常负责 UI 交互）就会很流畅，不会被阻塞或拖慢。</p>\n</blockquote>\n<h3 id=\"基本用法\"><a href=\"#基本用法\" class=\"headerlink\" title=\"基本用法\"></a>基本用法</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> worker = <span class=\"keyword\">new</span> Worker(jsUrl[, &#123; <span class=\"attr\">name</span>: <span class=\"string\">'yourWorkerName'</span> &#125;])</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h3 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips\"></a>Tips</h3><ul>\n<li>分配给 <code>Worker</code> 线程运行的脚本文件，必须与主线程的脚本文件同源。</li>\n<li><code>Worker</code> 线程所在的全局对象，与主线程不一样，不能使用 <code>document</code>、<code>window</code>、<code>parent</code>、<code>alert()</code>、<code>confirm()</code>，但是可以使用 <code>console</code>，并且使用 <code>XMLHttpRequest</code> 发起 <code>AJAX</code> 请求。</li>\n<li>通过 <code>importScript</code> 加载进来的脚本文件里，同样不能使用 <code>alert</code> 等属性。加载多个脚本文件时，用逗号隔开。</li>\n<li><code>Worker</code> 线程无法读取本地文件，即不能打开本机的文件系统（<code>file://</code>），它所加载的脚本，必须来自网络。</li>\n</ul>\n<h3 id=\"主线程-API\"><a href=\"#主线程-API\" class=\"headerlink\" title=\"主线程 API\"></a>主线程 API</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Worker.onerror(): 指定 error 事件的监听函数</span><br><span class=\"line\">Worker.onmessage(): 指定 message 事件的监听函数</span><br><span class=\"line\">Worker.onmessageerror(): 指定 messageerror 事件的监听函数</span><br><span class=\"line\">Worker.postMessage(): 向 Worker 线程发送消息</span><br><span class=\"line\">Worker.terminate(): 终止 Worker 线程</span><br></pre></td></tr></table></figure>\n<h3 id=\"Worker线程-API\"><a href=\"#Worker线程-API\" class=\"headerlink\" title=\"Worker线程 API\"></a>Worker线程 API</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.name: Worker 的名字。该属性只读，由构造函数指定</span><br><span class=\"line\">self.onmessage: 指定 message 事件的监听函数</span><br><span class=\"line\">self.onmessageerror: 指定 messageerror 事件的监听函数。发送的数据无法序列化成字符串时，会触发这个事件</span><br><span class=\"line\">self.close(): 关闭 Worker 线程</span><br><span class=\"line\">self.postMessage(): 向产生这个 Worker 线程发送消息</span><br><span class=\"line\">self.importScripts(): 加载 JS 脚本</span><br></pre></td></tr></table></figure>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><h4 id=\"worker-html\"><a href=\"#worker-html\" class=\"headerlink\" title=\"worker.html\"></a>worker.html</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">\"text\"</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"text\"</span>&gt;</span><br><span class=\"line\">&lt;input type=<span class=\"string\">\"button\"</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"发送\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.text'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> button = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.button'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> worker = <span class=\"keyword\">new</span> Worker(<span class=\"string\">'./worker.js'</span>, &#123; <span class=\"attr\">name</span>: <span class=\"string\">'myworker'</span> &#125;)</span><br><span class=\"line\">worker.onmessage = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'主线程收到来自myworker线程传递的消息：'</span>, event.data)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'------------'</span>)</span><br><span class=\"line\">    worker.terminate()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'主线程终止myworker线程'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 当向myworker传递的消息无法序列化为字符串时 触发</span></span><br><span class=\"line\">worker.onmessageerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">worker.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">button.addEventListener(<span class=\"string\">'click'</span>, () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'主线程向myworker线程发送消息：'</span>, text.value)</span><br><span class=\"line\">    worker.postMessage(text.value)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h4 id=\"worker-js\"><a href=\"#worker-js\" class=\"headerlink\" title=\"worker.js\"></a>worker.js</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 均输出 myworker</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(self.name, <span class=\"keyword\">this</span>.name, name)</span><br><span class=\"line\"></span><br><span class=\"line\">importScripts(<span class=\"string\">'./test-importScript.js'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">this</span>.onmessage = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'myworker线程收到主线程传递的消息：'</span>, event.data)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.postMessage(<span class=\"string\">'myworker线程已收到主线程传递的消息'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.close()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'---------'</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'myworker线程已主动断开与主线程的连接，不能再收到传递的消息'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 当向主线程传递的消息无法序列化为字符串时 触发</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.onmessageerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"test-importScript-js\"><a href=\"#test-importScript-js\" class=\"headerlink\" title=\"test-importScript.js\"></a>test-importScript.js</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// myworker</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name)</span><br></pre></td></tr></table></figure>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><p><a href=\"http://www.ruanyifeng.com/blog/2018/07/web-worker.html\" target=\"_blank\" rel=\"noopener\">Web Worker 使用教程 - 阮一峰</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h3><blockquote>\n<p>JavaScript 语言采用的是单线程模型，也就是说，所有任务只能在一个线程上完成，一次只能做一件事。前面的任务没做完，后面的任务只能等着。随着电脑计算能力的增强，尤其是多核 CPU 的出现，单线程带来很大的不便，无法充分发挥计算机的计算能力。<br>Web Worker 的作用，就是为 JavaScript 创造多线程环境，允许主线程创建 Worker 线程，将一些任务分配给后者运行。在主线程运行的同时，Worker 线程在后台运行，两者互不干扰。等到 Worker 线程完成计算任务，再把结果返回给主线程。这样的好处是，一些计算密集型或高延迟的任务，被 Worker 线程负担了，主线程（通常负责 UI 交互）就会很流畅，不会被阻塞或拖慢。</p>\n</blockquote>\n<h3 id=\"基本用法\"><a href=\"#基本用法\" class=\"headerlink\" title=\"基本用法\"></a>基本用法</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> worker = <span class=\"keyword\">new</span> Worker(jsUrl[, &#123; <span class=\"attr\">name</span>: <span class=\"string\">'yourWorkerName'</span> &#125;])</span><br></pre></td></tr></table></figure>","more":"<h3 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips\"></a>Tips</h3><ul>\n<li>分配给 <code>Worker</code> 线程运行的脚本文件，必须与主线程的脚本文件同源。</li>\n<li><code>Worker</code> 线程所在的全局对象，与主线程不一样，不能使用 <code>document</code>、<code>window</code>、<code>parent</code>、<code>alert()</code>、<code>confirm()</code>，但是可以使用 <code>console</code>，并且使用 <code>XMLHttpRequest</code> 发起 <code>AJAX</code> 请求。</li>\n<li>通过 <code>importScript</code> 加载进来的脚本文件里，同样不能使用 <code>alert</code> 等属性。加载多个脚本文件时，用逗号隔开。</li>\n<li><code>Worker</code> 线程无法读取本地文件，即不能打开本机的文件系统（<code>file://</code>），它所加载的脚本，必须来自网络。</li>\n</ul>\n<h3 id=\"主线程-API\"><a href=\"#主线程-API\" class=\"headerlink\" title=\"主线程 API\"></a>主线程 API</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Worker.onerror(): 指定 error 事件的监听函数</span><br><span class=\"line\">Worker.onmessage(): 指定 message 事件的监听函数</span><br><span class=\"line\">Worker.onmessageerror(): 指定 messageerror 事件的监听函数</span><br><span class=\"line\">Worker.postMessage(): 向 Worker 线程发送消息</span><br><span class=\"line\">Worker.terminate(): 终止 Worker 线程</span><br></pre></td></tr></table></figure>\n<h3 id=\"Worker线程-API\"><a href=\"#Worker线程-API\" class=\"headerlink\" title=\"Worker线程 API\"></a>Worker线程 API</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.name: Worker 的名字。该属性只读，由构造函数指定</span><br><span class=\"line\">self.onmessage: 指定 message 事件的监听函数</span><br><span class=\"line\">self.onmessageerror: 指定 messageerror 事件的监听函数。发送的数据无法序列化成字符串时，会触发这个事件</span><br><span class=\"line\">self.close(): 关闭 Worker 线程</span><br><span class=\"line\">self.postMessage(): 向产生这个 Worker 线程发送消息</span><br><span class=\"line\">self.importScripts(): 加载 JS 脚本</span><br></pre></td></tr></table></figure>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><h4 id=\"worker-html\"><a href=\"#worker-html\" class=\"headerlink\" title=\"worker.html\"></a>worker.html</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">\"text\"</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"text\"</span>&gt;</span><br><span class=\"line\">&lt;input type=<span class=\"string\">\"button\"</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"发送\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.text'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> button = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.button'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> worker = <span class=\"keyword\">new</span> Worker(<span class=\"string\">'./worker.js'</span>, &#123; <span class=\"attr\">name</span>: <span class=\"string\">'myworker'</span> &#125;)</span><br><span class=\"line\">worker.onmessage = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'主线程收到来自myworker线程传递的消息：'</span>, event.data)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'------------'</span>)</span><br><span class=\"line\">    worker.terminate()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'主线程终止myworker线程'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 当向myworker传递的消息无法序列化为字符串时 触发</span></span><br><span class=\"line\">worker.onmessageerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">worker.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">button.addEventListener(<span class=\"string\">'click'</span>, () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'主线程向myworker线程发送消息：'</span>, text.value)</span><br><span class=\"line\">    worker.postMessage(text.value)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h4 id=\"worker-js\"><a href=\"#worker-js\" class=\"headerlink\" title=\"worker.js\"></a>worker.js</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 均输出 myworker</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(self.name, <span class=\"keyword\">this</span>.name, name)</span><br><span class=\"line\"></span><br><span class=\"line\">importScripts(<span class=\"string\">'./test-importScript.js'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">this</span>.onmessage = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'myworker线程收到主线程传递的消息：'</span>, event.data)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.postMessage(<span class=\"string\">'myworker线程已收到主线程传递的消息'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.close()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'---------'</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'myworker线程已主动断开与主线程的连接，不能再收到传递的消息'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 当向主线程传递的消息无法序列化为字符串时 触发</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.onmessageerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"test-importScript-js\"><a href=\"#test-importScript-js\" class=\"headerlink\" title=\"test-importScript.js\"></a>test-importScript.js</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// myworker</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name)</span><br></pre></td></tr></table></figure>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><p><a href=\"http://www.ruanyifeng.com/blog/2018/07/web-worker.html\" target=\"_blank\" rel=\"noopener\">Web Worker 使用教程 - 阮一峰</a></p>"},{"title":"webpack-study","date":"2019-05-23T07:29:00.000Z","_content":"\n### webpack-dev-server-3\n\n```js\nvar devMiddleware = require('webpack-dev-middleware')(compiler, {\n    publicPath: webpackConfig.output.publicPath,\n    hot: true,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\n// use express\napp.use(devMiddleware)\n\napp.listen(port, host, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log('Listening at ' + host + ':' + port + '\\n')\n})\n```\n\n<!-- More -->\n\n### CommonsChunkPlugin\n\n```js\n// webpack.config.js\nvar webpack = require(‘webpack’)\n\nentry: {\n    vendor: ['jquery', 'lodash'],\n    vuecore: './vuecore.js'\n}, \nplugins: [\n    // new webpack.optimize.CommonsChunkPlugin('vendor', 'vendor.bundle.js'),\n    // new webpack.optimize.CommonsChunkPlugin({\n    //     name: 'vuecore',\n    //     filename: 'vuecore.js'\n    // }),\n    // Error:  CommonsChunkPlugins: While running in normal mode its not allowed to use a non-entry chunk (vuecore)\n\n    // doing this instaed\n    new webpack.optimize.CommonsChunkPlugin({\n        names: ['vuecore','vendor']\n    }),\n    new webpack.optimize.CommonsChunkPlugin('vendor', 'vendor.bundle.js')\n]\n```","source":"_posts/webpack-study.md","raw":"---\ntitle: webpack-study\ndate: 2019-05-23 15:29:00\ntags: [webpack]\n---\n\n### webpack-dev-server-3\n\n```js\nvar devMiddleware = require('webpack-dev-middleware')(compiler, {\n    publicPath: webpackConfig.output.publicPath,\n    hot: true,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\n// use express\napp.use(devMiddleware)\n\napp.listen(port, host, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log('Listening at ' + host + ':' + port + '\\n')\n})\n```\n\n<!-- More -->\n\n### CommonsChunkPlugin\n\n```js\n// webpack.config.js\nvar webpack = require(‘webpack’)\n\nentry: {\n    vendor: ['jquery', 'lodash'],\n    vuecore: './vuecore.js'\n}, \nplugins: [\n    // new webpack.optimize.CommonsChunkPlugin('vendor', 'vendor.bundle.js'),\n    // new webpack.optimize.CommonsChunkPlugin({\n    //     name: 'vuecore',\n    //     filename: 'vuecore.js'\n    // }),\n    // Error:  CommonsChunkPlugins: While running in normal mode its not allowed to use a non-entry chunk (vuecore)\n\n    // doing this instaed\n    new webpack.optimize.CommonsChunkPlugin({\n        names: ['vuecore','vendor']\n    }),\n    new webpack.optimize.CommonsChunkPlugin('vendor', 'vendor.bundle.js')\n]\n```","slug":"webpack-study","published":1,"updated":"2019-12-02T07:20:47.096Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34dl000ru66te4l2ao5r","content":"<h3 id=\"webpack-dev-server-3\"><a href=\"#webpack-dev-server-3\" class=\"headerlink\" title=\"webpack-dev-server-3\"></a>webpack-dev-server-3</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> devMiddleware = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-dev-middleware'</span>)(compiler, &#123;</span><br><span class=\"line\">    publicPath: webpackConfig.output.publicPath,</span><br><span class=\"line\">    hot: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    stats: &#123;</span><br><span class=\"line\">        colors: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        chunks: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// use express</span></span><br><span class=\"line\">app.use(devMiddleware)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, host, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Listening at '</span> + host + <span class=\"string\">':'</span> + port + <span class=\"string\">'\\n'</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h3 id=\"CommonsChunkPlugin\"><a href=\"#CommonsChunkPlugin\" class=\"headerlink\" title=\"CommonsChunkPlugin\"></a>CommonsChunkPlugin</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> webpack = <span class=\"built_in\">require</span>(‘webpack’)</span><br><span class=\"line\"></span><br><span class=\"line\">entry: &#123;</span><br><span class=\"line\">    vendor: [<span class=\"string\">'jquery'</span>, <span class=\"string\">'lodash'</span>],</span><br><span class=\"line\">    vuecore: <span class=\"string\">'./vuecore.js'</span></span><br><span class=\"line\">&#125;, </span><br><span class=\"line\">plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// new webpack.optimize.CommonsChunkPlugin('vendor', 'vendor.bundle.js'),</span></span><br><span class=\"line\">    <span class=\"comment\">// new webpack.optimize.CommonsChunkPlugin(&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     name: 'vuecore',</span></span><br><span class=\"line\">    <span class=\"comment\">//     filename: 'vuecore.js'</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;),</span></span><br><span class=\"line\">    <span class=\"comment\">// Error:  CommonsChunkPlugins: While running in normal mode its not allowed to use a non-entry chunk (vuecore)</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// doing this instaed</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class=\"line\">        names: [<span class=\"string\">'vuecore'</span>,<span class=\"string\">'vendor'</span>]</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(<span class=\"string\">'vendor'</span>, <span class=\"string\">'vendor.bundle.js'</span>)</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<h3 id=\"webpack-dev-server-3\"><a href=\"#webpack-dev-server-3\" class=\"headerlink\" title=\"webpack-dev-server-3\"></a>webpack-dev-server-3</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> devMiddleware = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-dev-middleware'</span>)(compiler, &#123;</span><br><span class=\"line\">    publicPath: webpackConfig.output.publicPath,</span><br><span class=\"line\">    hot: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    stats: &#123;</span><br><span class=\"line\">        colors: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        chunks: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// use express</span></span><br><span class=\"line\">app.use(devMiddleware)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, host, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Listening at '</span> + host + <span class=\"string\">':'</span> + port + <span class=\"string\">'\\n'</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>","more":"<h3 id=\"CommonsChunkPlugin\"><a href=\"#CommonsChunkPlugin\" class=\"headerlink\" title=\"CommonsChunkPlugin\"></a>CommonsChunkPlugin</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> webpack = <span class=\"built_in\">require</span>(‘webpack’)</span><br><span class=\"line\"></span><br><span class=\"line\">entry: &#123;</span><br><span class=\"line\">    vendor: [<span class=\"string\">'jquery'</span>, <span class=\"string\">'lodash'</span>],</span><br><span class=\"line\">    vuecore: <span class=\"string\">'./vuecore.js'</span></span><br><span class=\"line\">&#125;, </span><br><span class=\"line\">plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// new webpack.optimize.CommonsChunkPlugin('vendor', 'vendor.bundle.js'),</span></span><br><span class=\"line\">    <span class=\"comment\">// new webpack.optimize.CommonsChunkPlugin(&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     name: 'vuecore',</span></span><br><span class=\"line\">    <span class=\"comment\">//     filename: 'vuecore.js'</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;),</span></span><br><span class=\"line\">    <span class=\"comment\">// Error:  CommonsChunkPlugins: While running in normal mode its not allowed to use a non-entry chunk (vuecore)</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// doing this instaed</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class=\"line\">        names: [<span class=\"string\">'vuecore'</span>,<span class=\"string\">'vendor'</span>]</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(<span class=\"string\">'vendor'</span>, <span class=\"string\">'vendor.bundle.js'</span>)</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>"},{"title":"企业微信中超链接地址跳转","date":"2019-05-21T03:04:11.000Z","_content":"\n#### 问题描述：\n\n在`ios(版本号未测试)企业微信(版本号未测试)`中，并且超链接`target`属性是`_blank`时，点击超链接不能正常跳转，当前页面自动刷新一次。\n<!-- More -->\n而在`ios微信浏览器`以及`android`中未复现。\n\n#### 解决办法\n\n1. 直接修改`target`属性值为`非_blank`即可；\n2. 如果是从`富文本编辑器`中出来的`html`内容，可以借助`js`进行处理。示意代码如下：\n\n```js\nlet oAList = document.querySelectorAll('a')\nArray.from(oAList).forEach( (aLink, index) => {\n    aLink.getAttribute('target') === '_blank' ? aLink.setAttribute('target', '_self') : null  // 设置成null也可\n})\n```","source":"_posts/wxwork-link-unRirect.md","raw":"---\ntitle: 企业微信中超链接地址跳转\ndate: 2019-05-21 11:04:11\ntags: [企微, 超链接]\n---\n\n#### 问题描述：\n\n在`ios(版本号未测试)企业微信(版本号未测试)`中，并且超链接`target`属性是`_blank`时，点击超链接不能正常跳转，当前页面自动刷新一次。\n<!-- More -->\n而在`ios微信浏览器`以及`android`中未复现。\n\n#### 解决办法\n\n1. 直接修改`target`属性值为`非_blank`即可；\n2. 如果是从`富文本编辑器`中出来的`html`内容，可以借助`js`进行处理。示意代码如下：\n\n```js\nlet oAList = document.querySelectorAll('a')\nArray.from(oAList).forEach( (aLink, index) => {\n    aLink.getAttribute('target') === '_blank' ? aLink.setAttribute('target', '_self') : null  // 设置成null也可\n})\n```","slug":"wxwork-link-unRirect","published":1,"updated":"2019-05-21T07:03:28.581Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34dm000tu66tyllfl2eu","content":"<h4 id=\"问题描述：\"><a href=\"#问题描述：\" class=\"headerlink\" title=\"问题描述：\"></a>问题描述：</h4><p>在<code>ios(版本号未测试)企业微信(版本号未测试)</code>中，并且超链接<code>target</code>属性是<code>_blank</code>时，点击超链接不能正常跳转，当前页面自动刷新一次。<br><a id=\"more\"></a><br>而在<code>ios微信浏览器</code>以及<code>android</code>中未复现。</p>\n<h4 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h4><ol>\n<li>直接修改<code>target</code>属性值为<code>非_blank</code>即可；</li>\n<li>如果是从<code>富文本编辑器</code>中出来的<code>html</code>内容，可以借助<code>js</code>进行处理。示意代码如下：</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> oAList = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'a'</span>)</span><br><span class=\"line\"><span class=\"built_in\">Array</span>.from(oAList).forEach( <span class=\"function\">(<span class=\"params\">aLink, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    aLink.getAttribute(<span class=\"string\">'target'</span>) === <span class=\"string\">'_blank'</span> ? aLink.setAttribute(<span class=\"string\">'target'</span>, <span class=\"string\">'_self'</span>) : <span class=\"literal\">null</span>  <span class=\"comment\">// 设置成null也可</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<h4 id=\"问题描述：\"><a href=\"#问题描述：\" class=\"headerlink\" title=\"问题描述：\"></a>问题描述：</h4><p>在<code>ios(版本号未测试)企业微信(版本号未测试)</code>中，并且超链接<code>target</code>属性是<code>_blank</code>时，点击超链接不能正常跳转，当前页面自动刷新一次。<br>","more":"<br>而在<code>ios微信浏览器</code>以及<code>android</code>中未复现。</p>\n<h4 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h4><ol>\n<li>直接修改<code>target</code>属性值为<code>非_blank</code>即可；</li>\n<li>如果是从<code>富文本编辑器</code>中出来的<code>html</code>内容，可以借助<code>js</code>进行处理。示意代码如下：</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> oAList = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'a'</span>)</span><br><span class=\"line\"><span class=\"built_in\">Array</span>.from(oAList).forEach( <span class=\"function\">(<span class=\"params\">aLink, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    aLink.getAttribute(<span class=\"string\">'target'</span>) === <span class=\"string\">'_blank'</span> ? aLink.setAttribute(<span class=\"string\">'target'</span>, <span class=\"string\">'_self'</span>) : <span class=\"literal\">null</span>  <span class=\"comment\">// 设置成null也可</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>"},{"title":"使用 void 0 代替 undefined","date":"2019-05-22T09:02:31.000Z","_content":"\n### What...\n\n```js\nvoid 0 === undefined  // true\n```\n\n<!-- More -->\n\n### Why？\n\n- 防止`undefined`被重写\n  \n> 在`ES5之`前，`window`下的`undefined`是可以被重写的，于是导致了某些极端情况下使用`undefined`会出现一定的差错。\n\n所以，用`void 0`是为了防止`undefined`被重写而出现判断不准确的情况。\n\n> 事实上，`void`的返回值都是`undefined`。\n> `ES5`之后的标准中，规定了全局变量下的`undefined`值为只读，不可改写的，但是局部变量中依然可以对之进行改写。\n> 补充一下：非严格模式下，`undefined`是可以重写的，严格模式则不能重写。\n\n- 节省字节\n\n`void 0`代替`undefined`节省3个字节，类似的还有以下用法：\n\n```js\n// 取整操作\nparseInt(a,10)  // Before\nMath.floor(a)  // Before\na>>0  // Before\n~~a  // After\na|0  // After\n\n// 四舍五入操作\nMath.round(a) // Before\na+.5|0  // After\n\n// 内置值\nundefined  // Before\nvoid 0  // After, 快\n0[0]  // After, 略慢\n\n// 内置值\nInfinity\n1/0\n\n// 布尔值短写法\ntrue;  // Before\nfalse  // Before\n!1  // After\n!0;  // After\n\n// 获取上下文对象\nvar global = (function () {\n    return this || (0, eval)('this')\n}())\n// (0, eval)('this') 等价于 eval('this') 正常情况下可以直接使用 eval()\n// 部分低版本IE下，不可以直接运行eval()。\n```","source":"_posts/void-0.md","raw":"---\ntitle: 使用 void 0 代替 undefined\ndate: 2019-05-22 17:02:31\ntags:\n---\n\n### What...\n\n```js\nvoid 0 === undefined  // true\n```\n\n<!-- More -->\n\n### Why？\n\n- 防止`undefined`被重写\n  \n> 在`ES5之`前，`window`下的`undefined`是可以被重写的，于是导致了某些极端情况下使用`undefined`会出现一定的差错。\n\n所以，用`void 0`是为了防止`undefined`被重写而出现判断不准确的情况。\n\n> 事实上，`void`的返回值都是`undefined`。\n> `ES5`之后的标准中，规定了全局变量下的`undefined`值为只读，不可改写的，但是局部变量中依然可以对之进行改写。\n> 补充一下：非严格模式下，`undefined`是可以重写的，严格模式则不能重写。\n\n- 节省字节\n\n`void 0`代替`undefined`节省3个字节，类似的还有以下用法：\n\n```js\n// 取整操作\nparseInt(a,10)  // Before\nMath.floor(a)  // Before\na>>0  // Before\n~~a  // After\na|0  // After\n\n// 四舍五入操作\nMath.round(a) // Before\na+.5|0  // After\n\n// 内置值\nundefined  // Before\nvoid 0  // After, 快\n0[0]  // After, 略慢\n\n// 内置值\nInfinity\n1/0\n\n// 布尔值短写法\ntrue;  // Before\nfalse  // Before\n!1  // After\n!0;  // After\n\n// 获取上下文对象\nvar global = (function () {\n    return this || (0, eval)('this')\n}())\n// (0, eval)('this') 等价于 eval('this') 正常情况下可以直接使用 eval()\n// 部分低版本IE下，不可以直接运行eval()。\n```","slug":"void-0","published":1,"updated":"2019-05-23T06:44:42.351Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34dn000uu66tegitmq68","content":"<h3 id=\"What…\"><a href=\"#What…\" class=\"headerlink\" title=\"What…\"></a>What…</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"number\">0</span> === <span class=\"literal\">undefined</span>  <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h3 id=\"Why？\"><a href=\"#Why？\" class=\"headerlink\" title=\"Why？\"></a>Why？</h3><ul>\n<li>防止<code>undefined</code>被重写</li>\n</ul>\n<blockquote>\n<p>在<code>ES5之</code>前，<code>window</code>下的<code>undefined</code>是可以被重写的，于是导致了某些极端情况下使用<code>undefined</code>会出现一定的差错。</p>\n</blockquote>\n<p>所以，用<code>void 0</code>是为了防止<code>undefined</code>被重写而出现判断不准确的情况。</p>\n<blockquote>\n<p>事实上，<code>void</code>的返回值都是<code>undefined</code>。<br><code>ES5</code>之后的标准中，规定了全局变量下的<code>undefined</code>值为只读，不可改写的，但是局部变量中依然可以对之进行改写。<br>补充一下：非严格模式下，<code>undefined</code>是可以重写的，严格模式则不能重写。</p>\n</blockquote>\n<ul>\n<li>节省字节</li>\n</ul>\n<p><code>void 0</code>代替<code>undefined</code>节省3个字节，类似的还有以下用法：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 取整操作</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(a,<span class=\"number\">10</span>)  <span class=\"comment\">// Before</span></span><br><span class=\"line\"><span class=\"built_in\">Math</span>.floor(a)  <span class=\"comment\">// Before</span></span><br><span class=\"line\">a&gt;&gt;<span class=\"number\">0</span>  <span class=\"comment\">// Before</span></span><br><span class=\"line\">~~a  <span class=\"comment\">// After</span></span><br><span class=\"line\">a|<span class=\"number\">0</span>  <span class=\"comment\">// After</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 四舍五入操作</span></span><br><span class=\"line\"><span class=\"built_in\">Math</span>.round(a) <span class=\"comment\">// Before</span></span><br><span class=\"line\">a+<span class=\"number\">.5</span>|<span class=\"number\">0</span>  <span class=\"comment\">// After</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 内置值</span></span><br><span class=\"line\"><span class=\"literal\">undefined</span>  <span class=\"comment\">// Before</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"number\">0</span>  <span class=\"comment\">// After, 快</span></span><br><span class=\"line\"><span class=\"number\">0</span>[<span class=\"number\">0</span>]  <span class=\"comment\">// After, 略慢</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 内置值</span></span><br><span class=\"line\"><span class=\"literal\">Infinity</span></span><br><span class=\"line\"><span class=\"number\">1</span>/<span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 布尔值短写法</span></span><br><span class=\"line\"><span class=\"literal\">true</span>;  <span class=\"comment\">// Before</span></span><br><span class=\"line\"><span class=\"literal\">false</span>  <span class=\"comment\">// Before</span></span><br><span class=\"line\">!<span class=\"number\">1</span>  <span class=\"comment\">// After</span></span><br><span class=\"line\">!<span class=\"number\">0</span>;  <span class=\"comment\">// After</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取上下文对象</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> global = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span> || (<span class=\"number\">0</span>, <span class=\"built_in\">eval</span>)(<span class=\"string\">'this'</span>)</span><br><span class=\"line\">&#125;())</span><br><span class=\"line\"><span class=\"comment\">// (0, eval)('this') 等价于 eval('this') 正常情况下可以直接使用 eval()</span></span><br><span class=\"line\"><span class=\"comment\">// 部分低版本IE下，不可以直接运行eval()。</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<h3 id=\"What…\"><a href=\"#What…\" class=\"headerlink\" title=\"What…\"></a>What…</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"number\">0</span> === <span class=\"literal\">undefined</span>  <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>","more":"<h3 id=\"Why？\"><a href=\"#Why？\" class=\"headerlink\" title=\"Why？\"></a>Why？</h3><ul>\n<li>防止<code>undefined</code>被重写</li>\n</ul>\n<blockquote>\n<p>在<code>ES5之</code>前，<code>window</code>下的<code>undefined</code>是可以被重写的，于是导致了某些极端情况下使用<code>undefined</code>会出现一定的差错。</p>\n</blockquote>\n<p>所以，用<code>void 0</code>是为了防止<code>undefined</code>被重写而出现判断不准确的情况。</p>\n<blockquote>\n<p>事实上，<code>void</code>的返回值都是<code>undefined</code>。<br><code>ES5</code>之后的标准中，规定了全局变量下的<code>undefined</code>值为只读，不可改写的，但是局部变量中依然可以对之进行改写。<br>补充一下：非严格模式下，<code>undefined</code>是可以重写的，严格模式则不能重写。</p>\n</blockquote>\n<ul>\n<li>节省字节</li>\n</ul>\n<p><code>void 0</code>代替<code>undefined</code>节省3个字节，类似的还有以下用法：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 取整操作</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(a,<span class=\"number\">10</span>)  <span class=\"comment\">// Before</span></span><br><span class=\"line\"><span class=\"built_in\">Math</span>.floor(a)  <span class=\"comment\">// Before</span></span><br><span class=\"line\">a&gt;&gt;<span class=\"number\">0</span>  <span class=\"comment\">// Before</span></span><br><span class=\"line\">~~a  <span class=\"comment\">// After</span></span><br><span class=\"line\">a|<span class=\"number\">0</span>  <span class=\"comment\">// After</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 四舍五入操作</span></span><br><span class=\"line\"><span class=\"built_in\">Math</span>.round(a) <span class=\"comment\">// Before</span></span><br><span class=\"line\">a+<span class=\"number\">.5</span>|<span class=\"number\">0</span>  <span class=\"comment\">// After</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 内置值</span></span><br><span class=\"line\"><span class=\"literal\">undefined</span>  <span class=\"comment\">// Before</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"number\">0</span>  <span class=\"comment\">// After, 快</span></span><br><span class=\"line\"><span class=\"number\">0</span>[<span class=\"number\">0</span>]  <span class=\"comment\">// After, 略慢</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 内置值</span></span><br><span class=\"line\"><span class=\"literal\">Infinity</span></span><br><span class=\"line\"><span class=\"number\">1</span>/<span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 布尔值短写法</span></span><br><span class=\"line\"><span class=\"literal\">true</span>;  <span class=\"comment\">// Before</span></span><br><span class=\"line\"><span class=\"literal\">false</span>  <span class=\"comment\">// Before</span></span><br><span class=\"line\">!<span class=\"number\">1</span>  <span class=\"comment\">// After</span></span><br><span class=\"line\">!<span class=\"number\">0</span>;  <span class=\"comment\">// After</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取上下文对象</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> global = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span> || (<span class=\"number\">0</span>, <span class=\"built_in\">eval</span>)(<span class=\"string\">'this'</span>)</span><br><span class=\"line\">&#125;())</span><br><span class=\"line\"><span class=\"comment\">// (0, eval)('this') 等价于 eval('this') 正常情况下可以直接使用 eval()</span></span><br><span class=\"line\"><span class=\"comment\">// 部分低版本IE下，不可以直接运行eval()。</span></span><br></pre></td></tr></table></figure>"},{"title":"defineproperty-proxy","date":"2020-08-31T08:25:17.000Z","toc":true,"_content":"\n在一篇 [掘金文章](https://juejin.im/post/6861725116389130254) 中看到这样一道题目，大概是以下的需求。\n\n补全Observe函数，使得执行 `proxyObj.name = '大大'` 时，打印 `属性[name]的值被修改为[大大]`。\n\n```js\nfunction Observe(obj, callback) {\n    // TO DO\n}\n\nlet oldObj = {\n    name: '小小',\n    uid: 108\n}\nconst proxyObj = Observe(oldObj, (key, value) => {\n    console.log(`属性[${key}]的值被修改为[${value}]`)\n})\n```\n\n<!-- more -->\n\n### 1. Object.defineProperty\n\n```js\nfunction Observe(obj, callback) {\n    const observedObj = {}\n    Object.keys(obj).forEach( (key) => {\n        Object.defineProperty(observedObj, key, {\n            configurable: true,\n            enumerable: true,\n            get: () => {\n                console.log('emit getter', key)\n                return obj[key]\n            },\n            set: (newVal) => {\n                console.log('emit setter', key)\n                obj[key] = newVal\n                callback(key, newVal)\n            }\n        })\n    })\n\n    return observedObj\n}\n\nlet oldObj = {\n    name: '小小',\n    uid: 108\n}\nconst proxyObj = Observe(oldObj, (key, value) => {\n    console.log(`属性[${key}]的值被修改为[${value}]`)\n})\n\n// output:\n// emit getter name\n// 小小\nconsole.log(proxyObj.name)\n\n// output:\n// emit setter name\n// 属性[name]的值被修改为[大大]\nproxyObj.name = '大大'\n```\n\n### 2. Proxy\n\n```js\nfunction Observe(obj, callback) {\n    return new Proxy(obj, {\n        get: (target, key) => {\n            console.log('emit getter', key)\n            return target[key]\n        },\n        set: (target, key, newVal) => {\n            console.log('emit setter', key)\n            obj[key] = newVal\n            callback(key, newVal)\n        }\n    })\n}\n\nlet oldObj = {\n    name: '小小',\n    uid: 108\n}\nconst proxyObj = Observe(oldObj, (key, value) => {\n    console.log(`属性[${key}]的值被修改为[${value}]`)\n})\n\n// output:\n// emit getter name\n// 小小\nconsole.log(proxyObj.name)\n\n// output:\n// emit setter name\n// 属性[name]的值被修改为[大大]\nproxyObj.name = '大大'\n```\n\n### 3. 对比\n\n> 在Vue2.0中，数据双向绑定就是通过Object.defineProperty去监听对象的每一个属性，然后在get,set方法中通过发布订阅者模式来实现的数据响应，但是存在一定的缺陷，比如只能监听已存在的属性，对于新增删除属性就无能为力了，同时无法监听数组的变化，所以在Vue3.0中将其换成了功能更强大的Proxy。\n\n在上面的代码中，如果执行 `proxyObj.newVariable = 'haha'`，defineProperty实现将不能触发setter方法，Proxy实现能够触发。\n\n#### 4. 了解Proxy\n\n> Proxy 对象用于定义基本操作的自定义行为（如属性查找、赋值、枚举、函数调用等）\n\n#### 4.0 基本语法\n\n```js\nconst proxy = new Proxy(target, handler)\n```\n\n在上面的代码中，已经使用到了handler里的get与set。除此之外还有11个方法，共计13个。重点描述几个常用的方法。\n\n#### 4.1 `handler.get(target, key, receiver)`\n\n- 属性读取操作的捕捉器。当通过proxy去读取对象里面的属性的时候，会进入到get钩子函数里面。\n- `target` 目标对象\n- `key` 被获取的属性名\n- `receiver` Proxy或者集成Proxy的对象\n\n```js\nconst proxy = new Proxy({}, {\n    get(target, key, receiver) {\n        console.log('emit getter', target, key, receiver)\n        return target[key]\n    }\n})\n```\n\n如果违背了以下的约束，proxy会抛出 TypeError\n\n- 如果要访问的目标属性是 `不可写` 并且 `不可配置` 的，则返回的值必须与该目标属性的值相同。\n- 如果要访问的目标属性没有配置访问方法，即get方法是undefined的，则返回值必须为undefined。(没理解，未配置get方法，返回值怎么定义?)\n\n```js\nvar obj = {}\nObject.defineProperty(obj, 'age', {\n    configurable: false,\n    writable: false,\n    value: 10\n})\nvar p = new Proxy(obj, {\n    get(target, key) {\n        return 20\n    }\n})\n// Uncaught TypeError: 'get' on proxy: property 'age' is a read-only and non-configurable data property on the proxy target but the proxy did not return its actual value (expected '10' but got '20')\nconsole.log(p.age)\n```\n\n#### 4.2 `handler.set(target, key, value, receiver)`\n\n- 属性设置操作的捕捉器。当通过proxy去为对象设置修改属性的时候，会进入到set钩子函数里面。\n- `target` 目标对象\n- `key` 将被设置的属性名或 Symbol\n- `value` 新属性值\n- `receiver` 最初被调用的对象。通常是 proxy 本身，但 handler 的 set 方法也有可能在原型链上，或以其他方式被间接地调用（因此不一定是 proxy 本身）。比如：假设有一段代码执行 obj.name = \"jen\"， obj 不是一个 proxy，且自身不含 name 属性，但是它的原型链上有一个 proxy，那么，那个 proxy 的 set() 处理器会被调用，而此时，obj 会作为 receiver 参数传进来。\n- `返回值` set() 方法应当返回一个布尔值\n  - 返回 true 代表属性设置成功。\n  - 在严格模式下，如果 set() 方法返回 false，那么会抛出一个 TypeError 异常。\n\n如果违背了以下的约束，proxy会抛出 TypeError\n\n- 若目标属性是一个不可写以及不可配置的数据属性，则不能改变它的值。(但是经过测试，并没有抛出错误❌)\n- 如果目标属性没有配置存储方法，即 [[Set]] 属性的是 undefined，则不能设置它的值。(同样的疑问，没有set方法，如何设置值呢?)\n- 在严格模式下，如果 set() 方法返回 false，那么也会抛出一个 TypeError 异常。\n\n```js\nvar p = new Proxy({}, {\n    set(target, key, value, receiver) {\n        target[key] = value\n        // 非严格模式下可省略\n        return true\n    }\n})\np.age = 10\n```\n\n```js\n\"use strict\"\nvar p = new Proxy({}, {\n    set(target, key, value, receiver) {\n        target[key] = value\n        // 严格模式没有返回值或返回false 会抛出TypeError\n        return false\n    }\n})\n// Uncaught TypeError: 'set' on proxy: trap returned falsish for property 'age'\np.age = 10\n```\n\n```js\nvar obj = {}\nObject.defineProperty(obj, 'age', {\n    configurable: false,\n    writable: false,\n    value: 10\n})\nvar p = new Proxy(obj, {\n    set(target, key, value, receiver) {\n        target[key] = value\n        return true\n    }\n})\n// 设置成功 没有抛错误❌\np.age = 20\n```\n\n对比Vue2.x\n\n> 在使用Vue2.0的时候，如果给对象添加新属性的时候，往往需要调用 `$set`, 这是因为Object.defineProperty只能监听已存在的属性，而新增的属性无法监听，而通过 `$set` 相当于手动给对象新增了属性，然后再触发数据响应。但是对于Vue3.0来说，因为使用了Proxy，在他的set钩子函数中是可以监听到新增属性的，所以就不再需要使用\n\n#### 4.3 `handler.has(target, key)`\n\n- in 操作符的捕捉器。当使用in判断属性是否在proxy代理对象里面时，会触发。\n- `target` 目标对象\n- `key` 需要检查是否存在的属性.\n- `返回值` has 方法返回一个 boolean 属性的值.\n\n```js\nconst obj = {\n  publicFn() {},\n  _privateFn() {}\n}\nconst p = new Proxy(obj, {\n    has(target, key) {\n        if (key.startWith('_')) {\n            return false\n        }\n        return target[key]\n    }\n})\nconsole.log('publicFn' in obj)  // true\nconsole.log('_privateFn' in obj)  // false\n```\n\n如果违反了下面这些规则,  proxy 将会抛出 TypeError:\n\n- 如果目标对象的某一属性本身不可被配置，则该属性不能够被代理隐藏(怎么写示例...)\n- 如果目标对象为不可扩展对象，则该对象的属性不能够被代理隐藏\n\n```js\nvar obj = { age: 10 }\nObject.preventExtensions(obj)\nvar p = new Proxy(obj, {\n    has: function(target, key) {\n        return false\n    }\n})\n// Uncaught TypeError: 'has' on proxy: trap returned falsish for property 'a' but the proxy target is not extensible\nconsole.log('age' in p)\n```\n\n#### 4.4 `handler.deleteProperty(target, key)`\n\n- `delete` 操作符的捕捉器。当使用delete去删除对象里面的属性的时候，会进入deleteProperty`钩子函数\n- `target` 目标对象\n- `key` 待删除的属性名\n- `返回值` deleteProperty 必须返回一个 Boolean 类型的值，表示了该属性是否被成功删除。\n\n```js\nvar p = new Proxy({ name: 'zhangsan', age: 10 }, {\n    deleteProperty(target, key) {\n        console.log(target, key)\n        if (key === 'name') {\n            console.log('属性' + key + '不可以被删除')\n            return false\n        }\n        delete target[key]\n        return true\n    }\n})\n// true undefined\nconsole.log(delete p.age, p.age)\n// 属性name不可以被删除\n// false zhangsan\nconsole.log(delete p.name, p.name)\n```\n\n如果违背了以下不变量，proxy 将会抛出一个 TypeError:\n\n- 如果目标对象的属性是不可配置的，那么该属性不能被删除\n\n```js\nvar obj = {}\nObject.defineProperty(obj, 'age', {\n    configurable: false,\n    value: 10\n})\nvar p = new Proxy(obj, {\n    deleteProperty(target, key) {\n        delete target[key]\n        return true\n    }\n})\n// Uncaught TypeError: 'deleteProperty' on proxy: trap returned truish for property 'age' which is non-configurable in the proxy target\nconsole.log(delete p.age, p.age)\n```\n\n对比vue2.x\n\n> 其实与 `$set` 解决的问题类似，Vue2.0是无法监听到属性被删除的，所以提供了 `$delete` 用于删除属性，但是对于Proxy，是可以监听删除操作的，所以就不需要再使用 `$delete` 了\n\n#### 4.5 `handler.apply(target, thisArg, argumentsList)`\n\n- 函数调用操作的捕捉器。当proxy监听的是一个函数的时候，当调用这个函数时，会进入apply钩子函数\n- `target` 目标对象（函数）\n- `thisArg` 被调用时的上下文对象\n- `argumentsList` 被调用时的参数数组\n- `返回值` 可返回任何值\n\n```js\nvar p = new Proxy(function() {}, {\n    apply(target, thisArg, argumentsList) {\n        return argumentsList[0] + argumentsList[1] + argumentsList[2]\n    }\n})\n// 6\nconsole.log(p(1, 2, 3))\n```\n\n如果违反了以下约束，代理将抛出一个TypeError：\n\n- target必须是可被调用的。也就是说，它必须是一个函数对象。上面的代码中，将 `function(){}` 改成 `{}` 将会报错\n\n#### 4.6 `handler.ownKeys`\n\n当通过 `Object.getOwnPropertyNames`,`Object.getownPropertySymbols`,`Object.keys`,`Reflect.ownKeys`去获取对象的信息的时候，就会进入ownKeys这个钩子函数\n\n#### 4.7 `handler.construct`\n\n当使用new操作符的时候，会进入construct这个钩子函数\n\n#### 4.8 `handler.defineProperty`\n\n当使用Object.defineProperty去修改属性修饰符的时候，会进入这个钩子函数\n\n#### 4.9 `handler.getPropertyOf`\n\n当读取对象的原型的时候，会进入这个钩子函数\n\n#### 4.10 `handler.setPropertyOf`\n\n当设置对象的原型的时候，会进入这个钩子函数\n\n#### 4.11 `handler.isExtensible`\n\n当通过Object.isExtensible去判断对象是否可以添加新的属性的时候，进入这个钩子函数\n\n#### 4.12 `handler.preventExtensions`\n\n当通过Object.preventExtensions去设置对象不可以修改新属性时候，进入这个钩子函数\n\n#### 4.13 `handler.getOwnPropertyDescriptor`\n\n在获取代理对象某个属性的属性描述时触发该操作，比如在执行 Object.getOwnPropertyDescriptor(proxy, \"foo\") 时会进入这个钩子函数\n\n### 5. Reflect\n\n> 在上面，我们获取属性的值或者修改属性的值都是通过直接操作target来实现的，但实际上ES6已经为我们提供了在Proxy内部调用对象的默认行为的API,即Reflect。比如下面的代码\n\n```js\nconst obj = {}\nconst proxy = new Proxy(obj, {\n    get(target, key, receiver) {\n        return Reflect.get(target, key, receiver)\n    }\n})\n```\n\n> 大家可能看到上面的代码与直接使用target[key]的方式没什么区别，但实际上Reflect的出现是为了让Object上面的操作更加规范，比如我们要判断某一个prop是否在一个对象中，通常会使用到in,即\n\n```js\nconst obj = {name: 'zhangsan'}\nconsole.log('name' in obj)\n```\n\n> 但上面的操作是一种命令式的语法，通过Reflect可以将其转变为函数式的语法，显得更加规范\n\n```js\nReflect.has(obj,'name')\n```\n\n### 6. 参考文章\n\n- [掘金博文](https://juejin.im/post/6861725116389130254)\n- [MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy)\n","source":"_posts/defineproperty-proxy.md","raw":"---\ntitle: defineproperty-proxy\ndate: 2020-08-31 16:25:17\ntoc: true\ntags: [defineProperty, proxy]\n---\n\n在一篇 [掘金文章](https://juejin.im/post/6861725116389130254) 中看到这样一道题目，大概是以下的需求。\n\n补全Observe函数，使得执行 `proxyObj.name = '大大'` 时，打印 `属性[name]的值被修改为[大大]`。\n\n```js\nfunction Observe(obj, callback) {\n    // TO DO\n}\n\nlet oldObj = {\n    name: '小小',\n    uid: 108\n}\nconst proxyObj = Observe(oldObj, (key, value) => {\n    console.log(`属性[${key}]的值被修改为[${value}]`)\n})\n```\n\n<!-- more -->\n\n### 1. Object.defineProperty\n\n```js\nfunction Observe(obj, callback) {\n    const observedObj = {}\n    Object.keys(obj).forEach( (key) => {\n        Object.defineProperty(observedObj, key, {\n            configurable: true,\n            enumerable: true,\n            get: () => {\n                console.log('emit getter', key)\n                return obj[key]\n            },\n            set: (newVal) => {\n                console.log('emit setter', key)\n                obj[key] = newVal\n                callback(key, newVal)\n            }\n        })\n    })\n\n    return observedObj\n}\n\nlet oldObj = {\n    name: '小小',\n    uid: 108\n}\nconst proxyObj = Observe(oldObj, (key, value) => {\n    console.log(`属性[${key}]的值被修改为[${value}]`)\n})\n\n// output:\n// emit getter name\n// 小小\nconsole.log(proxyObj.name)\n\n// output:\n// emit setter name\n// 属性[name]的值被修改为[大大]\nproxyObj.name = '大大'\n```\n\n### 2. Proxy\n\n```js\nfunction Observe(obj, callback) {\n    return new Proxy(obj, {\n        get: (target, key) => {\n            console.log('emit getter', key)\n            return target[key]\n        },\n        set: (target, key, newVal) => {\n            console.log('emit setter', key)\n            obj[key] = newVal\n            callback(key, newVal)\n        }\n    })\n}\n\nlet oldObj = {\n    name: '小小',\n    uid: 108\n}\nconst proxyObj = Observe(oldObj, (key, value) => {\n    console.log(`属性[${key}]的值被修改为[${value}]`)\n})\n\n// output:\n// emit getter name\n// 小小\nconsole.log(proxyObj.name)\n\n// output:\n// emit setter name\n// 属性[name]的值被修改为[大大]\nproxyObj.name = '大大'\n```\n\n### 3. 对比\n\n> 在Vue2.0中，数据双向绑定就是通过Object.defineProperty去监听对象的每一个属性，然后在get,set方法中通过发布订阅者模式来实现的数据响应，但是存在一定的缺陷，比如只能监听已存在的属性，对于新增删除属性就无能为力了，同时无法监听数组的变化，所以在Vue3.0中将其换成了功能更强大的Proxy。\n\n在上面的代码中，如果执行 `proxyObj.newVariable = 'haha'`，defineProperty实现将不能触发setter方法，Proxy实现能够触发。\n\n#### 4. 了解Proxy\n\n> Proxy 对象用于定义基本操作的自定义行为（如属性查找、赋值、枚举、函数调用等）\n\n#### 4.0 基本语法\n\n```js\nconst proxy = new Proxy(target, handler)\n```\n\n在上面的代码中，已经使用到了handler里的get与set。除此之外还有11个方法，共计13个。重点描述几个常用的方法。\n\n#### 4.1 `handler.get(target, key, receiver)`\n\n- 属性读取操作的捕捉器。当通过proxy去读取对象里面的属性的时候，会进入到get钩子函数里面。\n- `target` 目标对象\n- `key` 被获取的属性名\n- `receiver` Proxy或者集成Proxy的对象\n\n```js\nconst proxy = new Proxy({}, {\n    get(target, key, receiver) {\n        console.log('emit getter', target, key, receiver)\n        return target[key]\n    }\n})\n```\n\n如果违背了以下的约束，proxy会抛出 TypeError\n\n- 如果要访问的目标属性是 `不可写` 并且 `不可配置` 的，则返回的值必须与该目标属性的值相同。\n- 如果要访问的目标属性没有配置访问方法，即get方法是undefined的，则返回值必须为undefined。(没理解，未配置get方法，返回值怎么定义?)\n\n```js\nvar obj = {}\nObject.defineProperty(obj, 'age', {\n    configurable: false,\n    writable: false,\n    value: 10\n})\nvar p = new Proxy(obj, {\n    get(target, key) {\n        return 20\n    }\n})\n// Uncaught TypeError: 'get' on proxy: property 'age' is a read-only and non-configurable data property on the proxy target but the proxy did not return its actual value (expected '10' but got '20')\nconsole.log(p.age)\n```\n\n#### 4.2 `handler.set(target, key, value, receiver)`\n\n- 属性设置操作的捕捉器。当通过proxy去为对象设置修改属性的时候，会进入到set钩子函数里面。\n- `target` 目标对象\n- `key` 将被设置的属性名或 Symbol\n- `value` 新属性值\n- `receiver` 最初被调用的对象。通常是 proxy 本身，但 handler 的 set 方法也有可能在原型链上，或以其他方式被间接地调用（因此不一定是 proxy 本身）。比如：假设有一段代码执行 obj.name = \"jen\"， obj 不是一个 proxy，且自身不含 name 属性，但是它的原型链上有一个 proxy，那么，那个 proxy 的 set() 处理器会被调用，而此时，obj 会作为 receiver 参数传进来。\n- `返回值` set() 方法应当返回一个布尔值\n  - 返回 true 代表属性设置成功。\n  - 在严格模式下，如果 set() 方法返回 false，那么会抛出一个 TypeError 异常。\n\n如果违背了以下的约束，proxy会抛出 TypeError\n\n- 若目标属性是一个不可写以及不可配置的数据属性，则不能改变它的值。(但是经过测试，并没有抛出错误❌)\n- 如果目标属性没有配置存储方法，即 [[Set]] 属性的是 undefined，则不能设置它的值。(同样的疑问，没有set方法，如何设置值呢?)\n- 在严格模式下，如果 set() 方法返回 false，那么也会抛出一个 TypeError 异常。\n\n```js\nvar p = new Proxy({}, {\n    set(target, key, value, receiver) {\n        target[key] = value\n        // 非严格模式下可省略\n        return true\n    }\n})\np.age = 10\n```\n\n```js\n\"use strict\"\nvar p = new Proxy({}, {\n    set(target, key, value, receiver) {\n        target[key] = value\n        // 严格模式没有返回值或返回false 会抛出TypeError\n        return false\n    }\n})\n// Uncaught TypeError: 'set' on proxy: trap returned falsish for property 'age'\np.age = 10\n```\n\n```js\nvar obj = {}\nObject.defineProperty(obj, 'age', {\n    configurable: false,\n    writable: false,\n    value: 10\n})\nvar p = new Proxy(obj, {\n    set(target, key, value, receiver) {\n        target[key] = value\n        return true\n    }\n})\n// 设置成功 没有抛错误❌\np.age = 20\n```\n\n对比Vue2.x\n\n> 在使用Vue2.0的时候，如果给对象添加新属性的时候，往往需要调用 `$set`, 这是因为Object.defineProperty只能监听已存在的属性，而新增的属性无法监听，而通过 `$set` 相当于手动给对象新增了属性，然后再触发数据响应。但是对于Vue3.0来说，因为使用了Proxy，在他的set钩子函数中是可以监听到新增属性的，所以就不再需要使用\n\n#### 4.3 `handler.has(target, key)`\n\n- in 操作符的捕捉器。当使用in判断属性是否在proxy代理对象里面时，会触发。\n- `target` 目标对象\n- `key` 需要检查是否存在的属性.\n- `返回值` has 方法返回一个 boolean 属性的值.\n\n```js\nconst obj = {\n  publicFn() {},\n  _privateFn() {}\n}\nconst p = new Proxy(obj, {\n    has(target, key) {\n        if (key.startWith('_')) {\n            return false\n        }\n        return target[key]\n    }\n})\nconsole.log('publicFn' in obj)  // true\nconsole.log('_privateFn' in obj)  // false\n```\n\n如果违反了下面这些规则,  proxy 将会抛出 TypeError:\n\n- 如果目标对象的某一属性本身不可被配置，则该属性不能够被代理隐藏(怎么写示例...)\n- 如果目标对象为不可扩展对象，则该对象的属性不能够被代理隐藏\n\n```js\nvar obj = { age: 10 }\nObject.preventExtensions(obj)\nvar p = new Proxy(obj, {\n    has: function(target, key) {\n        return false\n    }\n})\n// Uncaught TypeError: 'has' on proxy: trap returned falsish for property 'a' but the proxy target is not extensible\nconsole.log('age' in p)\n```\n\n#### 4.4 `handler.deleteProperty(target, key)`\n\n- `delete` 操作符的捕捉器。当使用delete去删除对象里面的属性的时候，会进入deleteProperty`钩子函数\n- `target` 目标对象\n- `key` 待删除的属性名\n- `返回值` deleteProperty 必须返回一个 Boolean 类型的值，表示了该属性是否被成功删除。\n\n```js\nvar p = new Proxy({ name: 'zhangsan', age: 10 }, {\n    deleteProperty(target, key) {\n        console.log(target, key)\n        if (key === 'name') {\n            console.log('属性' + key + '不可以被删除')\n            return false\n        }\n        delete target[key]\n        return true\n    }\n})\n// true undefined\nconsole.log(delete p.age, p.age)\n// 属性name不可以被删除\n// false zhangsan\nconsole.log(delete p.name, p.name)\n```\n\n如果违背了以下不变量，proxy 将会抛出一个 TypeError:\n\n- 如果目标对象的属性是不可配置的，那么该属性不能被删除\n\n```js\nvar obj = {}\nObject.defineProperty(obj, 'age', {\n    configurable: false,\n    value: 10\n})\nvar p = new Proxy(obj, {\n    deleteProperty(target, key) {\n        delete target[key]\n        return true\n    }\n})\n// Uncaught TypeError: 'deleteProperty' on proxy: trap returned truish for property 'age' which is non-configurable in the proxy target\nconsole.log(delete p.age, p.age)\n```\n\n对比vue2.x\n\n> 其实与 `$set` 解决的问题类似，Vue2.0是无法监听到属性被删除的，所以提供了 `$delete` 用于删除属性，但是对于Proxy，是可以监听删除操作的，所以就不需要再使用 `$delete` 了\n\n#### 4.5 `handler.apply(target, thisArg, argumentsList)`\n\n- 函数调用操作的捕捉器。当proxy监听的是一个函数的时候，当调用这个函数时，会进入apply钩子函数\n- `target` 目标对象（函数）\n- `thisArg` 被调用时的上下文对象\n- `argumentsList` 被调用时的参数数组\n- `返回值` 可返回任何值\n\n```js\nvar p = new Proxy(function() {}, {\n    apply(target, thisArg, argumentsList) {\n        return argumentsList[0] + argumentsList[1] + argumentsList[2]\n    }\n})\n// 6\nconsole.log(p(1, 2, 3))\n```\n\n如果违反了以下约束，代理将抛出一个TypeError：\n\n- target必须是可被调用的。也就是说，它必须是一个函数对象。上面的代码中，将 `function(){}` 改成 `{}` 将会报错\n\n#### 4.6 `handler.ownKeys`\n\n当通过 `Object.getOwnPropertyNames`,`Object.getownPropertySymbols`,`Object.keys`,`Reflect.ownKeys`去获取对象的信息的时候，就会进入ownKeys这个钩子函数\n\n#### 4.7 `handler.construct`\n\n当使用new操作符的时候，会进入construct这个钩子函数\n\n#### 4.8 `handler.defineProperty`\n\n当使用Object.defineProperty去修改属性修饰符的时候，会进入这个钩子函数\n\n#### 4.9 `handler.getPropertyOf`\n\n当读取对象的原型的时候，会进入这个钩子函数\n\n#### 4.10 `handler.setPropertyOf`\n\n当设置对象的原型的时候，会进入这个钩子函数\n\n#### 4.11 `handler.isExtensible`\n\n当通过Object.isExtensible去判断对象是否可以添加新的属性的时候，进入这个钩子函数\n\n#### 4.12 `handler.preventExtensions`\n\n当通过Object.preventExtensions去设置对象不可以修改新属性时候，进入这个钩子函数\n\n#### 4.13 `handler.getOwnPropertyDescriptor`\n\n在获取代理对象某个属性的属性描述时触发该操作，比如在执行 Object.getOwnPropertyDescriptor(proxy, \"foo\") 时会进入这个钩子函数\n\n### 5. Reflect\n\n> 在上面，我们获取属性的值或者修改属性的值都是通过直接操作target来实现的，但实际上ES6已经为我们提供了在Proxy内部调用对象的默认行为的API,即Reflect。比如下面的代码\n\n```js\nconst obj = {}\nconst proxy = new Proxy(obj, {\n    get(target, key, receiver) {\n        return Reflect.get(target, key, receiver)\n    }\n})\n```\n\n> 大家可能看到上面的代码与直接使用target[key]的方式没什么区别，但实际上Reflect的出现是为了让Object上面的操作更加规范，比如我们要判断某一个prop是否在一个对象中，通常会使用到in,即\n\n```js\nconst obj = {name: 'zhangsan'}\nconsole.log('name' in obj)\n```\n\n> 但上面的操作是一种命令式的语法，通过Reflect可以将其转变为函数式的语法，显得更加规范\n\n```js\nReflect.has(obj,'name')\n```\n\n### 6. 参考文章\n\n- [掘金博文](https://juejin.im/post/6861725116389130254)\n- [MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy)\n","slug":"defineproperty-proxy","published":1,"updated":"2020-09-01T07:08:10.653Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34dx001ru66tk8d13hg2","content":"<p>在一篇 <a href=\"https://juejin.im/post/6861725116389130254\" target=\"_blank\" rel=\"noopener\">掘金文章</a> 中看到这样一道题目，大概是以下的需求。</p>\n<p>补全Observe函数，使得执行 <code>proxyObj.name = &#39;大大&#39;</code> 时，打印 <code>属性[name]的值被修改为[大大]</code>。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Observe</span>(<span class=\"params\">obj, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// TO DO</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> oldObj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'小小'</span>,</span><br><span class=\"line\">    uid: <span class=\"number\">108</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> proxyObj = Observe(oldObj, (key, value) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`属性[<span class=\"subst\">$&#123;key&#125;</span>]的值被修改为[<span class=\"subst\">$&#123;value&#125;</span>]`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h3 id=\"1-Object-defineProperty\"><a href=\"#1-Object-defineProperty\" class=\"headerlink\" title=\"1. Object.defineProperty\"></a>1. Object.defineProperty</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Observe</span>(<span class=\"params\">obj, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> observedObj = &#123;&#125;</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.keys(obj).forEach( <span class=\"function\">(<span class=\"params\">key</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">Object</span>.defineProperty(observedObj, key, &#123;</span><br><span class=\"line\">            configurable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"keyword\">get</span>: () =&gt; &#123;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'emit getter'</span>, key)</span><br><span class=\"line\">                <span class=\"keyword\">return</span> obj[key]</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"keyword\">set</span>: (newVal) =&gt; &#123;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'emit setter'</span>, key)</span><br><span class=\"line\">                obj[key] = newVal</span><br><span class=\"line\">                callback(key, newVal)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> observedObj</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> oldObj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'小小'</span>,</span><br><span class=\"line\">    uid: <span class=\"number\">108</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> proxyObj = Observe(oldObj, (key, value) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`属性[<span class=\"subst\">$&#123;key&#125;</span>]的值被修改为[<span class=\"subst\">$&#123;value&#125;</span>]`</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// emit getter name</span></span><br><span class=\"line\"><span class=\"comment\">// 小小</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(proxyObj.name)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// emit setter name</span></span><br><span class=\"line\"><span class=\"comment\">// 属性[name]的值被修改为[大大]</span></span><br><span class=\"line\">proxyObj.name = <span class=\"string\">'大大'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-Proxy\"><a href=\"#2-Proxy\" class=\"headerlink\" title=\"2. Proxy\"></a>2. Proxy</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Observe</span>(<span class=\"params\">obj, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span>: (target, key) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'emit getter'</span>, key)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> target[key]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"keyword\">set</span>: (target, key, newVal) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'emit setter'</span>, key)</span><br><span class=\"line\">            obj[key] = newVal</span><br><span class=\"line\">            callback(key, newVal)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> oldObj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'小小'</span>,</span><br><span class=\"line\">    uid: <span class=\"number\">108</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> proxyObj = Observe(oldObj, (key, value) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`属性[<span class=\"subst\">$&#123;key&#125;</span>]的值被修改为[<span class=\"subst\">$&#123;value&#125;</span>]`</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// emit getter name</span></span><br><span class=\"line\"><span class=\"comment\">// 小小</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(proxyObj.name)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// emit setter name</span></span><br><span class=\"line\"><span class=\"comment\">// 属性[name]的值被修改为[大大]</span></span><br><span class=\"line\">proxyObj.name = <span class=\"string\">'大大'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"3-对比\"><a href=\"#3-对比\" class=\"headerlink\" title=\"3. 对比\"></a>3. 对比</h3><blockquote>\n<p>在Vue2.0中，数据双向绑定就是通过Object.defineProperty去监听对象的每一个属性，然后在get,set方法中通过发布订阅者模式来实现的数据响应，但是存在一定的缺陷，比如只能监听已存在的属性，对于新增删除属性就无能为力了，同时无法监听数组的变化，所以在Vue3.0中将其换成了功能更强大的Proxy。</p>\n</blockquote>\n<p>在上面的代码中，如果执行 <code>proxyObj.newVariable = &#39;haha&#39;</code>，defineProperty实现将不能触发setter方法，Proxy实现能够触发。</p>\n<h4 id=\"4-了解Proxy\"><a href=\"#4-了解Proxy\" class=\"headerlink\" title=\"4. 了解Proxy\"></a>4. 了解Proxy</h4><blockquote>\n<p>Proxy 对象用于定义基本操作的自定义行为（如属性查找、赋值、枚举、函数调用等）</p>\n</blockquote>\n<h4 id=\"4-0-基本语法\"><a href=\"#4-0-基本语法\" class=\"headerlink\" title=\"4.0 基本语法\"></a>4.0 基本语法</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(target, handler)</span><br></pre></td></tr></table></figure>\n<p>在上面的代码中，已经使用到了handler里的get与set。除此之外还有11个方法，共计13个。重点描述几个常用的方法。</p>\n<h4 id=\"4-1-handler-get-target-key-receiver\"><a href=\"#4-1-handler-get-target-key-receiver\" class=\"headerlink\" title=\"4.1 handler.get(target, key, receiver)\"></a>4.1 <code>handler.get(target, key, receiver)</code></h4><ul>\n<li>属性读取操作的捕捉器。当通过proxy去读取对象里面的属性的时候，会进入到get钩子函数里面。</li>\n<li><code>target</code> 目标对象</li>\n<li><code>key</code> 被获取的属性名</li>\n<li><code>receiver</code> Proxy或者集成Proxy的对象</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(&#123;&#125;, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">get</span>(target, key, receiver) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'emit getter'</span>, target, key, receiver)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> target[key]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>如果违背了以下的约束，proxy会抛出 TypeError</p>\n<ul>\n<li>如果要访问的目标属性是 <code>不可写</code> 并且 <code>不可配置</code> 的，则返回的值必须与该目标属性的值相同。</li>\n<li>如果要访问的目标属性没有配置访问方法，即get方法是undefined的，则返回值必须为undefined。(没理解，未配置get方法，返回值怎么定义?)</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'age'</span>, &#123;</span><br><span class=\"line\">    configurable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    writable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    value: <span class=\"number\">10</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">get</span>(target, key) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">20</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// Uncaught TypeError: 'get' on proxy: property 'age' is a read-only and non-configurable data property on the proxy target but the proxy did not return its actual value (expected '10' but got '20')</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(p.age)</span><br></pre></td></tr></table></figure>\n<h4 id=\"4-2-handler-set-target-key-value-receiver\"><a href=\"#4-2-handler-set-target-key-value-receiver\" class=\"headerlink\" title=\"4.2 handler.set(target, key, value, receiver)\"></a>4.2 <code>handler.set(target, key, value, receiver)</code></h4><ul>\n<li>属性设置操作的捕捉器。当通过proxy去为对象设置修改属性的时候，会进入到set钩子函数里面。</li>\n<li><code>target</code> 目标对象</li>\n<li><code>key</code> 将被设置的属性名或 Symbol</li>\n<li><code>value</code> 新属性值</li>\n<li><code>receiver</code> 最初被调用的对象。通常是 proxy 本身，但 handler 的 set 方法也有可能在原型链上，或以其他方式被间接地调用（因此不一定是 proxy 本身）。比如：假设有一段代码执行 obj.name = “jen”， obj 不是一个 proxy，且自身不含 name 属性，但是它的原型链上有一个 proxy，那么，那个 proxy 的 set() 处理器会被调用，而此时，obj 会作为 receiver 参数传进来。</li>\n<li><code>返回值</code> set() 方法应当返回一个布尔值<ul>\n<li>返回 true 代表属性设置成功。</li>\n<li>在严格模式下，如果 set() 方法返回 false，那么会抛出一个 TypeError 异常。</li>\n</ul>\n</li>\n</ul>\n<p>如果违背了以下的约束，proxy会抛出 TypeError</p>\n<ul>\n<li>若目标属性是一个不可写以及不可配置的数据属性，则不能改变它的值。(但是经过测试，并没有抛出错误❌)</li>\n<li>如果目标属性没有配置存储方法，即 [[Set]] 属性的是 undefined，则不能设置它的值。(同样的疑问，没有set方法，如何设置值呢?)</li>\n<li>在严格模式下，如果 set() 方法返回 false，那么也会抛出一个 TypeError 异常。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(&#123;&#125;, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">set</span>(target, key, value, receiver) &#123;</span><br><span class=\"line\">        target[key] = value</span><br><span class=\"line\">        <span class=\"comment\">// 非严格模式下可省略</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">p.age = <span class=\"number\">10</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">\"use strict\"</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(&#123;&#125;, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">set</span>(target, key, value, receiver) &#123;</span><br><span class=\"line\">        target[key] = value</span><br><span class=\"line\">        <span class=\"comment\">// 严格模式没有返回值或返回false 会抛出TypeError</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// Uncaught TypeError: 'set' on proxy: trap returned falsish for property 'age'</span></span><br><span class=\"line\">p.age = <span class=\"number\">10</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'age'</span>, &#123;</span><br><span class=\"line\">    configurable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    writable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    value: <span class=\"number\">10</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">set</span>(target, key, value, receiver) &#123;</span><br><span class=\"line\">        target[key] = value</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 设置成功 没有抛错误❌</span></span><br><span class=\"line\">p.age = <span class=\"number\">20</span></span><br></pre></td></tr></table></figure>\n<p>对比Vue2.x</p>\n<blockquote>\n<p>在使用Vue2.0的时候，如果给对象添加新属性的时候，往往需要调用 <code>$set</code>, 这是因为Object.defineProperty只能监听已存在的属性，而新增的属性无法监听，而通过 <code>$set</code> 相当于手动给对象新增了属性，然后再触发数据响应。但是对于Vue3.0来说，因为使用了Proxy，在他的set钩子函数中是可以监听到新增属性的，所以就不再需要使用</p>\n</blockquote>\n<h4 id=\"4-3-handler-has-target-key\"><a href=\"#4-3-handler-has-target-key\" class=\"headerlink\" title=\"4.3 handler.has(target, key)\"></a>4.3 <code>handler.has(target, key)</code></h4><ul>\n<li>in 操作符的捕捉器。当使用in判断属性是否在proxy代理对象里面时，会触发。</li>\n<li><code>target</code> 目标对象</li>\n<li><code>key</code> 需要检查是否存在的属性.</li>\n<li><code>返回值</code> has 方法返回一个 boolean 属性的值.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;</span><br><span class=\"line\">  publicFn() &#123;&#125;,</span><br><span class=\"line\">  _privateFn() &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">    has(target, key) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key.startWith(<span class=\"string\">'_'</span>)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> target[key]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'publicFn'</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'_privateFn'</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>\n<p>如果违反了下面这些规则,  proxy 将会抛出 TypeError:</p>\n<ul>\n<li>如果目标对象的某一属性本身不可被配置，则该属性不能够被代理隐藏(怎么写示例…)</li>\n<li>如果目标对象为不可扩展对象，则该对象的属性不能够被代理隐藏</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123; <span class=\"attr\">age</span>: <span class=\"number\">10</span> &#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.preventExtensions(obj)</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">    has: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">target, key</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// Uncaught TypeError: 'has' on proxy: trap returned falsish for property 'a' but the proxy target is not extensible</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'age'</span> <span class=\"keyword\">in</span> p)</span><br></pre></td></tr></table></figure>\n<h4 id=\"4-4-handler-deleteProperty-target-key\"><a href=\"#4-4-handler-deleteProperty-target-key\" class=\"headerlink\" title=\"4.4 handler.deleteProperty(target, key)\"></a>4.4 <code>handler.deleteProperty(target, key)</code></h4><ul>\n<li><code>delete</code> 操作符的捕捉器。当使用delete去删除对象里面的属性的时候，会进入deleteProperty`钩子函数</li>\n<li><code>target</code> 目标对象</li>\n<li><code>key</code> 待删除的属性名</li>\n<li><code>返回值</code> deleteProperty 必须返回一个 Boolean 类型的值，表示了该属性是否被成功删除。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(&#123; <span class=\"attr\">name</span>: <span class=\"string\">'zhangsan'</span>, <span class=\"attr\">age</span>: <span class=\"number\">10</span> &#125;, &#123;</span><br><span class=\"line\">    deleteProperty(target, key) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(target, key)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key === <span class=\"string\">'name'</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'属性'</span> + key + <span class=\"string\">'不可以被删除'</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">delete</span> target[key]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// true undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">delete</span> p.age, p.age)</span><br><span class=\"line\"><span class=\"comment\">// 属性name不可以被删除</span></span><br><span class=\"line\"><span class=\"comment\">// false zhangsan</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">delete</span> p.name, p.name)</span><br></pre></td></tr></table></figure>\n<p>如果违背了以下不变量，proxy 将会抛出一个 TypeError:</p>\n<ul>\n<li>如果目标对象的属性是不可配置的，那么该属性不能被删除</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'age'</span>, &#123;</span><br><span class=\"line\">    configurable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    value: <span class=\"number\">10</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">    deleteProperty(target, key) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">delete</span> target[key]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// Uncaught TypeError: 'deleteProperty' on proxy: trap returned truish for property 'age' which is non-configurable in the proxy target</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">delete</span> p.age, p.age)</span><br></pre></td></tr></table></figure>\n<p>对比vue2.x</p>\n<blockquote>\n<p>其实与 <code>$set</code> 解决的问题类似，Vue2.0是无法监听到属性被删除的，所以提供了 <code>$delete</code> 用于删除属性，但是对于Proxy，是可以监听删除操作的，所以就不需要再使用 <code>$delete</code> 了</p>\n</blockquote>\n<h4 id=\"4-5-handler-apply-target-thisArg-argumentsList\"><a href=\"#4-5-handler-apply-target-thisArg-argumentsList\" class=\"headerlink\" title=\"4.5 handler.apply(target, thisArg, argumentsList)\"></a>4.5 <code>handler.apply(target, thisArg, argumentsList)</code></h4><ul>\n<li>函数调用操作的捕捉器。当proxy监听的是一个函数的时候，当调用这个函数时，会进入apply钩子函数</li>\n<li><code>target</code> 目标对象（函数）</li>\n<li><code>thisArg</code> 被调用时的上下文对象</li>\n<li><code>argumentsList</code> 被调用时的参数数组</li>\n<li><code>返回值</code> 可返回任何值</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;, &#123;</span><br><span class=\"line\">    apply(target, thisArg, argumentsList) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> argumentsList[<span class=\"number\">0</span>] + argumentsList[<span class=\"number\">1</span>] + argumentsList[<span class=\"number\">2</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 6</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(p(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>))</span><br></pre></td></tr></table></figure>\n<p>如果违反了以下约束，代理将抛出一个TypeError：</p>\n<ul>\n<li>target必须是可被调用的。也就是说，它必须是一个函数对象。上面的代码中，将 <code>function(){}</code> 改成 <code>{}</code> 将会报错</li>\n</ul>\n<h4 id=\"4-6-handler-ownKeys\"><a href=\"#4-6-handler-ownKeys\" class=\"headerlink\" title=\"4.6 handler.ownKeys\"></a>4.6 <code>handler.ownKeys</code></h4><p>当通过 <code>Object.getOwnPropertyNames</code>,<code>Object.getownPropertySymbols</code>,<code>Object.keys</code>,<code>Reflect.ownKeys</code>去获取对象的信息的时候，就会进入ownKeys这个钩子函数</p>\n<h4 id=\"4-7-handler-construct\"><a href=\"#4-7-handler-construct\" class=\"headerlink\" title=\"4.7 handler.construct\"></a>4.7 <code>handler.construct</code></h4><p>当使用new操作符的时候，会进入construct这个钩子函数</p>\n<h4 id=\"4-8-handler-defineProperty\"><a href=\"#4-8-handler-defineProperty\" class=\"headerlink\" title=\"4.8 handler.defineProperty\"></a>4.8 <code>handler.defineProperty</code></h4><p>当使用Object.defineProperty去修改属性修饰符的时候，会进入这个钩子函数</p>\n<h4 id=\"4-9-handler-getPropertyOf\"><a href=\"#4-9-handler-getPropertyOf\" class=\"headerlink\" title=\"4.9 handler.getPropertyOf\"></a>4.9 <code>handler.getPropertyOf</code></h4><p>当读取对象的原型的时候，会进入这个钩子函数</p>\n<h4 id=\"4-10-handler-setPropertyOf\"><a href=\"#4-10-handler-setPropertyOf\" class=\"headerlink\" title=\"4.10 handler.setPropertyOf\"></a>4.10 <code>handler.setPropertyOf</code></h4><p>当设置对象的原型的时候，会进入这个钩子函数</p>\n<h4 id=\"4-11-handler-isExtensible\"><a href=\"#4-11-handler-isExtensible\" class=\"headerlink\" title=\"4.11 handler.isExtensible\"></a>4.11 <code>handler.isExtensible</code></h4><p>当通过Object.isExtensible去判断对象是否可以添加新的属性的时候，进入这个钩子函数</p>\n<h4 id=\"4-12-handler-preventExtensions\"><a href=\"#4-12-handler-preventExtensions\" class=\"headerlink\" title=\"4.12 handler.preventExtensions\"></a>4.12 <code>handler.preventExtensions</code></h4><p>当通过Object.preventExtensions去设置对象不可以修改新属性时候，进入这个钩子函数</p>\n<h4 id=\"4-13-handler-getOwnPropertyDescriptor\"><a href=\"#4-13-handler-getOwnPropertyDescriptor\" class=\"headerlink\" title=\"4.13 handler.getOwnPropertyDescriptor\"></a>4.13 <code>handler.getOwnPropertyDescriptor</code></h4><p>在获取代理对象某个属性的属性描述时触发该操作，比如在执行 Object.getOwnPropertyDescriptor(proxy, “foo”) 时会进入这个钩子函数</p>\n<h3 id=\"5-Reflect\"><a href=\"#5-Reflect\" class=\"headerlink\" title=\"5. Reflect\"></a>5. Reflect</h3><blockquote>\n<p>在上面，我们获取属性的值或者修改属性的值都是通过直接操作target来实现的，但实际上ES6已经为我们提供了在Proxy内部调用对象的默认行为的API,即Reflect。比如下面的代码</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">get</span>(target, key, receiver) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">Reflect</span>.get(target, key, receiver)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>大家可能看到上面的代码与直接使用target[key]的方式没什么区别，但实际上Reflect的出现是为了让Object上面的操作更加规范，比如我们要判断某一个prop是否在一个对象中，通常会使用到in,即</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'zhangsan'</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'name'</span> <span class=\"keyword\">in</span> obj)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>但上面的操作是一种命令式的语法，通过Reflect可以将其转变为函数式的语法，显得更加规范</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Reflect</span>.has(obj,<span class=\"string\">'name'</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"6-参考文章\"><a href=\"#6-参考文章\" class=\"headerlink\" title=\"6. 参考文章\"></a>6. 参考文章</h3><ul>\n<li><a href=\"https://juejin.im/post/6861725116389130254\" target=\"_blank\" rel=\"noopener\">掘金博文</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy\" target=\"_blank\" rel=\"noopener\">MDN</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>在一篇 <a href=\"https://juejin.im/post/6861725116389130254\" target=\"_blank\" rel=\"noopener\">掘金文章</a> 中看到这样一道题目，大概是以下的需求。</p>\n<p>补全Observe函数，使得执行 <code>proxyObj.name = &#39;大大&#39;</code> 时，打印 <code>属性[name]的值被修改为[大大]</code>。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Observe</span>(<span class=\"params\">obj, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// TO DO</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> oldObj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'小小'</span>,</span><br><span class=\"line\">    uid: <span class=\"number\">108</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> proxyObj = Observe(oldObj, (key, value) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`属性[<span class=\"subst\">$&#123;key&#125;</span>]的值被修改为[<span class=\"subst\">$&#123;value&#125;</span>]`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>","more":"<h3 id=\"1-Object-defineProperty\"><a href=\"#1-Object-defineProperty\" class=\"headerlink\" title=\"1. Object.defineProperty\"></a>1. Object.defineProperty</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Observe</span>(<span class=\"params\">obj, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> observedObj = &#123;&#125;</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.keys(obj).forEach( <span class=\"function\">(<span class=\"params\">key</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">Object</span>.defineProperty(observedObj, key, &#123;</span><br><span class=\"line\">            configurable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"keyword\">get</span>: () =&gt; &#123;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'emit getter'</span>, key)</span><br><span class=\"line\">                <span class=\"keyword\">return</span> obj[key]</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"keyword\">set</span>: (newVal) =&gt; &#123;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'emit setter'</span>, key)</span><br><span class=\"line\">                obj[key] = newVal</span><br><span class=\"line\">                callback(key, newVal)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> observedObj</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> oldObj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'小小'</span>,</span><br><span class=\"line\">    uid: <span class=\"number\">108</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> proxyObj = Observe(oldObj, (key, value) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`属性[<span class=\"subst\">$&#123;key&#125;</span>]的值被修改为[<span class=\"subst\">$&#123;value&#125;</span>]`</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// emit getter name</span></span><br><span class=\"line\"><span class=\"comment\">// 小小</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(proxyObj.name)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// emit setter name</span></span><br><span class=\"line\"><span class=\"comment\">// 属性[name]的值被修改为[大大]</span></span><br><span class=\"line\">proxyObj.name = <span class=\"string\">'大大'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-Proxy\"><a href=\"#2-Proxy\" class=\"headerlink\" title=\"2. Proxy\"></a>2. Proxy</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Observe</span>(<span class=\"params\">obj, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span>: (target, key) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'emit getter'</span>, key)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> target[key]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"keyword\">set</span>: (target, key, newVal) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'emit setter'</span>, key)</span><br><span class=\"line\">            obj[key] = newVal</span><br><span class=\"line\">            callback(key, newVal)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> oldObj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'小小'</span>,</span><br><span class=\"line\">    uid: <span class=\"number\">108</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> proxyObj = Observe(oldObj, (key, value) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`属性[<span class=\"subst\">$&#123;key&#125;</span>]的值被修改为[<span class=\"subst\">$&#123;value&#125;</span>]`</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// emit getter name</span></span><br><span class=\"line\"><span class=\"comment\">// 小小</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(proxyObj.name)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// emit setter name</span></span><br><span class=\"line\"><span class=\"comment\">// 属性[name]的值被修改为[大大]</span></span><br><span class=\"line\">proxyObj.name = <span class=\"string\">'大大'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"3-对比\"><a href=\"#3-对比\" class=\"headerlink\" title=\"3. 对比\"></a>3. 对比</h3><blockquote>\n<p>在Vue2.0中，数据双向绑定就是通过Object.defineProperty去监听对象的每一个属性，然后在get,set方法中通过发布订阅者模式来实现的数据响应，但是存在一定的缺陷，比如只能监听已存在的属性，对于新增删除属性就无能为力了，同时无法监听数组的变化，所以在Vue3.0中将其换成了功能更强大的Proxy。</p>\n</blockquote>\n<p>在上面的代码中，如果执行 <code>proxyObj.newVariable = &#39;haha&#39;</code>，defineProperty实现将不能触发setter方法，Proxy实现能够触发。</p>\n<h4 id=\"4-了解Proxy\"><a href=\"#4-了解Proxy\" class=\"headerlink\" title=\"4. 了解Proxy\"></a>4. 了解Proxy</h4><blockquote>\n<p>Proxy 对象用于定义基本操作的自定义行为（如属性查找、赋值、枚举、函数调用等）</p>\n</blockquote>\n<h4 id=\"4-0-基本语法\"><a href=\"#4-0-基本语法\" class=\"headerlink\" title=\"4.0 基本语法\"></a>4.0 基本语法</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(target, handler)</span><br></pre></td></tr></table></figure>\n<p>在上面的代码中，已经使用到了handler里的get与set。除此之外还有11个方法，共计13个。重点描述几个常用的方法。</p>\n<h4 id=\"4-1-handler-get-target-key-receiver\"><a href=\"#4-1-handler-get-target-key-receiver\" class=\"headerlink\" title=\"4.1 handler.get(target, key, receiver)\"></a>4.1 <code>handler.get(target, key, receiver)</code></h4><ul>\n<li>属性读取操作的捕捉器。当通过proxy去读取对象里面的属性的时候，会进入到get钩子函数里面。</li>\n<li><code>target</code> 目标对象</li>\n<li><code>key</code> 被获取的属性名</li>\n<li><code>receiver</code> Proxy或者集成Proxy的对象</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(&#123;&#125;, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">get</span>(target, key, receiver) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'emit getter'</span>, target, key, receiver)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> target[key]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>如果违背了以下的约束，proxy会抛出 TypeError</p>\n<ul>\n<li>如果要访问的目标属性是 <code>不可写</code> 并且 <code>不可配置</code> 的，则返回的值必须与该目标属性的值相同。</li>\n<li>如果要访问的目标属性没有配置访问方法，即get方法是undefined的，则返回值必须为undefined。(没理解，未配置get方法，返回值怎么定义?)</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'age'</span>, &#123;</span><br><span class=\"line\">    configurable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    writable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    value: <span class=\"number\">10</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">get</span>(target, key) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">20</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// Uncaught TypeError: 'get' on proxy: property 'age' is a read-only and non-configurable data property on the proxy target but the proxy did not return its actual value (expected '10' but got '20')</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(p.age)</span><br></pre></td></tr></table></figure>\n<h4 id=\"4-2-handler-set-target-key-value-receiver\"><a href=\"#4-2-handler-set-target-key-value-receiver\" class=\"headerlink\" title=\"4.2 handler.set(target, key, value, receiver)\"></a>4.2 <code>handler.set(target, key, value, receiver)</code></h4><ul>\n<li>属性设置操作的捕捉器。当通过proxy去为对象设置修改属性的时候，会进入到set钩子函数里面。</li>\n<li><code>target</code> 目标对象</li>\n<li><code>key</code> 将被设置的属性名或 Symbol</li>\n<li><code>value</code> 新属性值</li>\n<li><code>receiver</code> 最初被调用的对象。通常是 proxy 本身，但 handler 的 set 方法也有可能在原型链上，或以其他方式被间接地调用（因此不一定是 proxy 本身）。比如：假设有一段代码执行 obj.name = “jen”， obj 不是一个 proxy，且自身不含 name 属性，但是它的原型链上有一个 proxy，那么，那个 proxy 的 set() 处理器会被调用，而此时，obj 会作为 receiver 参数传进来。</li>\n<li><code>返回值</code> set() 方法应当返回一个布尔值<ul>\n<li>返回 true 代表属性设置成功。</li>\n<li>在严格模式下，如果 set() 方法返回 false，那么会抛出一个 TypeError 异常。</li>\n</ul>\n</li>\n</ul>\n<p>如果违背了以下的约束，proxy会抛出 TypeError</p>\n<ul>\n<li>若目标属性是一个不可写以及不可配置的数据属性，则不能改变它的值。(但是经过测试，并没有抛出错误❌)</li>\n<li>如果目标属性没有配置存储方法，即 [[Set]] 属性的是 undefined，则不能设置它的值。(同样的疑问，没有set方法，如何设置值呢?)</li>\n<li>在严格模式下，如果 set() 方法返回 false，那么也会抛出一个 TypeError 异常。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(&#123;&#125;, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">set</span>(target, key, value, receiver) &#123;</span><br><span class=\"line\">        target[key] = value</span><br><span class=\"line\">        <span class=\"comment\">// 非严格模式下可省略</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">p.age = <span class=\"number\">10</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">\"use strict\"</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(&#123;&#125;, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">set</span>(target, key, value, receiver) &#123;</span><br><span class=\"line\">        target[key] = value</span><br><span class=\"line\">        <span class=\"comment\">// 严格模式没有返回值或返回false 会抛出TypeError</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// Uncaught TypeError: 'set' on proxy: trap returned falsish for property 'age'</span></span><br><span class=\"line\">p.age = <span class=\"number\">10</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'age'</span>, &#123;</span><br><span class=\"line\">    configurable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    writable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    value: <span class=\"number\">10</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">set</span>(target, key, value, receiver) &#123;</span><br><span class=\"line\">        target[key] = value</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 设置成功 没有抛错误❌</span></span><br><span class=\"line\">p.age = <span class=\"number\">20</span></span><br></pre></td></tr></table></figure>\n<p>对比Vue2.x</p>\n<blockquote>\n<p>在使用Vue2.0的时候，如果给对象添加新属性的时候，往往需要调用 <code>$set</code>, 这是因为Object.defineProperty只能监听已存在的属性，而新增的属性无法监听，而通过 <code>$set</code> 相当于手动给对象新增了属性，然后再触发数据响应。但是对于Vue3.0来说，因为使用了Proxy，在他的set钩子函数中是可以监听到新增属性的，所以就不再需要使用</p>\n</blockquote>\n<h4 id=\"4-3-handler-has-target-key\"><a href=\"#4-3-handler-has-target-key\" class=\"headerlink\" title=\"4.3 handler.has(target, key)\"></a>4.3 <code>handler.has(target, key)</code></h4><ul>\n<li>in 操作符的捕捉器。当使用in判断属性是否在proxy代理对象里面时，会触发。</li>\n<li><code>target</code> 目标对象</li>\n<li><code>key</code> 需要检查是否存在的属性.</li>\n<li><code>返回值</code> has 方法返回一个 boolean 属性的值.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;</span><br><span class=\"line\">  publicFn() &#123;&#125;,</span><br><span class=\"line\">  _privateFn() &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">    has(target, key) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key.startWith(<span class=\"string\">'_'</span>)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> target[key]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'publicFn'</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'_privateFn'</span> <span class=\"keyword\">in</span> obj)  <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>\n<p>如果违反了下面这些规则,  proxy 将会抛出 TypeError:</p>\n<ul>\n<li>如果目标对象的某一属性本身不可被配置，则该属性不能够被代理隐藏(怎么写示例…)</li>\n<li>如果目标对象为不可扩展对象，则该对象的属性不能够被代理隐藏</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123; <span class=\"attr\">age</span>: <span class=\"number\">10</span> &#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.preventExtensions(obj)</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">    has: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">target, key</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// Uncaught TypeError: 'has' on proxy: trap returned falsish for property 'a' but the proxy target is not extensible</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'age'</span> <span class=\"keyword\">in</span> p)</span><br></pre></td></tr></table></figure>\n<h4 id=\"4-4-handler-deleteProperty-target-key\"><a href=\"#4-4-handler-deleteProperty-target-key\" class=\"headerlink\" title=\"4.4 handler.deleteProperty(target, key)\"></a>4.4 <code>handler.deleteProperty(target, key)</code></h4><ul>\n<li><code>delete</code> 操作符的捕捉器。当使用delete去删除对象里面的属性的时候，会进入deleteProperty`钩子函数</li>\n<li><code>target</code> 目标对象</li>\n<li><code>key</code> 待删除的属性名</li>\n<li><code>返回值</code> deleteProperty 必须返回一个 Boolean 类型的值，表示了该属性是否被成功删除。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(&#123; <span class=\"attr\">name</span>: <span class=\"string\">'zhangsan'</span>, <span class=\"attr\">age</span>: <span class=\"number\">10</span> &#125;, &#123;</span><br><span class=\"line\">    deleteProperty(target, key) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(target, key)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key === <span class=\"string\">'name'</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'属性'</span> + key + <span class=\"string\">'不可以被删除'</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">delete</span> target[key]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// true undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">delete</span> p.age, p.age)</span><br><span class=\"line\"><span class=\"comment\">// 属性name不可以被删除</span></span><br><span class=\"line\"><span class=\"comment\">// false zhangsan</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">delete</span> p.name, p.name)</span><br></pre></td></tr></table></figure>\n<p>如果违背了以下不变量，proxy 将会抛出一个 TypeError:</p>\n<ul>\n<li>如果目标对象的属性是不可配置的，那么该属性不能被删除</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'age'</span>, &#123;</span><br><span class=\"line\">    configurable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    value: <span class=\"number\">10</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">    deleteProperty(target, key) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">delete</span> target[key]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// Uncaught TypeError: 'deleteProperty' on proxy: trap returned truish for property 'age' which is non-configurable in the proxy target</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">delete</span> p.age, p.age)</span><br></pre></td></tr></table></figure>\n<p>对比vue2.x</p>\n<blockquote>\n<p>其实与 <code>$set</code> 解决的问题类似，Vue2.0是无法监听到属性被删除的，所以提供了 <code>$delete</code> 用于删除属性，但是对于Proxy，是可以监听删除操作的，所以就不需要再使用 <code>$delete</code> 了</p>\n</blockquote>\n<h4 id=\"4-5-handler-apply-target-thisArg-argumentsList\"><a href=\"#4-5-handler-apply-target-thisArg-argumentsList\" class=\"headerlink\" title=\"4.5 handler.apply(target, thisArg, argumentsList)\"></a>4.5 <code>handler.apply(target, thisArg, argumentsList)</code></h4><ul>\n<li>函数调用操作的捕捉器。当proxy监听的是一个函数的时候，当调用这个函数时，会进入apply钩子函数</li>\n<li><code>target</code> 目标对象（函数）</li>\n<li><code>thisArg</code> 被调用时的上下文对象</li>\n<li><code>argumentsList</code> 被调用时的参数数组</li>\n<li><code>返回值</code> 可返回任何值</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;, &#123;</span><br><span class=\"line\">    apply(target, thisArg, argumentsList) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> argumentsList[<span class=\"number\">0</span>] + argumentsList[<span class=\"number\">1</span>] + argumentsList[<span class=\"number\">2</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 6</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(p(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>))</span><br></pre></td></tr></table></figure>\n<p>如果违反了以下约束，代理将抛出一个TypeError：</p>\n<ul>\n<li>target必须是可被调用的。也就是说，它必须是一个函数对象。上面的代码中，将 <code>function(){}</code> 改成 <code>{}</code> 将会报错</li>\n</ul>\n<h4 id=\"4-6-handler-ownKeys\"><a href=\"#4-6-handler-ownKeys\" class=\"headerlink\" title=\"4.6 handler.ownKeys\"></a>4.6 <code>handler.ownKeys</code></h4><p>当通过 <code>Object.getOwnPropertyNames</code>,<code>Object.getownPropertySymbols</code>,<code>Object.keys</code>,<code>Reflect.ownKeys</code>去获取对象的信息的时候，就会进入ownKeys这个钩子函数</p>\n<h4 id=\"4-7-handler-construct\"><a href=\"#4-7-handler-construct\" class=\"headerlink\" title=\"4.7 handler.construct\"></a>4.7 <code>handler.construct</code></h4><p>当使用new操作符的时候，会进入construct这个钩子函数</p>\n<h4 id=\"4-8-handler-defineProperty\"><a href=\"#4-8-handler-defineProperty\" class=\"headerlink\" title=\"4.8 handler.defineProperty\"></a>4.8 <code>handler.defineProperty</code></h4><p>当使用Object.defineProperty去修改属性修饰符的时候，会进入这个钩子函数</p>\n<h4 id=\"4-9-handler-getPropertyOf\"><a href=\"#4-9-handler-getPropertyOf\" class=\"headerlink\" title=\"4.9 handler.getPropertyOf\"></a>4.9 <code>handler.getPropertyOf</code></h4><p>当读取对象的原型的时候，会进入这个钩子函数</p>\n<h4 id=\"4-10-handler-setPropertyOf\"><a href=\"#4-10-handler-setPropertyOf\" class=\"headerlink\" title=\"4.10 handler.setPropertyOf\"></a>4.10 <code>handler.setPropertyOf</code></h4><p>当设置对象的原型的时候，会进入这个钩子函数</p>\n<h4 id=\"4-11-handler-isExtensible\"><a href=\"#4-11-handler-isExtensible\" class=\"headerlink\" title=\"4.11 handler.isExtensible\"></a>4.11 <code>handler.isExtensible</code></h4><p>当通过Object.isExtensible去判断对象是否可以添加新的属性的时候，进入这个钩子函数</p>\n<h4 id=\"4-12-handler-preventExtensions\"><a href=\"#4-12-handler-preventExtensions\" class=\"headerlink\" title=\"4.12 handler.preventExtensions\"></a>4.12 <code>handler.preventExtensions</code></h4><p>当通过Object.preventExtensions去设置对象不可以修改新属性时候，进入这个钩子函数</p>\n<h4 id=\"4-13-handler-getOwnPropertyDescriptor\"><a href=\"#4-13-handler-getOwnPropertyDescriptor\" class=\"headerlink\" title=\"4.13 handler.getOwnPropertyDescriptor\"></a>4.13 <code>handler.getOwnPropertyDescriptor</code></h4><p>在获取代理对象某个属性的属性描述时触发该操作，比如在执行 Object.getOwnPropertyDescriptor(proxy, “foo”) 时会进入这个钩子函数</p>\n<h3 id=\"5-Reflect\"><a href=\"#5-Reflect\" class=\"headerlink\" title=\"5. Reflect\"></a>5. Reflect</h3><blockquote>\n<p>在上面，我们获取属性的值或者修改属性的值都是通过直接操作target来实现的，但实际上ES6已经为我们提供了在Proxy内部调用对象的默认行为的API,即Reflect。比如下面的代码</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</span><br><span class=\"line\">    <span class=\"keyword\">get</span>(target, key, receiver) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">Reflect</span>.get(target, key, receiver)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>大家可能看到上面的代码与直接使用target[key]的方式没什么区别，但实际上Reflect的出现是为了让Object上面的操作更加规范，比如我们要判断某一个prop是否在一个对象中，通常会使用到in,即</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'zhangsan'</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'name'</span> <span class=\"keyword\">in</span> obj)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>但上面的操作是一种命令式的语法，通过Reflect可以将其转变为函数式的语法，显得更加规范</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Reflect</span>.has(obj,<span class=\"string\">'name'</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"6-参考文章\"><a href=\"#6-参考文章\" class=\"headerlink\" title=\"6. 参考文章\"></a>6. 参考文章</h3><ul>\n<li><a href=\"https://juejin.im/post/6861725116389130254\" target=\"_blank\" rel=\"noopener\">掘金博文</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy\" target=\"_blank\" rel=\"noopener\">MDN</a></li>\n</ul>"},{"title":"== 和 ===","date":"2020-04-29T03:10:04.000Z","_content":"\n先来几个例子，带着问题一起思考：\n```js\nconsole.log([10] == 10);                // true\nconsole.log('10' == 10);                // true\nconsole.log([] == 0);                   // true\nconsole.log(true == 1);                 // true\nconsole.log([] == false);               // true\nconsole.log(![] == false);              // true\nconsole.log([] == ![]);                 // true\nconsole.log('' == 0);                   // true\nconsole.log('' == false);               // true\nconsole.log(null == false);             // false\nconsole.log(null == true);              // false\nconsole.log(!null == true);             // true\nconsole.log(null == undefined);         // true\n```\n\n<!-- More -->\n\n### 1. === (strict equality comparision)\n\n```js\nif (Type(x) !== Type(y))  return false\nif (Type(x) === Type(y)) {\n    if (Type(x) === Undefined) return true\n    if (Type(x) === Null) return true\n    if (Type(x) === String) {\n        return 长度和对应位置上字符都相同 ? true : false\n    }\n    if (Type(x) === Boolean) {\n        return xy同时为true或false ? true : false\n    }\n    if (Type(x) === Symbol) {\n        return 同一个Symbol ? true : false\n    }\n    if (Type(x) === Number) {\n        if (x === NaN) return false\n        if (y === NaN) return false\n        if (xy相等 例如 x = 8, y = 8) return true\n        if (x = 0, y = -0) return true\n        if (x = -0, y = 0) return true\n        return false  // 其他情况均返回false\n    }\n}\n```\n\n### 2. == (abstract equality comparision)\n\n```js\nif (Type(x) === Type(y)) return x === y\nif (Type(x) !== Type(y)) {\n    if (x === null && y === undefined) return true\n    if (x === undefined && y === null) return true\n    if (Type(x) === Number && Type(y) === String) return x == ToNumber(y)\n    if (Type(x) === String && Type(y) === Number) return ToNumber(x) == y\n    if (Type(x) === Boolean) return ToNumber(x) == y\n    if (Type(y) === Boolean) return x == ToNumber(y)\n    if ([String, Number, Symbol].includes(Type(x)) && Type(y) === Object) return x == ToPrimitive(y)\n    if (Type(x) === Object && [String, Number, Symbol].includes(Type(y))) return ToPrimitive(x) == y\n    return false  // 其他情况均返回false\n}\n```\n\n- Type(x) 获取x的类型\n- ToNumber(x) 将x转换成Number类型\n- ToBoolean(x) 将x转换成Boolean类型\n- ToString(x) 将x转换成String类型\n- ToPrimitive(x) 将x转换成原始值\n\n### 3. ToPrimitive()方法 - <small>*ECMAScript规范中的抽象方法，Javascript不能访问*</small>\n\n先了解js中的原始类型：\n- Null: null\n- Undefined: undefined\n- Number: 如 0、8、5.5、NaN、Infinite\n- Boolean: true、false\n- String: 如 'abc'、''\n- 其余都属于'非原始类型'，如 Array、Object、Function\n\n> typeof null 得到的结果是object, 这是js在设计之初的问题。但null是属于原始类型的（记住就行了🐶）\n\n> ToPrimitive(input[, hint])转换为原始类型的方法，根据preferedType目标类型进行转换。preferedType只能是 `string` 或 `number`\n\n转换步骤：\n- `hint` 为 `number`\n  - input是原始值，返回input本身\n  - input是对象\n    - 先判断input.valueOf()的返回值。如果是原始值，返回结果。\n    - 否则，再判断input.toString()的返回值。如果是原始值，返回结果。\n    - 否则，抛出不能转换成原始值的TypeError。\n- `hint` 为 `string`\n  - input是原始值，返回input本身\n  - input是对象\n    - 先判断input.toString()的返回值。如果是原始值，返回结果。\n    - 否则，再判断input.valueOf()的返回值。如果是原始值，返回结果。\n    - 否则，抛出不能转换成原始值的TypeError。\n- `hint` 为空\n  - `input` 是 `Date` 日期类型\n    - input被认为是string。\n    - 先判断input.toString()的返回值。如果是原始值，返回结果。\n    - 否则，再判断input.valueOf()的返回值。如果是原始值，返回结果。\n    - 否则，抛出不能转换成原始值的TypeError。\n  - `input` 是 `非Date` 类型\n    - input被认为是number。\n    - 先判断input.valueOf()的返回值。如果是原始值，返回结果。\n    - 否则，再判断input.toString()的返回值。如果是原始值，返回结果。\n    - 否则，抛出不能转换成原始值的TypeError。\n\n> 当调用ToPrimitive而没有传hint参数时，默认情况下hint将被赋值Number。但是可以重写对象的@@toPrimitive方法来覆盖这个行为。在本规范中，只有Date和Symbol两个对象重写了默认的ToPrimitive操作。对于Date对象，如果没有传hint，hint将被默认赋值为String\n\n\n示例1：ToPrimitive([10])\n```js\n// 没有传入hint参数，并且input是Array, 所以hint被赋值为Number\n// 先判断valueOf()\n[10].valueOf() 等于 [10]，属于 Array/Object，不是原始类型\n// 再判断toString()\n[10].toString() 等于 '10'，属于 String，是原始类型\n所以 return '10'\n```\n\n示例2：ToPrimitive(function sayHi(){})\n```js\nvar sayHi = function (name) {\n    console.log('hi, ' + name)\n}\n// 没有传入hint参数，并且input是Function, 所以hint被赋值为Number\n// 先判断valueOf()  typeof sayHi.valueOf === 'function'\nsayHi.valueOf() 等于 f (name) { console.log('hi, ' + name) } 属于Function，不是原始类型\n// 再判断toString()  typeof sayHi.toString === 'string'\nsayHi.toString() 等于 function (name) { console.log('hi, ' + name) } 属于String，是原始类型\n所以 return sayHi方法的方法体源码字符串\n```\n\n上面示例中 [10] == 10\n- Type(x) === Object, Type(y) === Number，变成比较 ToPrimitive([10]) == 10\n- 由示例1 知道 ToPrimitive([10]) === '10'，变成比较 '10' == 10\n- 此时，Type(x) === String, Type(y) === Number，变成比较 ToNumber('10') == 10\n- ToNumber('10') === 10，变成比较 10 == 10\n- return true\n\n[] == 0\n- Type(x) === Object, Type(y) === Number, 变成比较 ToPrimitive([]) == 0\n- 没有传入hint参数，[]不属于Date类型，hint被赋值Number\n- Number hint先判断 valueOf()， [].valueOf()返回数组本身，不是原始类型\n- 再判断toString()，[].toString() === ''，属于原始类型 return ''\n- 等式变成 '' == 0\n- 此时，Type(x) === String, Type(y) === Number, 变成比较ToNumber('') == 0\n- ToNumber('') === 0, 变成比较 0 == 0\n- return true\n\n按照上述步骤推导，不难可以得到： [] == false 返回true\n那么 ![] == false 应该返回 false吧！ 在控制台验证一下 `![] == false` 返回true。纳尼！！\n\n- ![] 先转换成 Boolean。 Boolean([]) === true, ![] === false\n- 此时变成 false == false return true\n\n由 [] == false 返回true 和 ![] == false 返回true 得到 [] == ![] 返回 true。 🐶\n\nnull == false 走的是最后一步，不满足任何条件，直接返回false，这一说法没有理解。难道不是Type(false) === Boolean然后比较 null == 0么。。。 再就是ToPrimitive(null) == 0 ?? 炸裂，我太难了。\n\n### 4. toString()方法\n\n> 可以将除(null和undefined)之外的数据类型转为字符串\n\n```js\n[].toString()  // \"\"\n[3, 8].toString()  // \"3, 8\"\nnew Date().toString()  // Fri May 01 2020 14:24:34 GMT+0800 (中国标准时间)\"\n/abc/ig.toString()  // \"/abc/ig\"\n\n(16).toString()  // '16'\n(16).toString(2)  // '10000' 二进制(2-35都可)\n(16).toString(8)  // '20' 八进制\n(16).toString(16)  // '10' 十六进制\n0.000006.toString()  // '0.000006'\n0.0000006.toString() // '6e-7' 小数点后面6个或以上0时 小数采用e表示法输出\n(1234567890123456789012).toString()  // '1.2345678901234568e+21' 整数部分超过21位，采用e表示法\n```\n\n可以用toString()区分自定义方法和原生方法\n```js\nfunction fn () {}\nfn.toString()  // \"function fn () {}\"  -- fn 是自定义方法\nNumber.toString()  // \"function Number() { [native code] }\" -- Number是一个原生方法\n```\n\n还可以用Object.prototype上的原生toString()方法判断数据类型\n```js\nObject.prototype.toString.call('abc');  // \"[object String]\"\nObject.prototype.toString.call(123);  // \"[object Number]\"\nObject.prototype.toString.call(true);  // \"[object Boolean]\"\nObject.prototype.toString.call(null)  // \"[object Null]\"\nObject.prototype.toString.call(undefined)  //”[object Undefined]\"\n```\n\n判断原生引用类型\n```js\n// 函数类型\nfunction fn(){console.log('test')}\nObject.prototype.toString.call(fn)  // \"[object Function]\"\n\n// 日期类型\nvar date = new Date()\nObject.prototype.toString.call(date)  // \"[object Date]\"\n\n// 数组类型\nvar arr = [1,2,3]\nObject.prototype.toString.call(arr)  // \"[object Array]\"\n\n// 正则表达式\nvar reg = /[hbc]at/gi\nObject.prototype.toString.call(reg)  // \"[object RegExp]\"\n\n// 自定义类型\nfunction Person(name) {\n    this.name = name\n}\nvar person = new Person(\"Rose\")\nObject.prototype.toString.call(person)  // \"[object Object]\"\n```\n\n### 5. String()方法\n\n- 如果有toString()方法，则调用该方法，并返回结果\n- 否则：\n  - 如果是null，返回\"null\"\n  - 如果是undefined，返回\"undefined\"\n\n要区分toString()和String()\n- toString(radix)支持传入radix进制参数\n- toString不支持null和undifined调用\n- String(null) === 'null'\n- String(undifined) === 'undefined'\n\n### 6. Number()方法\n\n- 布尔值：true - 1 false - 0\n- 数字值：返回数字本身\n- null：返回0\n- undefined: 返回NaN\n- 字符串：\n  - 只包含数字：转换成十进制，忽略前导0\n  - 包含有效的浮点格式：转换成浮点数职，忽略前导0\n  - 空字符串：返回0\n  - 其他情况：返回NaN\n- 对象：调用对象的valueOf()方法，然后依据前面的规则转换返回的值。如果转换的结果是NaN，则调用对象的toString()方法，再次依照前面的规则转换返回的字符串值。\n\n### 7. Boolean()方法\n\n以下值会被转换为false：`false`、`\"\"`、`0`、`-0`、`NaN`、`null`、`undefined`，其余任何值都会被转换为`true`。\n另外Boolean()不传递参数时，也返回false。\n\n### 8. 隐式转换\n\n在某些情况下，即使我们不提供显示转换，Javascript也会进行自动类型转换，主要情况有：\n\n#### 8.1 用于检测是否为非数值的函数：isNaN(mix)\n\nisNaN()函数，会尝试将参数值用Number()进行转换，如果结果为“非数值”则返回true，否则返回false。\n\n#### 8.2 递增递减操作符（包括前置和后置）、一元正负符号操作符\n\n这些操作符适用于任何数据类型的值，针对不同类型的值，该操作符遵循以下规则（经过对比发现，其规则与Number()规则基本相同）：\n\n- 如果是包含有效数字字符的字符串，先将其转换为数字值（转换规则同Number()），在执行加减1的操作，字符串变量变为数值变量。\n- 如果是不包含有效数字字符的字符串，将变量的值设置为NaN，字符串变量变成数值变量。\n- 如果是布尔值false，先将其转换为0再执行加减1的操作，布尔值变量编程数值变量。\n- 如果是布尔值true，先将其转换为1再执行加减1的操作，布尔值变量变成数值变量。\n- 如果是浮点数值，执行加减1的操作。\n- 如果是对象，先调用对象的valueOf()方法，然后对该返回值应用前面的规则。如果结果是NaN，则调用toString()方法后再应用前面的规则。对象变量变成数值变量。\n\n#### 8.3 加法运算操作符\n\n- 如果两个操作值都是数值，其规则为：\n  - 如果一个操作数为NaN，则结果为NaN\n  - 如果是Infinity+Infinity，结果是Infinity\n  - 如果是-Infinity+(-Infinity)，结果是-Infinity\n  - 如果是Infinity+(-Infinity)，结果是NaN\n  - 如果是+0+(+0)，结果为+0\n  - 如果是(-0)+(-0)，结果为-0\n  - 如果是(+0)+(-0)，结果为+0\n- 如果有一个操作值为字符串，则：\n  - 如果两个操作值都是字符串，则将它们拼接起来\n  - 如果只有一个操作值为字符串，则将另外操作值转换为字符串，然后拼接起来\n  - 如果一个操作数是对象、数值或者布尔值，则调用toString()方法取得字符串值，然后再应用前面的字符串规则。对于undefined和null，分别调用String()显式转换为字符串。\n\n可以看出，加法运算中，如果有一个操作值为字符串类型，则将另一个操作值转换为字符串，最后连接起来。\n\n#### 8.4 乘除、减号运算符、取模运算符\n\n这些操作符针对的是运算，所以他们具有共同性：如果操作值之一不是数值，则被隐式调用Number()函数进行转换。具体每一种运算的详细规则请参考ECMAScript中的定义\n\n#### 8.5 逻辑操作符（!、&&、||）\n\n逻辑非（！）操作符首先通过Boolean()函数将它的操作值转换为布尔值，然后求反。\n\n- 逻辑与（&&）操作符，如果一个操作值不是布尔值时，遵循以下规则进行转换：\n  - 如果第一个操作数经Boolean()转换后为true，则返回第二个操作值，否则返回第一个值（不是Boolean()转换后的值）\n  - 如果有一个操作值为null，返回null\n  - 如果有一个操作值为NaN，返回NaN\n  - 如果有一个操作值为undefined，返回undefined\n- 逻辑或（||）操作符，如果一个操作值不是布尔值，遵循以下规则：\n  - 如果第一个操作值经Boolean()转换后为false，则返回第二个操作值，否则返回第一个操作值（不是Boolean()转换后的值）\n  - 对于undefined、null和NaN的处理规则与逻辑与（&&）相同\n\n#### 8.6 关系操作符（<, >, <=, >=）\n\n- 如果两个操作值都是数值，则进行数值比较\n- 如果两个操作值都是字符串，则比较字符串对应的字符编码值\n- 如果只有一个操作值是数值，则将另一个操作值转换为数值，进行数值比较\n- 如果一个操作数是对象，则调用valueOf()方法（如果对象没有valueOf()方法则调用toString()方法），得到的结果按照前面的规则执行比较\n- 如果一个操作值是布尔值，则将其转换为数值，再进行比较\n\n注：NaN是非常特殊的值，它不和任何类型的值相等，包括它自己，同时它与任何类型的值比较大小时都返回false。\n\n#### 8.7 相等操作符\n\n相应规则见文章最初始。\n\n### 9. 位运算符\n\n#### 9.1 按位与(&)\n\n#### 9.2 按位与(|)\n\n#### 9.3 按位非(~)\n\n#### 9.4 按位异或(^)\n\n#### 9.5 左移(<<)\n\n> 该操作符会将左边操作数向左移动右边操作数的位数。向左被移出的位被丢弃，右侧用 0 补充。\n> 3 << 2 = 3 * 2 ^ 2 = 12\n\n#### 9.6 有符号右移(<<)\n\n> 该操作符会将左边操作数向右移动右边操作数的位数。向右被移出的位被丢弃，拷贝最左侧的位以填充左侧。由于新的最左侧的位总是和以前相同，符号位没有被改变。所以被称作“符号传播”。\n> 12 >> 2 = 12 / 2 ^ 2 = 3\n\n#### 9.6 无符号右移(<<<)\n\n> 该操作符会将左边操作数向右移动右边操作数的位数。向右被移出的位被丢弃，左侧用0填充。因为符号位变成了 0，所以结果总是非负的。（译注：即便右移 0 个比特，结果也是非负的。）\n\n### 10. 参考文章\n\n- [文章一](https://juejin.im/entry/584918612f301e005716add6)\n- [文章二](https://blog.csdn.net/huang100qi/article/details/80543045)\n- [文章三](https://www.cnblogs.com/Renyi-Fan/p/9189441.html#_labelTop)","source":"_posts/abstract-and-strict-equality.md","raw":"---\ntitle: == 和 ===\ndate: 2020-04-29 11:10:04\ntags: [==, ===, 操作符, 转换]\n---\n\n先来几个例子，带着问题一起思考：\n```js\nconsole.log([10] == 10);                // true\nconsole.log('10' == 10);                // true\nconsole.log([] == 0);                   // true\nconsole.log(true == 1);                 // true\nconsole.log([] == false);               // true\nconsole.log(![] == false);              // true\nconsole.log([] == ![]);                 // true\nconsole.log('' == 0);                   // true\nconsole.log('' == false);               // true\nconsole.log(null == false);             // false\nconsole.log(null == true);              // false\nconsole.log(!null == true);             // true\nconsole.log(null == undefined);         // true\n```\n\n<!-- More -->\n\n### 1. === (strict equality comparision)\n\n```js\nif (Type(x) !== Type(y))  return false\nif (Type(x) === Type(y)) {\n    if (Type(x) === Undefined) return true\n    if (Type(x) === Null) return true\n    if (Type(x) === String) {\n        return 长度和对应位置上字符都相同 ? true : false\n    }\n    if (Type(x) === Boolean) {\n        return xy同时为true或false ? true : false\n    }\n    if (Type(x) === Symbol) {\n        return 同一个Symbol ? true : false\n    }\n    if (Type(x) === Number) {\n        if (x === NaN) return false\n        if (y === NaN) return false\n        if (xy相等 例如 x = 8, y = 8) return true\n        if (x = 0, y = -0) return true\n        if (x = -0, y = 0) return true\n        return false  // 其他情况均返回false\n    }\n}\n```\n\n### 2. == (abstract equality comparision)\n\n```js\nif (Type(x) === Type(y)) return x === y\nif (Type(x) !== Type(y)) {\n    if (x === null && y === undefined) return true\n    if (x === undefined && y === null) return true\n    if (Type(x) === Number && Type(y) === String) return x == ToNumber(y)\n    if (Type(x) === String && Type(y) === Number) return ToNumber(x) == y\n    if (Type(x) === Boolean) return ToNumber(x) == y\n    if (Type(y) === Boolean) return x == ToNumber(y)\n    if ([String, Number, Symbol].includes(Type(x)) && Type(y) === Object) return x == ToPrimitive(y)\n    if (Type(x) === Object && [String, Number, Symbol].includes(Type(y))) return ToPrimitive(x) == y\n    return false  // 其他情况均返回false\n}\n```\n\n- Type(x) 获取x的类型\n- ToNumber(x) 将x转换成Number类型\n- ToBoolean(x) 将x转换成Boolean类型\n- ToString(x) 将x转换成String类型\n- ToPrimitive(x) 将x转换成原始值\n\n### 3. ToPrimitive()方法 - <small>*ECMAScript规范中的抽象方法，Javascript不能访问*</small>\n\n先了解js中的原始类型：\n- Null: null\n- Undefined: undefined\n- Number: 如 0、8、5.5、NaN、Infinite\n- Boolean: true、false\n- String: 如 'abc'、''\n- 其余都属于'非原始类型'，如 Array、Object、Function\n\n> typeof null 得到的结果是object, 这是js在设计之初的问题。但null是属于原始类型的（记住就行了🐶）\n\n> ToPrimitive(input[, hint])转换为原始类型的方法，根据preferedType目标类型进行转换。preferedType只能是 `string` 或 `number`\n\n转换步骤：\n- `hint` 为 `number`\n  - input是原始值，返回input本身\n  - input是对象\n    - 先判断input.valueOf()的返回值。如果是原始值，返回结果。\n    - 否则，再判断input.toString()的返回值。如果是原始值，返回结果。\n    - 否则，抛出不能转换成原始值的TypeError。\n- `hint` 为 `string`\n  - input是原始值，返回input本身\n  - input是对象\n    - 先判断input.toString()的返回值。如果是原始值，返回结果。\n    - 否则，再判断input.valueOf()的返回值。如果是原始值，返回结果。\n    - 否则，抛出不能转换成原始值的TypeError。\n- `hint` 为空\n  - `input` 是 `Date` 日期类型\n    - input被认为是string。\n    - 先判断input.toString()的返回值。如果是原始值，返回结果。\n    - 否则，再判断input.valueOf()的返回值。如果是原始值，返回结果。\n    - 否则，抛出不能转换成原始值的TypeError。\n  - `input` 是 `非Date` 类型\n    - input被认为是number。\n    - 先判断input.valueOf()的返回值。如果是原始值，返回结果。\n    - 否则，再判断input.toString()的返回值。如果是原始值，返回结果。\n    - 否则，抛出不能转换成原始值的TypeError。\n\n> 当调用ToPrimitive而没有传hint参数时，默认情况下hint将被赋值Number。但是可以重写对象的@@toPrimitive方法来覆盖这个行为。在本规范中，只有Date和Symbol两个对象重写了默认的ToPrimitive操作。对于Date对象，如果没有传hint，hint将被默认赋值为String\n\n\n示例1：ToPrimitive([10])\n```js\n// 没有传入hint参数，并且input是Array, 所以hint被赋值为Number\n// 先判断valueOf()\n[10].valueOf() 等于 [10]，属于 Array/Object，不是原始类型\n// 再判断toString()\n[10].toString() 等于 '10'，属于 String，是原始类型\n所以 return '10'\n```\n\n示例2：ToPrimitive(function sayHi(){})\n```js\nvar sayHi = function (name) {\n    console.log('hi, ' + name)\n}\n// 没有传入hint参数，并且input是Function, 所以hint被赋值为Number\n// 先判断valueOf()  typeof sayHi.valueOf === 'function'\nsayHi.valueOf() 等于 f (name) { console.log('hi, ' + name) } 属于Function，不是原始类型\n// 再判断toString()  typeof sayHi.toString === 'string'\nsayHi.toString() 等于 function (name) { console.log('hi, ' + name) } 属于String，是原始类型\n所以 return sayHi方法的方法体源码字符串\n```\n\n上面示例中 [10] == 10\n- Type(x) === Object, Type(y) === Number，变成比较 ToPrimitive([10]) == 10\n- 由示例1 知道 ToPrimitive([10]) === '10'，变成比较 '10' == 10\n- 此时，Type(x) === String, Type(y) === Number，变成比较 ToNumber('10') == 10\n- ToNumber('10') === 10，变成比较 10 == 10\n- return true\n\n[] == 0\n- Type(x) === Object, Type(y) === Number, 变成比较 ToPrimitive([]) == 0\n- 没有传入hint参数，[]不属于Date类型，hint被赋值Number\n- Number hint先判断 valueOf()， [].valueOf()返回数组本身，不是原始类型\n- 再判断toString()，[].toString() === ''，属于原始类型 return ''\n- 等式变成 '' == 0\n- 此时，Type(x) === String, Type(y) === Number, 变成比较ToNumber('') == 0\n- ToNumber('') === 0, 变成比较 0 == 0\n- return true\n\n按照上述步骤推导，不难可以得到： [] == false 返回true\n那么 ![] == false 应该返回 false吧！ 在控制台验证一下 `![] == false` 返回true。纳尼！！\n\n- ![] 先转换成 Boolean。 Boolean([]) === true, ![] === false\n- 此时变成 false == false return true\n\n由 [] == false 返回true 和 ![] == false 返回true 得到 [] == ![] 返回 true。 🐶\n\nnull == false 走的是最后一步，不满足任何条件，直接返回false，这一说法没有理解。难道不是Type(false) === Boolean然后比较 null == 0么。。。 再就是ToPrimitive(null) == 0 ?? 炸裂，我太难了。\n\n### 4. toString()方法\n\n> 可以将除(null和undefined)之外的数据类型转为字符串\n\n```js\n[].toString()  // \"\"\n[3, 8].toString()  // \"3, 8\"\nnew Date().toString()  // Fri May 01 2020 14:24:34 GMT+0800 (中国标准时间)\"\n/abc/ig.toString()  // \"/abc/ig\"\n\n(16).toString()  // '16'\n(16).toString(2)  // '10000' 二进制(2-35都可)\n(16).toString(8)  // '20' 八进制\n(16).toString(16)  // '10' 十六进制\n0.000006.toString()  // '0.000006'\n0.0000006.toString() // '6e-7' 小数点后面6个或以上0时 小数采用e表示法输出\n(1234567890123456789012).toString()  // '1.2345678901234568e+21' 整数部分超过21位，采用e表示法\n```\n\n可以用toString()区分自定义方法和原生方法\n```js\nfunction fn () {}\nfn.toString()  // \"function fn () {}\"  -- fn 是自定义方法\nNumber.toString()  // \"function Number() { [native code] }\" -- Number是一个原生方法\n```\n\n还可以用Object.prototype上的原生toString()方法判断数据类型\n```js\nObject.prototype.toString.call('abc');  // \"[object String]\"\nObject.prototype.toString.call(123);  // \"[object Number]\"\nObject.prototype.toString.call(true);  // \"[object Boolean]\"\nObject.prototype.toString.call(null)  // \"[object Null]\"\nObject.prototype.toString.call(undefined)  //”[object Undefined]\"\n```\n\n判断原生引用类型\n```js\n// 函数类型\nfunction fn(){console.log('test')}\nObject.prototype.toString.call(fn)  // \"[object Function]\"\n\n// 日期类型\nvar date = new Date()\nObject.prototype.toString.call(date)  // \"[object Date]\"\n\n// 数组类型\nvar arr = [1,2,3]\nObject.prototype.toString.call(arr)  // \"[object Array]\"\n\n// 正则表达式\nvar reg = /[hbc]at/gi\nObject.prototype.toString.call(reg)  // \"[object RegExp]\"\n\n// 自定义类型\nfunction Person(name) {\n    this.name = name\n}\nvar person = new Person(\"Rose\")\nObject.prototype.toString.call(person)  // \"[object Object]\"\n```\n\n### 5. String()方法\n\n- 如果有toString()方法，则调用该方法，并返回结果\n- 否则：\n  - 如果是null，返回\"null\"\n  - 如果是undefined，返回\"undefined\"\n\n要区分toString()和String()\n- toString(radix)支持传入radix进制参数\n- toString不支持null和undifined调用\n- String(null) === 'null'\n- String(undifined) === 'undefined'\n\n### 6. Number()方法\n\n- 布尔值：true - 1 false - 0\n- 数字值：返回数字本身\n- null：返回0\n- undefined: 返回NaN\n- 字符串：\n  - 只包含数字：转换成十进制，忽略前导0\n  - 包含有效的浮点格式：转换成浮点数职，忽略前导0\n  - 空字符串：返回0\n  - 其他情况：返回NaN\n- 对象：调用对象的valueOf()方法，然后依据前面的规则转换返回的值。如果转换的结果是NaN，则调用对象的toString()方法，再次依照前面的规则转换返回的字符串值。\n\n### 7. Boolean()方法\n\n以下值会被转换为false：`false`、`\"\"`、`0`、`-0`、`NaN`、`null`、`undefined`，其余任何值都会被转换为`true`。\n另外Boolean()不传递参数时，也返回false。\n\n### 8. 隐式转换\n\n在某些情况下，即使我们不提供显示转换，Javascript也会进行自动类型转换，主要情况有：\n\n#### 8.1 用于检测是否为非数值的函数：isNaN(mix)\n\nisNaN()函数，会尝试将参数值用Number()进行转换，如果结果为“非数值”则返回true，否则返回false。\n\n#### 8.2 递增递减操作符（包括前置和后置）、一元正负符号操作符\n\n这些操作符适用于任何数据类型的值，针对不同类型的值，该操作符遵循以下规则（经过对比发现，其规则与Number()规则基本相同）：\n\n- 如果是包含有效数字字符的字符串，先将其转换为数字值（转换规则同Number()），在执行加减1的操作，字符串变量变为数值变量。\n- 如果是不包含有效数字字符的字符串，将变量的值设置为NaN，字符串变量变成数值变量。\n- 如果是布尔值false，先将其转换为0再执行加减1的操作，布尔值变量编程数值变量。\n- 如果是布尔值true，先将其转换为1再执行加减1的操作，布尔值变量变成数值变量。\n- 如果是浮点数值，执行加减1的操作。\n- 如果是对象，先调用对象的valueOf()方法，然后对该返回值应用前面的规则。如果结果是NaN，则调用toString()方法后再应用前面的规则。对象变量变成数值变量。\n\n#### 8.3 加法运算操作符\n\n- 如果两个操作值都是数值，其规则为：\n  - 如果一个操作数为NaN，则结果为NaN\n  - 如果是Infinity+Infinity，结果是Infinity\n  - 如果是-Infinity+(-Infinity)，结果是-Infinity\n  - 如果是Infinity+(-Infinity)，结果是NaN\n  - 如果是+0+(+0)，结果为+0\n  - 如果是(-0)+(-0)，结果为-0\n  - 如果是(+0)+(-0)，结果为+0\n- 如果有一个操作值为字符串，则：\n  - 如果两个操作值都是字符串，则将它们拼接起来\n  - 如果只有一个操作值为字符串，则将另外操作值转换为字符串，然后拼接起来\n  - 如果一个操作数是对象、数值或者布尔值，则调用toString()方法取得字符串值，然后再应用前面的字符串规则。对于undefined和null，分别调用String()显式转换为字符串。\n\n可以看出，加法运算中，如果有一个操作值为字符串类型，则将另一个操作值转换为字符串，最后连接起来。\n\n#### 8.4 乘除、减号运算符、取模运算符\n\n这些操作符针对的是运算，所以他们具有共同性：如果操作值之一不是数值，则被隐式调用Number()函数进行转换。具体每一种运算的详细规则请参考ECMAScript中的定义\n\n#### 8.5 逻辑操作符（!、&&、||）\n\n逻辑非（！）操作符首先通过Boolean()函数将它的操作值转换为布尔值，然后求反。\n\n- 逻辑与（&&）操作符，如果一个操作值不是布尔值时，遵循以下规则进行转换：\n  - 如果第一个操作数经Boolean()转换后为true，则返回第二个操作值，否则返回第一个值（不是Boolean()转换后的值）\n  - 如果有一个操作值为null，返回null\n  - 如果有一个操作值为NaN，返回NaN\n  - 如果有一个操作值为undefined，返回undefined\n- 逻辑或（||）操作符，如果一个操作值不是布尔值，遵循以下规则：\n  - 如果第一个操作值经Boolean()转换后为false，则返回第二个操作值，否则返回第一个操作值（不是Boolean()转换后的值）\n  - 对于undefined、null和NaN的处理规则与逻辑与（&&）相同\n\n#### 8.6 关系操作符（<, >, <=, >=）\n\n- 如果两个操作值都是数值，则进行数值比较\n- 如果两个操作值都是字符串，则比较字符串对应的字符编码值\n- 如果只有一个操作值是数值，则将另一个操作值转换为数值，进行数值比较\n- 如果一个操作数是对象，则调用valueOf()方法（如果对象没有valueOf()方法则调用toString()方法），得到的结果按照前面的规则执行比较\n- 如果一个操作值是布尔值，则将其转换为数值，再进行比较\n\n注：NaN是非常特殊的值，它不和任何类型的值相等，包括它自己，同时它与任何类型的值比较大小时都返回false。\n\n#### 8.7 相等操作符\n\n相应规则见文章最初始。\n\n### 9. 位运算符\n\n#### 9.1 按位与(&)\n\n#### 9.2 按位与(|)\n\n#### 9.3 按位非(~)\n\n#### 9.4 按位异或(^)\n\n#### 9.5 左移(<<)\n\n> 该操作符会将左边操作数向左移动右边操作数的位数。向左被移出的位被丢弃，右侧用 0 补充。\n> 3 << 2 = 3 * 2 ^ 2 = 12\n\n#### 9.6 有符号右移(<<)\n\n> 该操作符会将左边操作数向右移动右边操作数的位数。向右被移出的位被丢弃，拷贝最左侧的位以填充左侧。由于新的最左侧的位总是和以前相同，符号位没有被改变。所以被称作“符号传播”。\n> 12 >> 2 = 12 / 2 ^ 2 = 3\n\n#### 9.6 无符号右移(<<<)\n\n> 该操作符会将左边操作数向右移动右边操作数的位数。向右被移出的位被丢弃，左侧用0填充。因为符号位变成了 0，所以结果总是非负的。（译注：即便右移 0 个比特，结果也是非负的。）\n\n### 10. 参考文章\n\n- [文章一](https://juejin.im/entry/584918612f301e005716add6)\n- [文章二](https://blog.csdn.net/huang100qi/article/details/80543045)\n- [文章三](https://www.cnblogs.com/Renyi-Fan/p/9189441.html#_labelTop)","slug":"abstract-and-strict-equality","published":1,"updated":"2020-08-13T12:30:47.998Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34dy001su66tkcboqpga","content":"<p>先来几个例子，带着问题一起思考：<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log([<span class=\"number\">10</span>] == <span class=\"number\">10</span>);                <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'10'</span> == <span class=\"number\">10</span>);                <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([] == <span class=\"number\">0</span>);                   <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">true</span> == <span class=\"number\">1</span>);                 <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([] == <span class=\"literal\">false</span>);               <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(![] == <span class=\"literal\">false</span>);              <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([] == ![]);                 <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span> == <span class=\"number\">0</span>);                   <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span> == <span class=\"literal\">false</span>);               <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">null</span> == <span class=\"literal\">false</span>);             <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">null</span> == <span class=\"literal\">true</span>);              <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(!<span class=\"literal\">null</span> == <span class=\"literal\">true</span>);             <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">null</span> == <span class=\"literal\">undefined</span>);         <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<h3 id=\"1-strict-equality-comparision\"><a href=\"#1-strict-equality-comparision\" class=\"headerlink\" title=\"1. === (strict equality comparision)\"></a>1. === (strict equality comparision)</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (Type(x) !== Type(y))  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (Type(x) === Type(y)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === Undefined) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === Null) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">String</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> 长度和对应位置上字符都相同 ? <span class=\"literal\">true</span> : <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">Boolean</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> xy同时为<span class=\"literal\">true</span>或<span class=\"literal\">false</span> ? <span class=\"literal\">true</span> : <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">Symbol</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> 同一个<span class=\"built_in\">Symbol</span> ? <span class=\"literal\">true</span> : <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">Number</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (x === <span class=\"literal\">NaN</span>) <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (y === <span class=\"literal\">NaN</span>) <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (xy相等 例如 x = <span class=\"number\">8</span>, y = <span class=\"number\">8</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (x = <span class=\"number\">0</span>, y = <span class=\"number\">-0</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (x = <span class=\"number\">-0</span>, y = <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>  <span class=\"comment\">// 其他情况均返回false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-abstract-equality-comparision\"><a href=\"#2-abstract-equality-comparision\" class=\"headerlink\" title=\"2. == (abstract equality comparision)\"></a>2. == (abstract equality comparision)</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (Type(x) === Type(y)) <span class=\"keyword\">return</span> x === y</span><br><span class=\"line\"><span class=\"keyword\">if</span> (Type(x) !== Type(y)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x === <span class=\"literal\">null</span> &amp;&amp; y === <span class=\"literal\">undefined</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x === <span class=\"literal\">undefined</span> &amp;&amp; y === <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">Number</span> &amp;&amp; Type(y) === <span class=\"built_in\">String</span>) <span class=\"keyword\">return</span> x == ToNumber(y)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">String</span> &amp;&amp; Type(y) === <span class=\"built_in\">Number</span>) <span class=\"keyword\">return</span> ToNumber(x) == y</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">Boolean</span>) <span class=\"keyword\">return</span> ToNumber(x) == y</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(y) === <span class=\"built_in\">Boolean</span>) <span class=\"keyword\">return</span> x == ToNumber(y)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ([<span class=\"built_in\">String</span>, <span class=\"built_in\">Number</span>, <span class=\"built_in\">Symbol</span>].includes(Type(x)) &amp;&amp; Type(y) === <span class=\"built_in\">Object</span>) <span class=\"keyword\">return</span> x == ToPrimitive(y)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">Object</span> &amp;&amp; [<span class=\"built_in\">String</span>, <span class=\"built_in\">Number</span>, <span class=\"built_in\">Symbol</span>].includes(Type(y))) <span class=\"keyword\">return</span> ToPrimitive(x) == y</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>  <span class=\"comment\">// 其他情况均返回false</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Type(x) 获取x的类型</li>\n<li>ToNumber(x) 将x转换成Number类型</li>\n<li>ToBoolean(x) 将x转换成Boolean类型</li>\n<li>ToString(x) 将x转换成String类型</li>\n<li>ToPrimitive(x) 将x转换成原始值</li>\n</ul>\n<h3 id=\"3-ToPrimitive-方法-ECMAScript规范中的抽象方法，Javascript不能访问\"><a href=\"#3-ToPrimitive-方法-ECMAScript规范中的抽象方法，Javascript不能访问\" class=\"headerlink\" title=\"3. ToPrimitive()方法 - ECMAScript规范中的抽象方法，Javascript不能访问\"></a>3. ToPrimitive()方法 - <small><em>ECMAScript规范中的抽象方法，Javascript不能访问</em></small></h3><p>先了解js中的原始类型：</p>\n<ul>\n<li>Null: null</li>\n<li>Undefined: undefined</li>\n<li>Number: 如 0、8、5.5、NaN、Infinite</li>\n<li>Boolean: true、false</li>\n<li>String: 如 ‘abc’、’’</li>\n<li>其余都属于’非原始类型’，如 Array、Object、Function</li>\n</ul>\n<blockquote>\n<p>typeof null 得到的结果是object, 这是js在设计之初的问题。但null是属于原始类型的（记住就行了🐶）</p>\n</blockquote>\n<blockquote>\n<p>ToPrimitive(input[, hint])转换为原始类型的方法，根据preferedType目标类型进行转换。preferedType只能是 <code>string</code> 或 <code>number</code></p>\n</blockquote>\n<p>转换步骤：</p>\n<ul>\n<li><code>hint</code> 为 <code>number</code><ul>\n<li>input是原始值，返回input本身</li>\n<li>input是对象<ul>\n<li>先判断input.valueOf()的返回值。如果是原始值，返回结果。</li>\n<li>否则，再判断input.toString()的返回值。如果是原始值，返回结果。</li>\n<li>否则，抛出不能转换成原始值的TypeError。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>hint</code> 为 <code>string</code><ul>\n<li>input是原始值，返回input本身</li>\n<li>input是对象<ul>\n<li>先判断input.toString()的返回值。如果是原始值，返回结果。</li>\n<li>否则，再判断input.valueOf()的返回值。如果是原始值，返回结果。</li>\n<li>否则，抛出不能转换成原始值的TypeError。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>hint</code> 为空<ul>\n<li><code>input</code> 是 <code>Date</code> 日期类型<ul>\n<li>input被认为是string。</li>\n<li>先判断input.toString()的返回值。如果是原始值，返回结果。</li>\n<li>否则，再判断input.valueOf()的返回值。如果是原始值，返回结果。</li>\n<li>否则，抛出不能转换成原始值的TypeError。</li>\n</ul>\n</li>\n<li><code>input</code> 是 <code>非Date</code> 类型<ul>\n<li>input被认为是number。</li>\n<li>先判断input.valueOf()的返回值。如果是原始值，返回结果。</li>\n<li>否则，再判断input.toString()的返回值。如果是原始值，返回结果。</li>\n<li>否则，抛出不能转换成原始值的TypeError。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>当调用ToPrimitive而没有传hint参数时，默认情况下hint将被赋值Number。但是可以重写对象的@@toPrimitive方法来覆盖这个行为。在本规范中，只有Date和Symbol两个对象重写了默认的ToPrimitive操作。对于Date对象，如果没有传hint，hint将被默认赋值为String</p>\n</blockquote>\n<p>示例1：ToPrimitive([10])<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 没有传入hint参数，并且input是Array, 所以hint被赋值为Number</span></span><br><span class=\"line\"><span class=\"comment\">// 先判断valueOf()</span></span><br><span class=\"line\">[<span class=\"number\">10</span>].valueOf() 等于 [<span class=\"number\">10</span>]，属于 <span class=\"built_in\">Array</span>/<span class=\"built_in\">Object</span>，不是原始类型</span><br><span class=\"line\"><span class=\"comment\">// 再判断toString()</span></span><br><span class=\"line\">[<span class=\"number\">10</span>].toString() 等于 <span class=\"string\">'10'</span>，属于 <span class=\"built_in\">String</span>，是原始类型</span><br><span class=\"line\">所以 <span class=\"keyword\">return</span> <span class=\"string\">'10'</span></span><br></pre></td></tr></table></figure></p>\n<p>示例2：ToPrimitive(function sayHi(){})<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> sayHi = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'hi, '</span> + name)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 没有传入hint参数，并且input是Function, 所以hint被赋值为Number</span></span><br><span class=\"line\"><span class=\"comment\">// 先判断valueOf()  typeof sayHi.valueOf === 'function'</span></span><br><span class=\"line\">sayHi.valueOf() 等于 f (name) &#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">'hi, '</span> + name) &#125; 属于<span class=\"built_in\">Function</span>，不是原始类型</span><br><span class=\"line\"><span class=\"comment\">// 再判断toString()  typeof sayHi.toString === 'string'</span></span><br><span class=\"line\">sayHi.toString() 等于 <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">'hi, '</span> + name) &#125; 属于<span class=\"built_in\">String</span>，是原始类型</span><br><span class=\"line\">所以 <span class=\"keyword\">return</span> sayHi方法的方法体源码字符串</span><br></pre></td></tr></table></figure></p>\n<p>上面示例中 [10] == 10</p>\n<ul>\n<li>Type(x) === Object, Type(y) === Number，变成比较 ToPrimitive([10]) == 10</li>\n<li>由示例1 知道 ToPrimitive([10]) === ‘10’，变成比较 ‘10’ == 10</li>\n<li>此时，Type(x) === String, Type(y) === Number，变成比较 ToNumber(‘10’) == 10</li>\n<li>ToNumber(‘10’) === 10，变成比较 10 == 10</li>\n<li>return true</li>\n</ul>\n<p>[] == 0</p>\n<ul>\n<li>Type(x) === Object, Type(y) === Number, 变成比较 ToPrimitive([]) == 0</li>\n<li>没有传入hint参数，[]不属于Date类型，hint被赋值Number</li>\n<li>Number hint先判断 valueOf()， [].valueOf()返回数组本身，不是原始类型</li>\n<li>再判断toString()，[].toString() === ‘’，属于原始类型 return ‘’</li>\n<li>等式变成 ‘’ == 0</li>\n<li>此时，Type(x) === String, Type(y) === Number, 变成比较ToNumber(‘’) == 0</li>\n<li>ToNumber(‘’) === 0, 变成比较 0 == 0</li>\n<li>return true</li>\n</ul>\n<p>按照上述步骤推导，不难可以得到： [] == false 返回true<br>那么 ![] == false 应该返回 false吧！ 在控制台验证一下 <code>![] == false</code> 返回true。纳尼！！</p>\n<ul>\n<li>![] 先转换成 Boolean。 Boolean([]) === true, ![] === false</li>\n<li>此时变成 false == false return true</li>\n</ul>\n<p>由 [] == false 返回true 和 ![] == false 返回true 得到 [] == ![] 返回 true。 🐶</p>\n<p>null == false 走的是最后一步，不满足任何条件，直接返回false，这一说法没有理解。难道不是Type(false) === Boolean然后比较 null == 0么。。。 再就是ToPrimitive(null) == 0 ?? 炸裂，我太难了。</p>\n<h3 id=\"4-toString-方法\"><a href=\"#4-toString-方法\" class=\"headerlink\" title=\"4. toString()方法\"></a>4. toString()方法</h3><blockquote>\n<p>可以将除(null和undefined)之外的数据类型转为字符串</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[].toString()  <span class=\"comment\">// \"\"</span></span><br><span class=\"line\">[<span class=\"number\">3</span>, <span class=\"number\">8</span>].toString()  <span class=\"comment\">// \"3, 8\"</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().toString()  <span class=\"comment\">// Fri May 01 2020 14:24:34 GMT+0800 (中国标准时间)\"</span></span><br><span class=\"line\">/abc/ig.toString()  <span class=\"comment\">// \"/abc/ig\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"number\">16</span>).toString()  <span class=\"comment\">// '16'</span></span><br><span class=\"line\">(<span class=\"number\">16</span>).toString(<span class=\"number\">2</span>)  <span class=\"comment\">// '10000' 二进制(2-35都可)</span></span><br><span class=\"line\">(<span class=\"number\">16</span>).toString(<span class=\"number\">8</span>)  <span class=\"comment\">// '20' 八进制</span></span><br><span class=\"line\">(<span class=\"number\">16</span>).toString(<span class=\"number\">16</span>)  <span class=\"comment\">// '10' 十六进制</span></span><br><span class=\"line\"><span class=\"number\">0.000006</span>.toString()  <span class=\"comment\">// '0.000006'</span></span><br><span class=\"line\"><span class=\"number\">0.0000006</span>.toString() <span class=\"comment\">// '6e-7' 小数点后面6个或以上0时 小数采用e表示法输出</span></span><br><span class=\"line\">(<span class=\"number\">1234567890123456789012</span>).toString()  <span class=\"comment\">// '1.2345678901234568e+21' 整数部分超过21位，采用e表示法</span></span><br></pre></td></tr></table></figure>\n<p>可以用toString()区分自定义方法和原生方法<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">fn.toString()  <span class=\"comment\">// \"function fn () &#123;&#125;\"  -- fn 是自定义方法</span></span><br><span class=\"line\"><span class=\"built_in\">Number</span>.toString()  <span class=\"comment\">// \"function Number() &#123; [native code] &#125;\" -- Number是一个原生方法</span></span><br></pre></td></tr></table></figure></p>\n<p>还可以用Object.prototype上的原生toString()方法判断数据类型<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"string\">'abc'</span>);  <span class=\"comment\">// \"[object String]\"</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"number\">123</span>);  <span class=\"comment\">// \"[object Number]\"</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"literal\">true</span>);  <span class=\"comment\">// \"[object Boolean]\"</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"literal\">null</span>)  <span class=\"comment\">// \"[object Null]\"</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"literal\">undefined</span>)  <span class=\"comment\">//”[object Undefined]\"</span></span><br></pre></td></tr></table></figure></p>\n<p>判断原生引用类型<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 函数类型</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>)</span>&#123;<span class=\"built_in\">console</span>.log(<span class=\"string\">'test'</span>)&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(fn)  <span class=\"comment\">// \"[object Function]\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 日期类型</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(date)  <span class=\"comment\">// \"[object Date]\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 数组类型</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(arr)  <span class=\"comment\">// \"[object Array]\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 正则表达式</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> reg = <span class=\"regexp\">/[hbc]at/gi</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(reg)  <span class=\"comment\">// \"[object RegExp]\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 自定义类型</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person = <span class=\"keyword\">new</span> Person(<span class=\"string\">\"Rose\"</span>)</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(person)  <span class=\"comment\">// \"[object Object]\"</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"5-String-方法\"><a href=\"#5-String-方法\" class=\"headerlink\" title=\"5. String()方法\"></a>5. String()方法</h3><ul>\n<li>如果有toString()方法，则调用该方法，并返回结果</li>\n<li>否则：<ul>\n<li>如果是null，返回”null”</li>\n<li>如果是undefined，返回”undefined”</li>\n</ul>\n</li>\n</ul>\n<p>要区分toString()和String()</p>\n<ul>\n<li>toString(radix)支持传入radix进制参数</li>\n<li>toString不支持null和undifined调用</li>\n<li>String(null) === ‘null’</li>\n<li>String(undifined) === ‘undefined’</li>\n</ul>\n<h3 id=\"6-Number-方法\"><a href=\"#6-Number-方法\" class=\"headerlink\" title=\"6. Number()方法\"></a>6. Number()方法</h3><ul>\n<li>布尔值：true - 1 false - 0</li>\n<li>数字值：返回数字本身</li>\n<li>null：返回0</li>\n<li>undefined: 返回NaN</li>\n<li>字符串：<ul>\n<li>只包含数字：转换成十进制，忽略前导0</li>\n<li>包含有效的浮点格式：转换成浮点数职，忽略前导0</li>\n<li>空字符串：返回0</li>\n<li>其他情况：返回NaN</li>\n</ul>\n</li>\n<li>对象：调用对象的valueOf()方法，然后依据前面的规则转换返回的值。如果转换的结果是NaN，则调用对象的toString()方法，再次依照前面的规则转换返回的字符串值。</li>\n</ul>\n<h3 id=\"7-Boolean-方法\"><a href=\"#7-Boolean-方法\" class=\"headerlink\" title=\"7. Boolean()方法\"></a>7. Boolean()方法</h3><p>以下值会被转换为false：<code>false</code>、<code>&quot;&quot;</code>、<code>0</code>、<code>-0</code>、<code>NaN</code>、<code>null</code>、<code>undefined</code>，其余任何值都会被转换为<code>true</code>。<br>另外Boolean()不传递参数时，也返回false。</p>\n<h3 id=\"8-隐式转换\"><a href=\"#8-隐式转换\" class=\"headerlink\" title=\"8. 隐式转换\"></a>8. 隐式转换</h3><p>在某些情况下，即使我们不提供显示转换，Javascript也会进行自动类型转换，主要情况有：</p>\n<h4 id=\"8-1-用于检测是否为非数值的函数：isNaN-mix\"><a href=\"#8-1-用于检测是否为非数值的函数：isNaN-mix\" class=\"headerlink\" title=\"8.1 用于检测是否为非数值的函数：isNaN(mix)\"></a>8.1 用于检测是否为非数值的函数：isNaN(mix)</h4><p>isNaN()函数，会尝试将参数值用Number()进行转换，如果结果为“非数值”则返回true，否则返回false。</p>\n<h4 id=\"8-2-递增递减操作符（包括前置和后置）、一元正负符号操作符\"><a href=\"#8-2-递增递减操作符（包括前置和后置）、一元正负符号操作符\" class=\"headerlink\" title=\"8.2 递增递减操作符（包括前置和后置）、一元正负符号操作符\"></a>8.2 递增递减操作符（包括前置和后置）、一元正负符号操作符</h4><p>这些操作符适用于任何数据类型的值，针对不同类型的值，该操作符遵循以下规则（经过对比发现，其规则与Number()规则基本相同）：</p>\n<ul>\n<li>如果是包含有效数字字符的字符串，先将其转换为数字值（转换规则同Number()），在执行加减1的操作，字符串变量变为数值变量。</li>\n<li>如果是不包含有效数字字符的字符串，将变量的值设置为NaN，字符串变量变成数值变量。</li>\n<li>如果是布尔值false，先将其转换为0再执行加减1的操作，布尔值变量编程数值变量。</li>\n<li>如果是布尔值true，先将其转换为1再执行加减1的操作，布尔值变量变成数值变量。</li>\n<li>如果是浮点数值，执行加减1的操作。</li>\n<li>如果是对象，先调用对象的valueOf()方法，然后对该返回值应用前面的规则。如果结果是NaN，则调用toString()方法后再应用前面的规则。对象变量变成数值变量。</li>\n</ul>\n<h4 id=\"8-3-加法运算操作符\"><a href=\"#8-3-加法运算操作符\" class=\"headerlink\" title=\"8.3 加法运算操作符\"></a>8.3 加法运算操作符</h4><ul>\n<li>如果两个操作值都是数值，其规则为：<ul>\n<li>如果一个操作数为NaN，则结果为NaN</li>\n<li>如果是Infinity+Infinity，结果是Infinity</li>\n<li>如果是-Infinity+(-Infinity)，结果是-Infinity</li>\n<li>如果是Infinity+(-Infinity)，结果是NaN</li>\n<li>如果是+0+(+0)，结果为+0</li>\n<li>如果是(-0)+(-0)，结果为-0</li>\n<li>如果是(+0)+(-0)，结果为+0</li>\n</ul>\n</li>\n<li>如果有一个操作值为字符串，则：<ul>\n<li>如果两个操作值都是字符串，则将它们拼接起来</li>\n<li>如果只有一个操作值为字符串，则将另外操作值转换为字符串，然后拼接起来</li>\n<li>如果一个操作数是对象、数值或者布尔值，则调用toString()方法取得字符串值，然后再应用前面的字符串规则。对于undefined和null，分别调用String()显式转换为字符串。</li>\n</ul>\n</li>\n</ul>\n<p>可以看出，加法运算中，如果有一个操作值为字符串类型，则将另一个操作值转换为字符串，最后连接起来。</p>\n<h4 id=\"8-4-乘除、减号运算符、取模运算符\"><a href=\"#8-4-乘除、减号运算符、取模运算符\" class=\"headerlink\" title=\"8.4 乘除、减号运算符、取模运算符\"></a>8.4 乘除、减号运算符、取模运算符</h4><p>这些操作符针对的是运算，所以他们具有共同性：如果操作值之一不是数值，则被隐式调用Number()函数进行转换。具体每一种运算的详细规则请参考ECMAScript中的定义</p>\n<h4 id=\"8-5-逻辑操作符（-、-amp-amp-、-）\"><a href=\"#8-5-逻辑操作符（-、-amp-amp-、-）\" class=\"headerlink\" title=\"8.5 逻辑操作符（!、&amp;&amp;、||）\"></a>8.5 逻辑操作符（!、&amp;&amp;、||）</h4><p>逻辑非（！）操作符首先通过Boolean()函数将它的操作值转换为布尔值，然后求反。</p>\n<ul>\n<li>逻辑与（&amp;&amp;）操作符，如果一个操作值不是布尔值时，遵循以下规则进行转换：<ul>\n<li>如果第一个操作数经Boolean()转换后为true，则返回第二个操作值，否则返回第一个值（不是Boolean()转换后的值）</li>\n<li>如果有一个操作值为null，返回null</li>\n<li>如果有一个操作值为NaN，返回NaN</li>\n<li>如果有一个操作值为undefined，返回undefined</li>\n</ul>\n</li>\n<li>逻辑或（||）操作符，如果一个操作值不是布尔值，遵循以下规则：<ul>\n<li>如果第一个操作值经Boolean()转换后为false，则返回第二个操作值，否则返回第一个操作值（不是Boolean()转换后的值）</li>\n<li>对于undefined、null和NaN的处理规则与逻辑与（&amp;&amp;）相同</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"8-6-关系操作符（-lt-gt-lt-gt-）\"><a href=\"#8-6-关系操作符（-lt-gt-lt-gt-）\" class=\"headerlink\" title=\"8.6 关系操作符（&lt;, &gt;, &lt;=, &gt;=）\"></a>8.6 关系操作符（&lt;, &gt;, &lt;=, &gt;=）</h4><ul>\n<li>如果两个操作值都是数值，则进行数值比较</li>\n<li>如果两个操作值都是字符串，则比较字符串对应的字符编码值</li>\n<li>如果只有一个操作值是数值，则将另一个操作值转换为数值，进行数值比较</li>\n<li>如果一个操作数是对象，则调用valueOf()方法（如果对象没有valueOf()方法则调用toString()方法），得到的结果按照前面的规则执行比较</li>\n<li>如果一个操作值是布尔值，则将其转换为数值，再进行比较</li>\n</ul>\n<p>注：NaN是非常特殊的值，它不和任何类型的值相等，包括它自己，同时它与任何类型的值比较大小时都返回false。</p>\n<h4 id=\"8-7-相等操作符\"><a href=\"#8-7-相等操作符\" class=\"headerlink\" title=\"8.7 相等操作符\"></a>8.7 相等操作符</h4><p>相应规则见文章最初始。</p>\n<h3 id=\"9-位运算符\"><a href=\"#9-位运算符\" class=\"headerlink\" title=\"9. 位运算符\"></a>9. 位运算符</h3><h4 id=\"9-1-按位与-amp\"><a href=\"#9-1-按位与-amp\" class=\"headerlink\" title=\"9.1 按位与(&amp;)\"></a>9.1 按位与(&amp;)</h4><h4 id=\"9-2-按位与\"><a href=\"#9-2-按位与\" class=\"headerlink\" title=\"9.2 按位与(|)\"></a>9.2 按位与(|)</h4><h4 id=\"9-3-按位非\"><a href=\"#9-3-按位非\" class=\"headerlink\" title=\"9.3 按位非(~)\"></a>9.3 按位非(~)</h4><h4 id=\"9-4-按位异或\"><a href=\"#9-4-按位异或\" class=\"headerlink\" title=\"9.4 按位异或(^)\"></a>9.4 按位异或(^)</h4><h4 id=\"9-5-左移-lt-lt\"><a href=\"#9-5-左移-lt-lt\" class=\"headerlink\" title=\"9.5 左移(&lt;&lt;)\"></a>9.5 左移(&lt;&lt;)</h4><blockquote>\n<p>该操作符会将左边操作数向左移动右边操作数的位数。向左被移出的位被丢弃，右侧用 0 补充。<br>3 &lt;&lt; 2 = 3 * 2 ^ 2 = 12</p>\n</blockquote>\n<h4 id=\"9-6-有符号右移-lt-lt\"><a href=\"#9-6-有符号右移-lt-lt\" class=\"headerlink\" title=\"9.6 有符号右移(&lt;&lt;)\"></a>9.6 有符号右移(&lt;&lt;)</h4><blockquote>\n<p>该操作符会将左边操作数向右移动右边操作数的位数。向右被移出的位被丢弃，拷贝最左侧的位以填充左侧。由于新的最左侧的位总是和以前相同，符号位没有被改变。所以被称作“符号传播”。<br>12 &gt;&gt; 2 = 12 / 2 ^ 2 = 3</p>\n</blockquote>\n<h4 id=\"9-6-无符号右移-lt-lt-lt\"><a href=\"#9-6-无符号右移-lt-lt-lt\" class=\"headerlink\" title=\"9.6 无符号右移(&lt;&lt;&lt;)\"></a>9.6 无符号右移(&lt;&lt;&lt;)</h4><blockquote>\n<p>该操作符会将左边操作数向右移动右边操作数的位数。向右被移出的位被丢弃，左侧用0填充。因为符号位变成了 0，所以结果总是非负的。（译注：即便右移 0 个比特，结果也是非负的。）</p>\n</blockquote>\n<h3 id=\"10-参考文章\"><a href=\"#10-参考文章\" class=\"headerlink\" title=\"10. 参考文章\"></a>10. 参考文章</h3><ul>\n<li><a href=\"https://juejin.im/entry/584918612f301e005716add6\" target=\"_blank\" rel=\"noopener\">文章一</a></li>\n<li><a href=\"https://blog.csdn.net/huang100qi/article/details/80543045\" target=\"_blank\" rel=\"noopener\">文章二</a></li>\n<li><a href=\"https://www.cnblogs.com/Renyi-Fan/p/9189441.html#_labelTop\" target=\"_blank\" rel=\"noopener\">文章三</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>先来几个例子，带着问题一起思考：<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log([<span class=\"number\">10</span>] == <span class=\"number\">10</span>);                <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'10'</span> == <span class=\"number\">10</span>);                <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([] == <span class=\"number\">0</span>);                   <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">true</span> == <span class=\"number\">1</span>);                 <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([] == <span class=\"literal\">false</span>);               <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(![] == <span class=\"literal\">false</span>);              <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([] == ![]);                 <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span> == <span class=\"number\">0</span>);                   <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span> == <span class=\"literal\">false</span>);               <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">null</span> == <span class=\"literal\">false</span>);             <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">null</span> == <span class=\"literal\">true</span>);              <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(!<span class=\"literal\">null</span> == <span class=\"literal\">true</span>);             <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">null</span> == <span class=\"literal\">undefined</span>);         <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure></p>","more":"<h3 id=\"1-strict-equality-comparision\"><a href=\"#1-strict-equality-comparision\" class=\"headerlink\" title=\"1. === (strict equality comparision)\"></a>1. === (strict equality comparision)</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (Type(x) !== Type(y))  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (Type(x) === Type(y)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === Undefined) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === Null) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">String</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> 长度和对应位置上字符都相同 ? <span class=\"literal\">true</span> : <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">Boolean</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> xy同时为<span class=\"literal\">true</span>或<span class=\"literal\">false</span> ? <span class=\"literal\">true</span> : <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">Symbol</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> 同一个<span class=\"built_in\">Symbol</span> ? <span class=\"literal\">true</span> : <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">Number</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (x === <span class=\"literal\">NaN</span>) <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (y === <span class=\"literal\">NaN</span>) <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (xy相等 例如 x = <span class=\"number\">8</span>, y = <span class=\"number\">8</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (x = <span class=\"number\">0</span>, y = <span class=\"number\">-0</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (x = <span class=\"number\">-0</span>, y = <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>  <span class=\"comment\">// 其他情况均返回false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-abstract-equality-comparision\"><a href=\"#2-abstract-equality-comparision\" class=\"headerlink\" title=\"2. == (abstract equality comparision)\"></a>2. == (abstract equality comparision)</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (Type(x) === Type(y)) <span class=\"keyword\">return</span> x === y</span><br><span class=\"line\"><span class=\"keyword\">if</span> (Type(x) !== Type(y)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x === <span class=\"literal\">null</span> &amp;&amp; y === <span class=\"literal\">undefined</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x === <span class=\"literal\">undefined</span> &amp;&amp; y === <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">Number</span> &amp;&amp; Type(y) === <span class=\"built_in\">String</span>) <span class=\"keyword\">return</span> x == ToNumber(y)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">String</span> &amp;&amp; Type(y) === <span class=\"built_in\">Number</span>) <span class=\"keyword\">return</span> ToNumber(x) == y</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">Boolean</span>) <span class=\"keyword\">return</span> ToNumber(x) == y</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(y) === <span class=\"built_in\">Boolean</span>) <span class=\"keyword\">return</span> x == ToNumber(y)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ([<span class=\"built_in\">String</span>, <span class=\"built_in\">Number</span>, <span class=\"built_in\">Symbol</span>].includes(Type(x)) &amp;&amp; Type(y) === <span class=\"built_in\">Object</span>) <span class=\"keyword\">return</span> x == ToPrimitive(y)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Type(x) === <span class=\"built_in\">Object</span> &amp;&amp; [<span class=\"built_in\">String</span>, <span class=\"built_in\">Number</span>, <span class=\"built_in\">Symbol</span>].includes(Type(y))) <span class=\"keyword\">return</span> ToPrimitive(x) == y</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>  <span class=\"comment\">// 其他情况均返回false</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Type(x) 获取x的类型</li>\n<li>ToNumber(x) 将x转换成Number类型</li>\n<li>ToBoolean(x) 将x转换成Boolean类型</li>\n<li>ToString(x) 将x转换成String类型</li>\n<li>ToPrimitive(x) 将x转换成原始值</li>\n</ul>\n<h3 id=\"3-ToPrimitive-方法-ECMAScript规范中的抽象方法，Javascript不能访问\"><a href=\"#3-ToPrimitive-方法-ECMAScript规范中的抽象方法，Javascript不能访问\" class=\"headerlink\" title=\"3. ToPrimitive()方法 - ECMAScript规范中的抽象方法，Javascript不能访问\"></a>3. ToPrimitive()方法 - <small><em>ECMAScript规范中的抽象方法，Javascript不能访问</em></small></h3><p>先了解js中的原始类型：</p>\n<ul>\n<li>Null: null</li>\n<li>Undefined: undefined</li>\n<li>Number: 如 0、8、5.5、NaN、Infinite</li>\n<li>Boolean: true、false</li>\n<li>String: 如 ‘abc’、’’</li>\n<li>其余都属于’非原始类型’，如 Array、Object、Function</li>\n</ul>\n<blockquote>\n<p>typeof null 得到的结果是object, 这是js在设计之初的问题。但null是属于原始类型的（记住就行了🐶）</p>\n</blockquote>\n<blockquote>\n<p>ToPrimitive(input[, hint])转换为原始类型的方法，根据preferedType目标类型进行转换。preferedType只能是 <code>string</code> 或 <code>number</code></p>\n</blockquote>\n<p>转换步骤：</p>\n<ul>\n<li><code>hint</code> 为 <code>number</code><ul>\n<li>input是原始值，返回input本身</li>\n<li>input是对象<ul>\n<li>先判断input.valueOf()的返回值。如果是原始值，返回结果。</li>\n<li>否则，再判断input.toString()的返回值。如果是原始值，返回结果。</li>\n<li>否则，抛出不能转换成原始值的TypeError。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>hint</code> 为 <code>string</code><ul>\n<li>input是原始值，返回input本身</li>\n<li>input是对象<ul>\n<li>先判断input.toString()的返回值。如果是原始值，返回结果。</li>\n<li>否则，再判断input.valueOf()的返回值。如果是原始值，返回结果。</li>\n<li>否则，抛出不能转换成原始值的TypeError。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>hint</code> 为空<ul>\n<li><code>input</code> 是 <code>Date</code> 日期类型<ul>\n<li>input被认为是string。</li>\n<li>先判断input.toString()的返回值。如果是原始值，返回结果。</li>\n<li>否则，再判断input.valueOf()的返回值。如果是原始值，返回结果。</li>\n<li>否则，抛出不能转换成原始值的TypeError。</li>\n</ul>\n</li>\n<li><code>input</code> 是 <code>非Date</code> 类型<ul>\n<li>input被认为是number。</li>\n<li>先判断input.valueOf()的返回值。如果是原始值，返回结果。</li>\n<li>否则，再判断input.toString()的返回值。如果是原始值，返回结果。</li>\n<li>否则，抛出不能转换成原始值的TypeError。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>当调用ToPrimitive而没有传hint参数时，默认情况下hint将被赋值Number。但是可以重写对象的@@toPrimitive方法来覆盖这个行为。在本规范中，只有Date和Symbol两个对象重写了默认的ToPrimitive操作。对于Date对象，如果没有传hint，hint将被默认赋值为String</p>\n</blockquote>\n<p>示例1：ToPrimitive([10])<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 没有传入hint参数，并且input是Array, 所以hint被赋值为Number</span></span><br><span class=\"line\"><span class=\"comment\">// 先判断valueOf()</span></span><br><span class=\"line\">[<span class=\"number\">10</span>].valueOf() 等于 [<span class=\"number\">10</span>]，属于 <span class=\"built_in\">Array</span>/<span class=\"built_in\">Object</span>，不是原始类型</span><br><span class=\"line\"><span class=\"comment\">// 再判断toString()</span></span><br><span class=\"line\">[<span class=\"number\">10</span>].toString() 等于 <span class=\"string\">'10'</span>，属于 <span class=\"built_in\">String</span>，是原始类型</span><br><span class=\"line\">所以 <span class=\"keyword\">return</span> <span class=\"string\">'10'</span></span><br></pre></td></tr></table></figure></p>\n<p>示例2：ToPrimitive(function sayHi(){})<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> sayHi = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'hi, '</span> + name)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 没有传入hint参数，并且input是Function, 所以hint被赋值为Number</span></span><br><span class=\"line\"><span class=\"comment\">// 先判断valueOf()  typeof sayHi.valueOf === 'function'</span></span><br><span class=\"line\">sayHi.valueOf() 等于 f (name) &#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">'hi, '</span> + name) &#125; 属于<span class=\"built_in\">Function</span>，不是原始类型</span><br><span class=\"line\"><span class=\"comment\">// 再判断toString()  typeof sayHi.toString === 'string'</span></span><br><span class=\"line\">sayHi.toString() 等于 <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">'hi, '</span> + name) &#125; 属于<span class=\"built_in\">String</span>，是原始类型</span><br><span class=\"line\">所以 <span class=\"keyword\">return</span> sayHi方法的方法体源码字符串</span><br></pre></td></tr></table></figure></p>\n<p>上面示例中 [10] == 10</p>\n<ul>\n<li>Type(x) === Object, Type(y) === Number，变成比较 ToPrimitive([10]) == 10</li>\n<li>由示例1 知道 ToPrimitive([10]) === ‘10’，变成比较 ‘10’ == 10</li>\n<li>此时，Type(x) === String, Type(y) === Number，变成比较 ToNumber(‘10’) == 10</li>\n<li>ToNumber(‘10’) === 10，变成比较 10 == 10</li>\n<li>return true</li>\n</ul>\n<p>[] == 0</p>\n<ul>\n<li>Type(x) === Object, Type(y) === Number, 变成比较 ToPrimitive([]) == 0</li>\n<li>没有传入hint参数，[]不属于Date类型，hint被赋值Number</li>\n<li>Number hint先判断 valueOf()， [].valueOf()返回数组本身，不是原始类型</li>\n<li>再判断toString()，[].toString() === ‘’，属于原始类型 return ‘’</li>\n<li>等式变成 ‘’ == 0</li>\n<li>此时，Type(x) === String, Type(y) === Number, 变成比较ToNumber(‘’) == 0</li>\n<li>ToNumber(‘’) === 0, 变成比较 0 == 0</li>\n<li>return true</li>\n</ul>\n<p>按照上述步骤推导，不难可以得到： [] == false 返回true<br>那么 ![] == false 应该返回 false吧！ 在控制台验证一下 <code>![] == false</code> 返回true。纳尼！！</p>\n<ul>\n<li>![] 先转换成 Boolean。 Boolean([]) === true, ![] === false</li>\n<li>此时变成 false == false return true</li>\n</ul>\n<p>由 [] == false 返回true 和 ![] == false 返回true 得到 [] == ![] 返回 true。 🐶</p>\n<p>null == false 走的是最后一步，不满足任何条件，直接返回false，这一说法没有理解。难道不是Type(false) === Boolean然后比较 null == 0么。。。 再就是ToPrimitive(null) == 0 ?? 炸裂，我太难了。</p>\n<h3 id=\"4-toString-方法\"><a href=\"#4-toString-方法\" class=\"headerlink\" title=\"4. toString()方法\"></a>4. toString()方法</h3><blockquote>\n<p>可以将除(null和undefined)之外的数据类型转为字符串</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[].toString()  <span class=\"comment\">// \"\"</span></span><br><span class=\"line\">[<span class=\"number\">3</span>, <span class=\"number\">8</span>].toString()  <span class=\"comment\">// \"3, 8\"</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().toString()  <span class=\"comment\">// Fri May 01 2020 14:24:34 GMT+0800 (中国标准时间)\"</span></span><br><span class=\"line\">/abc/ig.toString()  <span class=\"comment\">// \"/abc/ig\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"number\">16</span>).toString()  <span class=\"comment\">// '16'</span></span><br><span class=\"line\">(<span class=\"number\">16</span>).toString(<span class=\"number\">2</span>)  <span class=\"comment\">// '10000' 二进制(2-35都可)</span></span><br><span class=\"line\">(<span class=\"number\">16</span>).toString(<span class=\"number\">8</span>)  <span class=\"comment\">// '20' 八进制</span></span><br><span class=\"line\">(<span class=\"number\">16</span>).toString(<span class=\"number\">16</span>)  <span class=\"comment\">// '10' 十六进制</span></span><br><span class=\"line\"><span class=\"number\">0.000006</span>.toString()  <span class=\"comment\">// '0.000006'</span></span><br><span class=\"line\"><span class=\"number\">0.0000006</span>.toString() <span class=\"comment\">// '6e-7' 小数点后面6个或以上0时 小数采用e表示法输出</span></span><br><span class=\"line\">(<span class=\"number\">1234567890123456789012</span>).toString()  <span class=\"comment\">// '1.2345678901234568e+21' 整数部分超过21位，采用e表示法</span></span><br></pre></td></tr></table></figure>\n<p>可以用toString()区分自定义方法和原生方法<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">fn.toString()  <span class=\"comment\">// \"function fn () &#123;&#125;\"  -- fn 是自定义方法</span></span><br><span class=\"line\"><span class=\"built_in\">Number</span>.toString()  <span class=\"comment\">// \"function Number() &#123; [native code] &#125;\" -- Number是一个原生方法</span></span><br></pre></td></tr></table></figure></p>\n<p>还可以用Object.prototype上的原生toString()方法判断数据类型<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"string\">'abc'</span>);  <span class=\"comment\">// \"[object String]\"</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"number\">123</span>);  <span class=\"comment\">// \"[object Number]\"</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"literal\">true</span>);  <span class=\"comment\">// \"[object Boolean]\"</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"literal\">null</span>)  <span class=\"comment\">// \"[object Null]\"</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"literal\">undefined</span>)  <span class=\"comment\">//”[object Undefined]\"</span></span><br></pre></td></tr></table></figure></p>\n<p>判断原生引用类型<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 函数类型</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>)</span>&#123;<span class=\"built_in\">console</span>.log(<span class=\"string\">'test'</span>)&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(fn)  <span class=\"comment\">// \"[object Function]\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 日期类型</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(date)  <span class=\"comment\">// \"[object Date]\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 数组类型</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(arr)  <span class=\"comment\">// \"[object Array]\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 正则表达式</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> reg = <span class=\"regexp\">/[hbc]at/gi</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(reg)  <span class=\"comment\">// \"[object RegExp]\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 自定义类型</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person = <span class=\"keyword\">new</span> Person(<span class=\"string\">\"Rose\"</span>)</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(person)  <span class=\"comment\">// \"[object Object]\"</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"5-String-方法\"><a href=\"#5-String-方法\" class=\"headerlink\" title=\"5. String()方法\"></a>5. String()方法</h3><ul>\n<li>如果有toString()方法，则调用该方法，并返回结果</li>\n<li>否则：<ul>\n<li>如果是null，返回”null”</li>\n<li>如果是undefined，返回”undefined”</li>\n</ul>\n</li>\n</ul>\n<p>要区分toString()和String()</p>\n<ul>\n<li>toString(radix)支持传入radix进制参数</li>\n<li>toString不支持null和undifined调用</li>\n<li>String(null) === ‘null’</li>\n<li>String(undifined) === ‘undefined’</li>\n</ul>\n<h3 id=\"6-Number-方法\"><a href=\"#6-Number-方法\" class=\"headerlink\" title=\"6. Number()方法\"></a>6. Number()方法</h3><ul>\n<li>布尔值：true - 1 false - 0</li>\n<li>数字值：返回数字本身</li>\n<li>null：返回0</li>\n<li>undefined: 返回NaN</li>\n<li>字符串：<ul>\n<li>只包含数字：转换成十进制，忽略前导0</li>\n<li>包含有效的浮点格式：转换成浮点数职，忽略前导0</li>\n<li>空字符串：返回0</li>\n<li>其他情况：返回NaN</li>\n</ul>\n</li>\n<li>对象：调用对象的valueOf()方法，然后依据前面的规则转换返回的值。如果转换的结果是NaN，则调用对象的toString()方法，再次依照前面的规则转换返回的字符串值。</li>\n</ul>\n<h3 id=\"7-Boolean-方法\"><a href=\"#7-Boolean-方法\" class=\"headerlink\" title=\"7. Boolean()方法\"></a>7. Boolean()方法</h3><p>以下值会被转换为false：<code>false</code>、<code>&quot;&quot;</code>、<code>0</code>、<code>-0</code>、<code>NaN</code>、<code>null</code>、<code>undefined</code>，其余任何值都会被转换为<code>true</code>。<br>另外Boolean()不传递参数时，也返回false。</p>\n<h3 id=\"8-隐式转换\"><a href=\"#8-隐式转换\" class=\"headerlink\" title=\"8. 隐式转换\"></a>8. 隐式转换</h3><p>在某些情况下，即使我们不提供显示转换，Javascript也会进行自动类型转换，主要情况有：</p>\n<h4 id=\"8-1-用于检测是否为非数值的函数：isNaN-mix\"><a href=\"#8-1-用于检测是否为非数值的函数：isNaN-mix\" class=\"headerlink\" title=\"8.1 用于检测是否为非数值的函数：isNaN(mix)\"></a>8.1 用于检测是否为非数值的函数：isNaN(mix)</h4><p>isNaN()函数，会尝试将参数值用Number()进行转换，如果结果为“非数值”则返回true，否则返回false。</p>\n<h4 id=\"8-2-递增递减操作符（包括前置和后置）、一元正负符号操作符\"><a href=\"#8-2-递增递减操作符（包括前置和后置）、一元正负符号操作符\" class=\"headerlink\" title=\"8.2 递增递减操作符（包括前置和后置）、一元正负符号操作符\"></a>8.2 递增递减操作符（包括前置和后置）、一元正负符号操作符</h4><p>这些操作符适用于任何数据类型的值，针对不同类型的值，该操作符遵循以下规则（经过对比发现，其规则与Number()规则基本相同）：</p>\n<ul>\n<li>如果是包含有效数字字符的字符串，先将其转换为数字值（转换规则同Number()），在执行加减1的操作，字符串变量变为数值变量。</li>\n<li>如果是不包含有效数字字符的字符串，将变量的值设置为NaN，字符串变量变成数值变量。</li>\n<li>如果是布尔值false，先将其转换为0再执行加减1的操作，布尔值变量编程数值变量。</li>\n<li>如果是布尔值true，先将其转换为1再执行加减1的操作，布尔值变量变成数值变量。</li>\n<li>如果是浮点数值，执行加减1的操作。</li>\n<li>如果是对象，先调用对象的valueOf()方法，然后对该返回值应用前面的规则。如果结果是NaN，则调用toString()方法后再应用前面的规则。对象变量变成数值变量。</li>\n</ul>\n<h4 id=\"8-3-加法运算操作符\"><a href=\"#8-3-加法运算操作符\" class=\"headerlink\" title=\"8.3 加法运算操作符\"></a>8.3 加法运算操作符</h4><ul>\n<li>如果两个操作值都是数值，其规则为：<ul>\n<li>如果一个操作数为NaN，则结果为NaN</li>\n<li>如果是Infinity+Infinity，结果是Infinity</li>\n<li>如果是-Infinity+(-Infinity)，结果是-Infinity</li>\n<li>如果是Infinity+(-Infinity)，结果是NaN</li>\n<li>如果是+0+(+0)，结果为+0</li>\n<li>如果是(-0)+(-0)，结果为-0</li>\n<li>如果是(+0)+(-0)，结果为+0</li>\n</ul>\n</li>\n<li>如果有一个操作值为字符串，则：<ul>\n<li>如果两个操作值都是字符串，则将它们拼接起来</li>\n<li>如果只有一个操作值为字符串，则将另外操作值转换为字符串，然后拼接起来</li>\n<li>如果一个操作数是对象、数值或者布尔值，则调用toString()方法取得字符串值，然后再应用前面的字符串规则。对于undefined和null，分别调用String()显式转换为字符串。</li>\n</ul>\n</li>\n</ul>\n<p>可以看出，加法运算中，如果有一个操作值为字符串类型，则将另一个操作值转换为字符串，最后连接起来。</p>\n<h4 id=\"8-4-乘除、减号运算符、取模运算符\"><a href=\"#8-4-乘除、减号运算符、取模运算符\" class=\"headerlink\" title=\"8.4 乘除、减号运算符、取模运算符\"></a>8.4 乘除、减号运算符、取模运算符</h4><p>这些操作符针对的是运算，所以他们具有共同性：如果操作值之一不是数值，则被隐式调用Number()函数进行转换。具体每一种运算的详细规则请参考ECMAScript中的定义</p>\n<h4 id=\"8-5-逻辑操作符（-、-amp-amp-、-）\"><a href=\"#8-5-逻辑操作符（-、-amp-amp-、-）\" class=\"headerlink\" title=\"8.5 逻辑操作符（!、&amp;&amp;、||）\"></a>8.5 逻辑操作符（!、&amp;&amp;、||）</h4><p>逻辑非（！）操作符首先通过Boolean()函数将它的操作值转换为布尔值，然后求反。</p>\n<ul>\n<li>逻辑与（&amp;&amp;）操作符，如果一个操作值不是布尔值时，遵循以下规则进行转换：<ul>\n<li>如果第一个操作数经Boolean()转换后为true，则返回第二个操作值，否则返回第一个值（不是Boolean()转换后的值）</li>\n<li>如果有一个操作值为null，返回null</li>\n<li>如果有一个操作值为NaN，返回NaN</li>\n<li>如果有一个操作值为undefined，返回undefined</li>\n</ul>\n</li>\n<li>逻辑或（||）操作符，如果一个操作值不是布尔值，遵循以下规则：<ul>\n<li>如果第一个操作值经Boolean()转换后为false，则返回第二个操作值，否则返回第一个操作值（不是Boolean()转换后的值）</li>\n<li>对于undefined、null和NaN的处理规则与逻辑与（&amp;&amp;）相同</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"8-6-关系操作符（-lt-gt-lt-gt-）\"><a href=\"#8-6-关系操作符（-lt-gt-lt-gt-）\" class=\"headerlink\" title=\"8.6 关系操作符（&lt;, &gt;, &lt;=, &gt;=）\"></a>8.6 关系操作符（&lt;, &gt;, &lt;=, &gt;=）</h4><ul>\n<li>如果两个操作值都是数值，则进行数值比较</li>\n<li>如果两个操作值都是字符串，则比较字符串对应的字符编码值</li>\n<li>如果只有一个操作值是数值，则将另一个操作值转换为数值，进行数值比较</li>\n<li>如果一个操作数是对象，则调用valueOf()方法（如果对象没有valueOf()方法则调用toString()方法），得到的结果按照前面的规则执行比较</li>\n<li>如果一个操作值是布尔值，则将其转换为数值，再进行比较</li>\n</ul>\n<p>注：NaN是非常特殊的值，它不和任何类型的值相等，包括它自己，同时它与任何类型的值比较大小时都返回false。</p>\n<h4 id=\"8-7-相等操作符\"><a href=\"#8-7-相等操作符\" class=\"headerlink\" title=\"8.7 相等操作符\"></a>8.7 相等操作符</h4><p>相应规则见文章最初始。</p>\n<h3 id=\"9-位运算符\"><a href=\"#9-位运算符\" class=\"headerlink\" title=\"9. 位运算符\"></a>9. 位运算符</h3><h4 id=\"9-1-按位与-amp\"><a href=\"#9-1-按位与-amp\" class=\"headerlink\" title=\"9.1 按位与(&amp;)\"></a>9.1 按位与(&amp;)</h4><h4 id=\"9-2-按位与\"><a href=\"#9-2-按位与\" class=\"headerlink\" title=\"9.2 按位与(|)\"></a>9.2 按位与(|)</h4><h4 id=\"9-3-按位非\"><a href=\"#9-3-按位非\" class=\"headerlink\" title=\"9.3 按位非(~)\"></a>9.3 按位非(~)</h4><h4 id=\"9-4-按位异或\"><a href=\"#9-4-按位异或\" class=\"headerlink\" title=\"9.4 按位异或(^)\"></a>9.4 按位异或(^)</h4><h4 id=\"9-5-左移-lt-lt\"><a href=\"#9-5-左移-lt-lt\" class=\"headerlink\" title=\"9.5 左移(&lt;&lt;)\"></a>9.5 左移(&lt;&lt;)</h4><blockquote>\n<p>该操作符会将左边操作数向左移动右边操作数的位数。向左被移出的位被丢弃，右侧用 0 补充。<br>3 &lt;&lt; 2 = 3 * 2 ^ 2 = 12</p>\n</blockquote>\n<h4 id=\"9-6-有符号右移-lt-lt\"><a href=\"#9-6-有符号右移-lt-lt\" class=\"headerlink\" title=\"9.6 有符号右移(&lt;&lt;)\"></a>9.6 有符号右移(&lt;&lt;)</h4><blockquote>\n<p>该操作符会将左边操作数向右移动右边操作数的位数。向右被移出的位被丢弃，拷贝最左侧的位以填充左侧。由于新的最左侧的位总是和以前相同，符号位没有被改变。所以被称作“符号传播”。<br>12 &gt;&gt; 2 = 12 / 2 ^ 2 = 3</p>\n</blockquote>\n<h4 id=\"9-6-无符号右移-lt-lt-lt\"><a href=\"#9-6-无符号右移-lt-lt-lt\" class=\"headerlink\" title=\"9.6 无符号右移(&lt;&lt;&lt;)\"></a>9.6 无符号右移(&lt;&lt;&lt;)</h4><blockquote>\n<p>该操作符会将左边操作数向右移动右边操作数的位数。向右被移出的位被丢弃，左侧用0填充。因为符号位变成了 0，所以结果总是非负的。（译注：即便右移 0 个比特，结果也是非负的。）</p>\n</blockquote>\n<h3 id=\"10-参考文章\"><a href=\"#10-参考文章\" class=\"headerlink\" title=\"10. 参考文章\"></a>10. 参考文章</h3><ul>\n<li><a href=\"https://juejin.im/entry/584918612f301e005716add6\" target=\"_blank\" rel=\"noopener\">文章一</a></li>\n<li><a href=\"https://blog.csdn.net/huang100qi/article/details/80543045\" target=\"_blank\" rel=\"noopener\">文章二</a></li>\n<li><a href=\"https://www.cnblogs.com/Renyi-Fan/p/9189441.html#_labelTop\" target=\"_blank\" rel=\"noopener\">文章三</a></li>\n</ul>"},{"title":"Diary【一】","date":"2019-05-22T09:43:43.000Z","toc":true,"_content":"\n### 1. setTimeout中方法体添加引号与不添加引号的区别\n\n> `添加引号`的情况，调用的函数是`全局范围`的。`未添加引号`的情况，调用的是`局部范围`的。\n\n<!-- More -->\n\n```js\nvar testFn = function () {\n    console.info('hello from global')\n}\n\nvar fn = function () {\n    var testFn = function () {\n        console.info('hello fron inner')\n    }\n\n    setTimeout('testFn()', 1000)  // hello form global\n    setTimeout(testFn, 1000)  // hello from inner\n\n    // 在fn()函数内部没有定义testFn的时候，会向上寻找testFn，这里找到了全局函数，执行效果：\n    setTimeout(testFn, 1000)  // hello from global\n}\n\nfn()\n```\n\n### 2. AMD/CMD规范 common.js\n\n`common.js` 运行在`服务器端`，因为模块就在磁盘上，所以加载时间几乎可以忽略不计，属于同步加载。 [典型代表 `node.js`]\n`AMD`与`CMD`都属于异步加载，运行在`浏览器端`。\n`AMD` 推崇依赖前置，定义模块的时候就需要申明需要依赖的模块 [典型代表 `require.js`]\n`CMD` 推崇依赖就近，需要用到的时候才去require相关模块 [典型代表 `sea.js`]\n\n### 3. stopPropagation() 以及 stopImmediatePropagation()\n\n`stopImmediatePropagation` 用于阻止冒泡，在执行完当前元素上的事件处理程序之后，停止当前元素以及后续元素的事件处理程序\n\n`stopPropagation` 同样也是用于阻止冒泡，在执行完绑定到当前元素上的所有事件处理程序之后，停止后续元素的事件处理程序\n\n同一个元素用`on`绑定多次同样事件时（例如click），最后一次会覆盖之前的事件，不会执行前面。而用`addEventListener`绑定多次同样事件时，都会执行。\n\n```html\n<div id=\"large\" style=\"width: 150px; height: 150px; background: orange\">\n    <div id=\"middle\" style=\"width: 100px; height: 100px; background: cadetblue\">\n        <div id=\"small\" style=\"width: 50px; height:50px; background: coral\"></div>\n    </div>\n</div>\n```\n\n```js\n(function(){\n    var large = document.getElementById('large')\n    var middle = document.getElementById('middle')\n    var small = document.getElementById('small')\n\n    large.addEventListener('click', function(){\n        alert('large div is clicked')\n    })\n    middle.addEventListener('click', function(){\n        alert('middle div is clicked')\n    })\n\n    // 第一种情况： 点击small时，会依次弹出三个窗口，这是因为向上冒泡产生的\n    small.addEventListener('click', function(){\n     alert('small div is clicked')\n    })\n\n    // 第二种情况： 点击small时，会弹出四个窗口\n    // small.addEventListener('click', function(){\n    //  alert('small-1 is clicked')\n    // })\n    // small.addEventListener('click', function(){\n    //  alert('small-2 is clicked')\n    // })\n\n    // 第三种情况，添加stopPropagation： 点击small时，会弹出两个窗口\n    // small-1 is clicked    small-2 is clicked\n    // small.addEventListener('click', function(event){\n    //  alert('small-1 is clicked')\n    //  event.stopPropagation()\n    // })\n    // small.addEventListener('click', function(){\n    //  alert('small-2 is clicked')\n    // })\n\n    // 第四种情况，添加stopImmediatePropagation： 点击small时，会弹出一个窗口\n    // small-1 is clicked\n    // 能够很明显看到与stopPropagation的区别，调用stopImmediatePropagation之后，第二个定义的click事件也被取消而不被执行了。\n    // small.addEventListener('click', function(event){\n    //     alert('small-1 is clicked')\n    //     event.stopImmediatePropagation()\n    // })\n    // small.addEventListener('click', function(){\n    //     alert('small-2 is clicked')\n    // })\n})()\n```\n\n<div id=\"large\" style=\"box-sizing: border-box; width: 150px; height: 150px; background: orange; cursor: pointer;\"><!-- \n    --><div id=\"middle\" style=\"box-sizing: border-box; width: 100px; height: 100px; background: cadetblue\"><!-- \n        --><div id=\"small\" style=\"box-sizing: border-box; width: 50px; height:50px; background: coral\"></div><!-- \n    --></div>\n</div>\n\n<script>\n    (function(){\n        var large = document.getElementById('large')\n        var middle = document.getElementById('middle')\n        var small = document.getElementById('small')\n\n        large.addEventListener('click', function(){\n            alert('large div is clicked')\n        })\n        middle.addEventListener('click', function(){\n            alert('middle div is clicked')\n        })\n\n        // 第一种情况： 点击small时，会依次弹出三个窗口，这是因为向上冒泡产生的\n        small.addEventListener('click', function(){\n        alert('small div is clicked')\n        })\n\n        // 第二种情况： 点击small时，会弹出四个窗口\n        // small.addEventListener('click', function(){\n        //  alert('small-1 is clicked')\n        // })\n        // small.addEventListener('click', function(){\n        //  alert('small-2 is clicked')\n        // })\n\n        // 第三种情况，添加stopPropagation： 点击small时，会弹出两个窗口\n        // small-1 is clicked    small-2 is clicked\n        // small.addEventListener('click', function(event){\n        //  alert('small-1 is clicked')\n        //  event.stopPropagation()\n        // })\n        // small.addEventListener('click', function(){\n        //  alert('small-2 is clicked')\n        // })\n\n        // 第四种情况，添加stopImmediatePropagation： 点击small时，会弹出一个窗口\n        // small-1 is clicked\n        // 能够很明显看到与stopPropagation的区别，调用stopImmediatePropagation之后，第二个定义的click事件也被取消而不被执行了。\n        // small.addEventListener('click', function(event){\n        //     alert('small-1 is clicked')\n        //     event.stopImmediatePropagation()\n        // })\n        // small.addEventListener('click', function(){\n        //     alert('small-2 is clicked')\n        // })\n    })()\n</script>\n\n### 4. js事件中的三个阶段\n\n三个阶段分别为`捕获阶段` `目标阶段` `冒泡阶段`\nelement.addEventListener(type, fn[, useCapture])\nuseCapture - 指定事件句柄在捕获阶段或者冒泡阶段执行， 默认false(事件句柄在冒泡阶段执行)，设置为true(事件句柄在捕获阶段执行)。\n\n- 捕获阶段\n- 目标阶段\n- 冒泡阶段\n\n### 5. 常见的前端性能优化手段\n\n- css sprites（雪碧图）\n- 避免使用css表达式\n- css样式表放在页面顶部，脚本放在页面底部\n- 内联图片和脚本使用data:URL（base64编码）模式直接包含在页面中，无需进行http请求，缺点：ie不支持，图片太大不适用，使用base64会增加页面体积，浏览器不会缓存\n- 使用内容分发网络CDN\n- 开启GZIP压缩，启用负载均衡\n- 开启keep alive减少与服务器链接次数 缺点：使服务器负载增大，也更容易遭受攻击\n- 精简压缩代码 uglifyjs\n- 避免重定向 常见的301 302\n- 配置e-tags 和 expires头 使用缓存\n- 按需加载资源\n\n### 6. parseInt() 以及 parseFloat()\n\n> parseInt(string[, radix])\n\n- string如果以‘ox’或者'oX'开头，将以16进制进行解析\n- radix 要解析的数字基数，介于2-36之间\n- 如果不给值或者为0，则按照基数为10来计算\n- 如果小于2或者大于36，则返回NaN\n- 开头和结尾的空格是允许的\n- 如果字符串的第一个字符不能转换成对应的数字，将返回NaN\n\n```js\nparseInt('0x12')  // 17\nparseInt('0x12', 2)  // 0  => parseInt('0', 2)\nparseInt('0x12', 10)  // 0  => parseInt('0', 16)\nparseInt('8')  // => parseInt('8', 0) => parseInt('8', 10)  // 8\nparseInt('8', 1)  // NaN\nparseInt('8', 37)  // NaN\nparseInt('a23')  // NaN\nparseInt('2a3')  // 2\nparseInt(' 23')  // 23\nparseInt(' 23 ')  // 23\nparseInt(' 2 3 ')  // 2\nparseInt('11', 2)  // 3\nparseInt(11, 2)  // 3\nparseInt('1100', 2)  // 12\nparseInt('21', 2)  // NaN 2超出了2进制最大值1，并且是第一个字符\nparseInt('12', 2)  // 1 2同样超出了2进制最大值1，但是第一个字符可以转换成二进制\nparseInt('66', 8) // 6*8^1 + 6*8^0 = 48 + 6 = 54\nparseInt('12', 16) // 1*16^1 + 2*16^0 = 16 + 2 = 18\n[0, 1, 2, 3].map(parseInt) //  [parseInt(0, 0), parseInt(1, 1), parseInt(2, 2), parseInt(3, 3)] => [0, NaN, NaN, NaN]\n```\n\nparseFloat()\n\n> parseInt(string[, radix])  这里语法待修改\n\n- 开头和结尾的空格是允许的\n- 如果字符串的第一个字符不能转换成对应的数字，将返回NaN\n- 如果在解析过程中遇到了正负号（+ 或 -）、数字 (0-9)、小数点，或者科学记数法中的指数（e 或 E）以外的字符，则它会忽略该字符以及之后的所有字符\n\n### 7. charAt()、charCodeAt() 和 fromCharCode()\n\n- charAt()\n\n   - String.charAt(index)\n   - 返回字符串中指定位置的字符, 索引值 index < 0 或超出了范围则返回一个空字符串\n\n ```js\n'abc'.charAt(1)  // 'b'\n'abc'.charAt(-2)  // ''\n'abc'.charAt(5)  // ''\n```\n\n- charCodeAt()\n\n   - String.charCodeAt(index)\n   - 返回字符串中指定位置的字符的 unicode 数值 [0, 1114111]\n   - 开头的 128 个 unicode 编码单元和 ASCII 字符编码一样\n   - 索引值 index < 0 或超出了范围则返回一个 NaN, 大于 255 的是中文\n\n```js\n'AabcdD'.charCodeAt(0)  // 65\n'AabcdD'.charCodeAt(1)  // 97\n'AabcdD'.charCodeAt(-1)  // NaN\n'AabcdD'.charCodeAt(8)  // NaN\n'中国'.charCodeAt(1)  // 22269\n```\n\n- fromCharCode()\n\n   - String.fromCharCode(num1, num2, num3, ...)\n   - 根据指定的 unicode 编码中的序号值来返回字符串\n\n```js\nString.fromCharCode(65, 66, 97)  // 'ABa'\n```\n\n### 8. 原生ajax\n\n```js\nvar xhr = new XMLHttpRequest()\n//  请求方式  请求路径  是否异步发送请求\nxhr.open('GET', 'http://www.jnathan.cn/jnathan/effect/authKit.js', true)\nxhr.send('hello world') \n\nxhr.onreadystatechange = function () {\n    if (xhr.readyState == 4 && xhr.status == 200) {\n        // alert(xhr.responseText)\n    }\n}\n```\n\n### 9. 有一个长度为n的数组，假定全部为整数，其中有且仅有一个数出现了奇数次，其他的数字都出现偶数次，找出出现了奇数次的那个数字。\n\n> 时间复杂度为O(n) 空间复杂度O(1)\n> 利用了`n ^ n = 0`, `n ^ 0 = n`两个等式的原理。\n> 循环对数组数字进行异或计算，即  `0 ^ arr[0] ^ arr[1] ^ ... ^ arr[n - 1]` ，异或计算满足交换律原则，如果数组元素出现了相同的情况，可以移动到一起先进行计算，如果出现了`偶数次`，其结果为  `0`，出现了奇数次的数其结果为该数字，所以表达式最后得出来的结果即为数组所有`出现了奇数次元素`的`异或操作`的结果。比如：[1,2,2,3,4,4]进行异或操作得到的结果是 `1 ^ 3 = 2` ，特殊情况下（只有一个数字出现了`奇数次`），那么最后的结果就是出现了`奇数次`的那个数字！！\n\n```js\nfunction fn7 (arr) {\n    var oddTimesNumber = 0\n    for (let i in arr) {\n        oddTimesNumber = oddTimesNumber ^ arr[i]\n    }\n\n    return oddTimesNumber\n}\nfn7([1,2,3,4,5,4,4,3,2,1,1,1])  // 3\n```\n\n### 10. 递归求1-10的和\n\n```js\nfunction getSum(nextArr, curSum = 0) {\n\n    var sum = nextArr[0] + curSum\n\n    if (nextArr.length == 1) {\n        return sum\n    } else {\n        return getSum(nextArr.slice(1), sum)\n    }\n\n}\ngetSum([1,2,3,4,5,6,7,8,9,10])\n```\n\n### 11. 去除数组重复元素\n\n- 直接双层循环比较\n\n```js\nfunction unique (arr) {\n\n    var result = []\n    var isRepeat\n\n    for (var i = 0; i < arr.length; i++) {\n\n        isRepeat = false  // 默认不重复，进行push操作，当判断重复时不操作\n        for (var j = 0; j < result.length; j++) {\n            if (arr[i] === result[j]) {\n                isRepeat = true\n                break\n            }\n        }\n\n        if (!isRepeat) {\n            result.push(arr[i])\n        }\n    }\n\n    return result\n\n}\nunique([1,1,2,3,4])\n```\n\n- 利用`indexOf()`， 但是`indexOf`会一直循环到找到目标为止，浪费了时间\n\n```js\nfunction unique (arr) {\n\n    var result = []\n\n    for (var i = 0; i < arr.length; i++) {\n        if (result.indexOf(arr[i]) === -1) {\n            result.push(arr[i])\n        }\n    }\n\n    return result\n}\nunique([1,1,2,3,4])\n```\n\n- 最快的方法 把已经出现过的元素通过下标的形式存入一个`Object`内。下标的引用的实现原理利用的是哈希算法，要比用`indexOf()`搜索数组快的多。由于多了一个`hash`表，占用的内存会更多，空间换时间做法\n\n```js\nfunction unique (arr) {\n    // hashObj为hash表，result为临时数组\n    var hashObj = {}, result = []\n    for (var i = 0; i < arr.length; i++) {\n        // 如果hash表中没有当前项\n        if (!hashObj[arr[i]]) {\n            // 存入hash表\n            hashObj[arr[i]] = true\n            // 把当前数组的当前项push到临时数组里面\n            result.push(arr[i])\n        }\n    }\n    return result\n}\n```\n\n- 折衷方法 时间上比`indexOf`快，比`hash`表的方式要慢。先按照从小到大的顺序排序，然后比较相邻的两个值大小\n  \n```js\nfunction unique (arr) {\n    arr.sort()\n    var result = [arr[0]]\n    for (var i = 1; i < arr.length; i++) {\n        if (arr[i] !== result[result.length - 1]) {\n            result.push(arr[i])\n        }\n    }\n    return result\n}\n```\n\n- `es6`的`filter()`方法\n\n```js\nfunction unique (arr) {\n    return arr.filter( (value, index) => { \n        arr.indexOf(value) === index\n        console.log(arr.indexOf(value), index)\n        // 0 0\n        // 0 1\n        // 2 2\n        // 3 3\n        // 4 4\n        // 5 5\n        // 2 6\n    })\n}\nunique([1,1,2,3,4,5,2])\n```\n\n### 12. jquery  里面的  $(document).ready(function(){})  和  window.onload  的区别\n\n- `window.onload`需要等到页面中包括图片在内的元素全部加载完毕才能执行；`ready()`是DOM元素绘制结束之后就执行，不用等到加载完毕。\n- `window.onload`如果定义了多次，则只会执行一个，后者会覆盖前者； `ready()`可以同时编写多个，并且都会执行。\n- `window.onload`没有简化写法；`$(document).ready(function(){})`可以简化成`$(function(){})`。\n- 补充：`$(window).load(function(){})`和 `window.onload()`效果一致。\n\n### 13. 渐进增强与优雅降级\n\n- 渐进增强 一开始就针对低版本浏览器进行构建页面，完成基本的功能，然后再对高级浏览器进行效果、交互的优化，达到更好的体验。\n- 优雅降级 一开始就构建站点的完整功能，然后针对浏览器进行测试和修复。比如一开始使用`CSS3`的特性构建了一个应用，然后逐步针对各大低级浏览器进行`hack`使其可以在低版本浏览器上正常浏览。\n\n### 14. cookies、localStorage和sessionStorage的区别\n\n- cookies存在于客户端，始终会在http请求中通过  Request Headers  Cookie头携带，即使当前请求不需要使用到cookie；大小一般在4KB，所以只适合保存很小的数据，比如会话标识；cookies在没有设置过期时间（expires）的时候，默认在关闭浏览器之后就会被清除，在有设置过期时间的时候，会一直持续到过期时间有效（即使关闭当前窗口或者关闭浏览器）。\n- localStorage 和 sessionStorage不会发送数据到服务端，仅在本地保存；也有大小的限制，但一般在5M左右；localStorage一直有效，除非手动清除； sessionStorage只在浏览器关闭之前有效。\n\n另外： localStorage 和 cookies 在同源的浏览器窗口之间是共享的，sessionStorage不共享，因此至少有以下两种方法实现不同页面间的通信：\n\n- 利用localStorage\n\n```js\n// A页面\n$('#btn').click(function(){\n    localStorage.setItem('name', 'Jnathan')\n})\n\n// B页面\nwindow.addEventListener('storage', function(event){\n    console.log(event.key + '=' + event.newValue)\n})\n```\n\n- 利用cookie + setInterval()\n\n```js\n// A页面\n$('#btn').click(function () {\n    document.cookie = \"name=\" + 'Jnathan'\n})\n\n// B页面\nfunction getKey(key) {  \n    return JSON.parse(\"{\\\"\"+ document.cookie.replace(/;\\s+/gim,\"\\\",\\\"\").replace(/=/gim, \"\\\":\\\"\") +\"\\\"}\")[key];  \n}\nsetInterval(function(){\n    console.log('name:', getKey('name'))\n}, 1000)\n```\n\n### 15. new 操作符的四个步骤\n\n```js\nvar Fn = function() {}\nvar fn = new Fn()\n```\n\n- 创建一个`空对象`\n\n```js\nvar obj = new Object()\n```\n\n- 设置`obj`的`原型`，将`obj`的`原型`指向`Fn`的`原型链`\n\n```js\nobj.__proto__ = Fn.prototype\n```\n\n- 将`Fn`中的`this`指向`obj`,并执行`Fn`\n\n```js\nvar result = Fn.call(obj)\n```\n\n- 判断`Fn`的`返回值类型`。如果是`引用类型，则返回这个`引用类型的对象`；如果是`值类型`，则返回`obj`\n\n```js\nif (typeof result == 'object') {  // 引用类型\n    fn = result\n} else { // 值类型\n    fn = obj\n}\n```\n\n### 16. 构造函数实现继承的几种方式\n\n```js\nfunction Animal () {\n    this.species = '动物'\n}\nfunction Cat (name, color) {\n    this.name = name\n    this.color = color\n}\n```\n\n使猫继承动物：\n\n- call apply\n\n```js\nfunction Cat (name, color) {\n    Animal.apply(this, arguments)\n    this.name = name\n    this.color = color\n}\n\nvar cat1 = new Cat('name1', 'color1')\nalert(cat1.species) //  动物\n```\n\n- prototype（其一）\n\n```js\nfunction Cat (name, color) {\n    Animal.apply(this, arguments)\n    this.name = name\n    this.color = color\n}\n\nvar cat1 = new Cat('name1', 'color1')\nalert(cat1.species) //  动物\n```\n\n- prototype（其二）\n\n```js\nfunction Animal () {}\nAnimal.prototype.species = '动物'\n\nCat.prototype = Animal.prototype\nCat.prototype.constructor = Cat\n\nvar cat3 = new Cat('name3', 'color3')\nalert(cat3.species) // 动物   \n```\n\n- 利用空对象作为中介 上面那种方法的缺点：Cat.prototype和Animal.prototype现在指向了同一个对象，那么任何对Cat.prototype的修改，都会反映到Animal.prototype。\n\n```js\nvar Fn = function () {}\nFn.prototype = Animal.prototype\nCat.prototype = new Fn()\nCat.prototype.construvtor = Cat\n```\n\n将其封装成一个函数\n\n```js\nfunction extend (Child, Parent) {\n    var Fn = function () {}\n    Fn.prototype = Parent.prototype\n    Child.prototype = new Fn()\n    Child.prototype.constructor = Child\n}\n\nextend(Cat, Animal)\nvar cat4 = new Cat('name4', 'color4')\nalert(cat4.species) // 动物\n```\n\n- 拷贝继承\n\n```js\nfunction Animal () {}\nAnimal.species = '动物'\n\nfunction extend2 () {\n    var C = Child.prototype\n    var P = Parent.prototype\n\n    for (var i in P) {\n        C[i] = P[i]\n    }\n}\n\nextend2(Cat, Animal)\nvar cat5 = new Cat('name5', 'color5')\nalert(cat5.species) // 动物\n```\n\n### 17. 非构造函数的继承\n\n```js\nvar Chinese = {\n    nation: '中国'\n}\nvar Doctor = {\n    career: '医生'\n}\n```\n\n- 浅拷贝\n\n```js\nfunction shallowCopy (Parent) {\n    var Child = {}\n\n    for (var i in Parent) {\n        Child[i] = Parent[i]\n    }\n\n    return Child\n}\n\nvar doctor1 = shallowCopy(Chinese)\nalert(doctor1.nation) // 中国\n```\n\n- 深拷贝\n\n```js\nfunction deepCopy (Child, Parent) {\n    var Child = Child || {}\n\n    for (var i in Parent) {\n        if (typeof Parent[i] == 'object') {\n            Child[i] = (Parent[i].constructor === Array) ? [] : {}\n            deepCopy(Child[i], Parent[i])\n        } else {\n            Child[i] = Parent[i]\n        }\n    }\n\n    return Child\n}\n\nvar doctor2 = deepCopy(Doctor, Chinese)\nalert(doctor.nation) // 中国\n```\n\n### 18. [参考链接](http://www.ruanyifeng.com/blog/2010/05/object-oriented_javascript_inheritance.html)","source":"_posts/multiple-diary.md","raw":"---\ntitle: Diary【一】\ndate: 2019-05-22 17:43:43\ntoc: true\ntags: [dairy]\n---\n\n### 1. setTimeout中方法体添加引号与不添加引号的区别\n\n> `添加引号`的情况，调用的函数是`全局范围`的。`未添加引号`的情况，调用的是`局部范围`的。\n\n<!-- More -->\n\n```js\nvar testFn = function () {\n    console.info('hello from global')\n}\n\nvar fn = function () {\n    var testFn = function () {\n        console.info('hello fron inner')\n    }\n\n    setTimeout('testFn()', 1000)  // hello form global\n    setTimeout(testFn, 1000)  // hello from inner\n\n    // 在fn()函数内部没有定义testFn的时候，会向上寻找testFn，这里找到了全局函数，执行效果：\n    setTimeout(testFn, 1000)  // hello from global\n}\n\nfn()\n```\n\n### 2. AMD/CMD规范 common.js\n\n`common.js` 运行在`服务器端`，因为模块就在磁盘上，所以加载时间几乎可以忽略不计，属于同步加载。 [典型代表 `node.js`]\n`AMD`与`CMD`都属于异步加载，运行在`浏览器端`。\n`AMD` 推崇依赖前置，定义模块的时候就需要申明需要依赖的模块 [典型代表 `require.js`]\n`CMD` 推崇依赖就近，需要用到的时候才去require相关模块 [典型代表 `sea.js`]\n\n### 3. stopPropagation() 以及 stopImmediatePropagation()\n\n`stopImmediatePropagation` 用于阻止冒泡，在执行完当前元素上的事件处理程序之后，停止当前元素以及后续元素的事件处理程序\n\n`stopPropagation` 同样也是用于阻止冒泡，在执行完绑定到当前元素上的所有事件处理程序之后，停止后续元素的事件处理程序\n\n同一个元素用`on`绑定多次同样事件时（例如click），最后一次会覆盖之前的事件，不会执行前面。而用`addEventListener`绑定多次同样事件时，都会执行。\n\n```html\n<div id=\"large\" style=\"width: 150px; height: 150px; background: orange\">\n    <div id=\"middle\" style=\"width: 100px; height: 100px; background: cadetblue\">\n        <div id=\"small\" style=\"width: 50px; height:50px; background: coral\"></div>\n    </div>\n</div>\n```\n\n```js\n(function(){\n    var large = document.getElementById('large')\n    var middle = document.getElementById('middle')\n    var small = document.getElementById('small')\n\n    large.addEventListener('click', function(){\n        alert('large div is clicked')\n    })\n    middle.addEventListener('click', function(){\n        alert('middle div is clicked')\n    })\n\n    // 第一种情况： 点击small时，会依次弹出三个窗口，这是因为向上冒泡产生的\n    small.addEventListener('click', function(){\n     alert('small div is clicked')\n    })\n\n    // 第二种情况： 点击small时，会弹出四个窗口\n    // small.addEventListener('click', function(){\n    //  alert('small-1 is clicked')\n    // })\n    // small.addEventListener('click', function(){\n    //  alert('small-2 is clicked')\n    // })\n\n    // 第三种情况，添加stopPropagation： 点击small时，会弹出两个窗口\n    // small-1 is clicked    small-2 is clicked\n    // small.addEventListener('click', function(event){\n    //  alert('small-1 is clicked')\n    //  event.stopPropagation()\n    // })\n    // small.addEventListener('click', function(){\n    //  alert('small-2 is clicked')\n    // })\n\n    // 第四种情况，添加stopImmediatePropagation： 点击small时，会弹出一个窗口\n    // small-1 is clicked\n    // 能够很明显看到与stopPropagation的区别，调用stopImmediatePropagation之后，第二个定义的click事件也被取消而不被执行了。\n    // small.addEventListener('click', function(event){\n    //     alert('small-1 is clicked')\n    //     event.stopImmediatePropagation()\n    // })\n    // small.addEventListener('click', function(){\n    //     alert('small-2 is clicked')\n    // })\n})()\n```\n\n<div id=\"large\" style=\"box-sizing: border-box; width: 150px; height: 150px; background: orange; cursor: pointer;\"><!-- \n    --><div id=\"middle\" style=\"box-sizing: border-box; width: 100px; height: 100px; background: cadetblue\"><!-- \n        --><div id=\"small\" style=\"box-sizing: border-box; width: 50px; height:50px; background: coral\"></div><!-- \n    --></div>\n</div>\n\n<script>\n    (function(){\n        var large = document.getElementById('large')\n        var middle = document.getElementById('middle')\n        var small = document.getElementById('small')\n\n        large.addEventListener('click', function(){\n            alert('large div is clicked')\n        })\n        middle.addEventListener('click', function(){\n            alert('middle div is clicked')\n        })\n\n        // 第一种情况： 点击small时，会依次弹出三个窗口，这是因为向上冒泡产生的\n        small.addEventListener('click', function(){\n        alert('small div is clicked')\n        })\n\n        // 第二种情况： 点击small时，会弹出四个窗口\n        // small.addEventListener('click', function(){\n        //  alert('small-1 is clicked')\n        // })\n        // small.addEventListener('click', function(){\n        //  alert('small-2 is clicked')\n        // })\n\n        // 第三种情况，添加stopPropagation： 点击small时，会弹出两个窗口\n        // small-1 is clicked    small-2 is clicked\n        // small.addEventListener('click', function(event){\n        //  alert('small-1 is clicked')\n        //  event.stopPropagation()\n        // })\n        // small.addEventListener('click', function(){\n        //  alert('small-2 is clicked')\n        // })\n\n        // 第四种情况，添加stopImmediatePropagation： 点击small时，会弹出一个窗口\n        // small-1 is clicked\n        // 能够很明显看到与stopPropagation的区别，调用stopImmediatePropagation之后，第二个定义的click事件也被取消而不被执行了。\n        // small.addEventListener('click', function(event){\n        //     alert('small-1 is clicked')\n        //     event.stopImmediatePropagation()\n        // })\n        // small.addEventListener('click', function(){\n        //     alert('small-2 is clicked')\n        // })\n    })()\n</script>\n\n### 4. js事件中的三个阶段\n\n三个阶段分别为`捕获阶段` `目标阶段` `冒泡阶段`\nelement.addEventListener(type, fn[, useCapture])\nuseCapture - 指定事件句柄在捕获阶段或者冒泡阶段执行， 默认false(事件句柄在冒泡阶段执行)，设置为true(事件句柄在捕获阶段执行)。\n\n- 捕获阶段\n- 目标阶段\n- 冒泡阶段\n\n### 5. 常见的前端性能优化手段\n\n- css sprites（雪碧图）\n- 避免使用css表达式\n- css样式表放在页面顶部，脚本放在页面底部\n- 内联图片和脚本使用data:URL（base64编码）模式直接包含在页面中，无需进行http请求，缺点：ie不支持，图片太大不适用，使用base64会增加页面体积，浏览器不会缓存\n- 使用内容分发网络CDN\n- 开启GZIP压缩，启用负载均衡\n- 开启keep alive减少与服务器链接次数 缺点：使服务器负载增大，也更容易遭受攻击\n- 精简压缩代码 uglifyjs\n- 避免重定向 常见的301 302\n- 配置e-tags 和 expires头 使用缓存\n- 按需加载资源\n\n### 6. parseInt() 以及 parseFloat()\n\n> parseInt(string[, radix])\n\n- string如果以‘ox’或者'oX'开头，将以16进制进行解析\n- radix 要解析的数字基数，介于2-36之间\n- 如果不给值或者为0，则按照基数为10来计算\n- 如果小于2或者大于36，则返回NaN\n- 开头和结尾的空格是允许的\n- 如果字符串的第一个字符不能转换成对应的数字，将返回NaN\n\n```js\nparseInt('0x12')  // 17\nparseInt('0x12', 2)  // 0  => parseInt('0', 2)\nparseInt('0x12', 10)  // 0  => parseInt('0', 16)\nparseInt('8')  // => parseInt('8', 0) => parseInt('8', 10)  // 8\nparseInt('8', 1)  // NaN\nparseInt('8', 37)  // NaN\nparseInt('a23')  // NaN\nparseInt('2a3')  // 2\nparseInt(' 23')  // 23\nparseInt(' 23 ')  // 23\nparseInt(' 2 3 ')  // 2\nparseInt('11', 2)  // 3\nparseInt(11, 2)  // 3\nparseInt('1100', 2)  // 12\nparseInt('21', 2)  // NaN 2超出了2进制最大值1，并且是第一个字符\nparseInt('12', 2)  // 1 2同样超出了2进制最大值1，但是第一个字符可以转换成二进制\nparseInt('66', 8) // 6*8^1 + 6*8^0 = 48 + 6 = 54\nparseInt('12', 16) // 1*16^1 + 2*16^0 = 16 + 2 = 18\n[0, 1, 2, 3].map(parseInt) //  [parseInt(0, 0), parseInt(1, 1), parseInt(2, 2), parseInt(3, 3)] => [0, NaN, NaN, NaN]\n```\n\nparseFloat()\n\n> parseInt(string[, radix])  这里语法待修改\n\n- 开头和结尾的空格是允许的\n- 如果字符串的第一个字符不能转换成对应的数字，将返回NaN\n- 如果在解析过程中遇到了正负号（+ 或 -）、数字 (0-9)、小数点，或者科学记数法中的指数（e 或 E）以外的字符，则它会忽略该字符以及之后的所有字符\n\n### 7. charAt()、charCodeAt() 和 fromCharCode()\n\n- charAt()\n\n   - String.charAt(index)\n   - 返回字符串中指定位置的字符, 索引值 index < 0 或超出了范围则返回一个空字符串\n\n ```js\n'abc'.charAt(1)  // 'b'\n'abc'.charAt(-2)  // ''\n'abc'.charAt(5)  // ''\n```\n\n- charCodeAt()\n\n   - String.charCodeAt(index)\n   - 返回字符串中指定位置的字符的 unicode 数值 [0, 1114111]\n   - 开头的 128 个 unicode 编码单元和 ASCII 字符编码一样\n   - 索引值 index < 0 或超出了范围则返回一个 NaN, 大于 255 的是中文\n\n```js\n'AabcdD'.charCodeAt(0)  // 65\n'AabcdD'.charCodeAt(1)  // 97\n'AabcdD'.charCodeAt(-1)  // NaN\n'AabcdD'.charCodeAt(8)  // NaN\n'中国'.charCodeAt(1)  // 22269\n```\n\n- fromCharCode()\n\n   - String.fromCharCode(num1, num2, num3, ...)\n   - 根据指定的 unicode 编码中的序号值来返回字符串\n\n```js\nString.fromCharCode(65, 66, 97)  // 'ABa'\n```\n\n### 8. 原生ajax\n\n```js\nvar xhr = new XMLHttpRequest()\n//  请求方式  请求路径  是否异步发送请求\nxhr.open('GET', 'http://www.jnathan.cn/jnathan/effect/authKit.js', true)\nxhr.send('hello world') \n\nxhr.onreadystatechange = function () {\n    if (xhr.readyState == 4 && xhr.status == 200) {\n        // alert(xhr.responseText)\n    }\n}\n```\n\n### 9. 有一个长度为n的数组，假定全部为整数，其中有且仅有一个数出现了奇数次，其他的数字都出现偶数次，找出出现了奇数次的那个数字。\n\n> 时间复杂度为O(n) 空间复杂度O(1)\n> 利用了`n ^ n = 0`, `n ^ 0 = n`两个等式的原理。\n> 循环对数组数字进行异或计算，即  `0 ^ arr[0] ^ arr[1] ^ ... ^ arr[n - 1]` ，异或计算满足交换律原则，如果数组元素出现了相同的情况，可以移动到一起先进行计算，如果出现了`偶数次`，其结果为  `0`，出现了奇数次的数其结果为该数字，所以表达式最后得出来的结果即为数组所有`出现了奇数次元素`的`异或操作`的结果。比如：[1,2,2,3,4,4]进行异或操作得到的结果是 `1 ^ 3 = 2` ，特殊情况下（只有一个数字出现了`奇数次`），那么最后的结果就是出现了`奇数次`的那个数字！！\n\n```js\nfunction fn7 (arr) {\n    var oddTimesNumber = 0\n    for (let i in arr) {\n        oddTimesNumber = oddTimesNumber ^ arr[i]\n    }\n\n    return oddTimesNumber\n}\nfn7([1,2,3,4,5,4,4,3,2,1,1,1])  // 3\n```\n\n### 10. 递归求1-10的和\n\n```js\nfunction getSum(nextArr, curSum = 0) {\n\n    var sum = nextArr[0] + curSum\n\n    if (nextArr.length == 1) {\n        return sum\n    } else {\n        return getSum(nextArr.slice(1), sum)\n    }\n\n}\ngetSum([1,2,3,4,5,6,7,8,9,10])\n```\n\n### 11. 去除数组重复元素\n\n- 直接双层循环比较\n\n```js\nfunction unique (arr) {\n\n    var result = []\n    var isRepeat\n\n    for (var i = 0; i < arr.length; i++) {\n\n        isRepeat = false  // 默认不重复，进行push操作，当判断重复时不操作\n        for (var j = 0; j < result.length; j++) {\n            if (arr[i] === result[j]) {\n                isRepeat = true\n                break\n            }\n        }\n\n        if (!isRepeat) {\n            result.push(arr[i])\n        }\n    }\n\n    return result\n\n}\nunique([1,1,2,3,4])\n```\n\n- 利用`indexOf()`， 但是`indexOf`会一直循环到找到目标为止，浪费了时间\n\n```js\nfunction unique (arr) {\n\n    var result = []\n\n    for (var i = 0; i < arr.length; i++) {\n        if (result.indexOf(arr[i]) === -1) {\n            result.push(arr[i])\n        }\n    }\n\n    return result\n}\nunique([1,1,2,3,4])\n```\n\n- 最快的方法 把已经出现过的元素通过下标的形式存入一个`Object`内。下标的引用的实现原理利用的是哈希算法，要比用`indexOf()`搜索数组快的多。由于多了一个`hash`表，占用的内存会更多，空间换时间做法\n\n```js\nfunction unique (arr) {\n    // hashObj为hash表，result为临时数组\n    var hashObj = {}, result = []\n    for (var i = 0; i < arr.length; i++) {\n        // 如果hash表中没有当前项\n        if (!hashObj[arr[i]]) {\n            // 存入hash表\n            hashObj[arr[i]] = true\n            // 把当前数组的当前项push到临时数组里面\n            result.push(arr[i])\n        }\n    }\n    return result\n}\n```\n\n- 折衷方法 时间上比`indexOf`快，比`hash`表的方式要慢。先按照从小到大的顺序排序，然后比较相邻的两个值大小\n  \n```js\nfunction unique (arr) {\n    arr.sort()\n    var result = [arr[0]]\n    for (var i = 1; i < arr.length; i++) {\n        if (arr[i] !== result[result.length - 1]) {\n            result.push(arr[i])\n        }\n    }\n    return result\n}\n```\n\n- `es6`的`filter()`方法\n\n```js\nfunction unique (arr) {\n    return arr.filter( (value, index) => { \n        arr.indexOf(value) === index\n        console.log(arr.indexOf(value), index)\n        // 0 0\n        // 0 1\n        // 2 2\n        // 3 3\n        // 4 4\n        // 5 5\n        // 2 6\n    })\n}\nunique([1,1,2,3,4,5,2])\n```\n\n### 12. jquery  里面的  $(document).ready(function(){})  和  window.onload  的区别\n\n- `window.onload`需要等到页面中包括图片在内的元素全部加载完毕才能执行；`ready()`是DOM元素绘制结束之后就执行，不用等到加载完毕。\n- `window.onload`如果定义了多次，则只会执行一个，后者会覆盖前者； `ready()`可以同时编写多个，并且都会执行。\n- `window.onload`没有简化写法；`$(document).ready(function(){})`可以简化成`$(function(){})`。\n- 补充：`$(window).load(function(){})`和 `window.onload()`效果一致。\n\n### 13. 渐进增强与优雅降级\n\n- 渐进增强 一开始就针对低版本浏览器进行构建页面，完成基本的功能，然后再对高级浏览器进行效果、交互的优化，达到更好的体验。\n- 优雅降级 一开始就构建站点的完整功能，然后针对浏览器进行测试和修复。比如一开始使用`CSS3`的特性构建了一个应用，然后逐步针对各大低级浏览器进行`hack`使其可以在低版本浏览器上正常浏览。\n\n### 14. cookies、localStorage和sessionStorage的区别\n\n- cookies存在于客户端，始终会在http请求中通过  Request Headers  Cookie头携带，即使当前请求不需要使用到cookie；大小一般在4KB，所以只适合保存很小的数据，比如会话标识；cookies在没有设置过期时间（expires）的时候，默认在关闭浏览器之后就会被清除，在有设置过期时间的时候，会一直持续到过期时间有效（即使关闭当前窗口或者关闭浏览器）。\n- localStorage 和 sessionStorage不会发送数据到服务端，仅在本地保存；也有大小的限制，但一般在5M左右；localStorage一直有效，除非手动清除； sessionStorage只在浏览器关闭之前有效。\n\n另外： localStorage 和 cookies 在同源的浏览器窗口之间是共享的，sessionStorage不共享，因此至少有以下两种方法实现不同页面间的通信：\n\n- 利用localStorage\n\n```js\n// A页面\n$('#btn').click(function(){\n    localStorage.setItem('name', 'Jnathan')\n})\n\n// B页面\nwindow.addEventListener('storage', function(event){\n    console.log(event.key + '=' + event.newValue)\n})\n```\n\n- 利用cookie + setInterval()\n\n```js\n// A页面\n$('#btn').click(function () {\n    document.cookie = \"name=\" + 'Jnathan'\n})\n\n// B页面\nfunction getKey(key) {  \n    return JSON.parse(\"{\\\"\"+ document.cookie.replace(/;\\s+/gim,\"\\\",\\\"\").replace(/=/gim, \"\\\":\\\"\") +\"\\\"}\")[key];  \n}\nsetInterval(function(){\n    console.log('name:', getKey('name'))\n}, 1000)\n```\n\n### 15. new 操作符的四个步骤\n\n```js\nvar Fn = function() {}\nvar fn = new Fn()\n```\n\n- 创建一个`空对象`\n\n```js\nvar obj = new Object()\n```\n\n- 设置`obj`的`原型`，将`obj`的`原型`指向`Fn`的`原型链`\n\n```js\nobj.__proto__ = Fn.prototype\n```\n\n- 将`Fn`中的`this`指向`obj`,并执行`Fn`\n\n```js\nvar result = Fn.call(obj)\n```\n\n- 判断`Fn`的`返回值类型`。如果是`引用类型，则返回这个`引用类型的对象`；如果是`值类型`，则返回`obj`\n\n```js\nif (typeof result == 'object') {  // 引用类型\n    fn = result\n} else { // 值类型\n    fn = obj\n}\n```\n\n### 16. 构造函数实现继承的几种方式\n\n```js\nfunction Animal () {\n    this.species = '动物'\n}\nfunction Cat (name, color) {\n    this.name = name\n    this.color = color\n}\n```\n\n使猫继承动物：\n\n- call apply\n\n```js\nfunction Cat (name, color) {\n    Animal.apply(this, arguments)\n    this.name = name\n    this.color = color\n}\n\nvar cat1 = new Cat('name1', 'color1')\nalert(cat1.species) //  动物\n```\n\n- prototype（其一）\n\n```js\nfunction Cat (name, color) {\n    Animal.apply(this, arguments)\n    this.name = name\n    this.color = color\n}\n\nvar cat1 = new Cat('name1', 'color1')\nalert(cat1.species) //  动物\n```\n\n- prototype（其二）\n\n```js\nfunction Animal () {}\nAnimal.prototype.species = '动物'\n\nCat.prototype = Animal.prototype\nCat.prototype.constructor = Cat\n\nvar cat3 = new Cat('name3', 'color3')\nalert(cat3.species) // 动物   \n```\n\n- 利用空对象作为中介 上面那种方法的缺点：Cat.prototype和Animal.prototype现在指向了同一个对象，那么任何对Cat.prototype的修改，都会反映到Animal.prototype。\n\n```js\nvar Fn = function () {}\nFn.prototype = Animal.prototype\nCat.prototype = new Fn()\nCat.prototype.construvtor = Cat\n```\n\n将其封装成一个函数\n\n```js\nfunction extend (Child, Parent) {\n    var Fn = function () {}\n    Fn.prototype = Parent.prototype\n    Child.prototype = new Fn()\n    Child.prototype.constructor = Child\n}\n\nextend(Cat, Animal)\nvar cat4 = new Cat('name4', 'color4')\nalert(cat4.species) // 动物\n```\n\n- 拷贝继承\n\n```js\nfunction Animal () {}\nAnimal.species = '动物'\n\nfunction extend2 () {\n    var C = Child.prototype\n    var P = Parent.prototype\n\n    for (var i in P) {\n        C[i] = P[i]\n    }\n}\n\nextend2(Cat, Animal)\nvar cat5 = new Cat('name5', 'color5')\nalert(cat5.species) // 动物\n```\n\n### 17. 非构造函数的继承\n\n```js\nvar Chinese = {\n    nation: '中国'\n}\nvar Doctor = {\n    career: '医生'\n}\n```\n\n- 浅拷贝\n\n```js\nfunction shallowCopy (Parent) {\n    var Child = {}\n\n    for (var i in Parent) {\n        Child[i] = Parent[i]\n    }\n\n    return Child\n}\n\nvar doctor1 = shallowCopy(Chinese)\nalert(doctor1.nation) // 中国\n```\n\n- 深拷贝\n\n```js\nfunction deepCopy (Child, Parent) {\n    var Child = Child || {}\n\n    for (var i in Parent) {\n        if (typeof Parent[i] == 'object') {\n            Child[i] = (Parent[i].constructor === Array) ? [] : {}\n            deepCopy(Child[i], Parent[i])\n        } else {\n            Child[i] = Parent[i]\n        }\n    }\n\n    return Child\n}\n\nvar doctor2 = deepCopy(Doctor, Chinese)\nalert(doctor.nation) // 中国\n```\n\n### 18. [参考链接](http://www.ruanyifeng.com/blog/2010/05/object-oriented_javascript_inheritance.html)","slug":"multiple-diary","published":1,"updated":"2021-04-09T06:03:02.267Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckntq34ec0025u66ttcwx35y0","content":"<h3 id=\"1-setTimeout中方法体添加引号与不添加引号的区别\"><a href=\"#1-setTimeout中方法体添加引号与不添加引号的区别\" class=\"headerlink\" title=\"1. setTimeout中方法体添加引号与不添加引号的区别\"></a>1. setTimeout中方法体添加引号与不添加引号的区别</h3><blockquote>\n<p><code>添加引号</code>的情况，调用的函数是<code>全局范围</code>的。<code>未添加引号</code>的情况，调用的是<code>局部范围</code>的。</p>\n</blockquote>\n<a id=\"more\"></a>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> testFn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.info(<span class=\"string\">'hello from global'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> testFn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.info(<span class=\"string\">'hello fron inner'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    setTimeout(<span class=\"string\">'testFn()'</span>, <span class=\"number\">1000</span>)  <span class=\"comment\">// hello form global</span></span><br><span class=\"line\">    setTimeout(testFn, <span class=\"number\">1000</span>)  <span class=\"comment\">// hello from inner</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 在fn()函数内部没有定义testFn的时候，会向上寻找testFn，这里找到了全局函数，执行效果：</span></span><br><span class=\"line\">    setTimeout(testFn, <span class=\"number\">1000</span>)  <span class=\"comment\">// hello from global</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">fn()</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-AMD-CMD规范-common-js\"><a href=\"#2-AMD-CMD规范-common-js\" class=\"headerlink\" title=\"2. AMD/CMD规范 common.js\"></a>2. AMD/CMD规范 common.js</h3><p><code>common.js</code> 运行在<code>服务器端</code>，因为模块就在磁盘上，所以加载时间几乎可以忽略不计，属于同步加载。 [典型代表 <code>node.js</code>]<br><code>AMD</code>与<code>CMD</code>都属于异步加载，运行在<code>浏览器端</code>。<br><code>AMD</code> 推崇依赖前置，定义模块的时候就需要申明需要依赖的模块 [典型代表 <code>require.js</code>]<br><code>CMD</code> 推崇依赖就近，需要用到的时候才去require相关模块 [典型代表 <code>sea.js</code>]</p>\n<h3 id=\"3-stopPropagation-以及-stopImmediatePropagation\"><a href=\"#3-stopPropagation-以及-stopImmediatePropagation\" class=\"headerlink\" title=\"3. stopPropagation() 以及 stopImmediatePropagation()\"></a>3. stopPropagation() 以及 stopImmediatePropagation()</h3><p><code>stopImmediatePropagation</code> 用于阻止冒泡，在执行完当前元素上的事件处理程序之后，停止当前元素以及后续元素的事件处理程序</p>\n<p><code>stopPropagation</code> 同样也是用于阻止冒泡，在执行完绑定到当前元素上的所有事件处理程序之后，停止后续元素的事件处理程序</p>\n<p>同一个元素用<code>on</code>绑定多次同样事件时（例如click），最后一次会覆盖之前的事件，不会执行前面。而用<code>addEventListener</code>绑定多次同样事件时，都会执行。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"large\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 150px; height: 150px; background: orange\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"middle\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 100px; height: 100px; background: cadetblue\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"small\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 50px; height:50px; background: coral\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> large = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'large'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">var</span> middle = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'middle'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">var</span> small = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'small'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    large.addEventListener(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"string\">'large div is clicked'</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    middle.addEventListener(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"string\">'middle div is clicked'</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 第一种情况： 点击small时，会依次弹出三个窗口，这是因为向上冒泡产生的</span></span><br><span class=\"line\">    small.addEventListener(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">     alert(<span class=\"string\">'small div is clicked'</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 第二种情况： 点击small时，会弹出四个窗口</span></span><br><span class=\"line\">    <span class=\"comment\">// small.addEventListener('click', function()&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//  alert('small-1 is clicked')</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\">    <span class=\"comment\">// small.addEventListener('click', function()&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//  alert('small-2 is clicked')</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 第三种情况，添加stopPropagation： 点击small时，会弹出两个窗口</span></span><br><span class=\"line\">    <span class=\"comment\">// small-1 is clicked    small-2 is clicked</span></span><br><span class=\"line\">    <span class=\"comment\">// small.addEventListener('click', function(event)&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//  alert('small-1 is clicked')</span></span><br><span class=\"line\">    <span class=\"comment\">//  event.stopPropagation()</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\">    <span class=\"comment\">// small.addEventListener('click', function()&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//  alert('small-2 is clicked')</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 第四种情况，添加stopImmediatePropagation： 点击small时，会弹出一个窗口</span></span><br><span class=\"line\">    <span class=\"comment\">// small-1 is clicked</span></span><br><span class=\"line\">    <span class=\"comment\">// 能够很明显看到与stopPropagation的区别，调用stopImmediatePropagation之后，第二个定义的click事件也被取消而不被执行了。</span></span><br><span class=\"line\">    <span class=\"comment\">// small.addEventListener('click', function(event)&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     alert('small-1 is clicked')</span></span><br><span class=\"line\">    <span class=\"comment\">//     event.stopImmediatePropagation()</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\">    <span class=\"comment\">// small.addEventListener('click', function()&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     alert('small-2 is clicked')</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\">&#125;)()</span><br></pre></td></tr></table></figure>\n<div id=\"large\" style=\"box-sizing: border-box; width: 150px; height: 150px; background: orange; cursor: pointer;\"><!-- \n    --><div id=\"middle\" style=\"box-sizing: border-box; width: 100px; height: 100px; background: cadetblue\"><!-- \n        --><div id=\"small\" style=\"box-sizing: border-box; width: 50px; height:50px; background: coral\"></div><!-- \n    --></div><br></div>\n\n<script>\n    (function(){\n        var large = document.getElementById('large')\n        var middle = document.getElementById('middle')\n        var small = document.getElementById('small')\n\n        large.addEventListener('click', function(){\n            alert('large div is clicked')\n        })\n        middle.addEventListener('click', function(){\n            alert('middle div is clicked')\n        })\n\n        // 第一种情况： 点击small时，会依次弹出三个窗口，这是因为向上冒泡产生的\n        small.addEventListener('click', function(){\n        alert('small div is clicked')\n        })\n\n        // 第二种情况： 点击small时，会弹出四个窗口\n        // small.addEventListener('click', function(){\n        //  alert('small-1 is clicked')\n        // })\n        // small.addEventListener('click', function(){\n        //  alert('small-2 is clicked')\n        // })\n\n        // 第三种情况，添加stopPropagation： 点击small时，会弹出两个窗口\n        // small-1 is clicked    small-2 is clicked\n        // small.addEventListener('click', function(event){\n        //  alert('small-1 is clicked')\n        //  event.stopPropagation()\n        // })\n        // small.addEventListener('click', function(){\n        //  alert('small-2 is clicked')\n        // })\n\n        // 第四种情况，添加stopImmediatePropagation： 点击small时，会弹出一个窗口\n        // small-1 is clicked\n        // 能够很明显看到与stopPropagation的区别，调用stopImmediatePropagation之后，第二个定义的click事件也被取消而不被执行了。\n        // small.addEventListener('click', function(event){\n        //     alert('small-1 is clicked')\n        //     event.stopImmediatePropagation()\n        // })\n        // small.addEventListener('click', function(){\n        //     alert('small-2 is clicked')\n        // })\n    })()\n</script>\n\n<h3 id=\"4-js事件中的三个阶段\"><a href=\"#4-js事件中的三个阶段\" class=\"headerlink\" title=\"4. js事件中的三个阶段\"></a>4. js事件中的三个阶段</h3><p>三个阶段分别为<code>捕获阶段</code> <code>目标阶段</code> <code>冒泡阶段</code><br>element.addEventListener(type, fn[, useCapture])<br>useCapture - 指定事件句柄在捕获阶段或者冒泡阶段执行， 默认false(事件句柄在冒泡阶段执行)，设置为true(事件句柄在捕获阶段执行)。</p>\n<ul>\n<li>捕获阶段</li>\n<li>目标阶段</li>\n<li>冒泡阶段</li>\n</ul>\n<h3 id=\"5-常见的前端性能优化手段\"><a href=\"#5-常见的前端性能优化手段\" class=\"headerlink\" title=\"5. 常见的前端性能优化手段\"></a>5. 常见的前端性能优化手段</h3><ul>\n<li>css sprites（雪碧图）</li>\n<li>避免使用css表达式</li>\n<li>css样式表放在页面顶部，脚本放在页面底部</li>\n<li>内联图片和脚本使用data:URL（base64编码）模式直接包含在页面中，无需进行http请求，缺点：ie不支持，图片太大不适用，使用base64会增加页面体积，浏览器不会缓存</li>\n<li>使用内容分发网络CDN</li>\n<li>开启GZIP压缩，启用负载均衡</li>\n<li>开启keep alive减少与服务器链接次数 缺点：使服务器负载增大，也更容易遭受攻击</li>\n<li>精简压缩代码 uglifyjs</li>\n<li>避免重定向 常见的301 302</li>\n<li>配置e-tags 和 expires头 使用缓存</li>\n<li>按需加载资源</li>\n</ul>\n<h3 id=\"6-parseInt-以及-parseFloat\"><a href=\"#6-parseInt-以及-parseFloat\" class=\"headerlink\" title=\"6. parseInt() 以及 parseFloat()\"></a>6. parseInt() 以及 parseFloat()</h3><blockquote>\n<p>parseInt(string[, radix])</p>\n</blockquote>\n<ul>\n<li>string如果以‘ox’或者’oX’开头，将以16进制进行解析</li>\n<li>radix 要解析的数字基数，介于2-36之间</li>\n<li>如果不给值或者为0，则按照基数为10来计算</li>\n<li>如果小于2或者大于36，则返回NaN</li>\n<li>开头和结尾的空格是允许的</li>\n<li>如果字符串的第一个字符不能转换成对应的数字，将返回NaN</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'0x12'</span>)  <span class=\"comment\">// 17</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'0x12'</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// 0  =&gt; parseInt('0', 2)</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'0x12'</span>, <span class=\"number\">10</span>)  <span class=\"comment\">// 0  =&gt; parseInt('0', 16)</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'8'</span>)  <span class=\"comment\">// =&gt; parseInt('8', 0) =&gt; parseInt('8', 10)  // 8</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'8'</span>, <span class=\"number\">1</span>)  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'8'</span>, <span class=\"number\">37</span>)  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'a23'</span>)  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'2a3'</span>)  <span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">' 23'</span>)  <span class=\"comment\">// 23</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">' 23 '</span>)  <span class=\"comment\">// 23</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">' 2 3 '</span>)  <span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'11'</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// 3</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"number\">11</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// 3</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'1100'</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// 12</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'21'</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// NaN 2超出了2进制最大值1，并且是第一个字符</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'12'</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// 1 2同样超出了2进制最大值1，但是第一个字符可以转换成二进制</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'66'</span>, <span class=\"number\">8</span>) <span class=\"comment\">// 6*8^1 + 6*8^0 = 48 + 6 = 54</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'12'</span>, <span class=\"number\">16</span>) <span class=\"comment\">// 1*16^1 + 2*16^0 = 16 + 2 = 18</span></span><br><span class=\"line\">[<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>].map(<span class=\"built_in\">parseInt</span>) <span class=\"comment\">//  [parseInt(0, 0), parseInt(1, 1), parseInt(2, 2), parseInt(3, 3)] =&gt; [0, NaN, NaN, NaN]</span></span><br></pre></td></tr></table></figure>\n<p>parseFloat()</p>\n<blockquote>\n<p>parseInt(string[, radix])  这里语法待修改</p>\n</blockquote>\n<ul>\n<li>开头和结尾的空格是允许的</li>\n<li>如果字符串的第一个字符不能转换成对应的数字，将返回NaN</li>\n<li>如果在解析过程中遇到了正负号（+ 或 -）、数字 (0-9)、小数点，或者科学记数法中的指数（e 或 E）以外的字符，则它会忽略该字符以及之后的所有字符</li>\n</ul>\n<h3 id=\"7-charAt-、charCodeAt-和-fromCharCode\"><a href=\"#7-charAt-、charCodeAt-和-fromCharCode\" class=\"headerlink\" title=\"7. charAt()、charCodeAt() 和 fromCharCode()\"></a>7. charAt()、charCodeAt() 和 fromCharCode()</h3><ul>\n<li><p>charAt()</p>\n<ul>\n<li>String.charAt(index)</li>\n<li>返回字符串中指定位置的字符, 索引值 index &lt; 0 或超出了范围则返回一个空字符串</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'abc'</span>.charAt(<span class=\"number\">1</span>)  <span class=\"comment\">// 'b'</span></span><br><span class=\"line\"><span class=\"string\">'abc'</span>.charAt(<span class=\"number\">-2</span>)  <span class=\"comment\">// ''</span></span><br><span class=\"line\"><span class=\"string\">'abc'</span>.charAt(<span class=\"number\">5</span>)  <span class=\"comment\">// ''</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>charCodeAt()</p>\n<ul>\n<li>String.charCodeAt(index)</li>\n<li>返回字符串中指定位置的字符的 unicode 数值 [0, 1114111]</li>\n<li>开头的 128 个 unicode 编码单元和 ASCII 字符编码一样</li>\n<li>索引值 index &lt; 0 或超出了范围则返回一个 NaN, 大于 255 的是中文</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'AabcdD'</span>.charCodeAt(<span class=\"number\">0</span>)  <span class=\"comment\">// 65</span></span><br><span class=\"line\"><span class=\"string\">'AabcdD'</span>.charCodeAt(<span class=\"number\">1</span>)  <span class=\"comment\">// 97</span></span><br><span class=\"line\"><span class=\"string\">'AabcdD'</span>.charCodeAt(<span class=\"number\">-1</span>)  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"string\">'AabcdD'</span>.charCodeAt(<span class=\"number\">8</span>)  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"string\">'中国'</span>.charCodeAt(<span class=\"number\">1</span>)  <span class=\"comment\">// 22269</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>fromCharCode()</p>\n<ul>\n<li>String.fromCharCode(num1, num2, num3, …)</li>\n<li>根据指定的 unicode 编码中的序号值来返回字符串</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">String</span>.fromCharCode(<span class=\"number\">65</span>, <span class=\"number\">66</span>, <span class=\"number\">97</span>)  <span class=\"comment\">// 'ABa'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"8-原生ajax\"><a href=\"#8-原生ajax\" class=\"headerlink\" title=\"8. 原生ajax\"></a>8. 原生ajax</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\"><span class=\"comment\">//  请求方式  请求路径  是否异步发送请求</span></span><br><span class=\"line\">xhr.open(<span class=\"string\">'GET'</span>, <span class=\"string\">'http://www.jnathan.cn/jnathan/effect/authKit.js'</span>, <span class=\"literal\">true</span>)</span><br><span class=\"line\">xhr.send(<span class=\"string\">'hello world'</span>) </span><br><span class=\"line\"></span><br><span class=\"line\">xhr.onreadystatechange = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (xhr.readyState == <span class=\"number\">4</span> &amp;&amp; xhr.status == <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// alert(xhr.responseText)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"9-有一个长度为n的数组，假定全部为整数，其中有且仅有一个数出现了奇数次，其他的数字都出现偶数次，找出出现了奇数次的那个数字。\"><a href=\"#9-有一个长度为n的数组，假定全部为整数，其中有且仅有一个数出现了奇数次，其他的数字都出现偶数次，找出出现了奇数次的那个数字。\" class=\"headerlink\" title=\"9. 有一个长度为n的数组，假定全部为整数，其中有且仅有一个数出现了奇数次，其他的数字都出现偶数次，找出出现了奇数次的那个数字。\"></a>9. 有一个长度为n的数组，假定全部为整数，其中有且仅有一个数出现了奇数次，其他的数字都出现偶数次，找出出现了奇数次的那个数字。</h3><blockquote>\n<p>时间复杂度为O(n) 空间复杂度O(1)<br>利用了<code>n ^ n = 0</code>, <code>n ^ 0 = n</code>两个等式的原理。<br>循环对数组数字进行异或计算，即  <code>0 ^ arr[0] ^ arr[1] ^ ... ^ arr[n - 1]</code> ，异或计算满足交换律原则，如果数组元素出现了相同的情况，可以移动到一起先进行计算，如果出现了<code>偶数次</code>，其结果为  <code>0</code>，出现了奇数次的数其结果为该数字，所以表达式最后得出来的结果即为数组所有<code>出现了奇数次元素</code>的<code>异或操作</code>的结果。比如：[1,2,2,3,4,4]进行异或操作得到的结果是 <code>1 ^ 3 = 2</code> ，特殊情况下（只有一个数字出现了<code>奇数次</code>），那么最后的结果就是出现了<code>奇数次</code>的那个数字！！</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn7</span> (<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> oddTimesNumber = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">in</span> arr) &#123;</span><br><span class=\"line\">        oddTimesNumber = oddTimesNumber ^ arr[i]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> oddTimesNumber</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fn7([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">4</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>])  <span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"10-递归求1-10的和\"><a href=\"#10-递归求1-10的和\" class=\"headerlink\" title=\"10. 递归求1-10的和\"></a>10. 递归求1-10的和</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSum</span>(<span class=\"params\">nextArr, curSum = <span class=\"number\">0</span></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> sum = nextArr[<span class=\"number\">0</span>] + curSum</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nextArr.length == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sum</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> getSum(nextArr.slice(<span class=\"number\">1</span>), sum)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">getSum([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>,<span class=\"number\">7</span>,<span class=\"number\">8</span>,<span class=\"number\">9</span>,<span class=\"number\">10</span>])</span><br></pre></td></tr></table></figure>\n<h3 id=\"11-去除数组重复元素\"><a href=\"#11-去除数组重复元素\" class=\"headerlink\" title=\"11. 去除数组重复元素\"></a>11. 去除数组重复元素</h3><ul>\n<li>直接双层循环比较</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span> (<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> result = []</span><br><span class=\"line\">    <span class=\"keyword\">var</span> isRepeat</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        isRepeat = <span class=\"literal\">false</span>  <span class=\"comment\">// 默认不重复，进行push操作，当判断重复时不操作</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; result.length; j++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (arr[i] === result[j]) &#123;</span><br><span class=\"line\">                isRepeat = <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!isRepeat) &#123;</span><br><span class=\"line\">            result.push(arr[i])</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">unique([<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>])</span><br></pre></td></tr></table></figure>\n<ul>\n<li>利用<code>indexOf()</code>， 但是<code>indexOf</code>会一直循环到找到目标为止，浪费了时间</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span> (<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> result = []</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result.indexOf(arr[i]) === <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">            result.push(arr[i])</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">unique([<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>])</span><br></pre></td></tr></table></figure>\n<ul>\n<li>最快的方法 把已经出现过的元素通过下标的形式存入一个<code>Object</code>内。下标的引用的实现原理利用的是哈希算法，要比用<code>indexOf()</code>搜索数组快的多。由于多了一个<code>hash</code>表，占用的内存会更多，空间换时间做法</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span> (<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// hashObj为hash表，result为临时数组</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> hashObj = &#123;&#125;, result = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 如果hash表中没有当前项</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!hashObj[arr[i]]) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 存入hash表</span></span><br><span class=\"line\">            hashObj[arr[i]] = <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"comment\">// 把当前数组的当前项push到临时数组里面</span></span><br><span class=\"line\">            result.push(arr[i])</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>折衷方法 时间上比<code>indexOf</code>快，比<code>hash</code>表的方式要慢。先按照从小到大的顺序排序，然后比较相邻的两个值大小</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span> (<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">    arr.sort()</span><br><span class=\"line\">    <span class=\"keyword\">var</span> result = [arr[<span class=\"number\">0</span>]]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (arr[i] !== result[result.length - <span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">            result.push(arr[i])</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>es6</code>的<code>filter()</code>方法</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span> (<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> arr.filter( <span class=\"function\">(<span class=\"params\">value, index</span>) =&gt;</span> &#123; </span><br><span class=\"line\">        arr.indexOf(value) === index</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(arr.indexOf(value), index)</span><br><span class=\"line\">        <span class=\"comment\">// 0 0</span></span><br><span class=\"line\">        <span class=\"comment\">// 0 1</span></span><br><span class=\"line\">        <span class=\"comment\">// 2 2</span></span><br><span class=\"line\">        <span class=\"comment\">// 3 3</span></span><br><span class=\"line\">        <span class=\"comment\">// 4 4</span></span><br><span class=\"line\">        <span class=\"comment\">// 5 5</span></span><br><span class=\"line\">        <span class=\"comment\">// 2 6</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">unique([<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">2</span>])</span><br></pre></td></tr></table></figure>\n<h3 id=\"12-jquery-里面的-document-ready-function-和-window-onload-的区别\"><a href=\"#12-jquery-里面的-document-ready-function-和-window-onload-的区别\" class=\"headerlink\" title=\"12. jquery  里面的  $(document).ready(function(){})  和  window.onload  的区别\"></a>12. jquery  里面的  $(document).ready(function(){})  和  window.onload  的区别</h3><ul>\n<li><code>window.onload</code>需要等到页面中包括图片在内的元素全部加载完毕才能执行；<code>ready()</code>是DOM元素绘制结束之后就执行，不用等到加载完毕。</li>\n<li><code>window.onload</code>如果定义了多次，则只会执行一个，后者会覆盖前者； <code>ready()</code>可以同时编写多个，并且都会执行。</li>\n<li><code>window.onload</code>没有简化写法；<code>$(document).ready(function(){})</code>可以简化成<code>$(function(){})</code>。</li>\n<li>补充：<code>$(window).load(function(){})</code>和 <code>window.onload()</code>效果一致。</li>\n</ul>\n<h3 id=\"13-渐进增强与优雅降级\"><a href=\"#13-渐进增强与优雅降级\" class=\"headerlink\" title=\"13. 渐进增强与优雅降级\"></a>13. 渐进增强与优雅降级</h3><ul>\n<li>渐进增强 一开始就针对低版本浏览器进行构建页面，完成基本的功能，然后再对高级浏览器进行效果、交互的优化，达到更好的体验。</li>\n<li>优雅降级 一开始就构建站点的完整功能，然后针对浏览器进行测试和修复。比如一开始使用<code>CSS3</code>的特性构建了一个应用，然后逐步针对各大低级浏览器进行<code>hack</code>使其可以在低版本浏览器上正常浏览。</li>\n</ul>\n<h3 id=\"14-cookies、localStorage和sessionStorage的区别\"><a href=\"#14-cookies、localStorage和sessionStorage的区别\" class=\"headerlink\" title=\"14. cookies、localStorage和sessionStorage的区别\"></a>14. cookies、localStorage和sessionStorage的区别</h3><ul>\n<li>cookies存在于客户端，始终会在http请求中通过  Request Headers  Cookie头携带，即使当前请求不需要使用到cookie；大小一般在4KB，所以只适合保存很小的数据，比如会话标识；cookies在没有设置过期时间（expires）的时候，默认在关闭浏览器之后就会被清除，在有设置过期时间的时候，会一直持续到过期时间有效（即使关闭当前窗口或者关闭浏览器）。</li>\n<li>localStorage 和 sessionStorage不会发送数据到服务端，仅在本地保存；也有大小的限制，但一般在5M左右；localStorage一直有效，除非手动清除； sessionStorage只在浏览器关闭之前有效。</li>\n</ul>\n<p>另外： localStorage 和 cookies 在同源的浏览器窗口之间是共享的，sessionStorage不共享，因此至少有以下两种方法实现不同页面间的通信：</p>\n<ul>\n<li>利用localStorage</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// A页面</span></span><br><span class=\"line\">$(<span class=\"string\">'#btn'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    localStorage.setItem(<span class=\"string\">'name'</span>, <span class=\"string\">'Jnathan'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// B页面</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'storage'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(event.key + <span class=\"string\">'='</span> + event.newValue)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>利用cookie + setInterval()</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// A页面</span></span><br><span class=\"line\">$(<span class=\"string\">'#btn'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.cookie = <span class=\"string\">\"name=\"</span> + <span class=\"string\">'Jnathan'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// B页面</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getKey</span>(<span class=\"params\">key</span>) </span>&#123;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">JSON</span>.parse(<span class=\"string\">\"&#123;\\\"\"</span>+ <span class=\"built_in\">document</span>.cookie.replace(<span class=\"regexp\">/;\\s+/gim</span>,<span class=\"string\">\"\\\",\\\"\"</span>).replace(<span class=\"regexp\">/=/gim</span>, <span class=\"string\">\"\\\":\\\"\"</span>) +<span class=\"string\">\"\\\"&#125;\"</span>)[key];  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">setInterval(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'name:'</span>, getKey(<span class=\"string\">'name'</span>))</span><br><span class=\"line\">&#125;, <span class=\"number\">1000</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"15-new-操作符的四个步骤\"><a href=\"#15-new-操作符的四个步骤\" class=\"headerlink\" title=\"15. new 操作符的四个步骤\"></a>15. new 操作符的四个步骤</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Fn = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = <span class=\"keyword\">new</span> Fn()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>创建一个<code>空对象</code></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>设置<code>obj</code>的<code>原型</code>，将<code>obj</code>的<code>原型</code>指向<code>Fn</code>的<code>原型链</code></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">obj.__proto__ = Fn.prototype</span><br></pre></td></tr></table></figure>\n<ul>\n<li>将<code>Fn</code>中的<code>this</code>指向<code>obj</code>,并执行<code>Fn</code></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> result = Fn.call(obj)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>判断<code>Fn</code>的<code>返回值类型</code>。如果是<code>引用类型，则返回这个</code>引用类型的对象<code>；如果是</code>值类型<code>，则返回</code>obj`</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> result == <span class=\"string\">'object'</span>) &#123;  <span class=\"comment\">// 引用类型</span></span><br><span class=\"line\">    fn = result</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123; <span class=\"comment\">// 值类型</span></span><br><span class=\"line\">    fn = obj</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"16-构造函数实现继承的几种方式\"><a href=\"#16-构造函数实现继承的几种方式\" class=\"headerlink\" title=\"16. 构造函数实现继承的几种方式\"></a>16. 构造函数实现继承的几种方式</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Animal</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.species = <span class=\"string\">'动物'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Cat</span> (<span class=\"params\">name, color</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.color = color</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>使猫继承动物：</p>\n<ul>\n<li>call apply</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Cat</span> (<span class=\"params\">name, color</span>) </span>&#123;</span><br><span class=\"line\">    Animal.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.color = color</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">'name1'</span>, <span class=\"string\">'color1'</span>)</span><br><span class=\"line\">alert(cat1.species) <span class=\"comment\">//  动物</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>prototype（其一）</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Cat</span> (<span class=\"params\">name, color</span>) </span>&#123;</span><br><span class=\"line\">    Animal.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.color = color</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">'name1'</span>, <span class=\"string\">'color1'</span>)</span><br><span class=\"line\">alert(cat1.species) <span class=\"comment\">//  动物</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>prototype（其二）</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Animal</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">Animal.prototype.species = <span class=\"string\">'动物'</span></span><br><span class=\"line\"></span><br><span class=\"line\">Cat.prototype = Animal.prototype</span><br><span class=\"line\">Cat.prototype.constructor = Cat</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> cat3 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">'name3'</span>, <span class=\"string\">'color3'</span>)</span><br><span class=\"line\">alert(cat3.species) <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>利用空对象作为中介 上面那种方法的缺点：Cat.prototype和Animal.prototype现在指向了同一个对象，那么任何对Cat.prototype的修改，都会反映到Animal.prototype。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Fn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">Fn.prototype = Animal.prototype</span><br><span class=\"line\">Cat.prototype = <span class=\"keyword\">new</span> Fn()</span><br><span class=\"line\">Cat.prototype.construvtor = Cat</span><br></pre></td></tr></table></figure>\n<p>将其封装成一个函数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extend</span> (<span class=\"params\">Child, Parent</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> Fn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">    Fn.prototype = Parent.prototype</span><br><span class=\"line\">    Child.prototype = <span class=\"keyword\">new</span> Fn()</span><br><span class=\"line\">    Child.prototype.constructor = Child</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">extend(Cat, Animal)</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat4 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">'name4'</span>, <span class=\"string\">'color4'</span>)</span><br><span class=\"line\">alert(cat4.species) <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>拷贝继承</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Animal</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">Animal.species = <span class=\"string\">'动物'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extend2</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> C = Child.prototype</span><br><span class=\"line\">    <span class=\"keyword\">var</span> P = Parent.prototype</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> P) &#123;</span><br><span class=\"line\">        C[i] = P[i]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">extend2(Cat, Animal)</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat5 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">'name5'</span>, <span class=\"string\">'color5'</span>)</span><br><span class=\"line\">alert(cat5.species) <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"17-非构造函数的继承\"><a href=\"#17-非构造函数的继承\" class=\"headerlink\" title=\"17. 非构造函数的继承\"></a>17. 非构造函数的继承</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Chinese = &#123;</span><br><span class=\"line\">    nation: <span class=\"string\">'中国'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> Doctor = &#123;</span><br><span class=\"line\">    career: <span class=\"string\">'医生'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>浅拷贝</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shallowCopy</span> (<span class=\"params\">Parent</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> Child = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> Parent) &#123;</span><br><span class=\"line\">        Child[i] = Parent[i]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Child</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> doctor1 = shallowCopy(Chinese)</span><br><span class=\"line\">alert(doctor1.nation) <span class=\"comment\">// 中国</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>深拷贝</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deepCopy</span> (<span class=\"params\">Child, Parent</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> Child = Child || &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> Parent) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> Parent[i] == <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">            Child[i] = (Parent[i].constructor === <span class=\"built_in\">Array</span>) ? [] : &#123;&#125;</span><br><span class=\"line\">            deepCopy(Child[i], Parent[i])</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            Child[i] = Parent[i]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Child</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> doctor2 = deepCopy(Doctor, Chinese)</span><br><span class=\"line\">alert(doctor.nation) <span class=\"comment\">// 中国</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"18-参考链接\"><a href=\"#18-参考链接\" class=\"headerlink\" title=\"18. 参考链接\"></a>18. <a href=\"http://www.ruanyifeng.com/blog/2010/05/object-oriented_javascript_inheritance.html\" target=\"_blank\" rel=\"noopener\">参考链接</a></h3>","site":{"data":{}},"excerpt":"<h3 id=\"1-setTimeout中方法体添加引号与不添加引号的区别\"><a href=\"#1-setTimeout中方法体添加引号与不添加引号的区别\" class=\"headerlink\" title=\"1. setTimeout中方法体添加引号与不添加引号的区别\"></a>1. setTimeout中方法体添加引号与不添加引号的区别</h3><blockquote>\n<p><code>添加引号</code>的情况，调用的函数是<code>全局范围</code>的。<code>未添加引号</code>的情况，调用的是<code>局部范围</code>的。</p>\n</blockquote>","more":"<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> testFn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.info(<span class=\"string\">'hello from global'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> testFn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.info(<span class=\"string\">'hello fron inner'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    setTimeout(<span class=\"string\">'testFn()'</span>, <span class=\"number\">1000</span>)  <span class=\"comment\">// hello form global</span></span><br><span class=\"line\">    setTimeout(testFn, <span class=\"number\">1000</span>)  <span class=\"comment\">// hello from inner</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 在fn()函数内部没有定义testFn的时候，会向上寻找testFn，这里找到了全局函数，执行效果：</span></span><br><span class=\"line\">    setTimeout(testFn, <span class=\"number\">1000</span>)  <span class=\"comment\">// hello from global</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">fn()</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-AMD-CMD规范-common-js\"><a href=\"#2-AMD-CMD规范-common-js\" class=\"headerlink\" title=\"2. AMD/CMD规范 common.js\"></a>2. AMD/CMD规范 common.js</h3><p><code>common.js</code> 运行在<code>服务器端</code>，因为模块就在磁盘上，所以加载时间几乎可以忽略不计，属于同步加载。 [典型代表 <code>node.js</code>]<br><code>AMD</code>与<code>CMD</code>都属于异步加载，运行在<code>浏览器端</code>。<br><code>AMD</code> 推崇依赖前置，定义模块的时候就需要申明需要依赖的模块 [典型代表 <code>require.js</code>]<br><code>CMD</code> 推崇依赖就近，需要用到的时候才去require相关模块 [典型代表 <code>sea.js</code>]</p>\n<h3 id=\"3-stopPropagation-以及-stopImmediatePropagation\"><a href=\"#3-stopPropagation-以及-stopImmediatePropagation\" class=\"headerlink\" title=\"3. stopPropagation() 以及 stopImmediatePropagation()\"></a>3. stopPropagation() 以及 stopImmediatePropagation()</h3><p><code>stopImmediatePropagation</code> 用于阻止冒泡，在执行完当前元素上的事件处理程序之后，停止当前元素以及后续元素的事件处理程序</p>\n<p><code>stopPropagation</code> 同样也是用于阻止冒泡，在执行完绑定到当前元素上的所有事件处理程序之后，停止后续元素的事件处理程序</p>\n<p>同一个元素用<code>on</code>绑定多次同样事件时（例如click），最后一次会覆盖之前的事件，不会执行前面。而用<code>addEventListener</code>绑定多次同样事件时，都会执行。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"large\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 150px; height: 150px; background: orange\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"middle\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 100px; height: 100px; background: cadetblue\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"small\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 50px; height:50px; background: coral\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> large = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'large'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">var</span> middle = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'middle'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">var</span> small = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'small'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    large.addEventListener(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"string\">'large div is clicked'</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    middle.addEventListener(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"string\">'middle div is clicked'</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 第一种情况： 点击small时，会依次弹出三个窗口，这是因为向上冒泡产生的</span></span><br><span class=\"line\">    small.addEventListener(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">     alert(<span class=\"string\">'small div is clicked'</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 第二种情况： 点击small时，会弹出四个窗口</span></span><br><span class=\"line\">    <span class=\"comment\">// small.addEventListener('click', function()&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//  alert('small-1 is clicked')</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\">    <span class=\"comment\">// small.addEventListener('click', function()&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//  alert('small-2 is clicked')</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 第三种情况，添加stopPropagation： 点击small时，会弹出两个窗口</span></span><br><span class=\"line\">    <span class=\"comment\">// small-1 is clicked    small-2 is clicked</span></span><br><span class=\"line\">    <span class=\"comment\">// small.addEventListener('click', function(event)&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//  alert('small-1 is clicked')</span></span><br><span class=\"line\">    <span class=\"comment\">//  event.stopPropagation()</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\">    <span class=\"comment\">// small.addEventListener('click', function()&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//  alert('small-2 is clicked')</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 第四种情况，添加stopImmediatePropagation： 点击small时，会弹出一个窗口</span></span><br><span class=\"line\">    <span class=\"comment\">// small-1 is clicked</span></span><br><span class=\"line\">    <span class=\"comment\">// 能够很明显看到与stopPropagation的区别，调用stopImmediatePropagation之后，第二个定义的click事件也被取消而不被执行了。</span></span><br><span class=\"line\">    <span class=\"comment\">// small.addEventListener('click', function(event)&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     alert('small-1 is clicked')</span></span><br><span class=\"line\">    <span class=\"comment\">//     event.stopImmediatePropagation()</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\">    <span class=\"comment\">// small.addEventListener('click', function()&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     alert('small-2 is clicked')</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\">&#125;)()</span><br></pre></td></tr></table></figure>\n<div id=\"large\" style=\"box-sizing: border-box; width: 150px; height: 150px; background: orange; cursor: pointer;\"><!-- \n    --><div id=\"middle\" style=\"box-sizing: border-box; width: 100px; height: 100px; background: cadetblue\"><!-- \n        --><div id=\"small\" style=\"box-sizing: border-box; width: 50px; height:50px; background: coral\"></div><!-- \n    --></div><br></div>\n\n<script>\n    (function(){\n        var large = document.getElementById('large')\n        var middle = document.getElementById('middle')\n        var small = document.getElementById('small')\n\n        large.addEventListener('click', function(){\n            alert('large div is clicked')\n        })\n        middle.addEventListener('click', function(){\n            alert('middle div is clicked')\n        })\n\n        // 第一种情况： 点击small时，会依次弹出三个窗口，这是因为向上冒泡产生的\n        small.addEventListener('click', function(){\n        alert('small div is clicked')\n        })\n\n        // 第二种情况： 点击small时，会弹出四个窗口\n        // small.addEventListener('click', function(){\n        //  alert('small-1 is clicked')\n        // })\n        // small.addEventListener('click', function(){\n        //  alert('small-2 is clicked')\n        // })\n\n        // 第三种情况，添加stopPropagation： 点击small时，会弹出两个窗口\n        // small-1 is clicked    small-2 is clicked\n        // small.addEventListener('click', function(event){\n        //  alert('small-1 is clicked')\n        //  event.stopPropagation()\n        // })\n        // small.addEventListener('click', function(){\n        //  alert('small-2 is clicked')\n        // })\n\n        // 第四种情况，添加stopImmediatePropagation： 点击small时，会弹出一个窗口\n        // small-1 is clicked\n        // 能够很明显看到与stopPropagation的区别，调用stopImmediatePropagation之后，第二个定义的click事件也被取消而不被执行了。\n        // small.addEventListener('click', function(event){\n        //     alert('small-1 is clicked')\n        //     event.stopImmediatePropagation()\n        // })\n        // small.addEventListener('click', function(){\n        //     alert('small-2 is clicked')\n        // })\n    })()\n</script>\n\n<h3 id=\"4-js事件中的三个阶段\"><a href=\"#4-js事件中的三个阶段\" class=\"headerlink\" title=\"4. js事件中的三个阶段\"></a>4. js事件中的三个阶段</h3><p>三个阶段分别为<code>捕获阶段</code> <code>目标阶段</code> <code>冒泡阶段</code><br>element.addEventListener(type, fn[, useCapture])<br>useCapture - 指定事件句柄在捕获阶段或者冒泡阶段执行， 默认false(事件句柄在冒泡阶段执行)，设置为true(事件句柄在捕获阶段执行)。</p>\n<ul>\n<li>捕获阶段</li>\n<li>目标阶段</li>\n<li>冒泡阶段</li>\n</ul>\n<h3 id=\"5-常见的前端性能优化手段\"><a href=\"#5-常见的前端性能优化手段\" class=\"headerlink\" title=\"5. 常见的前端性能优化手段\"></a>5. 常见的前端性能优化手段</h3><ul>\n<li>css sprites（雪碧图）</li>\n<li>避免使用css表达式</li>\n<li>css样式表放在页面顶部，脚本放在页面底部</li>\n<li>内联图片和脚本使用data:URL（base64编码）模式直接包含在页面中，无需进行http请求，缺点：ie不支持，图片太大不适用，使用base64会增加页面体积，浏览器不会缓存</li>\n<li>使用内容分发网络CDN</li>\n<li>开启GZIP压缩，启用负载均衡</li>\n<li>开启keep alive减少与服务器链接次数 缺点：使服务器负载增大，也更容易遭受攻击</li>\n<li>精简压缩代码 uglifyjs</li>\n<li>避免重定向 常见的301 302</li>\n<li>配置e-tags 和 expires头 使用缓存</li>\n<li>按需加载资源</li>\n</ul>\n<h3 id=\"6-parseInt-以及-parseFloat\"><a href=\"#6-parseInt-以及-parseFloat\" class=\"headerlink\" title=\"6. parseInt() 以及 parseFloat()\"></a>6. parseInt() 以及 parseFloat()</h3><blockquote>\n<p>parseInt(string[, radix])</p>\n</blockquote>\n<ul>\n<li>string如果以‘ox’或者’oX’开头，将以16进制进行解析</li>\n<li>radix 要解析的数字基数，介于2-36之间</li>\n<li>如果不给值或者为0，则按照基数为10来计算</li>\n<li>如果小于2或者大于36，则返回NaN</li>\n<li>开头和结尾的空格是允许的</li>\n<li>如果字符串的第一个字符不能转换成对应的数字，将返回NaN</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'0x12'</span>)  <span class=\"comment\">// 17</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'0x12'</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// 0  =&gt; parseInt('0', 2)</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'0x12'</span>, <span class=\"number\">10</span>)  <span class=\"comment\">// 0  =&gt; parseInt('0', 16)</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'8'</span>)  <span class=\"comment\">// =&gt; parseInt('8', 0) =&gt; parseInt('8', 10)  // 8</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'8'</span>, <span class=\"number\">1</span>)  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'8'</span>, <span class=\"number\">37</span>)  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'a23'</span>)  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'2a3'</span>)  <span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">' 23'</span>)  <span class=\"comment\">// 23</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">' 23 '</span>)  <span class=\"comment\">// 23</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">' 2 3 '</span>)  <span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'11'</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// 3</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"number\">11</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// 3</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'1100'</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// 12</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'21'</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// NaN 2超出了2进制最大值1，并且是第一个字符</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'12'</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// 1 2同样超出了2进制最大值1，但是第一个字符可以转换成二进制</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'66'</span>, <span class=\"number\">8</span>) <span class=\"comment\">// 6*8^1 + 6*8^0 = 48 + 6 = 54</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'12'</span>, <span class=\"number\">16</span>) <span class=\"comment\">// 1*16^1 + 2*16^0 = 16 + 2 = 18</span></span><br><span class=\"line\">[<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>].map(<span class=\"built_in\">parseInt</span>) <span class=\"comment\">//  [parseInt(0, 0), parseInt(1, 1), parseInt(2, 2), parseInt(3, 3)] =&gt; [0, NaN, NaN, NaN]</span></span><br></pre></td></tr></table></figure>\n<p>parseFloat()</p>\n<blockquote>\n<p>parseInt(string[, radix])  这里语法待修改</p>\n</blockquote>\n<ul>\n<li>开头和结尾的空格是允许的</li>\n<li>如果字符串的第一个字符不能转换成对应的数字，将返回NaN</li>\n<li>如果在解析过程中遇到了正负号（+ 或 -）、数字 (0-9)、小数点，或者科学记数法中的指数（e 或 E）以外的字符，则它会忽略该字符以及之后的所有字符</li>\n</ul>\n<h3 id=\"7-charAt-、charCodeAt-和-fromCharCode\"><a href=\"#7-charAt-、charCodeAt-和-fromCharCode\" class=\"headerlink\" title=\"7. charAt()、charCodeAt() 和 fromCharCode()\"></a>7. charAt()、charCodeAt() 和 fromCharCode()</h3><ul>\n<li><p>charAt()</p>\n<ul>\n<li>String.charAt(index)</li>\n<li>返回字符串中指定位置的字符, 索引值 index &lt; 0 或超出了范围则返回一个空字符串</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'abc'</span>.charAt(<span class=\"number\">1</span>)  <span class=\"comment\">// 'b'</span></span><br><span class=\"line\"><span class=\"string\">'abc'</span>.charAt(<span class=\"number\">-2</span>)  <span class=\"comment\">// ''</span></span><br><span class=\"line\"><span class=\"string\">'abc'</span>.charAt(<span class=\"number\">5</span>)  <span class=\"comment\">// ''</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>charCodeAt()</p>\n<ul>\n<li>String.charCodeAt(index)</li>\n<li>返回字符串中指定位置的字符的 unicode 数值 [0, 1114111]</li>\n<li>开头的 128 个 unicode 编码单元和 ASCII 字符编码一样</li>\n<li>索引值 index &lt; 0 或超出了范围则返回一个 NaN, 大于 255 的是中文</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'AabcdD'</span>.charCodeAt(<span class=\"number\">0</span>)  <span class=\"comment\">// 65</span></span><br><span class=\"line\"><span class=\"string\">'AabcdD'</span>.charCodeAt(<span class=\"number\">1</span>)  <span class=\"comment\">// 97</span></span><br><span class=\"line\"><span class=\"string\">'AabcdD'</span>.charCodeAt(<span class=\"number\">-1</span>)  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"string\">'AabcdD'</span>.charCodeAt(<span class=\"number\">8</span>)  <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"string\">'中国'</span>.charCodeAt(<span class=\"number\">1</span>)  <span class=\"comment\">// 22269</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>fromCharCode()</p>\n<ul>\n<li>String.fromCharCode(num1, num2, num3, …)</li>\n<li>根据指定的 unicode 编码中的序号值来返回字符串</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">String</span>.fromCharCode(<span class=\"number\">65</span>, <span class=\"number\">66</span>, <span class=\"number\">97</span>)  <span class=\"comment\">// 'ABa'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"8-原生ajax\"><a href=\"#8-原生ajax\" class=\"headerlink\" title=\"8. 原生ajax\"></a>8. 原生ajax</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\"><span class=\"comment\">//  请求方式  请求路径  是否异步发送请求</span></span><br><span class=\"line\">xhr.open(<span class=\"string\">'GET'</span>, <span class=\"string\">'http://www.jnathan.cn/jnathan/effect/authKit.js'</span>, <span class=\"literal\">true</span>)</span><br><span class=\"line\">xhr.send(<span class=\"string\">'hello world'</span>) </span><br><span class=\"line\"></span><br><span class=\"line\">xhr.onreadystatechange = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (xhr.readyState == <span class=\"number\">4</span> &amp;&amp; xhr.status == <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// alert(xhr.responseText)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"9-有一个长度为n的数组，假定全部为整数，其中有且仅有一个数出现了奇数次，其他的数字都出现偶数次，找出出现了奇数次的那个数字。\"><a href=\"#9-有一个长度为n的数组，假定全部为整数，其中有且仅有一个数出现了奇数次，其他的数字都出现偶数次，找出出现了奇数次的那个数字。\" class=\"headerlink\" title=\"9. 有一个长度为n的数组，假定全部为整数，其中有且仅有一个数出现了奇数次，其他的数字都出现偶数次，找出出现了奇数次的那个数字。\"></a>9. 有一个长度为n的数组，假定全部为整数，其中有且仅有一个数出现了奇数次，其他的数字都出现偶数次，找出出现了奇数次的那个数字。</h3><blockquote>\n<p>时间复杂度为O(n) 空间复杂度O(1)<br>利用了<code>n ^ n = 0</code>, <code>n ^ 0 = n</code>两个等式的原理。<br>循环对数组数字进行异或计算，即  <code>0 ^ arr[0] ^ arr[1] ^ ... ^ arr[n - 1]</code> ，异或计算满足交换律原则，如果数组元素出现了相同的情况，可以移动到一起先进行计算，如果出现了<code>偶数次</code>，其结果为  <code>0</code>，出现了奇数次的数其结果为该数字，所以表达式最后得出来的结果即为数组所有<code>出现了奇数次元素</code>的<code>异或操作</code>的结果。比如：[1,2,2,3,4,4]进行异或操作得到的结果是 <code>1 ^ 3 = 2</code> ，特殊情况下（只有一个数字出现了<code>奇数次</code>），那么最后的结果就是出现了<code>奇数次</code>的那个数字！！</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn7</span> (<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> oddTimesNumber = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">in</span> arr) &#123;</span><br><span class=\"line\">        oddTimesNumber = oddTimesNumber ^ arr[i]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> oddTimesNumber</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fn7([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">4</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>])  <span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"10-递归求1-10的和\"><a href=\"#10-递归求1-10的和\" class=\"headerlink\" title=\"10. 递归求1-10的和\"></a>10. 递归求1-10的和</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSum</span>(<span class=\"params\">nextArr, curSum = <span class=\"number\">0</span></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> sum = nextArr[<span class=\"number\">0</span>] + curSum</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nextArr.length == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sum</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> getSum(nextArr.slice(<span class=\"number\">1</span>), sum)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">getSum([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>,<span class=\"number\">7</span>,<span class=\"number\">8</span>,<span class=\"number\">9</span>,<span class=\"number\">10</span>])</span><br></pre></td></tr></table></figure>\n<h3 id=\"11-去除数组重复元素\"><a href=\"#11-去除数组重复元素\" class=\"headerlink\" title=\"11. 去除数组重复元素\"></a>11. 去除数组重复元素</h3><ul>\n<li>直接双层循环比较</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span> (<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> result = []</span><br><span class=\"line\">    <span class=\"keyword\">var</span> isRepeat</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        isRepeat = <span class=\"literal\">false</span>  <span class=\"comment\">// 默认不重复，进行push操作，当判断重复时不操作</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; result.length; j++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (arr[i] === result[j]) &#123;</span><br><span class=\"line\">                isRepeat = <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!isRepeat) &#123;</span><br><span class=\"line\">            result.push(arr[i])</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">unique([<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>])</span><br></pre></td></tr></table></figure>\n<ul>\n<li>利用<code>indexOf()</code>， 但是<code>indexOf</code>会一直循环到找到目标为止，浪费了时间</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span> (<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> result = []</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result.indexOf(arr[i]) === <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">            result.push(arr[i])</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">unique([<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>])</span><br></pre></td></tr></table></figure>\n<ul>\n<li>最快的方法 把已经出现过的元素通过下标的形式存入一个<code>Object</code>内。下标的引用的实现原理利用的是哈希算法，要比用<code>indexOf()</code>搜索数组快的多。由于多了一个<code>hash</code>表，占用的内存会更多，空间换时间做法</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span> (<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// hashObj为hash表，result为临时数组</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> hashObj = &#123;&#125;, result = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 如果hash表中没有当前项</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!hashObj[arr[i]]) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 存入hash表</span></span><br><span class=\"line\">            hashObj[arr[i]] = <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"comment\">// 把当前数组的当前项push到临时数组里面</span></span><br><span class=\"line\">            result.push(arr[i])</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>折衷方法 时间上比<code>indexOf</code>快，比<code>hash</code>表的方式要慢。先按照从小到大的顺序排序，然后比较相邻的两个值大小</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span> (<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">    arr.sort()</span><br><span class=\"line\">    <span class=\"keyword\">var</span> result = [arr[<span class=\"number\">0</span>]]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (arr[i] !== result[result.length - <span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">            result.push(arr[i])</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>es6</code>的<code>filter()</code>方法</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span> (<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> arr.filter( <span class=\"function\">(<span class=\"params\">value, index</span>) =&gt;</span> &#123; </span><br><span class=\"line\">        arr.indexOf(value) === index</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(arr.indexOf(value), index)</span><br><span class=\"line\">        <span class=\"comment\">// 0 0</span></span><br><span class=\"line\">        <span class=\"comment\">// 0 1</span></span><br><span class=\"line\">        <span class=\"comment\">// 2 2</span></span><br><span class=\"line\">        <span class=\"comment\">// 3 3</span></span><br><span class=\"line\">        <span class=\"comment\">// 4 4</span></span><br><span class=\"line\">        <span class=\"comment\">// 5 5</span></span><br><span class=\"line\">        <span class=\"comment\">// 2 6</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">unique([<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">2</span>])</span><br></pre></td></tr></table></figure>\n<h3 id=\"12-jquery-里面的-document-ready-function-和-window-onload-的区别\"><a href=\"#12-jquery-里面的-document-ready-function-和-window-onload-的区别\" class=\"headerlink\" title=\"12. jquery  里面的  $(document).ready(function(){})  和  window.onload  的区别\"></a>12. jquery  里面的  $(document).ready(function(){})  和  window.onload  的区别</h3><ul>\n<li><code>window.onload</code>需要等到页面中包括图片在内的元素全部加载完毕才能执行；<code>ready()</code>是DOM元素绘制结束之后就执行，不用等到加载完毕。</li>\n<li><code>window.onload</code>如果定义了多次，则只会执行一个，后者会覆盖前者； <code>ready()</code>可以同时编写多个，并且都会执行。</li>\n<li><code>window.onload</code>没有简化写法；<code>$(document).ready(function(){})</code>可以简化成<code>$(function(){})</code>。</li>\n<li>补充：<code>$(window).load(function(){})</code>和 <code>window.onload()</code>效果一致。</li>\n</ul>\n<h3 id=\"13-渐进增强与优雅降级\"><a href=\"#13-渐进增强与优雅降级\" class=\"headerlink\" title=\"13. 渐进增强与优雅降级\"></a>13. 渐进增强与优雅降级</h3><ul>\n<li>渐进增强 一开始就针对低版本浏览器进行构建页面，完成基本的功能，然后再对高级浏览器进行效果、交互的优化，达到更好的体验。</li>\n<li>优雅降级 一开始就构建站点的完整功能，然后针对浏览器进行测试和修复。比如一开始使用<code>CSS3</code>的特性构建了一个应用，然后逐步针对各大低级浏览器进行<code>hack</code>使其可以在低版本浏览器上正常浏览。</li>\n</ul>\n<h3 id=\"14-cookies、localStorage和sessionStorage的区别\"><a href=\"#14-cookies、localStorage和sessionStorage的区别\" class=\"headerlink\" title=\"14. cookies、localStorage和sessionStorage的区别\"></a>14. cookies、localStorage和sessionStorage的区别</h3><ul>\n<li>cookies存在于客户端，始终会在http请求中通过  Request Headers  Cookie头携带，即使当前请求不需要使用到cookie；大小一般在4KB，所以只适合保存很小的数据，比如会话标识；cookies在没有设置过期时间（expires）的时候，默认在关闭浏览器之后就会被清除，在有设置过期时间的时候，会一直持续到过期时间有效（即使关闭当前窗口或者关闭浏览器）。</li>\n<li>localStorage 和 sessionStorage不会发送数据到服务端，仅在本地保存；也有大小的限制，但一般在5M左右；localStorage一直有效，除非手动清除； sessionStorage只在浏览器关闭之前有效。</li>\n</ul>\n<p>另外： localStorage 和 cookies 在同源的浏览器窗口之间是共享的，sessionStorage不共享，因此至少有以下两种方法实现不同页面间的通信：</p>\n<ul>\n<li>利用localStorage</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// A页面</span></span><br><span class=\"line\">$(<span class=\"string\">'#btn'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    localStorage.setItem(<span class=\"string\">'name'</span>, <span class=\"string\">'Jnathan'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// B页面</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'storage'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(event.key + <span class=\"string\">'='</span> + event.newValue)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>利用cookie + setInterval()</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// A页面</span></span><br><span class=\"line\">$(<span class=\"string\">'#btn'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.cookie = <span class=\"string\">\"name=\"</span> + <span class=\"string\">'Jnathan'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// B页面</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getKey</span>(<span class=\"params\">key</span>) </span>&#123;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">JSON</span>.parse(<span class=\"string\">\"&#123;\\\"\"</span>+ <span class=\"built_in\">document</span>.cookie.replace(<span class=\"regexp\">/;\\s+/gim</span>,<span class=\"string\">\"\\\",\\\"\"</span>).replace(<span class=\"regexp\">/=/gim</span>, <span class=\"string\">\"\\\":\\\"\"</span>) +<span class=\"string\">\"\\\"&#125;\"</span>)[key];  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">setInterval(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'name:'</span>, getKey(<span class=\"string\">'name'</span>))</span><br><span class=\"line\">&#125;, <span class=\"number\">1000</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"15-new-操作符的四个步骤\"><a href=\"#15-new-操作符的四个步骤\" class=\"headerlink\" title=\"15. new 操作符的四个步骤\"></a>15. new 操作符的四个步骤</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Fn = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = <span class=\"keyword\">new</span> Fn()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>创建一个<code>空对象</code></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>设置<code>obj</code>的<code>原型</code>，将<code>obj</code>的<code>原型</code>指向<code>Fn</code>的<code>原型链</code></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">obj.__proto__ = Fn.prototype</span><br></pre></td></tr></table></figure>\n<ul>\n<li>将<code>Fn</code>中的<code>this</code>指向<code>obj</code>,并执行<code>Fn</code></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> result = Fn.call(obj)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>判断<code>Fn</code>的<code>返回值类型</code>。如果是<code>引用类型，则返回这个</code>引用类型的对象<code>；如果是</code>值类型<code>，则返回</code>obj`</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> result == <span class=\"string\">'object'</span>) &#123;  <span class=\"comment\">// 引用类型</span></span><br><span class=\"line\">    fn = result</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123; <span class=\"comment\">// 值类型</span></span><br><span class=\"line\">    fn = obj</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"16-构造函数实现继承的几种方式\"><a href=\"#16-构造函数实现继承的几种方式\" class=\"headerlink\" title=\"16. 构造函数实现继承的几种方式\"></a>16. 构造函数实现继承的几种方式</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Animal</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.species = <span class=\"string\">'动物'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Cat</span> (<span class=\"params\">name, color</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.color = color</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>使猫继承动物：</p>\n<ul>\n<li>call apply</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Cat</span> (<span class=\"params\">name, color</span>) </span>&#123;</span><br><span class=\"line\">    Animal.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.color = color</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">'name1'</span>, <span class=\"string\">'color1'</span>)</span><br><span class=\"line\">alert(cat1.species) <span class=\"comment\">//  动物</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>prototype（其一）</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Cat</span> (<span class=\"params\">name, color</span>) </span>&#123;</span><br><span class=\"line\">    Animal.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.color = color</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">'name1'</span>, <span class=\"string\">'color1'</span>)</span><br><span class=\"line\">alert(cat1.species) <span class=\"comment\">//  动物</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>prototype（其二）</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Animal</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">Animal.prototype.species = <span class=\"string\">'动物'</span></span><br><span class=\"line\"></span><br><span class=\"line\">Cat.prototype = Animal.prototype</span><br><span class=\"line\">Cat.prototype.constructor = Cat</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> cat3 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">'name3'</span>, <span class=\"string\">'color3'</span>)</span><br><span class=\"line\">alert(cat3.species) <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>利用空对象作为中介 上面那种方法的缺点：Cat.prototype和Animal.prototype现在指向了同一个对象，那么任何对Cat.prototype的修改，都会反映到Animal.prototype。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Fn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">Fn.prototype = Animal.prototype</span><br><span class=\"line\">Cat.prototype = <span class=\"keyword\">new</span> Fn()</span><br><span class=\"line\">Cat.prototype.construvtor = Cat</span><br></pre></td></tr></table></figure>\n<p>将其封装成一个函数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extend</span> (<span class=\"params\">Child, Parent</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> Fn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">    Fn.prototype = Parent.prototype</span><br><span class=\"line\">    Child.prototype = <span class=\"keyword\">new</span> Fn()</span><br><span class=\"line\">    Child.prototype.constructor = Child</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">extend(Cat, Animal)</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat4 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">'name4'</span>, <span class=\"string\">'color4'</span>)</span><br><span class=\"line\">alert(cat4.species) <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>拷贝继承</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Animal</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">Animal.species = <span class=\"string\">'动物'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extend2</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> C = Child.prototype</span><br><span class=\"line\">    <span class=\"keyword\">var</span> P = Parent.prototype</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> P) &#123;</span><br><span class=\"line\">        C[i] = P[i]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">extend2(Cat, Animal)</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat5 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">'name5'</span>, <span class=\"string\">'color5'</span>)</span><br><span class=\"line\">alert(cat5.species) <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"17-非构造函数的继承\"><a href=\"#17-非构造函数的继承\" class=\"headerlink\" title=\"17. 非构造函数的继承\"></a>17. 非构造函数的继承</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Chinese = &#123;</span><br><span class=\"line\">    nation: <span class=\"string\">'中国'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> Doctor = &#123;</span><br><span class=\"line\">    career: <span class=\"string\">'医生'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>浅拷贝</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shallowCopy</span> (<span class=\"params\">Parent</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> Child = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> Parent) &#123;</span><br><span class=\"line\">        Child[i] = Parent[i]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Child</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> doctor1 = shallowCopy(Chinese)</span><br><span class=\"line\">alert(doctor1.nation) <span class=\"comment\">// 中国</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>深拷贝</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deepCopy</span> (<span class=\"params\">Child, Parent</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> Child = Child || &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> Parent) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> Parent[i] == <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">            Child[i] = (Parent[i].constructor === <span class=\"built_in\">Array</span>) ? [] : &#123;&#125;</span><br><span class=\"line\">            deepCopy(Child[i], Parent[i])</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            Child[i] = Parent[i]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Child</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> doctor2 = deepCopy(Doctor, Chinese)</span><br><span class=\"line\">alert(doctor.nation) <span class=\"comment\">// 中国</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"18-参考链接\"><a href=\"#18-参考链接\" class=\"headerlink\" title=\"18. 参考链接\"></a>18. <a href=\"http://www.ruanyifeng.com/blog/2010/05/object-oriented_javascript_inheritance.html\" target=\"_blank\" rel=\"noopener\">参考链接</a></h3>"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"ckntq34cx0001u66tinpiug2v","tag_id":"ckntq34d00003u66tx5yjkk4m","_id":"ckntq34d50008u66tt5j1baku"},{"post_id":"ckntq34cz0002u66te38d4cey","tag_id":"ckntq34d50007u66tnfz9lz6s","_id":"ckntq34dg000gu66tg0vpe757"},{"post_id":"ckntq34cz0002u66te38d4cey","tag_id":"ckntq34da000bu66tu4fouurh","_id":"ckntq34dh000iu66taq09b1dj"},{"post_id":"ckntq34d20004u66tevozrzp5","tag_id":"ckntq34d00003u66tx5yjkk4m","_id":"ckntq34dk000ou66tt1ox5bv0"},{"post_id":"ckntq34d20004u66tevozrzp5","tag_id":"ckntq34dh000ju66tbkx60219","_id":"ckntq34dl000qu66tei1ioohx"},{"post_id":"ckntq34d40006u66t6wns13ul","tag_id":"ckntq34dj000mu66tl8ul6gsk","_id":"ckntq34do000xu66tp4saius5"},{"post_id":"ckntq34d40006u66t6wns13ul","tag_id":"ckntq34dm000su66t0tvo2edi","_id":"ckntq34do000yu66t47nbvma7"},{"post_id":"ckntq34d40006u66t6wns13ul","tag_id":"ckntq34dn000vu66t7g8mb2jn","_id":"ckntq34dp0010u66tmrkrdghp"},{"post_id":"ckntq34d8000au66t07rdo4op","tag_id":"ckntq34do000wu66ty2hoqnar","_id":"ckntq34dp0011u66t9hdxg9z7"},{"post_id":"ckntq34dc000du66teuu3h45o","tag_id":"ckntq34dp000zu66tfsgq7w8f","_id":"ckntq34dp0013u66tyo9hytce"},{"post_id":"ckntq34df000fu66tsd4u122v","tag_id":"ckntq34dp0012u66td16041rs","_id":"ckntq34dq0015u66tz5a7vfk4"},{"post_id":"ckntq34dg000hu66tququtn9r","tag_id":"ckntq34dp0014u66trnecjvvs","_id":"ckntq34dq0019u66thbrjf7ev"},{"post_id":"ckntq34dg000hu66tququtn9r","tag_id":"ckntq34dq0016u66tyrof3bsy","_id":"ckntq34dr001au66teh7xsps8"},{"post_id":"ckntq34dg000hu66tququtn9r","tag_id":"ckntq34dq0017u66tbt5ofly2","_id":"ckntq34dr001cu66tlddbp3tp"},{"post_id":"ckntq34di000lu66tgyj8yyx7","tag_id":"ckntq34dj000mu66tl8ul6gsk","_id":"ckntq34dr001du66tagn4qp0y"},{"post_id":"ckntq34dj000nu66t34824unz","tag_id":"ckntq34dr001bu66t32m89hei","_id":"ckntq34dr001gu66tirv6dje6"},{"post_id":"ckntq34dj000nu66t34824unz","tag_id":"ckntq34dr001eu66tnmbnxezt","_id":"ckntq34dr001hu66tkwezpuqi"},{"post_id":"ckntq34dk000pu66ty2y07tq2","tag_id":"ckntq34dr001fu66toa21mi47","_id":"ckntq34dt001ku66tfritozxe"},{"post_id":"ckntq34dk000pu66ty2y07tq2","tag_id":"ckntq34ds001iu66t3p9v0c0w","_id":"ckntq34dt001lu66tt8b7tor4"},{"post_id":"ckntq34dl000ru66te4l2ao5r","tag_id":"ckntq34ds001ju66tmxry33mi","_id":"ckntq34dt001nu66tdh4nl97i"},{"post_id":"ckntq34dm000tu66tyllfl2eu","tag_id":"ckntq34dt001mu66tfltbi4uo","_id":"ckntq34du001pu66to6qabztd"},{"post_id":"ckntq34dm000tu66tyllfl2eu","tag_id":"ckntq34dt001ou66tmegu7beo","_id":"ckntq34du001qu66t8qpjh48r"},{"post_id":"ckntq34dx001ru66tk8d13hg2","tag_id":"ckntq34dz001tu66tntlgl4u0","_id":"ckntq34e0001wu66tmt31p3ia"},{"post_id":"ckntq34dx001ru66tk8d13hg2","tag_id":"ckntq34e0001uu66tq4ahoxw4","_id":"ckntq34e0001xu66txlypvsw5"},{"post_id":"ckntq34dy001su66tkcboqpga","tag_id":"ckntq34e0001vu66tmpp1kal8","_id":"ckntq34e10021u66th6lhk44t"},{"post_id":"ckntq34dy001su66tkcboqpga","tag_id":"ckntq34e0001yu66tzf2wthh5","_id":"ckntq34e10022u66t0177f26h"},{"post_id":"ckntq34dy001su66tkcboqpga","tag_id":"ckntq34e1001zu66tz2h3fzda","_id":"ckntq34e10023u66t6xhtdumx"},{"post_id":"ckntq34dy001su66tkcboqpga","tag_id":"ckntq34e10020u66tv23evmw7","_id":"ckntq34e10024u66tcrewvbty"},{"post_id":"ckntq34ec0025u66ttcwx35y0","tag_id":"ckntq34ed0026u66t8jzbdsvn","_id":"ckntq34ee0027u66tjp6iaz5e"}],"Tag":[{"name":"css","_id":"ckntq34d00003u66tx5yjkk4m"},{"name":"数据类型","_id":"ckntq34d50007u66tnfz9lz6s"},{"name":"类型转换","_id":"ckntq34da000bu66tu4fouurh"},{"name":"border","_id":"ckntq34dh000ju66tbkx60219"},{"name":"vue","_id":"ckntq34dj000mu66tl8ul6gsk"},{"name":"自定义指令","_id":"ckntq34dm000su66t0tvo2edi"},{"name":"lazy","_id":"ckntq34dn000vu66t7g8mb2jn"},{"name":"diary","_id":"ckntq34do000wu66ty2hoqnar"},{"name":"面试","_id":"ckntq34dp000zu66tfsgq7w8f"},{"name":"前端优化","_id":"ckntq34dp0012u66td16041rs"},{"name":"ellipsis","_id":"ckntq34dp0014u66trnecjvvs"},{"name":"换行","_id":"ckntq34dq0016u66tyrof3bsy"},{"name":"省略号","_id":"ckntq34dq0017u66tbt5ofly2"},{"name":"this","_id":"ckntq34dr001bu66t32m89hei"},{"name":"作用域","_id":"ckntq34dr001eu66tnmbnxezt"},{"name":"worker","_id":"ckntq34dr001fu66toa21mi47"},{"name":"web-worker","_id":"ckntq34ds001iu66t3p9v0c0w"},{"name":"webpack","_id":"ckntq34ds001ju66tmxry33mi"},{"name":"企微","_id":"ckntq34dt001mu66tfltbi4uo"},{"name":"超链接","_id":"ckntq34dt001ou66tmegu7beo"},{"name":"defineProperty","_id":"ckntq34dz001tu66tntlgl4u0"},{"name":"proxy","_id":"ckntq34e0001uu66tq4ahoxw4"},{"name":"==","_id":"ckntq34e0001vu66tmpp1kal8"},{"name":"===","_id":"ckntq34e0001yu66tzf2wthh5"},{"name":"操作符","_id":"ckntq34e1001zu66tz2h3fzda"},{"name":"转换","_id":"ckntq34e10020u66tv23evmw7"},{"name":"dairy","_id":"ckntq34ed0026u66t8jzbdsvn"}]}}